/*
 * Copyright 2013 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// This file is automatically generated

(function(a){function b(a,d,b,r,s){void 0===r&&e("Missing required offset argument");(0>r||r+b>a.byteLength)&&e("Invalid index: "+r);if(1===b||!!s===f){if(0===(a.byteOffset+r)%b)return(new d(a.buffer,a.byteOffset+r,1))[0];for(s=0;s<b;s++)g[s]=a._bytes[r+s];return(new d(g.buffer))[0]}for(s=0;s<b;s++)g[b-s-1]=a._bytes[r+s];return(new d(g.buffer))[0]}function d(a,d,b,r,s,u){void 0===r&&e("Missing required offset argument");void 0===s&&e("Missing required value argument");(0>r||r+b>a.byteLength)&&e("Invalid index: "+
r);if(1===b||!!u===f)if(0===(a.byteOffset+r)%b)(new d(a.buffer,a.byteOffset+r,1))[0]=s;else{(new d(g.buffer))[0]=s;for(d=0;d<b;d++)a._bytes[d+r]=g[d]}else{(new d(g.buffer))[0]=s;for(d=0;d<b;d++)a._bytes[r+d]=g[b-1-d]}}function e(a){throw Error(a);}if(!a.DataView){a.ArrayBuffer||e("ArrayBuffer not supported");Object.defineProperties||e("This module requires ECMAScript 5");var f=1===(new Int8Array((new Int32Array([1])).buffer))[0],g=new Uint8Array(8);a.DataView=function(a,d,b){a instanceof ArrayBuffer||
e("Bad ArrayBuffer");d=d||0;b=b||a.byteLength-d;(0>d||0>b||d+b>a.byteLength)&&e("Illegal offset and/or length");Object.defineProperties(this,{buffer:{value:a,enumerable:!1,writable:!1,configurable:!1},byteOffset:{value:d,enumerable:!1,writable:!1,configurable:!1},byteLength:{value:b,enumerable:!1,writable:!1,configurable:!1},_bytes:{value:new Uint8Array(a,d,b),enumerable:!1,writable:!1,configurable:!1}})};a.DataView.prototype={constructor:DataView,getInt8:function(a){return b(this,Int8Array,1,a)},
getUint8:function(a){return b(this,Uint8Array,1,a)},getInt16:function(a,d){return b(this,Int16Array,2,a,d)},getUint16:function(a,d){return b(this,Uint16Array,2,a,d)},getInt32:function(a,d){return b(this,Int32Array,4,a,d)},getUint32:function(a,d){return b(this,Uint32Array,4,a,d)},getFloat32:function(a,d){return b(this,Float32Array,4,a,d)},getFloat64:function(a,d){return b(this,Float64Array,8,a,d)},setInt8:function(a,b){d(this,Int8Array,1,a,b)},setUint8:function(a,b){d(this,Uint8Array,1,a,b)},setInt16:function(a,
b,e){d(this,Int16Array,2,a,b,e)},setUint16:function(a,b,e){d(this,Uint16Array,2,a,b,e)},setInt32:function(a,b,e){d(this,Int32Array,4,a,b,e)},setUint32:function(a,b,e){d(this,Uint32Array,4,a,b,e)},setFloat32:function(a,b,e){d(this,Float32Array,4,a,b,e)},setFloat64:function(a,b,e){d(this,Float64Array,8,a,b,e)}}}})(this);
var ByteArray=ByteArray||function(){function a(d){if(d instanceof ByteArray)return d;(d=d||this.symbol&&this.symbol.data)?(this.a=new ArrayBuffer(d.length),this.length=d.length,(new Uint8Array(this.a)).set(d)):(this.a=new ArrayBuffer(a.INITIAL_SIZE),this.length=0);this.position=0;this.cacheViews();this.le=this.nativele=1===(new Int8Array((new Int32Array([])).buffer))[0];this.objectEncoding=a.DEFAULT_OBJECT_ENCODING;this.bitLength=this.bitBuffer=0}function b(){runtime.throwErrorFromVM("flash.errors.EOFError",
"End of file was encountered.")}function d(){var a=Errors.ParamRangeError;runtime.throwErrorFromVM("RangeError",getErrorMessage(a.code),a.code)}function e(){var a=Errors.CompressedDataError;runtime.throwErrorFromVM("CompressedDataError",getErrorMessage(a.code),a.code)}function f(a,d,e){a.position+e>a.length&&b();d=a.view[d](a.position,a.le);a.position+=e;return d}function g(a,d,b,e){b=a.position+b;a.ensureCapacity(b);a.view[d](a.position,e,a.le);a.position=b;b>a.length&&(a.length=b)}function l(a){for(var d=
Math.max.apply(null,a),b=a.length,e=1<<d,f=new Uint32Array(e),g=0,l=1,m=2;l<=d;g<<=1,++l,m<<=1)for(var r=0;r<b;++r)if(a[r]===l){for(var p=0,v=0;v<l;++v)p=2*p+(g>>v&1);for(v=p;v<e;v+=m)f[v]=l<<16|r;++g}return{codes:f,maxBits:d}}function m(a,d){for(var b=a.bitBuffer,e=a.bitLength;d>e;)b|=a.readUnsignedByte()<<e,e+=8;a.bitBuffer=b>>>d;a.bitLength=e-d;return b&(1<<d)-1}function p(a,d,b,e){for(var f;256!==(f=r(a,b));)if(256>f)d.writeUnsignedByte(f);else{f-=257;var g=E[f]+m(a,C[f]);f=r(a,e);f=z[f]+m(a,
A[f]);d.writeBytes(d,d.position-f,g)}}function r(a,d){for(var b=a.bitBuffer,f=a.bitLength,g=d.maxBits;g>f;)b|=a.readUnsignedByte()<<f,f+=8;var g=d.codes[b&(1<<g)-1],l=g>>16;l||e();a.bitBuffer=b>>>l;a.bitLength=f-l;return g&65535}function s(a,d,b){for(var e=1,f=0;d<b;++d)e=(e+(a[d]&255))%65521,f=(f+e)%65521;return f<<16|e}a.INITIAL_SIZE=128;a.DEFAULT_OBJECT_ENCODING=3;var u=a.prototype;u.cacheViews=function(){var a=this.a;this.int8v=new Int8Array(a);this.uint8v=new Uint8Array(a);this.view=new DataView(a)};
u.getBytes=function(){return new Uint8Array(this.a,0,this.length)};u.ensureCapacity=function(a){var d=this.a;if(d.byteLength<a){for(d=d.byteLength;d<a;)d*=2;a=new ArrayBuffer(d);d=this.int8v;this.a=a;this.cacheViews();this.int8v.set(d)}};u.clear=function(){this.position=this.length=0};u.readBoolean=function(){this.position+1>this.length&&b();return 0!==this.int8v[this.position++]};u.readByte=function(){this.position+1>this.length&&b();return this.int8v[this.position++]};u.readUnsignedByte=function(){this.position+
1>this.length&&b();return this.uint8v[this.position++]};u.readBytes=function(a,d,e){var f=this.position;d||(d=0);e||(e=this.length-f);f+e>this.length&&b();a.length<d+e&&(a.ensureCapacity(d+e),a.length=d+e);a.int8v.set(new Int8Array(this.a,f,e),d);this.position+=e};u.writeBoolean=function(a){var d=this.position+1;this.ensureCapacity(d);this.int8v[this.position++]=a?1:0;d>this.length&&(this.length=d)};u.writeByte=function(a){var d=this.position+1;this.ensureCapacity(d);this.int8v[this.position++]=a;
d>this.length&&(this.length=d)};u.writeUnsignedByte=function(a){var d=this.position+1;this.ensureCapacity(d);this.uint8v[this.position++]=a;d>this.length&&(this.length=d)};u.writeRawBytes=function(a){var d=this.position+a.length;this.ensureCapacity(d);this.int8v.set(a,this.position);this.position=d;d>this.length&&(this.length=d)};u.readRawBytes=function(){return new Int8Array(this.a,0,this.length)};u.writeBytes=function(a,b,e){2>arguments.length&&(b=0);3>arguments.length&&(e=0);b!==clamp(b,0,a.length)&&
d();var f=b+e;f!==clamp(f,0,a.length)&&d();0===e&&(e=a.length-b);this.writeRawBytes(new Int8Array(a.a,b,e))};u.readDouble=function(){return f(this,"getFloat64",8)};u.readFloat=function(){return f(this,"getFloat32",4)};u.readInt=function(){return f(this,"getInt32",4)};u.readShort=function(){return f(this,"getInt16",2)};u.readUnsignedInt=function(){return f(this,"getUint32",4)};u.readUnsignedShort=function(){return f(this,"getUint16",2)};u.writeDouble=function(a){g(this,"setFloat64",8,a)};u.writeFloat=
function(a){g(this,"setFloat32",4,a)};u.writeInt=function(a){g(this,"setInt32",4,a)};u.writeShort=function(a){g(this,"setInt16",2,a)};u.writeUnsignedInt=function(a){g(this,"setUint32",4,a)};u.writeUnsignedShort=function(a){g(this,"setUint16",2,a)};for(var w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=[],A=[],v=0,B=0,y=1;30>v;++v)z[v]=y,y+=1<<(A[v]=~~((B+=2<v?1:0)/2));for(var D=[],v=0;32>v;++v)D[v]=5;for(var F=l(D),E=[],C=[],B=v=0,y=3;29>v;++v)E[v]=y-(28==v?1:0),y+=1<<(C[v]=~~((B+=4<v?1:0)/
4%6));for(v=0;288>v;++v)D[v]=144>v||279<v?8:256>v?9:7;var K=l(D);u.compress=function(a){this.position=0;var d=new ByteArray;switch(a){case "zlib":d.writeUnsignedByte(120),d.writeUnsignedByte(156);case "deflate":d.le=!0;var b=this.length;for(d.ensureCapacity(b+5*Math.ceil(b/65535)+4);65535<b;)d.writeUnsignedByte(0),d.writeUnsignedShort(65535),d.writeUnsignedShort(0),d.writeBytes(this,this.position,65535),this.position+=65535,b-=65535;d.writeUnsignedByte(0);d.writeUnsignedShort(b);d.writeUnsignedShort(~b&
65535);d.writeBytes(this,this.position,b);"zlib"===a&&d.writeUnsignedInt(s(this.uint8v,0,this.length));break;default:return}this.ensureCapacity(d.uint8v.length);this.uint8v.set(d.uint8v);this.length=d.length;this.position=0};u.uncompress=function(a){var d=new ByteArray;switch(a){case "zlib":a=this.readUnsignedShort(),(2048!==(a&3840)||0!==a%31||a&32)&&e();case "deflate":a=this.le;for(this.le=!0;this.position<this.length-6;){var b=d;switch(m(this,3)>>1){case 0:this.bitBuffer=this.bitLength=0;var f=
this.readUnsignedShort();(~this.readUnsignedShort()&65535)!==f&&e();b.writeBytes(this,this.position,f);this.position+=f;break;case 1:p(this,b,K,F);break;case 2:for(var f=[],g=m(this,5)+257,v=m(this,5)+1,s=g+v,A=m(this,4)+4,u=0;19>u;++u)f[w[u]]=u<A?m(sbytes,sstream,3):0;for(var A=l(f),f=[],z=u=0;u<s;){var E=1,y=r(this,A);switch(y){case 16:E=m(this,2)+3;y=z;break;case 17:E=m(this,3)+3;y=0;break;case 18:E=m(this,7)+11;y=0;break;default:z=y}for(;E--;)f[u++]=y}g=l(f.splice(g,v));f=l(f);p(this,b,f,g);break;
default:fail("unknown block type","inflate")}}this.le=a;break;default:return}this.ensureCapacity(d.uint8v.length);this.uint8v.set(d.uint8v);this.length=d.length;this.position=0};return a}();
(function(a){var b=function(){this.args=[]},d=function(a,d,b,e){this.shortName=a;this.longName=d;this.type=b;e=e||{};this.positional=e.positional;this.parseFn=e.parse;this.value=e.defaultValue};d.prototype.parse=function(a){"boolean"===this.type?(!0,this.value=a):"number"===this.type?(!0,this.value=parseInt(a,10)):this.value=a;this.parseFn&&this.parseFn(this.value)};b.prototype.addArgument=function(a,b,e,f){a=new d(a,b,e,f);this.args.push(a);return a};b.prototype.addBoundOption=function(a){this.args.push(new d(a.shortName,
a.longName,a.type,{parse:function(d){a.value=d}}))};b.prototype.addBoundOptionSet=function(a){var d=this;a.options.forEach(function(a){a instanceof e?d.addBoundOptionSet(a):(!0,d.addBoundOption(a))})};b.prototype.getUsage=function(){var a="";this.args.forEach(function(d){a=d.positional?a+d.longName:a+("[-"+d.shortName+"|--"+d.longName+("boolean"===d.type?"":" "+d.type[0].toUpperCase())+"]");a+=" "});return a};b.prototype.parse=function(a){var d={},b=[];this.args.forEach(function(a){a.positional?b.push(a):
(d["-"+a.shortName]=a,d["--"+a.longName]=a)});for(var e=[];a.length;){var f=a.shift(),s=null,u=f;if("--"==f){e=e.concat(a);break}else if("-"==f.slice(0,1)||"--"==f.slice(0,2)){s=d[f];!0;if(!s)continue;"boolean"!==s.type?(u=a.shift(),!0):u=!0}else b.length?s=b.shift():e.push(u);s&&s.parse(u)}!0;return e};var e,f=function(a){this.name=a;this.options=[]};f.prototype.register=function(a){this.options.push(a);return a};f.prototype.trace=function(a){a.enter(this.name+" {");this.options.forEach(function(d){d.trace(a)});
a.leave("}")};e=f;f=function(a,d,b,e,f){this.longName=d;this.shortName=a;this.type=b;this.value=this.defaultValue=e;this.description=f};f.prototype.parse=function(a){this.value=a};f.prototype.trace=function(a){a.writeLn(("-"+this.shortName+"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")};a.Option=f;a.OptionSet=e;a.ArgumentParser=b})("undefined"===typeof exports?options={}:exports);
var Option=options.Option,OptionSet=options.OptionSet,coreOptions=new OptionSet("Core Options"),Timeline=function(){function a(a){this.index=this.start=this.depth=0;this.marks=new CircularBuffer(Int32Array);this.times=new CircularBuffer(Float64Array);this.frameRate=12;this.maxFrameTime=2E3/this.frameRate;this.refreshFrequency=10;this.count=this.refreshCounter=0;this.kinds=createEmptyObject();this.kindCount=0;this.canvas=a;this.context=a.getContext("2d",{original:!0});this.fillStyles=["rgb(85, 152, 213)",
"#bfd8a7","#d906d7"];window.addEventListener("resize",this.resizeHandler.bind(this),!1);this.resizeHandler()}a.prototype.setFrameRate=function(a){this.frameRate=a;this.maxFrameTime=2E3/a};a.prototype.refreshEvery=function(a){this.refreshFrequency=a;this.refreshCounter=0};a.prototype.registerKind=function(a,d){void 0===this.kinds[a]?(this.fillStyles[this.kindCount]=d,this.kinds[a]=this.kindCount++):this.fillStyles[this.kinds[a]]=d};a.prototype.getKind=function(a){void 0===this.kinds[a]&&(this.kinds[a]=
this.kindCount++,this.kindCount>this.fillStyles.length&&this.fillStyles.push(randomStyle()));return this.kinds[a]};a.prototype.enter=function(a){this.depth++;this.marks.write(-1091633152|this.getKind(a));this.times.write(performance.now())};a.prototype.leave=function(a){this.marks.write(-559087616|this.getKind(a));this.times.write(performance.now());this.depth--;0===this.depth&&(this.count++,++this.refreshCounter==this.refreshFrequency&&(this.refreshCounter=0,this.paint()))};a.prototype.gatherFrames=
function(a){var d=[],e=[],f=this.times;a++;this.marks.forEachInReverse(function(g,l){var m=f.get(l);if(-1091633152===(g&4294901760)){var p=d.pop();p.startTime=m;d.length?(m=d.top(),m.children?m.children.push(p):m.children=[p]):(e.length&&!e[0].total&&(e[0].total=e[0].startTime-m),e.unshift(p))}else if(-559087616===(g&4294901760)){if(e.length>a)return!0;d.push({kind:g&65535,endTime:m})}});return e};a.prototype.resizeHandler=function(){var a=this.canvas.parentElement;this.cw=a.offsetWidth;this.ch=a.offsetHeight-
1;var a=window.devicePixelRatio||1,d=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1;a!==d?(a/=d,this.canvas.width=this.cw*a,this.canvas.height=this.ch*a,this.canvas.style.width=this.cw+"px",this.canvas.style.height=this.ch+"px",this.context.scale(a,a)):(this.canvas.width=this.cw,this.canvas.height=this.ch);this.context.font='10px Consolas, "Liberation Mono", Courier, monospace'};
a.prototype.paint=function(){function a(e,g){var m=e.endTime-e.startTime,r=e.startTime-g;f.fillStyle=l[e.kind];f.fillRect(u,r,d,m);if(e.children)for(var m=e.children,r=0,p=m.length;r<p;r++)a(m[r],g)}var d=10,e=this.gatherFrames(this.cw/(d+1)|0),f=this.context,g=this.maxFrameTime,l=this.fillStyles;f.clearRect(0,0,this.cw,this.ch);var m=0,p=0,r=0,s=0,u;f.save();f.translate(0,this.ch);f.scale(1,-this.ch/g);for(g=0;g<e.length-1;g++){var w=e[g],m=m+(w.endTime-w.startTime);p++;w.total&&(r+=w.total,s++);
u=g*(d+1);f.fillStyle="rgba(255,255,255, 0.075)";f.fillRect(u,0,d,e[g+1].startTime-w.startTime);a(w,w.startTime)}e=1E3/this.frameRate;f.beginPath();f.lineWidth=0.5;f.moveTo(0,e);f.lineTo(this.cw,e);f.strokeStyle="rgb(255,64,0)";f.stroke();f.restore();f.fillStyle="rgba(0,0,0, 0.85)";f.fillRect(0,0,this.cw,20);e=this.count;m=Math.round(1E3*p/m);s=Math.round(1E3*s/r);r=5;f.fillStyle="#ccc";f.fillText(e,r,13);r+=f.measureText(e).width+5;f.fillText(m,r,13);r+=f.measureText(m).width+5;f.fillText(s,r,13);
var s=r+f.measureText(s).width+5,r=this.cw,z;for(z in this.kinds)f.fillStyle=this.fillStyles[this.getKind(z)],r-=f.measureText(z).width+5,r>s&&this.context.fillText(z,r,13)};return a}(),create=Object.create,defineProperty=Object.defineProperty,keys=Object.keys,isArray=Array.isArray,fromCharCode=String.fromCharCode,logE=Math.log,max=Math.max,min=Math.min,pow=Math.pow,push=Array.prototype.push,slice=Array.prototype.slice,splice=Array.prototype.splice;
function fail(a,b){throw Error((b?b+": ":"")+a);}function assert(a,b,d){a||fail(b,d)}function scriptProperties(a,b){return b.reduce(function(d,b){d[b]=a+" "+b;return d},{})}function cloneObject(a){var b=Object.create(null),d;for(d in a)b[d]=a[d];return b}function sortNumeric(a,b){return a-b}function sortByZindex(a,b){return a._zindex-b._zindex}function rgbaObjToStr(a){return"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha/255+")"}
function rgbIntAlphaToStr(a,b){a|=0;if(1<=b){for(var d=a.toString(16);6>d.length;)d="0"+d;return"#"+d}return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+b+")"}function argbUintToStr(a){return"rgba("+(a>>>16&255)+","+(a>>>8&255)+","+(a&255)+","+(a>>>24&255)/255+")"}
(function(){eval("function t() {} t.name === 't'")||Object.defineProperty(Function.prototype,"name",{get:function(){if(this.__name)return this.__name;var a=/function\s([^\(]+)/.exec(this.toString());return this.__name=a=a&&"anonymous"!==a[1]?a[1]:null},configurable:!0,enumerable:!1})})();var randomStyleCache,nextStyle=0;
function randomStyle(){randomStyleCache||(randomStyleCache="#ff5e3a #ff9500 #ffdb4c #87fc70 #52edc7 #1ad6fd #c644fc #ef4db6 #4a4a4a #dbddde #ff3b30 #ff9500 #ffcc00 #4cd964 #34aadc #007aff #5856d6 #ff2d55 #8e8e93 #c7c7cc #5ad427 #c86edf #d1eefc #e0f8d8 #fb2b69 #f7f7f7 #1d77ef #d6cec3 #55efcb #ff4981 #ffd3e0 #f7f7f7 #ff1300 #1f1f21 #bdbec2 #ff3a2d".split(" "));return randomStyleCache[nextStyle++%randomStyleCache.length]}
(function(){function a(a){if("function"!==typeof a)throw new TypeError("Invalid deferred constructor");var d,b=function(a,d){b.resolve=a;b.reject=d};d=b;a=new a(d);var e=d.resolve;if("function"!==typeof e)throw new TypeError("Invalid resolve construction function");d=d.reject;if("function"!==typeof d)throw new TypeError("Invalid reject construction function");return{promise:a,resolve:e,reject:d}}function b(a,d){if("object"!==typeof a||null===a)return!1;try{var b=a.then;if("function"!==typeof b)return!1;
b.call(a,d.resolve,d.reject)}catch(e){b=d.reject,b(e)}return!0}function d(a){return"object"===typeof a&&null!==a&&"undefined"!==typeof a.promiseStatus}function e(a,d){if("unresolved"===a.promiseStatus){var b=a.rejectReactions;a.result=d;a.resolveReactions=void 0;a.rejectReactions=void 0;a.promiseStatus="has-rejection";f(b,d)}}function f(a,d){for(var b=0;b<a.length;b++)g({reaction:a[b],argument:d})}function g(a){0===w.length&&setTimeout(m,0);w.push(a)}function l(a,d){var e=a.deferred,f=a.handler,g,
l;try{g=f(d)}catch(m){return e=e.reject,e(m)}if(g===e.promise)return e=e.reject,e(new TypeError("Self resolution"));try{if(l=b(g,e),!l){var r=e.resolve;return r(g)}}catch(p){return e=e.reject,e(p)}}function m(){for(;0<w.length;){var a=w[0];try{l(a.reaction,a.argument)}catch(d){if("function"===typeof s.onerror)s.onerror(d)}w.shift()}}function p(a){throw a;}function r(a){return a}function s(a){if("function"!==typeof a)throw new TypeError("resolver is not a function");if("object"!==typeof this)throw new TypeError("Promise to initialize is not an object");
this.promiseStatus="unresolved";this.resolveReactions=[];this.rejectReactions=[];this.result=void 0;var d,b=this;d=function(a){if("unresolved"===b.promiseStatus){var d=b.resolveReactions;b.result=a;b.resolveReactions=void 0;b.rejectReactions=void 0;b.promiseStatus="has-resolution";f(d,a)}};var g,l=this;g=function(a){e(l,a)};try{a(d,g)}catch(m){e(this,m)}this.promiseConstructor=s;return this}var u=Function("return this")();if(u.Promise)"function"!==typeof u.Promise.all&&(u.Promise.all=function(a){var d=
0,b=[],e,f,g=new u.Promise(function(a,d){e=a;f=d});a.forEach(function(a,g){d++;a.then(function(a){b[g]=a;d--;0===d&&e(b)},f)});0===d&&e(b);return g}),"function"!==typeof u.Promise.resolve&&(u.Promise.resolve=function(a){return new u.Promise(function(d){d(a)})});else{var w=[];s.all=function(d){var b=a(this),e=[],f=0,g=0;d.forEach(function(a){a=this.cast(a);var d=g;a.then(function(a){e[d]=a;f--;0===f&&b.resolve(e)},b.reject);g++;f++},this);0===g&&b.resolve(e);return b.promise};s.cast=function(b){if(d(b))return b;
var e=a(this);e.resolve(b);return e.promise};s.reject=function(d){var b=a(this);b.reject(d);return b.promise};s.resolve=function(d){var b=a(this);b.resolve(d);return b.promise};s.prototype={"catch":function(a){this.then(void 0,a)},then:function(e,f){if(!d(this))throw new TypeError("this is not a Promises");var l=a(this.promiseConstructor),m="function"===typeof f?f:p,s=this,u="function"===typeof e?e:r,w={deferred:l,handler:function(e){if(e===s)return m(new TypeError("Self resolution"));var f=s.promiseConstructor;
if(d(e)&&e.promiseConstructor===f)return e.then(u,m);f=a(f);return b(e,f)?f.promise.then(u,m):u(e)}},E={deferred:l,handler:m};switch(this.promiseStatus){case "unresolved":this.resolveReactions.push(w);this.rejectReactions.push(E);break;case "has-resolution":g({reaction:w,argument:this.result});break;case "has-rejection":g({reaction:E,argument:this.result})}return l.promise}};u.Promise=s}})();
var QuadTree=function(a,b,d,e,f){this.x=a|0;this.y=b|0;this.width=d|0;this.height=e|0;f?(this.root=f.root,this.parent=f,this.level=f.level+1):(this.root=this,this.parent=null,this.level=0);this.reset()};QuadTree.prototype.reset=function(){this.objects=this.stuckObjects=null;this.nodes=[]};QuadTree.prototype._findIndex=function(a,b,d,e){var f=this.x+(this.width/2|0),g=this.y+(this.height/2|0);e=d<g&&e<g;d=d>g;if(a<f&&b<f){if(e)return 1;if(d)return 2}else if(a>f){if(e)return 0;if(d)return 3}return-1};
QuadTree.prototype.insert=function(a){var b=this.nodes;if(b.length){var d=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);-1<d?b[d].insert(a):(a.prev=null,this.stuckObjects?(a.next=this.stuckObjects,this.stuckObjects.prev=a):a.next=null,this.stuckObjects=a,a.parent=this)}else{d=1;if(b=this.objects){for(;b.next;)d++,b=b.next;a.prev=b;a.next=null;b.next=a}else a.prev=null,a.next=null,this.objects=a;if(4<d&&10>this.level){this._subdivide();for(b=this.objects;b;)a=b.next,this.insert(b),b=a;this.objects=
null}else a.parent=this}};QuadTree.prototype.update=function(a){var b=a.parent;if(b){if(a.xMin>=b.x&&a.xMax<=b.x+b.width&&a.yMin>=b.y&&a.yMax<=b.y+b.height){if(b.nodes.length){var d=this._findIndex(a.xMin,a.xMax,a.yMin,a.yMax);-1<d&&(b.remove(a),b=this.nodes[d],b.insert(a))}else b.remove(a),b.insert(a);return}b.remove(a)}this.root.insert(a)};
QuadTree.prototype.remove=function(a){var b=a.prev,d=a.next;if(b)b.next=d,a.prev=null;else{var e=a.parent;e.objects===a?e.objects=d:e.stuckObjects===a&&(e.stuckObjects=d)}d&&(d.prev=b,a.next=null);a.parent=null};
QuadTree.prototype.retrieve=function(a,b,d,e){var f=[],g=[],l=this;do{if(l.nodes.length){var m=l._findIndex(a,b,d,e);-1<m?f.push(l.nodes[m]):f.push.apply(f,l.nodes)}for(var m=l.objects,p=0;2>p;p++){for(;m;)m.xMin>b||(m.xMax<a||m.yMin>e||m.yMax<d)||g.push(m),m=m.next;m=l.stuckObjects}l=f.pop()}while(l);return g};
QuadTree.prototype._subdivide=function(){var a=this.width/2|0,b=this.height/2|0,d=this.x+a,e=this.y+b;this.nodes[0]=new QuadTree(d,this.y,a,b,this);this.nodes[1]=new QuadTree(this.x,this.y,a,b,this);this.nodes[2]=new QuadTree(this.x,e,a,b,this);this.nodes[3]=new QuadTree(d,e,a,b,this)};var RegionCluster=function(){this.regions=[]};RegionCluster.prototype.reset=function(){this.regions.length=0};
RegionCluster.prototype.insert=function(a){var b=this.regions;if(3>b.length)b.push({xMin:a.xMin,xMax:a.xMax,yMin:a.yMin,yMax:a.yMax});else{var d=b[0],e=b[1],f=b[2],g=(max(a.xMax,d.xMax)-min(a.xMin,d.xMin))*(max(a.yMax,d.yMax)-min(a.yMin,d.yMin)),l=b[0],m=(max(a.xMax,e.xMax)-min(a.xMin,e.xMin))*(max(a.yMax,e.yMax)-min(a.yMin,e.yMin)),p=(max(a.xMax,f.xMax)-min(a.xMin,f.xMin))*(max(a.yMax,f.yMax)-min(a.yMin,f.yMin));m<g&&(g=m,l=e);p<g&&(g=p,l=f);m=(max(d.xMax,e.xMax)-min(d.xMin,e.xMin))*(max(d.yMax,
e.yMax)-min(d.yMin,e.yMin));d=(max(d.xMax,f.xMax)-min(d.xMin,f.xMin))*(max(d.yMax,f.yMax)-min(d.yMin,f.yMin));e=(max(e.xMax,f.xMax)-min(e.xMin,f.xMin))*(max(e.yMax,f.yMax)-min(e.yMin,f.yMin));g<m&&g<d&&g<e?(a.xMin<l.xMin&&(l.xMin=a.xMin),a.xMax>l.xMax&&(l.xMax=a.xMax),a.yMin<l.yMin&&(l.yMin=a.yMin),a.yMax>l.yMax&&(l.yMax=a.yMax)):(l=b[0],g=b[1],d<m&&(m=d,g=b[2]),e<m&&(l=b[1],g=b[2]),g.xMin<l.xMin&&(l.xMin=g.xMin),g.xMax>l.xMax&&(l.xMax=g.xMax),g.yMin<l.yMin&&(l.yMin=g.yMin),g.yMax>l.yMax&&(l.yMax=
g.yMax),g.xMin=a.xMin,g.xMax=a.xMax,g.yMin=a.yMin,g.yMax=a.yMax)}};RegionCluster.prototype.retrieve=function(){return this.regions};var EXTERNAL_INTERFACE_FEATURE=1,CLIPBOARD_FEATURE=2,SHAREDOBJECT_FEATURE=3,VIDEO_FEATURE=4,SOUND_FEATURE=5,NETCONNECTION_FEATURE=6;this.performance||(this.performance={});this.performance.now||(this.performance.now=Date.now);
var SWF_TAG_CODE_CSM_TEXT_SETTINGS=74,SWF_TAG_CODE_DEFINE_BINARY_DATA=87,SWF_TAG_CODE_DEFINE_BITS=6,SWF_TAG_CODE_DEFINE_BITS_JPEG2=21,SWF_TAG_CODE_DEFINE_BITS_JPEG3=35,SWF_TAG_CODE_DEFINE_BITS_JPEG4=90,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS=20,SWF_TAG_CODE_DEFINE_BITS_LOSSLESS2=36,SWF_TAG_CODE_DEFINE_BUTTON=7,SWF_TAG_CODE_DEFINE_BUTTON2=34,SWF_TAG_CODE_DEFINE_BUTTON_CXFORM=23,SWF_TAG_CODE_DEFINE_BUTTON_SOUND=17,SWF_TAG_CODE_DEFINE_EDIT_TEXT=37,SWF_TAG_CODE_DEFINE_FONT=10,SWF_TAG_CODE_DEFINE_FONT2=48,SWF_TAG_CODE_DEFINE_FONT3=
75,SWF_TAG_CODE_DEFINE_FONT4=91,SWF_TAG_CODE_DEFINE_FONT_ALIGN_ZONES=73,SWF_TAG_CODE_DEFINE_FONT_INFO=13,SWF_TAG_CODE_DEFINE_FONT_INFO2=62,SWF_TAG_CODE_DEFINE_FONT_NAME=88,SWF_TAG_CODE_DEFINE_MORPH_SHAPE=46,SWF_TAG_CODE_DEFINE_MORPH_SHAPE2=84,SWF_TAG_CODE_DEFINE_SCALING_GRID=78,SWF_TAG_CODE_DEFINE_SCENE_AND_FRAME_LABEL_DATA=86,SWF_TAG_CODE_DEFINE_SHAPE=2,SWF_TAG_CODE_DEFINE_SHAPE2=22,SWF_TAG_CODE_DEFINE_SHAPE3=32,SWF_TAG_CODE_DEFINE_SHAPE4=83,SWF_TAG_CODE_DEFINE_SOUND=14,SWF_TAG_CODE_DEFINE_SPRITE=
39,SWF_TAG_CODE_DEFINE_TEXT=11,SWF_TAG_CODE_DEFINE_TEXT2=33,SWF_TAG_CODE_DEFINE_VIDEO_STREAM=60,SWF_TAG_CODE_DO_ABC=82,SWF_TAG_CODE_DO_ABC_=72,SWF_TAG_CODE_DO_ACTION=12,SWF_TAG_CODE_DO_INIT_ACTION=59,SWF_TAG_CODE_ENABLE_DEBUGGER=58,SWF_TAG_CODE_ENABLE_DEBUGGER2=64,SWF_TAG_CODE_END=0,SWF_TAG_CODE_EXPORT_ASSETS=56,SWF_TAG_CODE_FILE_ATTRIBUTES=69,SWF_TAG_CODE_FRAME_LABEL=43,SWF_TAG_CODE_IMPORT_ASSETS=57,SWF_TAG_CODE_IMPORT_ASSETS2=71,SWF_TAG_CODE_JPEG_TABLES=8,SWF_TAG_CODE_METADATA=77,SWF_TAG_CODE_PLACE_OBJECT=
4,SWF_TAG_CODE_PLACE_OBJECT2=26,SWF_TAG_CODE_PLACE_OBJECT3=70,SWF_TAG_CODE_PROTECT=24,SWF_TAG_CODE_REMOVE_OBJECT=5,SWF_TAG_CODE_REMOVE_OBJECT2=28,SWF_TAG_CODE_SCRIPT_LIMITS=65,SWF_TAG_CODE_SET_BACKGROUND_COLOR=9,SWF_TAG_CODE_SET_TAB_INDEX=66,SWF_TAG_CODE_SHOW_FRAME=1,SWF_TAG_CODE_SOUND_STREAM_BLOCK=19,SWF_TAG_CODE_SOUND_STREAM_HEAD=18,SWF_TAG_CODE_SOUND_STREAM_HEAD2=45,SWF_TAG_CODE_START_SOUND=15,SWF_TAG_CODE_START_SOUND2=89,SWF_TAG_CODE_SYMBOL_CLASS=76,SWF_TAG_CODE_VIDEO_FRAME=61;self.SWF={};
for(var codeLengthOrder=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],distanceCodes=[],distanceExtraBits=[],i=0,j=0,code=1;30>i;++i)distanceCodes[i]=code,code+=1<<(distanceExtraBits[i]=~~((j+=2<i?1:0)/2));for(var bitLengths=[],i=0;32>i;++i)bitLengths[i]=5;for(var fixedDistanceTable=makeHuffmanTable(bitLengths),lengthCodes=[],lengthExtraBits=[],j=i=0,code=3;29>i;++i)lengthCodes[i]=code-(28==i?1:0),code+=1<<(lengthExtraBits[i]=~~((j+=4<i?1:0)/4%6));
for(i=0;288>i;++i)bitLengths[i]=144>i||279<i?8:256>i?9:7;var fixedLiteralTable=makeHuffmanTable(bitLengths);function makeHuffmanTable(a){for(var b=max.apply(null,a),d=a.length,e=1<<b,f=new Uint32Array(e),g=0,l=1,m=2;l<=b;g<<=1,++l,m<<=1)for(var p=0;p<d;++p)if(a[p]===l){for(var r=0,s=0;s<l;++s)r=2*r+(g>>s&1);for(s=r;s<e;s+=m)f[s]=l<<16|p;++g}return{codes:f,maxBits:b}}function verifyDeflateHeader(){}
function createInflatedStream(a,b){verifyDeflateHeader(a);var d=new Stream(a,2),e={data:new Uint8Array(b),available:0,completed:!1},f={};do inflateBlock(d,e,f);while(!e.completed&&d.pos<d.end);return new Stream(e.data,0,e.available)}var InflateNoDataError={};
function inflateBlock(a,b,d){var e=void 0!==d.header?d.header:d.header=readBits(a.bytes,a,3);switch(e>>1){case 0:a.align();var f=a.pos;if(4>a.end-f)throw InflateNoDataError;var g=a.getUint16(f,!0);a.getUint16(f+2,!0);if(a.end-f<4+g)throw InflateNoDataError;var l=f+4,m=a.pos=l+g,f=a.bytes;splice.apply(b.data,[b.available,g].concat(slice.call(f,l,m)));b.available+=g;break;case 1:inflate(a,b,fixedLiteralTable,fixedDistanceTable,d);break;case 2:if(void 0!==d.distanceTable)f=d.distanceTable,g=d.literalTable;
else{var f=a.bytes,l=a.pos,m=a.bitBuffer,p=a.bitLength,g=[],r,s;try{r=readBits(f,a,5)+257;s=readBits(f,a,5)+1;for(var u=r+s,w=readBits(f,a,4)+4,z=0;19>z;++z)g[codeLengthOrder[z]]=z<w?readBits(f,a,3):0;for(var A=makeHuffmanTable(g),g=[],w=z=0;z<u;){var v=1,B=readCode(f,a,A);switch(B){case 16:v=readBits(f,a,2)+3;B=w;break;case 17:v=readBits(f,a,3)+3;B=0;break;case 18:v=readBits(f,a,7)+11;B=0;break;default:w=B}for(;v--;)g[z++]=B}}catch(y){throw a.pos=l,a.bitBuffer=m,a.bitLength=p,y;}f=d.distanceTable=
makeHuffmanTable(g.splice(r,s));g=d.literalTable=makeHuffmanTable(g)}inflate(a,b,g,f,d);delete d.distanceTable;delete d.literalTable;break;default:fail("unknown block type","inflate")}delete d.header;b.completed=!!(e&1)}function readBits(a,b,d){var e=b.bitBuffer,f=b.bitLength;if(d>f){var g=b.pos,l=b.end;do{if(g>=l)throw b.pos=g,b.bitBuffer=e,b.bitLength=f,InflateNoDataError;e|=a[g++]<<f;f+=8}while(d>f);b.pos=g}b.bitBuffer=e>>>d;b.bitLength=f-d;return e&(1<<d)-1}
function inflate(a,b,d,e,f){for(var g=b.available,l=b.data,m=a.bytes,p=void 0!==f.sym?f.sym:readCode(m,a,d);256!==p;){if(256>p)l[g++]=p;else{f.sym=p;for(var p=p-257,p=void 0!==f.len?f.len:f.len=lengthCodes[p]+readBits(m,a,lengthExtraBits[p]),r=void 0!==f.sym2?f.sym2:f.sym2=readCode(m,a,e),r=distanceCodes[r]+readBits(m,a,distanceExtraBits[r]),r=g-r;p--;)l[g++]=l[r++];delete f.sym2;delete f.len;delete f.sym}b.available=g;p=readCode(m,a,d)}}
function readCode(a,b,d){var e=b.bitBuffer,f=b.bitLength,g=d.maxBits;if(g>f){var l=b.pos,m=b.end;do{if(l>=m)throw b.pos=l,b.bitBuffer=e,b.bitLength=f,InflateNoDataError;e|=a[l++]<<f;f+=8}while(g>f);b.pos=l}a=d.codes[e&(1<<g)-1];d=a>>16;b.bitBuffer=e>>>d;b.bitLength=f-d;return a&65535}
for(var StreamNoDataError={},Stream=function(){function a(){this.bitBuffer=this.bitLength=0}function b(a){if(this.pos+a>this.end)throw StreamNoDataError;}function d(){return this.end-this.pos}function e(a,d){var b=new g(this.bytes);b.pos=a;b.end=d;return b}function f(a){var d=this.bytes,b=this.end+a.length;if(b>d.length)throw"stream buffer overfow";d.set(a,this.end);this.end=b}function g(g,m,p,r){void 0===m&&(m=0);g.buffer instanceof ArrayBuffer&&(m+=g.byteOffset,g=g.buffer);void 0===p&&(p=g.byteLength-
m);void 0===r&&(r=p);var s=new Uint8Array(g,m,r);g=new DataView(g,m,r);g.bytes=s;g.pos=0;g.end=p;g.bitBuffer=0;g.bitLength=0;g.align=a;g.ensure=b;g.remaining=d;g.substream=e;g.push=f;return g}return g}(),FORMAT_COLORMAPPED=3,FORMAT_15BPP=4,FORMAT_24BPP=5,FACTOR_5BBP=255/31,crcTable=[],i=0;256>i;i++){for(var c=i,h=0;8>h;h++)c=c&1?3988292384^c>>1&2147483647:c>>1&2147483647;crcTable[i]=c}function crc32(a,b,d){for(var e=-1;b<d;b++)e=e>>>8^crcTable[(e^a[b])&255];return e^-1}
function createPngChunk(a,b){var d=new Uint8Array(12+b.length),e=0,f=b.length;d[e]=f>>24&255;d[e+1]=f>>16&255;d[e+2]=f>>8&255;d[e+3]=f&255;d[e+4]=a.charCodeAt(0)&255;d[e+5]=a.charCodeAt(1)&255;d[e+6]=a.charCodeAt(2)&255;d[e+7]=a.charCodeAt(3)&255;b instanceof Uint8Array&&d.set(b,8);e=8+f;f=crc32(d,4,e);d[e]=f>>24&255;d[e+1]=f>>16&255;d[e+2]=f>>8&255;d[e+3]=f&255;return d}function adler32(a,b,d){for(var e=1,f=0;b<d;++b)e=(e+(a[b]&255))%65521,f=(f+e)%65521;return f<<16|e}
function defineBitmap(a){var b=a.width,d=a.height,e=a.hasAlpha,f="",g="",l,m=a.bmpData;switch(a.format){case 3:var p=3,r=b+3&-4;l=(a.colorTableSize+1)*(a.hasAlpha?4:3);var s=l+r*d,u=createInflatedStream(m,s),w=u.bytes,m=0;u.ensure(l);if(e){for(var f=new Uint8Array(3*(l/4)),z=0,g=new Uint8Array(l/4),e=0;m<l;)f[z++]=w[m],f[z++]=w[m+1],f[z++]=w[m+2],g[e++]=w[m+3],m+=4;f=createPngChunk("PLTE",f);g=createPngChunk("tRNS",g)}else f=createPngChunk("PLTE",w.subarray(m,m+l)),m+=l;l=new Uint8Array(b*d+d);for(z=
0;m<s;){u.ensure(r);var e=m,A=e+b;z++;l.set(w.subarray(e,A),z);z+=A-e;u.pos=m+=r}break;case 4:p=2;r=2*b+3&-4;u=createInflatedStream(m,r*d);m=0;l=new Uint8Array(3*b*d+d);for(s=z=0;s<d;++s){z++;u.ensure(r);for(A=0;A<b;++A)w=u.getUint16(m),m+=2,l[z++]=0|FACTOR_5BBP*(w>>10&31),l[z++]=0|FACTOR_5BBP*(w>>5&31),l[z++]=0|FACTOR_5BBP*(w&31);u.pos=m+=r}break;case 5:var v;e?(p=6,v=0,l=new Uint8Array(4*b*d+d)):(p=2,v=1,l=new Uint8Array(3*b*d+d));r=4*b;u=createInflatedStream(m,r*d);w=u.bytes;for(s=z=m=0;s<d;++s){u.ensure(r);
z++;for(A=0;A<b;++A){m+=v;if(e){var B=w[m];if(B){var y=B/255;l[z++]=0|w[m+1]/y;l[z++]=0|w[m+2]/y;l[z++]=0|w[m+3]/y;l[z++]=B}else z+=4}else l[z++]=w[m],l[z++]=w[m+1],l[z++]=w[m+2];m+=4-v}u.pos=m}break;default:fail("invalid format","bitmap")}p=new Uint8Array([b>>24&255,b>>16&255,b>>8&255,b&255,d>>24&255,d>>16&255,d>>8&255,d&255,8,p,0,0,0]);w=l.length;r=new Uint8Array(2+w+5*Math.ceil(w/65535)+4);u=0;r[u++]=120;r[u++]=156;for(m=0;65535<w;)r[u++]=0,r[u++]=255,r[u++]=255,r[u++]=0,r[u++]=0,r.set(l.subarray(m,
m+65535),u),u+=65535,m+=65535,w-=65535;r[u++]=1;r[u++]=w&255;r[u++]=w>>8&255;r[u++]=~w&255;r[u++]=(~w&65535)>>8&255;r.set(l.subarray(m),u);u+=l.length-m;m=adler32(l,0,l.length);r[u++]=m>>24&255;r[u++]=m>>16&255;r[u++]=m>>8&255;r[u++]=m&255;m=[new Uint8Array([137,80,78,71,13,10,26,10]),createPngChunk("IHDR",p),f,g,createPngChunk("IDAT",r),createPngChunk("IEND","")];return{type:"image",id:a.id,width:b,height:d,mimeType:"image/png",data:new Blob(m,{type:"image/png"})}}
function defineButton(a,b){for(var d=a.characters,e={up:{},over:{},down:{},hitTest:{}},f=0,g;(g=d[f++])&&!g.eob;){var l={symbolId:b[g.symbolId].id,hasMatrix:!!g.matrix,matrix:g.matrix};g.stateUp&&(e.up[g.depth]=l);g.stateOver&&(e.over[g.depth]=l);g.stateDown&&(e.down[g.depth]=l);g.stateHitTest&&(e.hitTest[g.depth]=l)}return{type:"button",id:a.id,buttonActions:a.buttonActions,states:e}}var nextFontId=1;function maxPower2(a){for(var b=0;2<=a;)a/=2,++b;return pow(2,b)}
function toString16(a){return fromCharCode(a>>8&255,a&255)}function toString32(a){return toString16(a>>16)+toString16(a)}
function defineFont(a){var b={},d=[],e={},f=[],g=a.glyphs,l=g.length;if(a.codes){for(var d=d.concat(a.codes),m=0,p;p=d[m];++m)e[p]=m;d.sort(function(a,d){return a-d});for(m=0;p=d[m++];){for(var r=p,s=r,u=[m-1];(p=d[m])&&s+1===p;)++s,u.push(m),++m;f.push([r,s,u])}}else{u=[];for(m=0;m<l;m++)p=57344+m,d.push(p),e[p]=m,u.push(m);f.push([57344,57344+l-1,u])}var w=a.resolution||1,u=Math.ceil(a.ascent/w)||1024,z=-Math.ceil(a.descent/w)|0,A=a.leading/w|0;b["OS/2"]="\x00\u0001\x00\x00"+toString16(a.bold?700:
400)+"\x00\u0005\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00ALF "+toString16((a.italic?1:0)|(a.bold?32:0))+toString16(d[0])+toString16(d[d.length-1])+toString16(u)+toString16(z)+toString16(A)+toString16(u)+toString16(-z)+"\x00\x00\x00\x00\x00\x00\x00\x00";for(var v="",B="",y="",D="",m=0,F;F=f[m++];)r=F[0],s=F[1],p=F[2][0],v+=toString16(r),B+=toString16(s),
y+=toString16(p-r+1&65535),D+=toString16(0);B+="\u00ff\u00ff";v+="\u00ff\u00ff";y+="\x00\u0001";D+="\x00\x00";f=f.length+1;m=2*maxPower2(f);r=2*f-m;m="\x00\x00"+toString16(2*f)+toString16(m)+toString16(logE(f)/logE(2))+toString16(r)+B+"\x00\x00"+v+y+D;b.cmap="\x00\x00\x00\u0001\x00\u0003\x00\u0001\x00\x00\x00\f\x00\u0004"+toString16(m.length+4)+m;f="\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x001\x00";B="\x00\x00";v=16;y=0;r=[];s=[];F=[];for(var E=[],m=D=0;p=d[m++];){var C=g[e[p]].records;
p=1;for(var K=0,Q="",R="",T="",L="",G=0,I=0,J=1024,H=-1024,P=1024,O=-1024,U=0,M;M=C[U];++U)if(M.type){if(M.isStraight)if(M.isGeneral){var R=R+"\u0001",N=M.deltaX/w;M=-M.deltaY/w;T+=toString16(N);L+=toString16(M);G+=N;I+=M}else M.isVertical?(R+="\u0011",M=-M.deltaY/w,L+=toString16(M),I+=M):(R+="!",N=M.deltaX/w,T+=toString16(N),G+=N);else{var R=R+"\x00",W=M.controlDeltaX/w,fa=-M.controlDeltaY/w,T=T+toString16(W),L=L+toString16(fa),R=R+"\u0001",N=M.anchorDeltaX/w;M=-M.anchorDeltaY/w;T+=toString16(N);
L+=toString16(M);++K;G+=W+N;I+=fa+M}G<J&&(J=G);G>H&&(H=G);I<P&&(P=I);I>O&&(O=I);++K}else{if(M.eos)break;M.move&&(K&&(++p,Q+=toString16(K-1)),R+="\u0001",W=M.moveX/w,fa=-M.moveY/w,N=W-G,M=fa-I,T+=toString16(N),L+=toString16(M),G=W,I=fa,K>y&&(y=K),G<J&&(J=G),G>H&&(H=G),I<P&&(P=I),I>O&&(O=I),++K)}Q+=toString16((K||1)-1);U||(J=H=P=O=0,R+="1");C=toString16(p)+toString16(J)+toString16(P)+toString16(H)+toString16(O)+Q+"\x00\x00"+R+T+L;C.length&1&&(C+="\x00");f+=C;B+=toString16(v/2);v+=C.length;r.push(J);
s.push(H);F.push(P);E.push(O);p>D&&(D=p);K>y&&(y=K)}B+=toString16(v/2);b.glyf=f;b.head="\x00\u0001\x00\x00\x00\u0001\x00\x00\x00\x00\x00\x00_\u000f<\u00f5\x00\v\u0004\x00\x00\x00\x00\x00"+toString32(Date.now())+"\x00\x00\x00\x00"+toString32(Date.now())+toString16(min.apply(null,r))+toString16(min.apply(null,F))+toString16(max.apply(null,s))+toString16(max.apply(null,E))+toString16((a.italic?2:0)|(a.bold?1:0))+"\x00\b\x00\u0002\x00\x00\x00\x00";g=a.advance;b.hhea="\x00\u0001\x00\x00"+toString16(u)+
toString16(z)+toString16(A)+toString16(g?max.apply(null,g):1024)+"\x00\x00\x00\x00\u0003\u00b8\x00\u0001\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"+toString16(l+1);v="\x00\x00\x00\x00";for(m=0;m<l;++m)v+=toString16(g?g[m]/w:1024)+"\x00\x00";b.hmtx=v;if(a.kerning){w=a.kerning;g=w.length;m=2*maxPower2(g);g="\x00\x00\x00\u0001\x00\x00"+toString16(14+6*g)+"\x00\u0001"+toString16(g)+toString16(m)+toString16(logE(g)/logE(2))+toString16(2*g-m);for(m=0;M=w[m++];)g+=toString16(e[M.code1])+toString16(e[M.code2])+
toString16(M.adjustment);b.kern=g}b.loca=B;b.maxp="\x00\u0001\x00\x00"+toString16(l+1)+toString16(y)+toString16(D)+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";e="swf-font-"+nextFontId++;l=a.name||e;w=l.replace(/ /g,"");B=[a.copyright||"Original licence",l,"Unknown",e,l,"1.0",w,"Unknown","Unknown","Unknown"];m=B.length;g="\x00\x00"+toString16(m)+toString16(12*m+6);for(m=v=0;y=B[m++];)g+="\x00\u0001\x00\x00\x00\x00"+toString16(m-1)+toString16(y.length)+
toString16(v),v+=y.length;b.name=g+B.join("");b.post="\x00\u0003\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";B=keys(b);m=B.length;y="\x00\u0001\x00\x00"+toString16(m)+"\x00\u0080\x00\u0003\x00 ";D="";v=16*m+y.length;for(m=0;g=B[m++];){f=b[g];r=f.length;for(y+=g+"\x00\x00\x00\x00"+toString32(v)+toString32(r);r&3;)f+="\x00",++r;for(D+=f;v&3;)++v;v+=r}return{type:"font",id:a.id,name:l,uniqueName:w+e,codes:d,metrics:{ascent:u/
1024,descent:-z/1024,leading:A/1024},bold:1===a.bold,italic:1===a.italic,data:y+D}}function getUint16(a,b){return a[b]<<8|a[b+1]}function parseJpegChunks(a,b){var d=0,e=b.length,f=[],g;do{for(var l=d;d<e&&255!==b[d];)++d;for(;d<e&&255===b[d];)++d;g=b[d++];if(218===g)d=e;else if(217===g){d+=2;continue}else if(208>g||216<g){var m=getUint16(b,d);192<=g&&195>=g&&(a.height=getUint16(b,d+3),a.width=getUint16(b,d+5));d+=m}f.push(b.subarray(l,d))}while(d<e);return f}
function defineImage(a,b){var d={type:"image",id:a.id,mimeType:a.mimeType},e=a.imgData;if("image/jpeg"===a.mimeType){var e=parseJpegChunks(d,e),f=a.alphaData;f&&(d.mask=createInflatedStream(f,d.width*d.height).bytes);if(a.incomplete&&(f=b[0].data)&&f.size)e[0]=e[0].subarray(2),e.unshift(f.slice(0,f.size-2))}else e=[e];d.data=new Blob(e,{type:a.mimeType});return d}
function defineLabel(a,b){for(var d=a.records,e=a.matrix,f=["c.save()","c.transform("+[e.a,e.b,e.c,e.d,e.tx/20,e.ty/20].join()+")","c.scale(0.05, 0.05)"],e=[],g=0,l=0,m=0,p,r;(p=d[m++])&&!p.eot;){if(p.hasFont){var s=b[p.fontId];r=s.codes;f.push('c.font="'+p.fontHeight+"px '"+s.uniqueName+"'\"");e.push(s.id)}p.hasColor?(f.push('ct.setFillStyle(c,"'+rgbaObjToStr(p.color)+'")'),f.push("ct.setAlpha(c)")):f.push("ct.setAlpha(c,true)");p.hasMoveX&&(g=p.moveX);p.hasMoveY&&(l=p.moveY);p=p.entries;for(var s=
0,u;u=p[s++];){var w=r[u.glyphIndex],w=32<=w&&34!=w&&92!=w?fromCharCode(w):"\\u"+(w+65536).toString(16).substring(1);f.push('c.fillText("'+w+'",'+g+","+l+")");g+=u.advance}}f.push("c.restore()");d={type:"label",id:a.id,bbox:a.bbox,data:f.join("\n")};e.length&&(d.require=e);return d}
var GRAPHICS_FILL_CLIPPED_BITMAP=65,GRAPHICS_FILL_FOCAL_RADIAL_GRADIENT=19,GRAPHICS_FILL_LINEAR_GRADIENT=16,GRAPHICS_FILL_NONSMOOTHED_CLIPPED_BITMAP=67,GRAPHICS_FILL_NONSMOOTHED_REPEATING_BITMAP=66,GRAPHICS_FILL_RADIAL_GRADIENT=18,GRAPHICS_FILL_REPEATING_BITMAP=64,GRAPHICS_FILL_SOLID=0;
function applySegmentToStyles(a,b,d,e,f){if(a){var g=a.commands,l=a.data;a=a.morphData;var m,p;if(b.fill0){e=e[b.fill0-1];!b.fill1&&!b.line?(m=e.head(),m.commands=[],m.data=[],m.morphData=f?[]:null):m=e.addSegment([],[],f?[]:null);e=m.commands;var r=m.data,s=m.morphData;e.push(SHAPE_MOVE_TO);var u=l.length-2;r.push(l[u],l[u+1]);f&&s.push(a[u],a[u+1]);for(p=g.length;1<p--;u-=2)m=g[p],e.push(m),r.push(l[u-2],l[u-1]),f&&s.push(a[u-2],a[u-1]),m===SHAPE_CURVE_TO&&(r.push(l[u-4],l[u-3]),f&&s.push(a[u-4],
a[u-3]),u-=2)}b.line&&b.fill1&&(e=d[b.line-1],e.addSegment(g,l,a))}}
function convertRecordsToStyledPaths(a,b,d,e,f,g,l){for(var m=null!==g,p={fill0:0,fill1:0,line:0},r=null,s,u,w=a.length-1,z=0,A=0,v=0,B=0,y,D=0,F=0;D<w;D++){var E=a[D],C;m&&(C=g[F++]);if(0===E.type)r&&applySegmentToStyles(r,p,d,b,m),E.hasNewStyles&&(s||(s=[]),push.apply(s,b),b=createPathsList(E.fillStyles,!1,e,f),push.apply(s,d),d=createPathsList(E.lineStyles,!0,e,f),u&&(s.push(u),u=null),p={fill0:0,fill1:0,line:0}),E.hasFillStyle0&&(p.fill0=E.fillStyle0),E.hasFillStyle1&&(p.fill1=E.fillStyle1),E.hasLineStyle&&
(p.line=E.lineStyle),p.fill1?y=b[p.fill1-1]:p.line?y=d[p.line-1]:p.fill0&&(y=b[p.fill0-1]),E.move&&(z=E.moveX|0,A=E.moveY|0),y&&(r=y.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(z,A),m&&(0===C.type?(v=C.moveX|0,B=C.moveY|0):(v=z,B=A,F--),r.morphData.push(v,B)));else{r||(u||(u=new SegmentedPath(null,processStyle({color:{red:0,green:0,blue:0,alpha:255},width:20},!0))),r=u.addSegment([],[],m?[]:null),r.commands.push(SHAPE_MOVE_TO),r.data.push(z,A),m&&r.morphData.push(v,B));
if(m){for(;C&&0===C.type;)C=g[F++];C||(C=E)}if(E.isStraight&&(!m||C.isStraight))z+=E.deltaX|0,A+=E.deltaY|0,r.commands.push(SHAPE_LINE_TO),r.data.push(z,A),m&&(v+=C.deltaX|0,B+=C.deltaY|0,r.morphData.push(v,B));else{var K,Q,R;E.isStraight?(R=E.deltaX|0,E=E.deltaY|0,K=z+(R>>1),Q=A+(E>>1),z+=R,A+=E):(K=z+E.controlDeltaX|0,Q=A+E.controlDeltaY|0,z=K+E.anchorDeltaX|0,A=Q+E.anchorDeltaY|0);r.commands.push(SHAPE_CURVE_TO);r.data.push(K,Q,z,A);m&&(C.isStraight?(R=C.deltaX|0,E=C.deltaY|0,K=v+(R>>1),Q=B+(E>>
1),v+=R,B+=E):(K=v+C.controlDeltaX|0,Q=B+C.controlDeltaY|0,v=K+C.anchorDeltaX|0,B=Q+C.anchorDeltaY|0),r.morphData.push(K,Q,v,B))}}}applySegmentToStyles(r,p,d,b,m);s?push.apply(s,b):s=b;push.apply(s,d);u&&s.push(u);for(D=a=0;D<s.length;D++)y=s[D],y.head()?s[D-a]=segmentedPathToShapePath(y,m,l):a++;s.length-=a;return s}
function segmentedPathToShapePath(a,b,d){for(var e=a.head(),f=e,g=null,l=null,m=0,p=e.prev;e;){for(;p;)a.segmentsConnect(p,e)?(p.next!==e&&(a.removeSegment(p),a.insertSegment(p,e)),e=p,p=e.prev,m++):a.segmentsConnect(f,p)?(a.removeSegment(p),f.next=p,p=p.prev,f.next.prev=f,f.next.next=null,f=f.next,m++):p=p.prev;p=e.prev;g?(l.next=e,e.prev=l,l=f,l.next=null):(g=e,l=f);if(!p)break;e=f=p;p=e.prev}e=-m;m=-m<<1;for(p=g;p;)e+=p.commands.length,m+=p.data.length,p=p.next;a=new ShapePath(a.fillStyle,a.lineStyle,
e,m,b,d);d=a.commands;m=a.data;e=a.morphData;l=f=0;for(p=g;p;){for(var g=p.commands,r=p.data,s=p.morphData,u=+(r[0]===m[l-2]&&r[1]===m[l-1]),w=u;w<g.length;w++,f++)d[f]=g[w];for(w=u<<1;w<r.length;w++,l++)m[l]=r[w],b&&(e[l]=s[w]);p=p.next}return a}var CAPS_STYLE_TYPES=["round","none","square"],JOIN_STYLE_TYPES=["round","bevel","miter"];
function processStyle(a,b,d,e){if(b&&(a.lineCap=CAPS_STYLE_TYPES[a.endCapStyle|0],a.lineJoin=JOIN_STYLE_TYPES[a.joinStyle|0],a.miterLimit=2*(a.miterLimitFactor||1.5),!a.color&&a.hasFill)){var f=processStyle(a.fillStyle,!1,d,e);a.style=f.style;a.type=f.type;a.transform=f.transform;a.records=f.records;a.focalPoint=f.focalPoint;a.bitmapId=f.bitmapId;a.repeat=f.repeat;a.fillStyle=null;return a}if(void 0===a.type||0===a.type)return f=a.color,a.style="rgba("+f.red+","+f.green+","+f.blue+","+f.alpha/255+
")",a.color=null,a;switch(a.type){case 16:case 18:case 19:f=819.2;break;case 64:case 65:case 66:case 67:d[a.bitmapId]&&(e.push(d[a.bitmapId].id),f=0.05);break;default:fail("invalid fill style","shape")}if(!a.matrix)return a;b=a.matrix;a.transform={a:b.a*f,b:b.b*f,c:b.c*f,d:b.d*f,e:b.tx,f:b.ty};a.matrix=null;return a}function createPathsList(a,b,d,e){for(var f=[],g=0;g<a.length;g++){var l=processStyle(a[g],b,d,e);f[g]=b?new SegmentedPath(null,l):new SegmentedPath(l,null)}return f}
function defineShape(a,b){var d=[],e=[],f=createPathsList(a.fillStyles,!1,b,d),g=createPathsList(a.lineStyles,!0,b,d),f=convertRecordsToStyledPaths(a.records,f,g,b,d,a.recordsMorph||null,e);if(a.bboxMorph&&(g=a.bboxMorph,extendBoundsByPoint(a.bbox,g.xMin,g.yMin),extendBoundsByPoint(a.bbox,g.xMax,g.yMax),g=a.strokeBboxMorph))extendBoundsByPoint(a.strokeBbox,g.xMin,g.yMin),extendBoundsByPoint(a.strokeBbox,g.xMax,g.yMax);return{type:"shape",id:a.id,strokeBbox:a.strokeBbox,strokeBboxMorph:a.strokeBboxMorph,
bbox:a.bbox,bboxMorph:a.bboxMorph,isMorph:a.isMorph,paths:f,require:d.length?d:null,transferables:e}}function logShape(a,b){var d='{"bounds":'+JSON.stringify(b)+',"paths":['+a.map(function(a){return a.serialize()}).join()+"]}";console.log(d)}function SegmentedPath(a,b){this.fillStyle=a;this.lineStyle=b;this._head=null}
SegmentedPath.prototype={addSegment:function(a,b,d){a={commands:a,data:b,morphData:d,prev:this._head,next:null};this._head&&(this._head.next=a);return this._head=a},removeSegment:function(a){a.prev&&(a.prev.next=a.next);a.next&&(a.next.prev=a.prev)},insertSegment:function(a,b){var d=b.prev;a.prev=d;a.next=b;d&&(d.next=a);b.prev=a},head:function(){return this._head},segmentsConnect:function(a,b){var d=a.data.length;return a.data[d-2]===b.data[0]&&a.data[d-1]===b.data[1]}};
var SHAPE_MOVE_TO=1,SHAPE_LINE_TO=2,SHAPE_CURVE_TO=3,SHAPE_WIDE_MOVE_TO=4,SHAPE_WIDE_LINE_TO=5,SHAPE_CUBIC_CURVE_TO=6,SHAPE_CIRCLE=7,SHAPE_ELLIPSE=8;
function ShapePath(a,b,d,e,f,g){this.fillStyle=a;this.lineStyle=b;d?(this.commands=new Uint8Array(d),this.data=new Int32Array(e),this.morphData=f?new Int32Array(e):null):(this.commands=[],this.data=[]);this.strokeBounds=this.bounds=null;this.isMorph=!!f;this.fullyInitialized=!1;inWorker?(this.buffers=[this.commands.buffer,this.data.buffer],g.push(this.commands.buffer,this.data.buffer),f&&(this.buffers.push(this.morphData.buffer),g.push(this.morphData.buffer))):this.buffers=null}
ShapePath.prototype={get isEmpty(){return 0===this.commands.length},moveTo:function(a,b){1===this.commands[this.commands.length-1]?(this.data[this.data.length-2]=a,this.data[this.data.length-1]=b):(this.commands.push(1),this.data.push(a,b))},lineTo:function(a,b){this.commands.push(2);this.data.push(a,b)},curveTo:function(a,b,d,e){this.commands.push(3);this.data.push(a,b,d,e)},cubicCurveTo:function(a,b,d,e,f,g){this.commands.push(6);this.data.push(a,b,d,e,f,g)},rect:function(a,b,d,e){d=a+d;e=b+e;this.commands.push(1,
2,2,2,2);this.data.push(a,b,d,b,d,e,a,e,a,b)},circle:function(a,b,d){this.commands.push(7);this.data.push(a,b,d)},ellipse:function(a,b,d,e){this.commands.push(8);this.data.push(a,b,d,e)},draw:function(a,b,d,e){if(!b||this.fillStyle){a.beginPath();var f=this.commands,g=this.data,l=this.morphData,m=!1,p=0,r=0;if(this.isMorph)for(u=s=0;s<f.length;s++)switch(f[s]){case 1:a.moveTo(morph(g[u]/20,l[u++]/20,d),morph(g[u]/20,l[u++]/20,d));break;case 2:a.lineTo(morph(g[u]/20,l[u++]/20,d),morph(g[u]/20,l[u++]/
20,d));break;case 3:a.quadraticCurveTo(morph(g[u]/20,l[u++]/20,d),morph(g[u]/20,l[u++]/20,d),morph(g[u]/20,l[u++]/20,d),morph(g[u]/20,l[u++]/20,d));break;default:console.warn("Drawing command not supported for morph shapes: "+f[s])}else for(var s=0,u=0;s<f.length;s++)switch(f[s]){case 1:m=!0;p=g[u++]/20;r=g[u++]/20;a.moveTo(p,r);break;case 4:a.moveTo(g[u++]/20,g[u++]/20);u+=2;break;case 2:a.lineTo(g[u++]/20,g[u++]/20);break;case 5:a.lineTo(g[u++]/20,g[u++]/20);u+=2;break;case 3:a.quadraticCurveTo(g[u++]/
20,g[u++]/20,g[u++]/20,g[u++]/20);break;case 6:a.bezierCurveTo(g[u++]/20,g[u++]/20,g[u++]/20,g[u++]/20,g[u++]/20,g[u++]/20);break;case 7:m&&(a.lineTo(p,r),m=!1);a.moveTo((g[u]+g[u+2])/20,g[u+1]/20);a.arc(g[u++]/20,g[u++]/20,g[u++]/20,0,2*Math.PI,!1);break;case 8:m&&(a.lineTo(p,r),m=!1);d=g[u++];var l=g[u++],w=g[u++],z=g[u++],A;if(w!==z){a.save();var v;w>z?(v=w/z,A=z,d/=v,a.scale(v,1)):(v=z/w,A=w,l/=v,a.scale(1,v))}a.moveTo((d+A)/20,l/20);a.arc(d/20,l/20,A/20,0,2*Math.PI,!1);w!==z&&a.restore();break;
default:if(0===f[s]&&s===f.length-1)break;console.warn("Unknown drawing command encountered: "+f[s])}if(b)a.fill();else{if(b=this.fillStyle)e.setFillStyle(a,b.style),a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=b.smooth,b=b.transform,a.save(),e.setAlpha(a),b&&a.transform(b.a,b.b,b.c,b.d,b.e/20,b.f/20),a.fill(),a.restore();if(b=this.lineStyle)e.setStrokeStyle(a,b.style),a.save(),e.setAlpha(a),a.lineWidth=Math.max(b.width/20,1),a.lineCap=b.lineCap,a.lineJoin=b.lineJoin,a.miterLimit=b.miterLimit,
a.stroke(),a.restore()}a.closePath()}},isPointInPath:function(a,b){if(!this.fillStyle&&!this.lineStyle)return!1;var d=this.strokeBounds||this.bounds||this._calculateBounds();return a<d.xMin||a>d.xMax||b<d.yMin||b>d.yMax?!1:this.fillStyle&&this.isPointInFill(a,b)?!0:this.lineStyle&&void 0!==this.lineStyle.width&&this.isPointInStroke(a,b)},isPointInFill:function(a,b){for(var d=this.commands,e=this.data,f=d.length,g=!1,l=0,m=0,p=0,r=0,s,u,w=!1,z=0,A=0,v=0,B=0;v<f;v++){switch(d[v]){case 4:B+=2;case 1:p=
e[B++];r=e[B++];w&&intersectsLine(a,b,l,m,z,A)&&(g=!g);w=!0;z=p;A=r;break;case 5:B+=2;case 2:p=e[B++];r=e[B++];intersectsLine(a,b,l,m,p,r)&&(g=!g);break;case 3:s=e[B++];u=e[B++];p=e[B++];r=e[B++];if(u>b===m>b&&r>b===m>b)break;if(l>=a&&s>=a&&p>=a){g=!g;break}var y=m-2*u+r;u=2*(u-m);var D=u*u-4*y*(m-b);if(0>D)break;D=Math.sqrt(D);y=1/(y+y);m=(D-u)*y;u=(-u-D)*y;0<=m&&(1>=m&&quadraticBezier(l,s,p,m)>a)&&(g=!g);0<=u&&(1>=u&&quadraticBezier(l,s,p,u)>a)&&(g=!g);break;case 6:s=e[B++];u=e[B++];y=e[B++];D=
e[B++];p=e[B++];r=e[B++];if(u>b===m>b&&D>b===m>b&&r>b===m>b)break;if(l>=a&&s>=a&&y>=a&&p>=a){g=!g;break}s=cubicXAtY(l,m,s,u,y,D,p,r,b);for(l=s.length;l--;)s[l]>=a&&(g=!g);break;case 7:p=e[B++];r=e[B++];s=e[B++];l=a-p;m=b-r;l*l+m*m<s*s&&(g=!g);p+=s;break;case 8:s=e[B++];u=e[B++];p=e[B++];r=e[B++];l=a-s;m=b-u;1>=l*l/(p*p)+m*m/(r*r)&&(g=!g);p=s+p;r=u;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+d[v])}l=p;m=r}w&&intersectsLine(a,b,l,m,z,A)&&(g=!g);return g},isPointInStroke:function(a,
b){for(var d=this.commands,e=this.data,f=d.length,g=this.lineStyle.width,l=g/2,m=l*l,p=a-l,r=a+l,s=b-l,u=b+l,w=0,z=0,A=0,v=0,B,y,D,F,E,C=0,K=0;C<f;C++){switch(d[C]){case 4:K+=2;case 1:A=e[K++];v=e[K++];break;case 5:K+=2;case 2:A=e[K++];v=e[K++];if(w===A&&z===v)break;if(r<w&&r<A||p>w&&p>A||u<z&&u<v||s>z&&s>v)break;if(A===w||v===z)return!0;E=((a-w)*(A-w)+(b-z)*(v-z))/distanceSq(w,z,A,v);if(0>E){if(distanceSq(a,b,w,z)<=m)return!0;break}if(1<E){if(distanceSq(a,b,A,v)<=m)return!0;break}if(distanceSq(a,
b,w+E*(A-w),z+E*(v-z))<=m)return!0;break;case 3:B=e[K++];y=e[K++];var A=e[K++],v=e[K++],Q=quadraticBezierExtreme(w,B,A);if(r<w&&r<Q&&r<A||p>w&&p>Q&&p>A)break;Q=quadraticBezierExtreme(z,y,v);if(u<z&&u<Q&&u<v||s>z&&s>Q&&s>v)break;for(E=0;1>E;E+=0.02)if(D=quadraticBezier(w,B,A,E),!(D<p||D>r))if(F=quadraticBezier(z,y,v,E),!(F<s||F>u)&&(a-D)*(a-D)+(b-F)*(b-F)<m)return!0;break;case 6:B=e[K++];y=e[K++];var Q=e[K++],R=e[K++],A=e[K++],v=e[K++];for(D=cubicBezierExtremes(w,B,Q,A);2>D.length;)D.push(A);if(r<
w&&r<A&&r<D[0]&&r<D[1]||p>w&&p>A&&p>D[0]&&p>D[1])break;for(D=cubicBezierExtremes(z,y,R,v);2>D.length;)D.push(v);if(u<z&&u<v&&u<D[0]&&u<D[1]||s>z&&s>v&&s>D[0]&&s>D[1])break;for(E=0;1>E;E+=0.02)if(D=cubicBezier(w,B,Q,A,E),!(D<p||D>r))if(F=cubicBezier(z,y,R,v,E),!(F<s||F>u)&&(a-D)*(a-D)+(b-F)*(b-F)<m)return!0;break;case 7:B=e[K++];y=e[K++];w=e[K++];A=B+w;v=y;if(r<B-w||p>B+w||u<y-w||s>y+w)break;B=a-B;y=b-y;z=w-l;w+=l;y=B*B+y*y;if(y>=z*z&&y<=w*w)return!0;break;case 8:B=e[K++];y=e[K++];w=e[K++];z=e[K++];
A=B+w;v=y;B=Math.abs(a-B);y=Math.abs(b-y);B-=l;y-=l;if(1<B*B/(w*w)+y*y/(z*z))break;B+=g;y+=g;if(1<B*B/(w*w)+y*y/(z*z))return!0;break;default:inWorker||console.warn("Drawing command not handled in isPointInPath: "+d[C])}w=A;z=v}return!1},getBounds:function(a){var b=a?this.strokeBounds:this.bounds;b||(this._calculateBounds(),b=a?this.strokeBounds:this.bounds);return b},_calculateBounds:function(){var a=this.commands,b=this.data,d=a.length,e;e=1===a[0]||6<a[0]?{xMin:b[0],yMin:b[1]}:{xMin:0,yMin:0};e.xMax=
e.xMin;e.yMax=e.yMin;for(var f=e.xMin,g=e.yMin,l=0,m=0;l<d;l++){var p,r,s,u;switch(a[l]){case 4:m+=2;case 1:p=b[m++];r=b[m++];extendBoundsByPoint(e,p,r);break;case 5:m+=2;case 2:p=b[m++];r=b[m++];extendBoundsByPoint(e,p,r);break;case 3:s=b[m++];u=b[m++];p=b[m++];r=b[m++];extendBoundsByPoint(e,p,r);(s<f||s>p)&&extendBoundsByX(e,quadraticBezierExtreme(f,s,p));(u<g||u>r)&&extendBoundsByY(e,quadraticBezierExtreme(g,u,r));break;case 6:s=b[m++];u=b[m++];var w=b[m++],z=b[m++];p=b[m++];r=b[m++];extendBoundsByPoint(e,
p,r);if(s<f||w<f||s>p||w>p){f=cubicBezierExtremes(f,s,w,p);for(s=f.length;s--;)extendBoundsByX(e,f[s])}if(u<g||z<g||u>r||z>r){f=cubicBezierExtremes(g,u,z,r);for(s=f.length;s--;)extendBoundsByY(e,f[s])}break;case 7:p=b[m++];r=b[m++];g=b[m++];extendBoundsByPoint(e,p-g,r-g);extendBoundsByPoint(e,p+g,r+g);p+=g;break;case 8:p=b[m++];r=b[m++];g=b[m++];u=b[m++];extendBoundsByPoint(e,p-g,r-u);extendBoundsByPoint(e,p+g,r+u);p+=g;break;default:inWorker||console.warn("Drawing command not handled in bounds calculation: "+
a[l])}f=p;g=r}this.bounds=e;return this.lineStyle?(a=this.lineStyle.width/2,this.strokeBounds={xMin:e.xMin-a,yMin:e.yMin-a,xMax:e.xMax+a,yMax:e.yMax+a}):this.strokeBounds=e},serialize:function(){var a="{";this.fillStyle&&(a+='"fill":'+JSON.stringify(this.fillStyle)+",");this.lineStyle&&(a+='"stroke":'+JSON.stringify(this.lineStyle)+",");a+='"commands":['+Array.apply([],this.commands).join()+"],";a+='"data":['+Array.apply([],this.data).join()+"]";return a+"}"}};
ShapePath.fromPlainObject=function(a){var b=new ShapePath(a.fill||null,a.stroke||null);b.commands=new Uint8Array(a.commands);b.data=new Int32Array(a.data);inWorker||finishShapePath(b);return b};function distanceSq(a,b,d,e){a=d-a;b=e-b;return a*a+b*b}function intersectsLine(a,b,d,e,f,g){return g>b!==e>b&&a<(d-f)*(b-g)/(e-g)+f}function quadraticBezier(a,b,d,e){var f=1-e;return a*f*f+2*b*f*e+d*e*e}
function quadraticBezierExtreme(a,b,d){var e=(a-b)/(a-2*b+d);return 0>e?a:1<e?d:quadraticBezier(a,b,d,e)}function cubicBezier(a,b,d,e,f){var g=f*f,l=1-f,m=l*l;return a*l*m+3*b*f*m+3*d*l*g+e*f*g}function cubicBezierExtremes(a,b,d,e){var f=b-a,g;g=2*(d-b);var l=e-d;f+l===g&&(l*=1.0001);var m=2*f-g,p=g-2*f,p=Math.sqrt(p*p-4*f*(f-g+l));g=2*(f-g+l);f=(m+p)/g;m=(m-p)/g;p=[];0<=f&&1>=f&&p.push(cubicBezier(a,b,d,e,f));0<=m&&1>=m&&p.push(cubicBezier(a,b,d,e,m));return p}
function cubicXAtY(a,b,d,e,f,g,l,m,p){function r(a){return a*(z+a*(v+a*y))+b-p}function s(d){0>d?d=0:1<d&&(d=1);return a+d*(w+d*(A+d*B))}function u(a,d,b,e){if(!(Math.abs(b-d)<=e)){var f=0.5*(d+b);0>=a(d)*a(b)?(D=d,F=b):(u(a,d,f,e),u(a,f,b,e))}}var w=3*(d-a),z=3*(e-b),A=3*(f-d)-w,v=3*(g-e)-z,B=l-a-w-A,y=m-b-z-v,D=0,F=1;u(r,0,1,0.05);g=findRoot(D,F,r,50,1E-6);if(1E-5<Math.abs(r(g)))return[];d=[];1>=g&&d.push(s(g));e=y;f=g*e+v;l=f*f-4*e*(g*f+z);if(0>l)return d;l=Math.sqrt(l);e=1/(e+e);g=(l-f)*e;e*=
-f-l;0<=g&&1>=g&&d.push(s(g));0<=e&&1>=e&&d.push(s(e));return d}function findRoot(a,b,d,e,f){var g,l,m,p,r,s,u=a;l=d(a);if(0===l)return a;p=d(b);if(0===p)return b;if(0<p*l)return a;for(var w=0,z=0;z<e;++z){w++;g=0.5*(b+a);m=d(g);if(0===m)break;if(Math.abs(g-a)<f)break;0<m*l&&(a=b,b=l,l=p,p=b);b=m-l;s=p-m;r=p-l;if(p*r<2*m*b)b=g,p=m;else{p=(g-a)/b;b=(b-s)/(s*r);b=a-p*l*(1-b*m);p=d(b);if(0===p||Math.abs(b-u)<f)return b;u=b;0>p*l||(a=b,l=p,b=g,p=m)}}return g}
function extendBoundsByPoint(a,b,d){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b);d<a.yMin?a.yMin=d:d>a.yMax&&(a.yMax=d)}function extendBoundsByX(a,b){b<a.xMin?a.xMin=b:b>a.xMax&&(a.xMax=b)}function extendBoundsByY(a,b){b<a.yMin?a.yMin=b:b>a.yMax&&(a.yMax=b)}function morph(a,b,d){return a+(b-a)*d}
function finishShapePath(a,b){if(a.fullyInitialized)return a;if(!(a instanceof ShapePath)){var d=a;a=new ShapePath(a.fillStyle,a.lineStyle,0,0,a.isMorph);a.commands=new Uint8Array(d.buffers[0]);a.data=new Int32Array(d.buffers[1]);d.isMorph&&(a.morphData=new Int32Array(d.buffers[2]));a.buffers=null}a.fillStyle&&initStyle(a.fillStyle,b);a.lineStyle&&initStyle(a.lineStyle,b);a.fullyInitialized=!0;return a}
var inWorker="undefined"===typeof window,factoryCtx=!inWorker?document.createElement("canvas").getContext("2d"):null;function buildLinearGradientFactory(a){for(var b=factoryCtx.createLinearGradient(-1,0,1,0),d=0;d<a.length;d++)b.addColorStop(a[d].ratio,a[d].color);d=function(d,b){for(var g=d.createLinearGradient(-1,0,1,0),l=0;l<a.length;l++)b.addGradientColorStop(g,a[l].ratio,a[l].color);return g};d.defaultFillStyle=b;return d}
function buildRadialGradientFactory(a,b){for(var d=factoryCtx.createRadialGradient(a,0,0,0,0,1),e=0;e<b.length;e++)d.addColorStop(b[e].ratio,b[e].color);e=function(d,e){for(var l=d.createRadialGradient(a,0,0,0,0,1),m=0;m<b.length;m++)e.addGradientColorStop(l,b[m].ratio,b[m].color);return l};e.defaultFillStyle=d;return e}
function buildBitmapPatternFactory(a,b){var d=factoryCtx.createPattern(a,b),e,f,g=function(g,m){if(!m.mode)return d;var p=m.getTransformFingerprint();if(p===f)return e;var r=document.createElement("canvas");r.width=a.width;r.height=a.height;g=r.getContext("2d");m.setAlpha(g,!0);g.drawImage(a,0,0);e=g.createPattern(r,b);f=p;return e};g.defaultFillStyle=d;return g}
function initStyle(a,b){if(void 0!==a.type)switch(a.type){case 0:break;case 16:case 18:case 19:for(var d=a.records,e=[],f=0,g=d.length;f<g;f++){var l=d[f],m=rgbaObjToStr(l.color);e.push({ratio:l.ratio/255,color:m})}d=16===a.type?buildLinearGradientFactory(e):buildRadialGradientFactory((a.focalPoint|0)/20,e);a.style=d;break;case 64:case 65:case 66:case 67:a.style=buildBitmapPatternFactory(b[a.bitmapId].props.img,64===a.type||66===a.type?"repeat":"no-repeat");break;default:fail("invalid fill style",
"shape")}}var SOUND_SIZE_8_BIT=0,SOUND_SIZE_16_BIT=1,SOUND_TYPE_MONO=0,SOUND_TYPE_STEREO=1,SOUND_FORMAT_PCM_BE=0,SOUND_FORMAT_ADPCM=1,SOUND_FORMAT_MP3=2,SOUND_FORMAT_PCM_LE=3,SOUND_FORMAT_NELLYMOSER_16=4,SOUND_FORMAT_NELLYMOSER_8=5,SOUND_FORMAT_NELLYMOSER=6,SOUND_FORMAT_SPEEX=11,SOUND_RATES=[5512,11250,22500,44100],WaveHeader=new Uint8Array([82,73,70,70,0,0,0,0,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,0,0,0,0]);
function packageWave(a,b,d,e,f){var g=e>>3,l=d*b*g,g=d*g,m=a.length+(a.length&1),p=new ArrayBuffer(WaveHeader.length+m),r=new Uint8Array(p);r.set(WaveHeader);if(f){f=0;for(var s=WaveHeader.length;f<a.length;f+=2,s+=2)r[s]=a[f+1],r[s+1]=a[f]}else r.set(a,WaveHeader.length);a=new DataView(p);a.setUint32(4,m+36,!0);a.setUint16(22,d,!0);a.setUint32(24,b,!0);a.setUint32(28,l,!0);a.setUint16(32,g,!0);a.setUint16(34,e,!0);a.setUint32(40,m,!0);return{data:r,mimeType:"audio/wav"}}
function defineSound(a){var b=1==a.soundType?2:1,d=a.samplesCount,e=SOUND_RATES[a.soundRate],f=a.soundData,g;switch(a.soundFormat){case 0:g=new Float32Array(d*b);if(1==a.soundSize){for(var l=d=0;d<g.length;d++,l+=2)g[d]=(f[l]<<24|f[l+1]<<16)/2147483648;f=packageWave(f,e,b,16,!0)}else{for(d=0;d<g.length;d++)g[d]=(f[d]-128)/128;f=packageWave(f,e,b,8,!1)}break;case 3:g=new Float32Array(d*b);if(1==a.soundSize){for(l=d=0;d<g.length;d++,l+=2)g[d]=(f[l+1]<<24|f[l]<<16)/2147483648;f=packageWave(f,e,b,16,
!1)}else{for(d=0;d<g.length;d++)g[d]=(f[d]-128)/128;f=packageWave(f,e,b,8,!1)}break;case 2:f={data:new Uint8Array(f.subarray(2)),mimeType:"audio/mpeg"};break;case 1:l=new Int16Array(d*b);decodeACPCMSoundData(f,l,b);g=new Float32Array(d*b);for(d=0;d<g.length;d++)g[d]=l[d]/32768;f=packageWave(new Uint8Array(l.buffer),e,b,16,!(new Uint8Array((new Uint16Array([1])).buffer))[0]);break;default:throw Error("Unsupported audio format: "+a.soundFormat);}a={type:"sound",id:a.id,sampleRate:e,channels:b,pcm:g};
f&&(a.packaged=f);return a}
var ACPCMIndexTables=[[-1,2],[-1,-1,2,4],[-1,-1,-1,-1,2,4,6,8],[-1,-1,-1,-1,-1,-1,-1,-1,1,2,4,6,8,10,13,16]],ACPCMStepSizeTable=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];
function decodeACPCMSoundData(a,b,d){function e(d){for(;l<d;)g=g<<8|a[f++],l+=8;l-=d;return g>>>l&(1<<d)-1}for(var f=0,g=0,l=0,m=0,p=e(2),r=ACPCMIndexTables[p];m<b.length;){var s=b[m++]=e(16)<<16>>16,u,w=e(6),z;1<d&&(u=b[m++]=e(16)<<16>>16,z=e(6));for(var A=1<<p+1,v=0;4095>v;v++){for(var B=e(p+2),y=ACPCMStepSizeTable[w],D=0,F=A>>1;F;F>>=1,y>>=1)B&F&&(D+=y);s+=(B&A?-1:1)*(D+y);b[m++]=s=-32768>s?-32768:32767<s?32767:s;w+=r[B&~A];w=0>w?0:88<w?88:w;if(1<d){B=e(p+2);y=ACPCMStepSizeTable[z];D=0;for(F=A>>
1;F;F>>=1,y>>=1)B&F&&(D+=y);u+=(B&A?-1:1)*(D+y);b[m++]=u=-32768>u?-32768:32767<u?32767:u;z+=r[B&~A];z=0>z?0:88<z?88:z}}}}var nextSoundStreamId=0;function SwfSoundStream(a,b,d){this.streamId=nextSoundStreamId++;this.samplesCount=a;this.sampleRate=b;this.channels=d;this.format=null;this.currentSample=0}
SwfSoundStream.prototype={get info(){return{samplesCount:this.samplesCount,sampleRate:this.sampleRate,channels:this.channels,format:this.format,streamId:this.streamId}},decode:function(){throw Error("SwfSoundStream.decode: not implemented");}};function SwfSoundStream_decode_PCM(a){for(var b=new Float32Array(a.length),d=0;d<b.length;d++)b[d]=(a[d]-128)/128;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}
function SwfSoundStream_decode_PCM_be(a){for(var b=new Float32Array(a.length/2),d=0,e=0;d<b.length;d++,e+=2)b[d]=(a[e]<<24|a[e+1]<<16)/2147483648;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}
function SwfSoundStream_decode_PCM_le(a){for(var b=new Float32Array(a.length/2),d=0,e=0;d<b.length;d++,e+=2)b[d]=(a[e+1]<<24|a[e]<<16)/2147483648;this.currentSample+=b.length/this.channels;return{streamId:this.streamId,samplesCount:b.length/this.channels,pcm:b}}function SwfSoundStream_decode_MP3(a){var b=a[1]<<8|a[0],d=a[3]<<8|a[2];this.currentSample+=b;return{streamId:this.streamId,samplesCount:b,data:new Uint8Array(a.subarray(4)),seek:d}}
function createSoundStream(a){var b=new SwfSoundStream(a.samplesCount,SOUND_RATES[a.streamRate],1==a.streamType?2:1);switch(a.streamCompression){case 0:b.format="wave";b.decode=1==a.soundSize?SwfSoundStream_decode_PCM_be:SwfSoundStream_decode_PCM;break;case 3:b.format="wave";b.decode=1==a.soundSize?SwfSoundStream_decode_PCM_le:SwfSoundStream_decode_PCM;break;case 2:b.format="mp3";b.decode=SwfSoundStream_decode_MP3;break;default:throw Error("Unsupported audio format: "+a.soundFormat);}return b}
function defineText(a,b){var d=[];if(a.hasFont){var e=b[a.fontId];a.font=e.uniqueName;d.push(e.id)}e={type:"text",id:a.id,variableName:a.variableName,tag:a};d.length&&(e.require=d);return e}var isWorker="undefined"===typeof window;
if(isWorker){importScripts("../../../lib/mp3/mp3.js");self.addEventListener("message",function(a){a=a.data;var b=a.sessionId;try{switch(a.action){case "create":var d=new Session(b);sessions[b]=d;break;case "close":if(d=sessions[b])d.close(),delete sessions[b];break;case "decode":d=sessions[b];if(!d)throw Error("mp3 decoding session is unavailable");d.decode(a.data)}}catch(e){self.postMessage({sessionId:b,action:"error",message:e.message})}},!1);var sessions={},Session=function(a){this.id=a;if("undefined"===
typeof MP3Decoder)throw Error("mp3 decoder is not available");a=new MP3Decoder;a.onframedata=function(a,d,e,f){self.postMessage({sessionId:this.id,action:"frame",frameData:a,channels:d,sampleRate:e,bitRate:f})}.bind(this);a.onid3tag=function(a){self.postMessage({sessionId:this.id,action:"id3",id3Data:a})}.bind(this);this.decoder=a};Session.prototype={decode:function(a){this.decoder.push(a)},close:function(){self.postMessage({sessionId:this.id,action:"closed"})}};self.console={log:function(a){self.postMessage({action:"console",
method:"log",message:a})},error:function(a){self.postMessage({action:"console",method:"error",message:a})}}}else{var mp3Worker,createMP3Worker=function(){var a=new Worker(SHUMWAY_ROOT+"swf/mp3worker.js");a.addEventListener("message",function(a){"console"===a.data.action&&console[a.data.method].call(console,a.data.message)});return a},nextSessionId=0,MP3DecoderSession=function(){mp3Worker=mp3Worker||createMP3Worker();var a=nextSessionId++;this.id=a;this.onworkermessage=function(b){if(b.data.sessionId===
a)switch(b.data.action){case "closed":if(this.onclosed)this.onclosed();mp3Worker.removeEventListener("message",this.onworkermessage,!1);break;case "frame":this.onframedata(b.data.frameData,b.data.channels,b.data.sampleRate,b.data.bitRate);break;case "id3":if(this.onid3tag)this.onid3tag(b.data.id3Data);break;case "error":if(this.onerror)this.onerror(b.data.message)}}.bind(this);mp3Worker.addEventListener("message",this.onworkermessage,!1);mp3Worker.postMessage({sessionId:a,action:"create"})};MP3DecoderSession.prototype=
{pushAsync:function(a){mp3Worker.postMessage({sessionId:this.id,action:"decode",data:a})},close:function(){mp3Worker.postMessage({sessionId:this.id,action:"close"})}};MP3DecoderSession.processAll=function(a,b){var d=8E3,e=new Float32Array(d),f=0,g=[],l=!1,m=new MP3DecoderSession;m.onframedata=function(a){var b=a.length+f;if(b>d){do d*=2;while(b>d);b=new Float32Array(d);b.set(e);e=b}e.set(a,f);f+=a.length};m.onid3tag=function(a){g.push(a)};m.onclosed=function(){l||b(e.subarray(0,f),g)};m.onerror=function(a){l||
(l=!0,b(null,null,a))};m.pushAsync(a);m.close()}}
SWF.embed=function(a,b,d,e){function f(a,d){if(1===s)g.width=a|0,g.height=d|0;else{var b=Math.floor(a*s),e=Math.floor(d*s);g.style.width=b/s+"px";g.style.height=e/s+"px";g.width=b;g.height=e}}var g=b.createElement("canvas"),l=g.getContext("2d"),m=new flash.display.Loader,p=m._contentLoaderInfo,r=new flash.display.Stage,s=1,u=forceHidpi.value;r._loader=m;p._parameters=e.movieParams;p._url=e.url||("string"===typeof a?a:null);p._loaderURL=e.loaderURL||p._url;m._parent=r;m._stage=r;p._addEventListener("init",
function(){if(u||18<=p._swfVersion)s="devicePixelRatio"in window?window.devicePixelRatio:1;g._pixelRatio=s;r._contentsScaleFactor=s;d.clientHeight?(f(d.clientWidth,d.clientHeight),r._invalid=!0,window.addEventListener("resize",function(){f(d.clientWidth,d.clientHeight);r._invalid=!0})):f(r._stageWidth/20,r._stageHeight/20);d.setAttribute("style","position: relative");g.addEventListener("click",function(){ShumwayKeyboardListener.focus=r;r._mouseTarget._dispatchEvent("click")});g.addEventListener("dblclick",
function(){r._mouseTarget._doubleClickEnabled&&r._mouseTarget._dispatchEvent("doubleClick")});g.addEventListener("mousedown",function(){r._mouseEvents.push("mousedown")});g.addEventListener("mousemove",function(a){var d=this,b=0,e=0;if(d.offsetParent){do b+=d.offsetLeft,e+=d.offsetTop;while(d=d.offsetParent)}d=r._concatenatedTransform;b=((a.pageX-b)*s-d.tx/20)/d.a;a=((a.pageY-e)*s-d.ty/20)/d.d;if(b!==r._mouseX||a!==r._mouseY)r._mouseMoved=!0,r._mouseX=20*b,r._mouseY=20*a});g.addEventListener("mouseup",
function(){r._mouseEvents.push("mouseup")});g.addEventListener("mouseover",function(){r._mouseMoved=!0;r._mouseOver=!0});g.addEventListener("mouseout",function(){r._mouseMoved=!0;r._mouseOver=!1});window.addEventListener("message",function(a){a=a.data;if(!("object"!==typeof a||null===a)){var d=a.type;switch(d){case "mousemove":case "mouseup":case "mousedown":r._mouseMoved=!0;r._mouseOver=!0;r._mouseX=20*a.x;r._mouseY=20*a.y;"mousemove"===d||r._mouseEvents.push(d);break;case "mouseover":case "mouseout":r._mouseMoved=
!0;r._mouseOver="mouseover"===d;break;case "keyup":case "keydown":r._dispatchEvent(new flash.events.KeyboardEvent("keyup"===d?"keyUp":"keyDown",!0,!1,a.charCode,a.keyCode,a.keyLocation,a.ctrlKey||!1,a.altKey||!1,a.shiftKey||!1))}}},!1);var a=p._backgroundColor;if(e.objectParams){var b;if(e.objectParams.bgcolor&&(b=/#([0-9A-F]{6})/i.exec(e.objectParams.bgcolor)))a=parseInt(b[1],16),a={red:a>>16&255,green:a>>8&255,blue:a&255,alpha:255};"transparent"===e.objectParams.wmode&&(a={red:0,green:0,blue:0,
alpha:0})}r._color=a;l.fillStyle=rgbaObjToStr(a);l.fillRect(0,0,g.width,g.height);a=m._content;a._dispatchEvent("added",void 0,!0);a._dispatchEvent("addedToStage");d.appendChild(g);r._domContainer=d;if(e.onStageInitialized)e.onStageInitialized(r);renderStage(r,l,e)});e.onComplete&&p._addEventListener("complete",function(){e.onComplete()});m._load("string"===typeof a?new flash.net.URLRequest(a):a);return m};
var rendererOptions=coreOptions.register(new OptionSet("Renderer Options")),traceRenderer=rendererOptions.register(new Option("tr","traceRenderer","number",0,"trace renderer execution")),disableRenderVisitor=rendererOptions.register(new Option("drv","disableRenderVisitor","boolean",!1,"disable render visitor")),disableMouseVisitor=rendererOptions.register(new Option("dmv","disableMouseVisitor","boolean",!1,"disable mouse visitor")),showRedrawRegions=rendererOptions.register(new Option("rr","showRedrawRegions",
"boolean",!1,"show redraw regions")),renderAsWireframe=rendererOptions.register(new Option("raw","renderAsWireframe","boolean",!1,"render as wireframe")),showQuadTree=rendererOptions.register(new Option("qt","showQuadTree","boolean",!1,"show quad tree")),turboMode=rendererOptions.register(new Option("","turbo","boolean",!1,"turbo mode")),forceHidpi=rendererOptions.register(new Option("","forceHidpi","boolean",!1,"force hidpi")),skipFrameDraw=rendererOptions.register(new Option("","skipFrameDraw",
"boolean",!0,"skip frame when not on time")),hud=rendererOptions.register(new Option("","hud","boolean",!1,"show hud mode")),enableConstructChildren=rendererOptions.register(new Option("","constructChildren","boolean",!0,"Construct Children")),enableEnterFrame=rendererOptions.register(new Option("","enterFrame","boolean",!0,"Enter Frame")),enableAdvanceFrame=rendererOptions.register(new Option("","advanceFrame","boolean",!0,"Advance Frame"));
"undefined"!==typeof FirefoxCom&&(turboMode.value=FirefoxCom.requestSync("getBoolPref",{pref:"shumway.turboMode",def:!1}),hud.value=FirefoxCom.requestSync("getBoolPref",{pref:"shumway.hud",def:!1}),forceHidpi.value=FirefoxCom.requestSync("getBoolPref",{pref:"shumway.force_hidpi",def:!1}));
var CanvasCache={cache:[],getCanvas:function(a){var b=this.cache.shift();b||(b={canvas:document.createElement("canvas")},b.ctx=b.canvas.getContext("2d"));b.canvas.width=a.width;b.canvas.height=a.height;b.ctx.save();return b},releaseCanvas:function(a){a.ctx.restore();this.cache.push(a)}};function isCanvasVisible(a){return a.ownerDocument.hidden||!1===a.mozVisible?!1:!0}
function visitContainer(a,b,d){var e=a._children;b.childrenStart(a);for(var f=0,g=e.length;f<g;f++){var l=e[f];l&&(b.ignoreVisibleAttribute||l._visible&&!l._maskedObject)&&b.visit(l,visitContainer,d)}b.childrenEnd(a)}var BlendModeNameMap={normal:"normal",multiply:"multiply",screen:"screen",lighten:"lighten",darken:"darken",difference:"difference",overlay:"overlay",hardlight:"hard-light"};function getBlendModeName(a){return BlendModeNameMap[a]||"normal"}
function RenderVisitor(a,b,d,e){this.root=a;this.ctx=b;this.depth=0;this.invalidPath=d;this.refreshStage=e;this.clipStack=this.clipDepth=null}
RenderVisitor.prototype={ignoreVisibleAttribute:!1,start:function(){visitContainer(this.root,this,new RenderingContext(this.refreshStage,this.invalidPath))},startFragment:function(a){var b=this.root,d=b._currentTransform,e=d;a&&(e=b._currentTransform={a:a.a,b:a.b,c:a.c,d:a.d,tx:20*a.tx|0,ty:20*a.ty|0},b._invalidateTransform());var f;e&&(f=new flash.geom.Matrix(e.a,e.b,e.c,e.d,e.tx/20,e.ty/20),f.invert(),this.ctx.save(),this.ctx.transform(f.a,f.b,f.c,f.d,f.tx,f.ty));this.visit(b,visitContainer,new RenderingContext(this.refreshStage,
this.invalidPath));e&&this.ctx.restore();a&&(b._currentTransform=d,b._invalidateTransform())},childrenStart:function(){if(0===this.depth){var a=this.ctx;a.save();this.invalidPath&&(!this.refreshStage&&!renderAsWireframe.value)&&(this.invalidPath.draw(a,!1,0,null),a.clip());var b=this.root._color;b&&(255>b.alpha&&a.clearRect(0,0,a.canvas.width,a.canvas.height),0<b.alpha&&(a.fillStyle=rgbaObjToStr(b),this.invalidPath&&!this.refreshStage&&!renderAsWireframe.value?a.fill():a.fillRect(0,0,a.canvas.width,
a.canvas.height)));a.mozFillRule="evenodd"}this.depth++;this.clipDepth&&0<this.clipDepth.length&&(this.clipStack={depth:this.depth,clip:this.clipDepth,next:this.clipStack},this.clipDepth=null)},childrenEnd:function(){if(this.clipDepth){for(;0<this.clipDepth.length;){var a=this.clipDepth.pop();this.clipEnd(a);this.ctx=a.ctx}this.clipDepth=null}this.clipStack&&this.clipStack.depth===this.depth&&(this.clipDepth=this.clipStack.clip,this.clipStack=this.clipStack.next);this.depth--;0===this.depth&&(this.ctx.restore(),
this.invalidPath=null)},visit:function(a,b,d){var e=this.ctx,f=d.isClippingMask,g=d.colorTransform,l=!0===f;a._cxform&&(d.colorTransform=g.applyCXForm(a._cxform));if(!l){for(;this.clipDepth&&0<this.clipDepth.length&&a._depth>this.clipDepth[0].clipDepth;){var m=this.clipDepth.shift();this.clipEnd(m);d.parentCtxs.shift();e=this.ctx=m.ctx}this.clipDepth&&(0<this.clipDepth.length&&a._depth<=this.clipDepth[0].clipDepth)&&(e=this.ctx=this.clipDepth[0].maskee.ctx);a._clipDepth&&(d.isClippingMask=l=!0,m=
this.clipStart(a),this.clipDepth?this.clipDepth.unshift(m):this.clipDepth=[m],d.parentCtxs.unshift(e),e=this.ctx=m.mask.ctx)}if(l&&a._isContainer){e.save();renderDisplayObject(a,e,d);l=0;for(m=a._children.length;l<m;l++){var p=a._children[l];p&&(this.ignoreVisibleAttribute||p._visible&&!p._maskedObject)&&this.visit(p,b,d)}e.restore();e.fill()}else{e.save();e.globalCompositeOperation=getBlendModeName(a._blendMode);if(a._mask){var m=this.clipStart(a),p=m.mask,r=m.maskee;d.parentCtxs.push(e);var s=this.clipDepth;
this.clipDepth=null;this.ctx=p.ctx;this.visit(a._mask,b,new RenderingContext(this.refreshStage));this.ctx=e;this.clipDepth=s;renderDisplayObject(a,r.ctx,d);a._isContainer&&(this.ctx=r.ctx,b(a,this,d),this.ctx=e);d.parentCtxs.pop();this.clipEnd(m)}else renderDisplayObject(a,e,d),a._isContainer&&b(a,this,d);e.restore();l&&e.fill()}d.isClippingMask=f;d.colorTransform=g},clipStart:function(a){var b=a._parent._getConcatenatedTransform(null,!0),d=b.tx/20,e=b.ty/20,f=CanvasCache.getCanvas(this.ctx.canvas);
f.ctx.setTransform(b.a,b.b,b.c,b.d,d,e);var g=CanvasCache.getCanvas(this.ctx.canvas);g.ctx.setTransform(b.a,b.b,b.c,b.d,d,e);return{ctx:this.ctx,mask:f,maskee:g,clipDepth:a._clipDepth}},clipEnd:function(a){var b=a.ctx,d=a.mask;a=a.maskee;a.ctx.globalCompositeOperation="destination-in";a.ctx.setTransform(1,0,0,1,0,0);a.ctx.drawImage(d.canvas,0,0);b.save();b.setTransform(1,0,0,1,0,0);b.drawImage(a.canvas,0,0);b.restore();CanvasCache.releaseCanvas(d);CanvasCache.releaseCanvas(a)}};
function RenderingColorTransform(){this.mode=null;this.transform=[1,1,1,1,0,0,0,0]}
RenderingColorTransform.prototype={applyCXForm:function(a){var b=this.transform,b=[b[0]*a.redMultiplier/256,b[1]*a.greenMultiplier/256,b[2]*a.blueMultiplier/256,b[3]*a.alphaMultiplier/256,b[4]*a.redMultiplier/256+a.redOffset,b[5]*a.greenMultiplier/256+a.greenOffset,b[6]*a.blueMultiplier/256+a.blueOffset,b[7]*a.alphaMultiplier/256+a.alphaOffset];a=1E-4>Math.abs(b[0]-1)&&1E-4>Math.abs(b[1]-1)&&1E-4>Math.abs(b[2]-1)&&0<=b[3]&&1E-4>Math.abs(b[4])&&1E-4>Math.abs(b[5])&&1E-4>Math.abs(b[6])&&1E-4>Math.abs(b[7])?
1E-4>Math.abs(b[3]-1)?null:"simple":"complex";var d=Object.create(RenderingColorTransform.prototype);d.mode=a;d.transform=b;return d},setFillStyle:function(a,b){"complex"===this.mode?b="function"===typeof b?b(a,this):this.convertColor(b):"number"===typeof b?b=this.convertNumericColor(b):"function"===typeof b&&(b=b.defaultFillStyle);a.fillStyle=b},setStrokeStyle:function(a,b){"complex"===this.mode?b="function"===typeof b?b(a,this):this.convertColor(b):"number"===typeof b?b=this.convertNumericColor(b):
"function"===typeof b&&(b=b.defaultFillStyle);a.strokeStyle=b},addGradientColorStop:function(a,b,d){"complex"===this.mode?d=this.convertColor(d):"number"===typeof d&&(d=this.convertNumericColor(d));a.addColorStop(b,d)},setAlpha:function(a,b){if("simple"===this.mode||b)a.globalAlpha=Math.min(1,Math.max(0,a.globalAlpha*this.transform[3]))},convertNumericColor:function(a){return"#"+(a|16777216).toString(16).substr(1)},convertColor:function(a){var b=this.transform,d;switch(typeof a){case "string":"#"===
a[0]&&(d=[void 0,parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),1]);d=d||/rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)/.exec(a);if(!d)return a;break;case "number":d=[a,a>>16&255,a>>8&255,a&255,1];break;default:return a}a=Math.min(255,Math.max(0,d[1]*b[0]+b[4]))|0;var e=Math.min(255,Math.max(0,d[2]*b[1]+b[5]))|0,f=Math.min(255,Math.max(0,d[3]*b[2]+b[6]))|0,b=Math.min(1,Math.max(0,d[4]*b[3]+b[7]/256));return"rgba("+a+","+e+","+f+","+b+")"},getTransformFingerprint:function(){return this.transform.join("|")}};
function RenderingContext(a,b){this.refreshStage=!0===a;this.invalidPath=b;this.isClippingMask=!1;this.colorTransform=new RenderingColorTransform;this.parentCtxs=[]}
function renderDisplayObject(a,b,d){var e=a._currentTransform;e&&(e.a*e.d==e.b*e.c?(b.closePath(),b.rect(0,0,0,0),b.clip()):b.transform(e.a,e.b,e.c,e.d,e.tx/20,e.ty/20));if(renderAsWireframe.value){if(!a._invalid&&!d.refreshStage)return;if(a.getBounds&&(d=a.getBounds(null))&&0<d.xMax-d.xMin&&0<d.yMax-d.yMin){a._wireframeStrokeStyle||(a._wireframeStrokeStyle=randomStyle());b.save();b.strokeStyle=a._wireframeStrokeStyle;var e=d.xMin/20,f=d.yMin/20;b.strokeRect(e+0.5,f+0.5,d.xMax/20-e-1,d.yMax/20-f-
1);b.restore()}}else{1!==a._alpha&&(b.globalAlpha*=a._alpha);if(d.invalidPath&&!a._invalid&&!d.refreshStage)return;a._graphics&&(e=a._graphics,e._bitmap?(b.save(),b.translate(a._bbox.xMin/20,a._bbox.yMin/20),d.colorTransform.setAlpha(b,!0),b.drawImage(e._bitmap,0,0),b.restore()):(f=a.ratio,void 0===f&&(f=0),e.draw(b,d.isClippingMask,f,d.colorTransform)));a.draw&&a.draw(b,a.ratio,d.colorTransform,d.parentCtxs)}a._invalid=!1}
function renderQuadTree(a,b){a.strokeRect(b.x/20,b.y/20,b.width/20,b.height/20);for(var d=b.nodes,e=0;e<d.length;e++)renderQuadTree(a,d[e])}var renderingTerminated=!1,samplesLeftPlusOne=0;function triggerSampling(a){samplesLeftPlusOne=-a-1}function sampleStart(){samplesLeftPlusOne&&(0>samplesLeftPlusOne&&(console.profile("Sample"),samplesLeftPlusOne*=-1),0<samplesLeftPlusOne&&console.info("Sampling Frame: "+(samplesLeftPlusOne-1)))}
function sampleEnd(){samplesLeftPlusOne&&(samplesLeftPlusOne--,1===samplesLeftPlusOne&&console.profileEnd("Sample"))}var timeline,hudTimeline;function timelineEnter(a){timeline&&timeline.enter(a);hudTimeline&&hudTimeline.enter(a)}function timelineLeave(a){timeline&&timeline.leave(a);hudTimeline&&hudTimeline.leave(a)}function timelineWrapBroadcastMessage(a,b){timelineEnter(b);a.broadcastMessage(b);timelineLeave(b)}
function initializeHUD(a,b){var d=document.createElement("canvas"),e=document.createElement("div");e.appendChild(d);e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.width="100%";e.style.height="150px";e.style.backgroundColor="rgba(0, 0, 0, 0.4)";b.parentElement.appendChild(e);hudTimeline=new Timeline(d);hudTimeline.setFrameRate(a._frameRate);hudTimeline.refreshEvery(10)}
function renderStage(a,b,d){function e(){g=b.canvas.width;l=b.canvas.height;var d=20*(g/a._stageWidth),e=20*(l/a._stageHeight);switch(a._scaleMode){case "noBorder":d>e?e=d:d=e;break;case "noScale":d=e=b.canvas._pixelRatio||1;break;case "showAll":d<e?e=d:d=e}var f=a._align,m;m=0<=f.indexOf("L")?0:0<=f.indexOf("R")?g-d*a._stageWidth/20:(g-d*a._stageWidth/20)/2;f=0<=f.indexOf("T")?0:0<=f.indexOf("B")?l-e*a._stageHeight/20:(l-e*a._stageHeight/20)/2;b.setTransform(d,0,0,e,m,f);var r=a._concatenatedTransform;
r.a=d;r.d=e;r.tx=20*m;r.ty=20*f}function f(d,f){skipFrameDraw.value||(f=!0);sampleStart();var g=!1;a._invalid&&(e(),a._invalid=!1,g=!0);var m=!1;a._mouseMoved?(a._mouseMoved=!1,m=a._mouseOver):a._handleMouseButtons();if(d||g||m){FrameCounter.clear();var l=performance.now();timelineEnter("frame");traceRenderer.value&&appendToFrameTerminal("Begin Frame #"+B++,"purple");var r=avm2.systemDomain;d&&(timelineEnter("events"),v?v=!1:(enableAdvanceFrame.value&&timelineWrapBroadcastMessage(r,"advanceFrame"),
enableEnterFrame.value&&timelineWrapBroadcastMessage(r,"enterFrame"),enableConstructChildren.value&&timelineWrapBroadcastMessage(r,"constructChildren")),timelineWrapBroadcastMessage(r,"frameConstructed"),timelineWrapBroadcastMessage(r,"executeFrame"),timelineWrapBroadcastMessage(r,"exitFrame"),timelineLeave("events"));a._deferRenderEvent&&(a._deferRenderEvent=!1,r.broadcastMessage("render","render"));if(isCanvasVisible(b.canvas)&&(g||d)&&f)r=null,traceRenderer.value&&frameWriter.enter("> Invalidation"),
timelineEnter("invalidate"),r=a._processInvalidations(g),timelineLeave("invalidate"),traceRenderer.value&&frameWriter.leave("< Invalidation"),!disableRenderVisitor.value&&!r.isEmpty&&(timelineEnter("render"),traceRenderer.value&&frameWriter.enter("> Rendering"),(new RenderVisitor(a,b,r,g)).start(),traceRenderer.value&&frameWriter.leave("< Rendering"),timelineLeave("render")),showQuadTree.value&&(b.strokeStyle="green",renderQuadTree(b,a._qtree)),r&&(!g&&showRedrawRegions.value)&&(b.strokeStyle="red",
r.draw(b),b.stroke());m&&!disableMouseVisitor.value&&(d&&timelineEnter("mouse"),traceRenderer.value&&frameWriter.enter("> Mouse Handling"),a._handleMouse(),traceRenderer.value&&frameWriter.leave("< Mouse Handling"),d&&timelineLeave("mouse"),b.canvas.style.cursor=a._cursor);if(traceRenderer.value){frameWriter.enter("> Frame Counters");for(var p in FrameCounter.counts)frameWriter.writeLn(p+": "+FrameCounter.counts[p]);frameWriter.leave("< Frame Counters");g=performance.now()-l;m=1E3/g;y.push(m);traceRenderer.value&&
appendToFrameTerminal("End Frame Time: "+g.toFixed(2)+" ("+m.toFixed(2)+" fps, "+y.average().toFixed(2)+" average fps)","purple")}timelineLeave("frame")}else traceRenderer.value&&appendToFrameTerminal("Skip Frame","black");sampleEnd()}var g,l;!timeline&&hud.value&&initializeHUD(a,b.canvas);e();var m=1E3/a._frameRate,p=performance.now(),r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
window.setTimeout,s,u;if("undefined"!==typeof FirefoxCom&&FirefoxCom.requestSync("getBoolPref",{pref:"shumway.dummyMode",def:!1})){var w=a._concatenatedTransform,z=w.a,A=w.d;u=[];for(w=0;10>w;w++)u.push({position:{x:10+Math.random()*((b.canvas.width-20)/z),y:10+Math.random()*((b.canvas.height-20)/A)},velocity:{x:1*(Math.random()-0.5),y:1*(Math.random()-0.5)}});b.fillStyle="black";b.lineWidth=2;b.fillRect(0,0,b.canvas.width,b.canvas.height);s=function(){b.fillStyle="black";b.fillRect(0,0,b.canvas.width,
b.canvas.height);b.strokeStyle="green";u.forEach(function(a){var d=a.position;a=a.velocity;b.beginPath();b.arc(d.x,d.y,10,0,2*Math.PI,!0);b.stroke();var e=d.x+a.x,f=d.y+a.y;if(10>e||e>b.canvas.width/z-10)a.x*=-1;if(10>f||f>b.canvas.height/A-10)a.y*=-1;d.x+=a.x;d.y+=a.y})}}console.timeEnd("Initialize Renderer");console.timeEnd("Total");var v=!0,B=0,y=new metrics.Average(120),D=!0,F=!1;(function C(){var b=performance.now(),e=!0;d.onBeforeFrame&&(e={cancel:!1},d.onBeforeFrame(e),e=!e.cancel);if(e&&s)s();
else{f(e,D&&!F);D=!1;m=1E3/a._frameRate;if(turboMode.value)p=b;else{p+=m;for(var g=!1;p<b;)g=!0,p+=m;g&&!F?(F=!0,traceRenderer.value&&appendToFrameTerminal("Skip Frame Draw","red")):F=!1}if(e&&d.onAfterFrame)d.onAfterFrame();if(renderingTerminated){if(d.onTerminated)d.onTerminated()}else setTimeout(C,Math.max(0,p-performance.now()))}})();(function K(){renderingTerminated||((a._invalid||a._mouseMoved)&&f(!1,!0),D=!0,r(K))})()}
var tagHandler=function(){function a(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);var g=b.bbox={};w(a,d,g,e,f);if(g=b.isMorph=46===f||84===f){var m=b.bboxMorph={};w(a,d,m,e,f)}if(m=b.hasStrokes=83===f||84===f){var l=b.strokeBbox={};w(a,d,l,e,f);g&&(l=b.strokeBboxMorph={},w(a,d,l,e,f));readUb(a,d,5);b.fillWinding=readUb(a,d,1);b.nonScalingStrokes=readUb(a,d,1);b.scalingStrokes=readUb(a,d,1)}if(g){b.offsetMorph=readUi32(a,d);var r=b,p,s,l=D(a,d,r,e,f,g,m),v=l.lineBits,u=l.fillBits,A=r.records=[];do{var z=
{},l=y(a,d,z,e,f,g,u,v,m,s);p=l.eos;u=l.fillBits;v=l.lineBits;s=l.bits;A.push(z)}while(!p);l=F(a,d,r,e,f);u=l.fillBits;v=l.lineBits;r=r.recordsMorph=[];do A={},l=y(a,d,A,e,f,g,u,v,m,s),p=l.eos,u=l.fillBits,v=l.lineBits,s=l.bits,r.push(A);while(!p)}else{u=b;s=D(a,d,u,e,f,g,m);l=s.fillBits;v=s.lineBits;r=u.records=[];do A={},s=y(a,d,A,e,f,g,l,v,m,p),u=s.eos,l=s.fillBits,v=s.lineBits,p=s.bits,r.push(A);while(!u)}return b}function b(a,d,b,e,f){var g,m,l,r,p,s,u,A,w,z,E,y,D;b||(b={});if(4<f){g=26<f?readUi16(a,
d):readUi8(a,d);m=b.hasEvents=g>>7&1;l=b.clip=g>>6&1;r=b.hasName=g>>5&1;p=b.hasRatio=g>>4&1;s=b.hasCxform=g>>3&1;u=b.hasMatrix=g>>2&1;A=b.place=g>>1&1;b.move=g&1;70===f?(w=b.hasBackgroundColor=g>>15&1,z=b.hasVisibility=g>>14&1,b.hasImage=g>>12&1,E=b.hasClassName=g>>11&1,y=b.cache=g>>10&1,D=b.blend=g>>9&1,g=b.hasFilters=g>>8&1):(y=b.cache=0,D=b.blend=0,g=b.hasFilters=0);b.depth=readUi16(a,d);E&&(b.className=readString(a,d,0));A&&(b.symbolId=readUi16(a,d));u&&(u=b.matrix={},v(a,d,u,e,f));s&&(s=b.cxform=
{},B(a,d,s,e,f));p&&(b.ratio=readUi16(a,d));r&&(b.name=readString(a,d,0));l&&(b.clipDepth=readUi16(a,d));if(g){r=readUi8(a,d);for(l=b.filters=[];r--;)p={},C(a,d,p,e,f),l.push(p)}D&&(b.blendMode=readUi8(a,d));y&&(b.bmpCache=readUi8(a,d));if(m){readUi16(a,d);6<=e?readUi32(a,d):readUi16(a,d);f=b.events=[];do m={},y=a,D=d,l=m,s=e,r=g=void 0,g=6<=s?readUi32(y,D):readUi16(y,D),p=l.eoe=!g,l.onKeyUp=g>>7&1,l.onKeyDown=g>>6&1,l.onMouseUp=g>>5&1,l.onMouseDown=g>>4&1,l.onMouseMove=g>>3&1,l.onUnload=g>>2&1,l.onEnterFrame=
g>>1&1,l.onLoad=g&1,6<=s&&(l.onDragOver=g>>15&1,l.onRollOut=g>>14&1,l.onRollOver=g>>13&1,l.onReleaseOutside=g>>12&1,l.onRelease=g>>11&1,l.onPress=g>>10&1,l.onInitialize=g>>9&1,l.onData=g>>8&1,l.onConstruct=7<=s?g>>18&1:0,r=l.keyPress=g>>17&1,l.onDragOut=g>>16&1),p||(s=l.length=readUi32(y,D),r&&(l.keyCode=readUi8(y,D)),l.actionsData=readBinary(y,D,s-(r?1:0))),y=p,f.push(m);while(!y)}w&&(e=b.backgroundColor={},e.alpha=readUi8(a,d),e.red=readUi8(a,d),e.green=readUi8(a,d),e.blue=readUi8(a,d));z&&(b.visibility=
readUi8(a,d))}else b.place=1,b.symbolId=readUi16(a,d),b.depth=readUi16(a,d),b.hasMatrix=1,z=b.matrix={},v(a,d,z,e,f),d.remaining()&&(b.hasCxform=1,z=b.cxform={},B(a,d,z,e,f));return b}function d(a,d,b,e,f){b||(b={});5===f&&(b.symbolId=readUi16(a,d));b.depth=readUi16(a,d);return b}function e(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);21<f?(e=readUi32(a,d),90===f&&(b.deblock=readFixed8(a,d)),e=b.imgData=readBinary(a,d,e),b.alphaData=readBinary(a,d,0)):e=b.imgData=readBinary(a,d,0);switch(e[0]<<8|e[1]){case 65496:case 65497:b.mimeType=
"image/jpeg";break;case 35152:b.mimeType="image/png";break;case 18249:b.mimeType="image/gif";break;default:b.mimeType="application/octet-stream"}6===f&&(b.incomplete=1);return b}function f(a,d,b,e,f){var g,l,m,r;b||(b={});b.id=readUi16(a,d);if(7==f){r=b.characters=[];do{var p={};g=a;var s=d,u=p;l=e;m=f;var A=void 0,z=void 0,w=readUi8(g,s),E=u.eob=!w;8<=l?(z=u.blend=w>>5&1,A=u.hasFilters=w>>4&1):(z=u.blend=0,A=u.hasFilters=0);u.stateHitTest=w>>3&1;u.stateDown=w>>2&1;u.stateOver=w>>1&1;u.stateUp=w&
1;E||(u.symbolId=readUi16(g,s),u.depth=readUi16(g,s),w=u.matrix={},v(g,s,w,l,m),34===m&&(w=u.cxform={},B(g,s,w,l,m)),A&&(u.filterCount=readUi8(g,s),A=u.filters={},C(g,s,A,l,m)),z&&(u.blendMode=readUi8(g,s)));g=E;r.push(p)}while(!g);b.actionsData=readBinary(a,d,0)}else{g=readUi8(a,d);b.trackAsMenu=g>>7&1;p=readUi16(a,d);s=b.characters=[];do{u={};m=readUi8(a,d);g=u.eob=!m;8<=e?(r=u.blend=m>>5&1,l=u.hasFilters=m>>4&1):(r=u.blend=0,l=u.hasFilters=0);u.stateHitTest=m>>3&1;u.stateDown=m>>2&1;u.stateOver=
m>>1&1;u.stateUp=m&1;if(!g){u.symbolId=readUi16(a,d);u.depth=readUi16(a,d);m=u.matrix={};v(a,d,m,e,f);34===f&&(m=u.cxform={},B(a,d,m,e,f));if(l){m=readUi8(a,d);for(l=b.filters=[];m--;)z={},C(a,d,z,e,f),l.push(z)}r&&(u.blendMode=readUi8(a,d))}s.push(u)}while(!g);if(p){e=b.buttonActions=[];do f={},g=a,r=d,p=f,s=readUi16(g,r),u=readUi16(g,r),p.idleToOverDown=u>>7&1,p.outDownToIdle=u>>6&1,p.outDownToOverDown=u>>5&1,p.overDownToOutDown=u>>4&1,p.overDownToOverUp=u>>3&1,p.overUpToOverDown=u>>2&1,p.overUpToIdle=
u>>1&1,p.idleToOverUp=u&1,p.mouseEventFlags=u&511,p.keyPress=u>>9&127,p.overDownToIdle=u>>8&1,p.actionsData=s?readBinary(g,r,s-4):readBinary(g,r,0),e.push(f);while(0<d.remaining())}}return b}function g(a,d,b,e,f){var g;b||(b={});b.id=readUi16(a,d);var l=b.bbox={};w(a,d,l,e,f);l=b.matrix={};v(a,d,l,e,f);var l=b.glyphBits=readUi8(a,d),m=b.advanceBits=readUi8(a,d),r=b.records=[];do{var p={};g=a;var s=d,u=p,E=e,y=f,D=l,F=m,C=void 0;align(g,s);var ia=readUb(g,s,8),B=u.eot=!ia,C=g,ga=s,K=u,Z=E,ea=ia,ia=
K.hasFont=ea>>3&1,na=K.hasColor=ea>>2&1,ha=K.hasMoveY=ea>>1&1,ea=K.hasMoveX=ea&1;ia&&(K.fontId=readUi16(C,ga));na&&(33===y?(na=K.color={},A(C,ga,na,Z,y)):(na=K.color={},z(C,ga,na,Z,y)));ea&&(K.moveX=readSi16(C,ga));ha&&(K.moveY=readSi16(C,ga));ia&&(K.fontHeight=readUi16(C,ga));if(!B){C=readUi8(g,s);C=6<E?u.glyphCount=C:u.glyphCount=C&127;u=u.entries=[];for(E=C;E--;)C={},ga=g,K=s,Z=C,y=F,Z.glyphIndex=readUb(ga,K,D),Z.advance=readSb(ga,K,y),u.push(C)}g=B;r.push(p)}while(!g);return b}function l(a,d,
b,e,f){b||(b={});59===f&&(b.spriteId=readUi16(a,d));b.actionsData=readBinary(a,d,0);return b}function m(a,d,b,e,f){b||(b={});15==f&&(b.soundId=readUi16(a,d));89==f&&(b.soundClassName=readString(a,d,0));e=b.soundInfo={};readUb(a,d,2);e.stop=readUb(a,d,1);e.noMultiple=readUb(a,d,1);f=e.hasEnvelope=readUb(a,d,1);var g=e.hasLoops=readUb(a,d,1),l=e.hasOutPoint=readUb(a,d,1);if(e.hasInPoint=readUb(a,d,1))e.inPoint=readUi32(a,d);l&&(e.outPoint=readUi32(a,d));g&&(e.loopCount=readUi16(a,d));if(f){f=e.envelopeCount=
readUi8(a,d);for(e=e.envelopes=[];f--;){var g={},l=a,m=d,r=g;r.pos44=readUi32(l,m);r.volumeLeft=readUi16(l,m);r.volumeRight=readUi16(l,m);e.push(g)}}return b}function p(a,d,b){b||(b={});var e=readUi8(a,d);b.playbackRate=e>>2&3;b.playbackSize=e>>1&1;b.playbackType=e&1;var e=readUi8(a,d),f=b.streamCompression=e>>4&15;b.streamRate=e>>2&3;b.streamSize=e>>1&1;b.streamType=e&1;b.samplesCount=readUi32(a,d);2==f&&(b.latencySeek=readSi16(a,d));return b}function r(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);e=
b.format=readUi8(a,d);b.width=readUi16(a,d);b.height=readUi16(a,d);b.hasAlpha=36===f;3===e&&(b.colorTableSize=readUi8(a,d));b.bmpData=readBinary(a,d,0);return b}function s(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);var g=b.hasLayout=readUb(a,d,1);5<e?b.shiftJis=readUb(a,d,1):readUb(a,d,1);b.smallText=readUb(a,d,1);b.ansi=readUb(a,d,1);var l=b.wideOffset=readUb(a,d,1),m=b.wide=readUb(a,d,1);b.italic=readUb(a,d,1);b.bold=readUb(a,d,1);5<e?b.language=readUi8(a,d):(readUi8(a,d),b.language=0);var r=readUi8(a,
d);b.name=readString(a,d,r);75===f&&(b.resolution=20);r=b.glyphCount=readUi16(a,d);if(l){for(var l=b.offsets=[],p=r;p--;)l.push(readUi32(a,d));b.mapOffset=readUi32(a,d)}else{l=b.offsets=[];for(p=r;p--;)l.push(readUi16(a,d));b.mapOffset=readUi16(a,d)}l=b.glyphs=[];for(p=r;p--;){var s={};K(a,d,s,e,f);l.push(s)}if(m){l=b.codes=[];for(p=r;p--;)l.push(readUi16(a,d))}else{l=b.codes=[];for(p=r;p--;)l.push(readUi8(a,d))}if(g){b.ascent=readUi16(a,d);b.descent=readUi16(a,d);b.leading=readSi16(a,d);g=b.advance=
[];for(l=r;l--;)g.push(readSi16(a,d));for(g=b.bbox=[];r--;)l={},w(a,d,l,e,f),g.push(l);f=readUi16(a,d);for(e=b.kerning=[];f--;)r={},g=a,l=d,p=r,m?(p.code1=readUi16(g,l),p.code2=readUi16(g,l)):(p.code1=readUi8(g,l),p.code2=readUi8(g,l)),p.adjustment=readUi16(g,l),e.push(r)}return b}function u(a,d,b,e,f){b||(b={});b.flags=82===f?readUi32(a,d):0;b.name=82===f?readString(a,d,0):"";b.data=readBinary(a,d,0);return b}function w(a,d,b){align(a,d);var e=readUb(a,d,5),f=readSb(a,d,e),g=readSb(a,d,e),l=readSb(a,
d,e),e=readSb(a,d,e);b.xMin=f;b.xMax=g;b.yMin=l;b.yMax=e;align(a,d)}function z(a,d,b){b.red=readUi8(a,d);b.green=readUi8(a,d);b.blue=readUi8(a,d);b.alpha=255}function A(a,d,b){b.red=readUi8(a,d);b.green=readUi8(a,d);b.blue=readUi8(a,d);b.alpha=readUi8(a,d)}function v(a,d,b){align(a,d);if(readUb(a,d,1)){var e=readUb(a,d,5);b.a=readFb(a,d,e);b.d=readFb(a,d,e)}else b.a=1,b.d=1;readUb(a,d,1)?(e=readUb(a,d,5),b.b=readFb(a,d,e),b.c=readFb(a,d,e)):(b.b=0,b.c=0);var e=readUb(a,d,5),f=readSb(a,d,e),e=readSb(a,
d,e);b.tx=f;b.ty=e;align(a,d)}function B(a,d,b,e,f){align(a,d);e=readUb(a,d,1);var g=readUb(a,d,1),l=readUb(a,d,4);g?(b.redMultiplier=readSb(a,d,l),b.greenMultiplier=readSb(a,d,l),b.blueMultiplier=readSb(a,d,l),b.alphaMultiplier=4<f?readSb(a,d,l):256):(b.redMultiplier=256,b.greenMultiplier=256,b.blueMultiplier=256,b.alphaMultiplier=256);e?(b.redOffset=readSb(a,d,l),b.greenOffset=readSb(a,d,l),b.blueOffset=readSb(a,d,l),b.alphaOffset=4<f?readSb(a,d,l):0):(b.redOffset=0,b.greenOffset=0,b.blueOffset=
0,b.alphaOffset=0);align(a,d)}function y(a,d,b,e,f,g,l,m,r,p){var s=b.type=readUb(a,d,1),v=readUb(a,d,5),u=b.eos=!(s||v);if(s)e=p,f=f=f=0,f=b.isStraight=v>>4,e=(v&15)+2,f?(f=b.isGeneral=readUb(a,d,1))?(b.deltaX=readSb(a,d,e),b.deltaY=readSb(a,d,e)):(f=b.isVertical=readUb(a,d,1))?b.deltaY=readSb(a,d,e):b.deltaX=readSb(a,d,e):(b.controlDeltaX=readSb(a,d,e),b.controlDeltaY=readSb(a,d,e),b.anchorDeltaX=readSb(a,d,e),b.anchorDeltaY=readSb(a,d,e)),a=e;else{var A=0,w=0,z=0,E=0,y=0,A=2<f?b.hasNewStyles=v>>
4:b.hasNewStyles=0,w=b.hasLineStyle=v>>3&1,z=b.hasFillStyle1=v>>2&1,E=b.hasFillStyle0=v>>1&1;if(y=b.move=v&1)p=readUb(a,d,5),b.moveX=readSb(a,d,p),b.moveY=readSb(a,d,p);E&&(b.fillStyle0=readUb(a,d,l));z&&(b.fillStyle1=readUb(a,d,l));w&&(b.lineStyle=readUb(a,d,m));A&&(a=D(a,d,b,e,f,g,r),m=a.lineBits,l=a.fillBits);a=p}return{type:s,flags:v,eos:u,fillBits:l,lineBits:m,bits:a}}function D(a,d,b,e,f,g,l){var m,r=readUi8(a,d);m=2<f&&255===r?readUi16(a,d):r;for(r=b.fillStyles=[];m--;){var p={};E(a,d,p,e,
f,g);r.push(p)}r=readUi8(a,d);m=2<f&&255===r?readUi16(a,d):r;for(r=b.lineStyles=[];m--;){var p={},s=a,v=d,u=p,w=e,y=f,D=g,C=l;u.width=readUi16(s,v);D&&(u.widthMorph=readUi16(s,v));if(C){align(s,v);u.startCapStyle=readUb(s,v,2);var C=u.joinStyle=readUb(s,v,2),ia=u.hasFill=readUb(s,v,1);u.noHscale=readUb(s,v,1);u.noVscale=readUb(s,v,1);u.pixelHinting=readUb(s,v,1);readUb(s,v,5);u.noClose=readUb(s,v,1);u.endCapStyle=readUb(s,v,2);2===C&&(u.miterLimitFactor=readFixed8(s,v));ia?(u=u.fillStyle={},E(s,v,
u,w,y,D)):(C=u.color={},A(s,v,C,w,y),D&&(D=u.colorMorph={},A(s,v,D,w,y)))}else 22<y?(C=u.color={},A(s,v,C,w,y)):(C=u.color={},z(s,v,C,w,y)),D&&(D=u.colorMorph={},A(s,v,D,w,y));r.push(p)}a=F(a,d,b,e,f);return{fillBits:a.fillBits,lineBits:a.lineBits}}function F(a,d){align(a,d);var b=readUb(a,d,4),e=readUb(a,d,4);return{fillBits:b,lineBits:e}}function E(a,d,b,e,f,g){var l=b.type=readUi8(a,d);switch(l){case 0:22<f||g?(l=b.color={},A(a,d,l,e,f)):(l=b.color={},z(a,d,l,e,f));g&&(b=b.colorMorph={},A(a,d,
b,e,f));break;case 16:case 18:case 19:var m=b.matrix={};v(a,d,m,e,f);g&&(m=b.matrixMorph={},v(a,d,m,e,f));83===f?(b.spreadMode=readUb(a,d,2),b.interpolationMode=readUb(a,d,2)):readUb(a,d,4);for(var r=b.count=readUb(a,d,4),m=b.records=[];r--;){var p={},s=a,u=d,w=p,E=e,y=f,D=g;w.ratio=readUi8(s,u);if(22<y){var C=w.color={};A(s,u,C,E,y)}else C=w.color={},z(s,u,C,E,y);D&&(w.ratioMorph=readUi8(s,u),w=w.colorMorph={},A(s,u,w,E,y));m.push(p)}19===l&&(b.focalPoint=readFixed8(a,d),g&&(b.focalPointMorph=readFixed8(a,
d)));break;case 64:case 65:case 66:case 67:b.bitmapId=readUi16(a,d),m=b.matrix={},v(a,d,m,e,f),g&&(g=b.matrixMorph={},v(a,d,g,e,f)),b.condition=64===l||67===l}}function C(a,d,b,e,f){var g=b.type=readUi8(a,d);switch(g){case 0:case 2:case 3:case 4:case 7:var l;l=4===g||7===g?readUi8(a,d):1;for(var m=b.colors=[],r=l;r--;){var p={};A(a,d,p,e,f);m.push(p)}3===g&&(m=b.higlightColor={},A(a,d,m,e,f));if(4===g||7===g){e=b.ratios=[];for(f=l;f--;)e.push(readUi8(a,d))}b.blurX=readFixed(a,d);b.blurY=readFixed(a,
d);2!==g&&(b.angle=readFixed(a,d),b.distance=readFixed(a,d));b.strength=readFixed8(a,d);b.innerShadow=readUb(a,d,1);b.knockout=readUb(a,d,1);b.compositeSource=readUb(a,d,1);3===g?b.onTop=readUb(a,d,1):readUb(a,d,1);4===g||7===g?b.passes=readUb(a,d,4):readUb(a,d,4);break;case 1:b.blurX=readFixed(a,d);b.blurY=readFixed(a,d);b.passes=readUb(a,d,5);readUb(a,d,3);break;case 5:l=b.columns=readUi8(a,d);m=b.rows=readUi8(a,d);b.divisor=readFloat(a,d);b.bias=readFloat(a,d);g=b.weights=[];for(l*=m;l--;)g.push(readFloat(a,
d));g=b.defaultColor={};A(a,d,g,e,f);readUb(a,d,6);b.clamp=readUb(a,d,1);b.preserveAlpha=readUb(a,d,1);break;case 6:b=b.matrix=[];for(e=20;e--;)b.push(readFloat(a,d))}}function K(a,d,b,e,f){var g=F(a,d,b,e,f),l=g.fillBits,g=g.lineBits,m=b.records=[];do{var r={},g=y(a,d,r,e,f,!1,l,g,!1,p);b=g.eos;var l=g.fillBits,g=g.lineBits,p=p;m.push(r)}while(!b)}return{"0":void 0,1:void 0,2:a,4:b,5:d,6:e,7:f,8:function(a,d,b){b||(b={});b.id=0;b.imgData=readBinary(a,d,0);b.mimeType="application/octet-stream";return b},
9:function(a,d,b,e,f){b||(b={});var g=b.color={};z(a,d,g,e,f);return b},10:function(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);for(var g=readUi16(a,d),l=b.glyphCount=g/2,m=[],r=l-1;r--;)m.push(readUi16(a,d));b.offsets=[g].concat(m);for(g=b.glyphs=[];l--;)m={},K(a,d,m,e,f),g.push(m);return b},11:g,12:l,13:void 0,14:function(a,d,b){b||(b={});b.id=readUi16(a,d);var e=readUi8(a,d);b.soundFormat=e>>4&15;b.soundRate=e>>2&3;b.soundSize=e>>1&1;b.soundType=e&1;b.samplesCount=readUi32(a,d);b.soundData=readBinary(a,
d,0);return b},15:m,17:void 0,18:p,19:function(a,d,b){b||(b={});b.data=readBinary(a,d,0);return b},20:r,21:e,22:a,23:void 0,24:void 0,26:b,28:d,32:a,33:g,34:f,35:e,36:r,37:function(a,d,b,e,f){b||(b={});b.id=readUi16(a,d);var g=b.bbox={};w(a,d,g,e,f);var l=readUi16(a,d),g=b.hasText=l>>7&1;b.wordWrap=l>>6&1;b.multiline=l>>5&1;b.password=l>>4&1;b.readonly=l>>3&1;var m=b.hasColor=l>>2&1,r=b.hasMaxLength=l>>1&1,p=b.hasFont=l&1,s=b.hasFontClass=l>>15&1;b.autoSize=l>>14&1;var v=b.hasLayout=l>>13&1;b.noSelect=
l>>12&1;b.border=l>>11&1;b.wasStatic=l>>10&1;b.html=l>>9&1;b.useOutlines=l>>8&1;p&&(b.fontId=readUi16(a,d));s&&(b.fontClass=readString(a,d,0));p&&(b.fontHeight=readUi16(a,d));m&&(l=b.color={},A(a,d,l,e,f));r&&(b.maxLength=readUi16(a,d));v&&(b.align=readUi8(a,d),b.leftMargin=readUi16(a,d),b.rightMargin=readUi16(a,d),b.indent=readSi16(a,d),b.leading=readSi16(a,d));b.variableName=readString(a,d,0);g&&(b.initialText=readString(a,d,0));return b},39:void 0,43:function(a,d,b){b||(b={});b.name=readString(a,
d,0);return b},45:p,46:a,48:s,56:function(a,d,b){b||(b={});for(var e=readUi16(a,d),f=b.exports=[];e--;){var g={};g.symbolId=readUi16(a,d);g.className=readString(a,d,0);f.push(g)}return b},57:void 0,58:void 0,59:l,60:void 0,61:void 0,62:void 0,64:void 0,65:void 0,66:void 0,69:function(a,d,b){b||(b={});readUb(a,d,1);b.useDirectBlit=readUb(a,d,1);b.useGpu=readUb(a,d,1);b.hasMetadata=readUb(a,d,1);b.doAbc=readUb(a,d,1);b.noCrossDomainCaching=readUb(a,d,1);b.relativeUrls=readUb(a,d,1);b.network=readUb(a,
d,1);readUb(a,d,24);return b},70:b,71:void 0,72:u,73:void 0,74:void 0,75:s,76:function(a,d,b){b||(b={});for(var e=readUi16(a,d),f=b.exports=[];e--;){var g={};g.symbolId=readUi16(a,d);g.className=readString(a,d,0);f.push(g)}return b},77:void 0,78:function(a,d,b,e,f){b||(b={});b.symbolId=readUi16(a,d);var g=b.splitter={};w(a,d,g,e,f);return b},82:u,83:a,84:a,86:function(a,d,b){b||(b={});for(var e=readEncodedU32(a,d),f=b.scenes=[];e--;){var g={};g.offset=readEncodedU32(a,d);g.name=readString(a,d,0);
f.push(g)}e=readEncodedU32(a,d);for(f=b.labels=[];e--;)g={},g.frame=readEncodedU32(a,d),g.name=readString(a,d,0),f.push(g);return b},87:function(a,d,b){b||(b={});b.id=readUi16(a,d);readUi32(a,d);b.data=readBinary(a,d,0);return b},88:void 0,89:m,90:e,91:void 0}}(this),readHeader=function(a,b,d){d||(d={});var e=d.bbox={};align(a,b);var f=readUb(a,b,5),g=readSb(a,b,f),l=readSb(a,b,f),m=readSb(a,b,f),f=readSb(a,b,f);e.xMin=g;e.xMax=l;e.yMin=m;e.yMax=f;align(a,b);e=readUi8(a,b);d.frameRate=readUi8(a,b)+
e/256;d.frameCount=readUi16(a,b);return d};
function readTags(a,b,d,e,f){var g=a.tags,l=b.bytes,m,p=null;a._readTag&&(p=a._readTag,delete a._readTag);try{for(;b.pos<b.end;){m=b.pos;b.ensure(2);var r=readUi16(l,b);if(!r){e=!0;break}var s=r>>6,u=r&63;63===u&&(b.ensure(4),u=readUi32(l,b));if(p){if(1===s&&1===p.code){p.repeat++;b.pos+=u;continue}g.push(p);f&&void 0!==p.id&&f(a);p=null}b.ensure(u);var w=b.substream(b.pos,b.pos+=u),z=w.bytes,u={code:s};if(39===s)u.type="sprite",u.id=readUi16(z,w),u.frameCount=readUi16(z,w),u.tags=[],readTags(u,w,
d,!0);else if(1===s)u.repeat=1;else{var A=tagHandler[s];A&&A(z,w,u,d,s)}p=u}p&&e?(p.finalTag=!0,g.push(p),f&&f(a)):a._readTag=p}catch(v){if(v!==StreamNoDataError)throw v;b.pos=m;a._readTag=p}}function HeadTailBuffer(a){this.bufferSize=a||16;this.buffer=new Uint8Array(this.bufferSize);this.pos=0}
HeadTailBuffer.prototype={push:function(a,b){var d=this.pos+a.length;if(this.bufferSize<d){for(var e=this.bufferSize;e<d;)e<<=1;d=new Uint8Array(e);0<this.bufferSize&&d.set(this.buffer);this.buffer=d;this.bufferSize=e}this.buffer.set(a,this.pos);this.pos+=a.length;if(b)return this.pos>=b},getHead:function(a){return this.buffer.subarray(0,a)},getTail:function(a){return this.buffer.subarray(a,this.pos)},removeHead:function(a){a=this.getTail(a);this.buffer=new Uint8Array(this.bufferSize);this.buffer.set(a);
this.pos=a.length},get arrayBuffer(){return this.buffer.buffer},get length(){return this.pos},createStream:function(){return new Stream(this.arrayBuffer,0,this.length)}};function CompressedPipe(a,b){this.target=a;this.length=b;this.initialize=!0;this.buffer=new HeadTailBuffer(8096);this.state={bitBuffer:0,bitLength:0,compression:{}};this.output={data:new Uint8Array(b),available:0,completed:!1}}
CompressedPipe.prototype={push:function(a,b){var d=this.buffer;if(this.initialize){if(!d.push(a,2))return;var e=d.getHead(2);verifyDeflateHeader(e);d.removeHead(2);this.initialize=!1}else d.push(a);e=d.createStream();e.bitBuffer=this.state.bitBuffer;e.bitLength=this.state.bitLength;var f=this.output,g=f.available;try{do inflateBlock(e,f,this.state.compression);while(e.pos<d.length&&!f.completed)}catch(l){if(l!==InflateNoDataError)throw l;}finally{this.state.bitBuffer=e.bitBuffer,this.state.bitLength=
e.bitLength}d.removeHead(e.pos);this.target.push(f.data.subarray(g,f.available),b)}};function BodyParser(a,b,d){this.swf={swfVersion:a,parseTime:0};this.buffer=new HeadTailBuffer(32768);this.initialize=!0;this.totalRead=0;this.length=b;this.options=d}
BodyParser.prototype={push:function(a,b){if(0!==a.length){var d=this.swf,e=d.swfVersion,f=this.buffer,g=this.options,l;if(this.initialize){if(!f.push(a,27))return;l=f.createStream();var m=l.bytes;readHeader(m,l,d);if(4420==readUi16(m,l)){l.ensure(4);var m=l.substream(l.pos,l.pos+=4),p={code:69};(0,tagHandler[69])(m.bytes,m,p,e,69);d.fileAttributes=p}else l.pos-=2,d.fileAttributes={};if(g.onstart)g.onstart(d);d.tags=[];this.initialize=!1}else f.push(a),l=f.createStream();m=!1;b&&(d.bytesLoaded=b.bytesLoaded,
d.bytesTotal=b.bytesTotal,m=b.bytesLoaded>=b.bytesTotal);p=performance.now();readTags(d,l,e,m,g.onprogress);d.parseTime+=performance.now()-p;e=l.pos;f.removeHead(e);this.totalRead+=e;if(g.oncomplete&&d.tags[d.tags.length-1].finalTag)g.oncomplete(d)}}};
SWF.parseAsync=function(a){var b=new HeadTailBuffer,d={push:function(e,f){if(void 0!==this.target)return this.target.push(e,f);if(!b.push(e,8))return null;var g=b.getHead(8),l=g[0],m=g[1],p=g[2];if((70===l||67===l)&&87===m&&83===p)l=67===l,g=g[3],m=b.createStream(),m.pos+=4,m=readUi32(null,m)-8,g=new BodyParser(g,m,a),l&&(g=new CompressedPipe(g,m)),g.push(b.getTail(8),f),d.target=g;else{var g=!1,r;255===l&&216===m&&255===p?(g=!0,r="image/jpeg"):137===l&&(80===m&&78===p)&&(g=!0,r="image/png");if(g){var s=
r,u=new Uint8Array(f.bytesTotal);u.set(e);var w=e.length;d.target={push:function(a){u.set(a,w);w+=a.length},close:function(){var d={},b;b="image/jpeg"==s?parseJpegChunks(d,u):[u];d={type:"image",props:d,data:new Blob(b,{type:s})};a.oncomplete&&a.oncomplete(d)}}}}b=null},close:function(){if(b){var d={command:"empty",data:b.buffer.subarray(0,b.pos)};a.oncomplete&&a.oncomplete(d)}void 0!==this.target&&this.target.close&&this.target.close()}};return d};
SWF.parse=function(a,b){b||(b={});var d=SWF.parseAsync(b),e=new Uint8Array(a);d.push(e,{bytesLoaded:e.length,bytesTotal:e.length});d.close()};var $RELEASE=!1,isWorker="undefined"===typeof window;
function defineSymbol(a,b){var d;switch(a.code){case 6:case 21:case 35:case 90:case 8:d=defineImage(a,b);break;case 20:case 36:d=defineBitmap(a);break;case 7:case 34:d=defineButton(a,b);break;case 37:d=defineText(a,b);break;case 10:case 48:case 75:case 91:d=defineFont(a,b);break;case 46:case 84:case 2:case 22:case 32:case 83:d=defineShape(a,b);break;case 14:d=defineSound(a,b);break;case 87:d={type:"binary",id:a.id,data:a.data};break;case 39:d={};for(var e={type:"frame"},f=[],g=a.tags,l=null,m=0,p=
null,r=0,s=g.length;r<s;r++){var u=g[r];switch(u.code){case 12:l||(l=[]);l.push(m);l.push(u.actionsData);break;case 15:(e.startSounds||(e.startSounds=[])).push(u);break;case 18:try{p=createSoundStream(u),e.soundStream=p.info}catch(w){}break;case 19:p&&(e.soundStreamBlock=p.decode(u.data));break;case 43:e.labelName=u.name;break;case 4:case 26:case 70:d[u.depth]=u;break;case 5:case 28:d[u.depth]=null;break;case 1:m+=u.repeat,e.repeat=u.repeat,e.depths=d,f.push(e),d={},e={type:"frame"}}}d={type:"sprite",
id:a.id,frameCount:a.frameCount,frames:f,frameScripts:l};break;case 11:case 33:d=defineLabel(a,b)}if(!d)return{command:"error",message:"unknown symbol type: "+a.code};d.isSymbol=!0;return b[a.id]=d}
function createParsingContext(a){var b={},d={},e={type:"frame"},f=0,g=null,l=0;return{onstart:function(d){a({command:"init",result:d})},onprogress:function(m){if(Date.now()-l>1E3/24||m.bytesLoaded===m.bytesTotal)a({command:"progress",result:{bytesLoaded:m.bytesLoaded,bytesTotal:m.bytesTotal}}),l=Date.now();m=m.tags;for(var p=m.length;f<p;f++){var r=m[f];if("id"in r)r=defineSymbol(r,d),a(r,r.transferables);else switch(r.code){case 86:e.sceneData=r;break;case 78:a({isSymbol:!0,id:r.symbolId,updates:{scale9Grid:r.splitter}});
break;case 82:case 72:var s=e.abcBlocks;s?s.push({data:r.data,flags:r.flags}):e.abcBlocks=[{data:r.data,flags:r.flags}];break;case 12:(s=e.actionBlocks)?s.push(r.actionsData):e.actionBlocks=[r.actionsData];break;case 59:(e.initActionBlocks||(e.initActionBlocks=[])).push({spriteId:r.spriteId,actionsData:r.actionsData});break;case 15:s=e.startSounds;s||(e.startSounds=s=[]);s.push(r);break;case 18:try{g=createSoundStream(r),e.soundStream=g.info}catch(u){}break;case 19:g&&(e.soundStreamBlock=g.decode(r.data));
break;case 56:s=e.exports;e.exports=s?s.concat(r.exports):r.exports.slice(0);break;case 76:s=e.symbolClasses;e.symbolClasses=s?s.concat(r.exports):r.exports.slice(0);break;case 43:e.labelName=r.name;break;case 4:case 26:case 70:b[r.depth]=r;break;case 5:case 28:b[r.depth]=null;break;case 9:e.bgcolor=r.color;break;case 1:e.repeat=r.repeat,e.depths=b,e.complete=!!r.finalTag,a(e),b={},e={type:"frame"}}}},oncomplete:function(d){a(d);var b;"number"===typeof d.swfVersion&&(b=d.bbox,b={topic:"parseInfo",
parseTime:d.parseTime,bytesTotal:d.bytesTotal,swfVersion:d.swfVersion,frameRate:d.frameRate,width:(b.xMax-b.xMin)/20,height:(b.yMax-b.yMin)/20,isAvm2:!!d.fileAttributes.doAbc});a({command:"complete",stats:b})}}}function parseBytes(a,b){SWF.parse(a,createParsingContext(b))}function ResourceLoader(a){this.subscription=null;var b=this;isWorker?(this.messenger=a,a.onmessage=function(a){b.listener(a.data)}):this.messenger={postMessage:function(a){b.onmessage({data:a})}}}
ResourceLoader.prototype={terminate:function(){this.listener=this.messenger=null},onmessage:function(a){this.listener(a.data)},postMessage:function(a){this.listener&&this.listener(a)},listener:function(a){this.subscription?this.subscription.callback(a.data,a.progress):"pipe:"===a?(this.subscription={subscribe:function(a){this.callback=a}},this.parseLoadedData(this.messenger,this.subscription)):this.parseLoadedData(this.messenger,a)},parseLoadedData:function(a,b){function d(d,b){try{a.postMessage(d,
b)}catch(e){if("DataCloneError"!=e)throw e;a.postMessage(d)}}if(b instanceof ArrayBuffer)parseBytes(b,d);else if("subscribe"in b){var e=SWF.parseAsync(createParsingContext(d));b.subscribe(function(a,d){a?e.push(a,d):e.close()})}else if("undefined"!==typeof FileReaderSync){var f=new FileReaderSync,f=f.readAsArrayBuffer(b);parseBytes(f,d)}else f=new FileReader,f.onload=function(){parseBytes(this.result,d)},f.readAsArrayBuffer(b)}};if(isWorker)var loader=new ResourceLoader(this);
function ActionsDataStream(a,b){this.array=a;this.position=0;this.end=a.length;this.readString=6<=b?this.readUTF8String:this.readANSIString;var d=new ArrayBuffer(4);(new Int32Array(d))[0]=1;if(!(new Uint8Array(d))[0])throw Error("big-endian platform");}
ActionsDataStream.prototype={readUI8:function(){return this.array[this.position++]},readUI16:function(){var a=this.position,b=this.array,b=b[a+1]<<8|b[a];this.position=a+2;return b},readSI16:function(){var a=this.position,b=this.array,b=b[a+1]<<8|b[a];this.position=a+2;return 32768>b?b:b-65536},readInteger:function(){var a=this.position,b=this.array,b=b[a]|b[a+1]<<8|b[a+2]<<16|b[a+3]<<24;this.position=a+4;return b},readFloat:function(){var a=this.position,b=this.array,d=new ArrayBuffer(4),e=new Uint8Array(d);
e[0]=b[a];e[1]=b[a+1];e[2]=b[a+2];e[3]=b[a+3];this.position=a+4;return(new Float32Array(d))[0]},readDouble:function(){var a=this.position,b=this.array,d=new ArrayBuffer(8),e=new Uint8Array(d);e[4]=b[a];e[5]=b[a+1];e[6]=b[a+2];e[7]=b[a+3];e[0]=b[a+4];e[1]=b[a+5];e[2]=b[a+6];e[3]=b[a+7];this.position=a+8;return(new Float64Array(d))[0]},readBoolean:function(){return!!this.readUI8()},readANSIString:function(){for(var a="",b;b=this.readUI8();)a+=String.fromCharCode(b);return a},readUTF8String:function(){for(var a=
"",b;b=this.readUI8();)if(128>b)a+=String.fromCharCode(b);else{if(128===(b&192))throw Error("Invalid UTF8 encoding");var d=192,e=5;do{var f=d>>1|128;if((b&f)===d)break;d=f;--e}while(0<=e);d=b&(1<<e)-1;for(f=5;f>=e;--f){b=this.readUI8();if(128!==(b&192))throw Error("Invalid UTF8 encoding");d=d<<6|b&63}a=65536<=d?a+String.fromCharCode(d-65536>>10&1023|55296,d&1023|56320):a+String.fromCharCode(d)}return a},readBytes:function(a){var b=this.position,d=Math.max(this.end-b,0);d<a&&(a=d);d=this.array.subarray(b,
b+a);this.position=b+a;return d}};"undefined"!==typeof GLOBAL&&(GLOBAL.ActionsDataStream=ActionsDataStream);var AVM1_TRACE_ENABLED=!1,AVM1_ERRORS_IGNORED=!0,MAX_AVM1_INSTRUCTIONS_LIMIT=1E5,MAX_AVM1_ERRORS_LIMIT=1E3,MAX_AVM1_STACK_LIMIT=256;function AS2ScopeListItem(a,b){this.scope=a;this.next=b}AS2ScopeListItem.prototype={create:function(a){return new AS2ScopeListItem(a,this)}};
function AS2Context(a){this.swfVersion=a;this.globals=new avm1lib.AS2Globals(this);this.initialScope=new AS2ScopeListItem(this.globals,null);this.assets={};this.stackDepth=this.instructionsExecuted=0;this.isTryCatchListening=!1;this.errorsIgnored=0;this.deferScriptExecution=!0;this.pendingScripts=[]}AS2Context.instance=null;
AS2Context.prototype={addAsset:function(a,b){this.assets[a]=b},resolveTarget:function(a){a?"string"===typeof a&&(a=lookupAS2Children(a,this.defaultTarget,this.globals.asGetPublicProperty("_root"))):a=this.defaultTarget;if("object"!==typeof a||null===a||!("$nativeObject"in a))throw Error("Invalid AS2 target object: "+Object.prototype.toString.call(a));return a},resolveLevel:function(a){return this.resolveTarget(this.globals["_level"+a])},addToPendingScripts:function(a){if(!this.deferScriptExecution)return a();
this.pendingScripts.push(a)},flushPendingScripts:function(){for(var a=this.pendingScripts;a.length;)a.shift()();this.deferScriptExecution=!1}};function AS2Error(a){this.error=a}function AS2CriticalError(a,b){this.message=a;this.error=b}AS2CriticalError.prototype=Object.create(Error.prototype);function isAS2MovieClip(a){return"object"===typeof a&&a&&a instanceof avm1lib.AS2MovieClip}
function as2GetType(a){if(null===a)return"null";var b=typeof a;return"function"===b?"object":"object"===b&&isAS2MovieClip(a)?"movieclip":b}function as2ToPrimitive(a){return"object"!==as2GetType(a)?a:a.valueOf()}function as2ToAddPrimitive(a){return"object"!==as2GetType(a)?a:a instanceof Date&&6<=AS2Context.instance.swfVersion?a.toString():a.valueOf()}
function as2ToBoolean(a){switch(as2GetType(a)){default:case "undefined":case "null":return!1;case "boolean":return a;case "number":return 0!==a&&!isNaN(a);case "string":return 0!==a.length;case "movieclip":case "object":return!0}}
function as2ToNumber(a){a=as2ToPrimitive(a);switch(as2GetType(a)){case "undefined":case "null":return 7<=AS2Context.instance.swfVersion?NaN:0;case "boolean":return a?1:0;case "number":return a;case "string":return""===a&&5>AS2Context.instance.swfVersion?0:+a;default:return 5<=AS2Context.instance.swfVersion?NaN:0}}function as2ToInteger(a){a=as2ToNumber(a);return isNaN(a)?0:!isFinite(a)||0===a?a:(0>a?-1:1)*Math.abs(a)|0}
function as2ToInt32(a){a=as2ToNumber(a);return isNaN(a)||!isFinite(a)||0===a?0:a|0}
function as2ToString(a){switch(as2GetType(a)){case "undefined":return 7<=AS2Context.instance.swfVersion?"undefined":"";case "null":return"null";case "boolean":return a?"true":"false";case "number":return a.toString();case "string":return a;case "movieclip":return a.$targetPath;case "object":var b=a.toString!==Function.prototype.toString?a.toString():a;return"string"===typeof b?b:"function"===typeof a?"[type Function]":"[type Object]"}}
function as2Compare(a,b){var d=as2ToPrimitive(a),e=as2ToPrimitive(b);return"string"===typeof d&&"string"===typeof e?d<e:as2ToNumber(d)<as2ToNumber(e)}function as2InstanceOf(a,b){return a instanceof b?!0:!1}function as2ResolveProperty(a,b){var d=Multiname.getPublicQualifiedName(b);if(d in a)return b;if(isNumeric(b))return null;var d=d.toLowerCase(),e;for(e in a)if(e.toLowerCase()===d)return e.substr(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length);return null}
function as2GetPrototype(a){return a&&a.asGetPublicProperty("prototype")}function isAvm2Class(a){return"object"===typeof a&&null!==a&&"instanceConstructor"in a}
function as2CreatePrototypeProxy(a){var b=a.asGetPublicProperty("prototype");return"undefined"===typeof Proxy?(console.error("ES6 proxies are not found"),b):Proxy.create({getOwnPropertyDescriptor:function(a){return Object.getOwnPropertyDescriptor(b,a)},getPropertyDescriptor:function(a){for(var e=b;e;e=Object.getPrototypeOf(e)){var f=Object.getOwnPropertyDescriptor(e,a);if(f)return f}},getOwnPropertyNames:function(){return Object.getOwnPropertyNames(b)},getPropertyNames:function(){for(var a=Object.getOwnPropertyNames(b),
e=Object.getPrototypeOf(b);e;e=Object.getPrototypeOf(e))a=a.concat(Object.getOwnPropertyNames(e));return a},defineProperty:function(d,e){e&&("function"===typeof e.value&&e.value._setClass&&e.value._setClass(a),"function"===typeof e.get&&e.get._setClass&&e.get._setClass(a),"function"===typeof e.set&&e.set._setClass&&e.set._setClass(a));return Object.defineProperty(b,d,e)},"delete":function(a){return delete b[a]},fix:function(){}})}
function executeActions(a,b,d){var e=ActionTracerFactory.get(),f=b.initialScope.create(d),g=AS2Context.instance;try{AS2Context.instance=b,b.defaultTarget=d,b.globals.asSetPublicProperty("this",d),e.message("ActionScript Execution Starts"),e.indent(),interpretActions(a,f,null,[])}finally{b.instructionsExecuted=0,b.errorsIgnored=0,e.unindent(),e.message("ActionScript Execution Stops"),AS2Context.instance=g}}
function lookupAS2Children(a,b,d){var e=a.split(/[\/.]/g);""===e[e.length-1]&&e.pop();if(""===e[0]||"_level0"===e[0]||"_root"===e[0])b=d,e.shift();for(;0<e.length;){d=b;b=b.$lookupChild(e[0]);if(!b)throw Error(e[0]+" (expr "+a+") is not found in "+d._target);e.shift()}return b}
function createBuiltinType(a,b){if(a===Array){var d=b;1==b.length&&"number"===typeof b[0]&&(d=[],d.length=b[0]);return d}if(a===Boolean||a===Number||a===String||a===Function)return a.apply(null,b);if(a===Date)switch(b.length){case 0:return new Date;case 1:return new Date(b[0]);default:return new Date(b[0],b[1],2<b.length?b[2]:1,3<b.length?b[3]:0,4<b.length?b[4]:0,5<b.length?b[5]:0,6<b.length?b[6]:0)}if(a===Object)return{}}var AS2_SUPER_STUB={};
function interpretActions(a,b,d,e){function f(a){if(a)try{z.defaultTarget=lookupAS2Children(a,B,v.asGetPublicProperty("_root"))}catch(d){throw z.defaultTarget=null,d;}else z.defaultTarget=D}function g(a,e,f,g){var l,m=function(){var a={};a.asSetPublicProperty("this",this);a.asSetPublicProperty("arguments",arguments);a.asSetPublicProperty("super",AS2_SUPER_STUB);a.asSetPublicProperty("__class",l);var m=b.create(a),r;for(r=0;r<arguments.length||r<e.length;r++)a.asSetPublicProperty(e[r],arguments[r]);
a=[];if(f)for(r=0;r<f.length;r++){var p=f[r];if(p)if("param"==p.type)a[r]=arguments[p.index];else switch(p.name){case "this":a[r]=this;break;case "arguments":a[r]=arguments;break;case "super":a[r]=AS2_SUPER_STUB;break;case "_global":a[r]=v;break;case "_parent":a[r]=D.asGetPublicProperty("_parent");break;case "_root":a[r]=v.asGetPublicProperty("_root")}}r=AS2Context.instance;var s;try{AS2Context.instance=z;s=0===z.instructionsExecuted;z.defaultTarget=D;E.indent();z.stackDepth++;if(256<=z.stackDepth)throw new AS2CriticalError("long running script -- AVM1 recursion limit is reached");
return interpretActions(g,m,d,a)}finally{s&&(z.instructionsExecuted=0,z.errorsIgnored=0),z.stackDepth--,E.unindent(),z.defaultTarget=B,AS2Context.instance=r}};l=m;m._setClass=function(a){l=a};m.instanceConstructor=m;m.debugName="avm1 "+(a||"<function>");a&&(m.name=a);return m}function l(a,d){var b,e,f;if(0<=a.indexOf(":")){e=a.split(":");b=lookupAS2Children(e[0],B,v.asGetPublicProperty("_root"));if(!b)throw Error(e[0]+" is undefined");e=e[1]}else if(0<=a.indexOf(".")){var g=a.split(".");e=g.pop();
b=v;for(f=0;f<g.length;f++)if(b=b.asGetPublicProperty(g[f])||b[g[f]],!b)throw Error(g.slice(0,f+1)+" is undefined");}if(!b)return null;f=as2ResolveProperty(b,e);return(g=null!==f)||d?{obj:b,name:f||e,resolved:g}:null}function m(){var a=D.asGetPublicProperty("this");if(a)return a;for(a=b;a;a=a.next)if(ja=as2ResolveProperty(a.scope,"this"),null!==ja)return a.scope.asGetPublicProperty(ja)}function p(a){if(D.asHasProperty(void 0,a,0))return D.asGetPublicProperty(a);var d=l(a);if(d)return d.obj.asGetPublicProperty(d.name);
for(var e,d=m(),f=b;f;f=f.next)if(e=as2ResolveProperty(f.scope,a),null!==e)return f.scope.asGetPublicProperty(e);if(d&&(e=as2ResolveProperty(d,a)))return d.asGetPublicProperty(e);if(a=isAS2MovieClip(B)&&B.$lookupChild(a))return a}function r(a){var d=p(a);if(!(d instanceof Object))throw Error('Object "'+a+'" is not found');return d}function s(a,d){if(isNaN(a)||0>a||a>d||a!=(0|a))throw Error("Invalid number of arguments: "+a);}function u(a){var d=+a.pop();s(d,a.length);for(var b=[],e=0;e<d;e++)b.push(a.pop());
return b}function w(a){for(;0<a&&A.position<A.end;){var d=128<=A.readUI8()?A.readUI16():0;A.position+=d;a--}C=A.position}var z=AS2Context.instance,A=new ActionsDataStream(a,z.swfVersion),v=z.globals,B=z.defaultTarget,y=[],D=b.scope,F=5<=z.swfVersion,E=ActionTracerFactory.get(),C;D.$nativeObject&&D.$nativeObject._deferScriptExecution&&(z.deferScriptExecution=!0);for(var K=!1,Q;A.position<A.end;)try{for(;A.position<A.end;){if(1E5<=z.instructionsExecuted++)throw new AS2CriticalError("long running script -- AVM1 instruction limit is reached");
var R=A.readUI8(),T=128<=R?A.readUI16():0;C=A.position+T;Q=0;E.print(A.position,R,y);var L,G,I,J,H,P,O,U,M,N,W,fa,ca,da,ia,ja,ga,la,Z,ea,na,ha,oa,Aa,$,ra,Ea,pa,sa,ta,aa,Oa;switch(R|0){case 129:L=A.readUI16();var Ia=A.readUI8();C++;fa=6===Ia?"gotoAndPlay":"gotoAndStop";v[fa](L+1);break;case 131:var Fa=A.readString(),Pa=A.readString();v.getURL(Fa,Pa);break;case 4:v.nextFrame();break;case 5:v.prevFrame();break;case 6:v.play();break;case 7:v.stop();break;case 8:v.toggleHighQuality();break;case 9:v.stopAllSounds();
break;case 138:L=A.readUI16();I=A.readUI8();v.ifFrameLoaded(L)||w(I);break;case 139:da=A.readString();f(da);break;case 140:var ua=A.readString();v.gotoLabel(ua);break;case 150:for(;A.position<C;){G=A.readUI8();switch(G){case 0:la=A.readString();break;case 1:la=A.readFloat();break;case 2:la=null;break;case 3:la=void 0;break;case 4:la=e[A.readUI8()];break;case 5:la=A.readBoolean();break;case 6:la=A.readDouble();break;case 7:la=A.readInteger();break;case 8:la=d[A.readUI8()];break;case 9:la=d[A.readUI16()];
break;default:throw Error("Unknown value type: "+G);}y.push(la)}break;case 23:y.pop();break;case 10:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(Z+ea);break;case 11:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(ea-Z);break;case 12:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(Z*ea);break;case 13:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());na=ea/Z;y.push(F?na:isFinite(na)?na:"#ERROR#");break;case 14:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());ha=Z==ea;y.push(F?ha:ha?
1:0);break;case 15:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());ha=ea<Z;y.push(F?ha:ha?1:0);break;case 16:Z=as2ToBoolean(y.pop());ea=as2ToBoolean(y.pop());ha=Z&&ea;y.push(F?ha:ha?1:0);break;case 17:Z=as2ToBoolean(y.pop());ea=as2ToBoolean(y.pop());ha=Z||ea;y.push(F?ha:ha?1:0);break;case 18:ha=!as2ToBoolean(y.pop());y.push(F?ha:ha?1:0);break;case 19:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());ha=oa==Aa;y.push(F?ha:ha?1:0);break;case 20:case 49:oa=as2ToString(y.pop());y.push(v.length(oa));break;
case 33:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());y.push(Aa+oa);break;case 21:I=y.pop();J=y.pop();la=as2ToString(y.pop());y.push(v.substring(la,J,I));break;case 53:I=y.pop();J=y.pop();la=as2ToString(y.pop());y.push(v.mbsubstring(la,J,I));break;case 41:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());ha=Aa<oa;y.push(F?ha:ha?1:0);break;case 24:y.push(v.int(y.pop()));break;case 50:y.push(v.chr(y.pop()));break;case 54:y.push(v.mbchr(y.pop()));break;case 51:y.push(v.ord(y.pop()));break;case 55:y.push(v.mbord(y.pop()));
break;case 153:M=A.readSI16();C+=M;break;case 157:M=A.readSI16();(ha=!!y.pop())&&(C+=M);break;case 158:ua=y.pop();v.call(ua);break;case 28:W=""+y.pop();Q++;y.push(p(W));break;case 29:la=y.pop();W=""+y.pop();a:{var xa=W,Ma=la;if(D.asHasProperty(void 0,xa,0))D.asSetPublicProperty(xa,Ma);else{var ya=l(xa,!0);if(ya)ya.obj.asSetPublicProperty(ya.name,Ma);else{var ka=void 0,za=m();if(za&&(ka=as2ResolveProperty(za,xa)))za.asSetPublicProperty(ka,Ma);else{for(var Qa=b;Qa.next;Qa=Qa.next)if(ka=as2ResolveProperty(Qa.scope,
xa),null!==ka){Qa.scope.asSetPublicProperty(ka,Ma);break a}(za||D).asSetPublicProperty(xa,Ma)}}}}break;case 154:sa=A.readUI8();var Sa;switch(sa>>6&3){case 1:Sa="GET";break;case 2:Sa="POST"}var $a=sa&2?sa&1?v.loadVariables:v.loadMovie:sa&1?v.loadVariablesNum:v.loadMovieNum;H=y.pop();var ab=y.pop();$a.call(v,ab,H,Sa);break;case 159:sa=A.readUI8();var Xa=[y.pop()];sa&2&&Xa.push(A.readUI16());(sa&1?v.gotoAndPlay:v.gotoAndStop).apply(v,Xa);break;case 32:H=y.pop();f(H);break;case 34:J=y.pop();H=y.pop();
Q++;y.push(v.getAS2Property(H,J));break;case 35:la=y.pop();J=y.pop();H=y.pop();v.setAS2Property(H,J,la);break;case 36:var bb=y.pop();H=y.pop();var cb=y.pop();v.duplicateMovieClip(cb,H,bb);break;case 37:H=y.pop();v.removeMovieClip(H);break;case 39:H=y.pop();var db=y.pop(),Ta=!y.pop()?null:{y2:y.pop(),x2:y.pop(),y1:y.pop(),x1:y.pop()};aa=[H,db];Ta&&(aa=aa.push(Ta.x1,Ta.y1,Ta.x2,Ta.y2));v.startDrag.apply(v,aa);break;case 40:v.stopDrag();break;case 141:I=A.readUI8();L=y.pop();v.ifFrameLoaded(L)||w(I);
break;case 38:la=y.pop();v.trace(la);break;case 52:y.push(v.getTimer());break;case 48:y.push(v.random(y.pop()));break;case 61:ca=y.pop();ra=u(y);Q++;var Ya=ca,Za=p(Ya);if(!(Za instanceof Function))throw Error('Function "'+Ya+'" is not found');Ea=Za;pa=Ea.apply(D,ra);y.push(pa);break;case 82:fa=y.pop();$=y.pop();ra=u(y);Q++;if(null!==fa&&void 0!==fa&&""!==fa){if(null===$||void 0===$)throw Error("Cannot call method "+fa+" of "+typeof $);$!==AS2_SUPER_STUB?H=Object($):(H=as2GetPrototype(p("__class").__super),
$=p("this"));ja=as2ResolveProperty(H,fa);if(null===ja)throw Error("Method "+fa+" is not defined.");pa=H.asGetPublicProperty(ja).apply($,ra)}else pa=$!==AS2_SUPER_STUB?$.apply($,ra):p("__class").__super.apply(p("this"),ra);y.push(pa);break;case 136:I=A.readUI16();d=[];for(ta=0;ta<I;ta++)d.push(A.readString());break;case 155:ca=A.readString();I=A.readUI16();ra=[];for(ta=0;ta<I;ta++)ra.push(A.readString());U=A.readUI16();C+=U;Ea=g(ca,ra,null,A.readBytes(U));ca?D.asSetPublicProperty(ca,Ea):y.push(Ea);
break;case 60:la=y.pop();N=y.pop();D.asSetPublicProperty(N,la);break;case 65:N=y.pop();D.asSetPublicProperty(N,void 0);break;case 58:N=y.pop();$=y.pop();$.asSetPublicProperty(N,void 0);y.push($.asDeleteProperty(void 0,N,0));break;case 59:N=y.pop();a:{for(var Wa=N,ma=b;ma;ma=ma.next)if(ma.scope.asHasProperty(void 0,Wa,0)){ma.scope.asSetPublicProperty(Wa,void 0);pa=ma.scope.asDeleteProperty(void 0,Wa,0);break a}pa=!1}y.push(pa);break;case 70:ga=y.pop();y.push(null);$=r(ga);forEachPublicProperty($,function(a){y.push(a)});
break;case 73:Z=y.pop();ea=y.pop();y.push(Z==ea);break;case 78:N=y.pop();$=y.pop();"prototype"===N?y.push(as2CreatePrototypeProxy($)):(ja=as2ResolveProperty(Object($),N),y.push(null===ja?void 0:$.asGetPublicProperty(ja)));break;case 66:$=u(y);y.push($);break;case 67:I=+y.pop();s(I,y.length>>1);$={};for(ta=0;ta<I;ta++)la=y.pop(),N=y.pop(),$.asSetPublicProperty(N,la);y.push($);break;case 83:fa=y.pop();$=y.pop();ra=u(y);Q++;if(null!==fa&&void 0!==fa&&""!==fa){ja=as2ResolveProperty($,fa);if(null===ja)throw Error("Method "+
fa+" is not defined.");if(null===$||void 0===$)throw Error("Cannot call new using method "+ja+" of "+typeof $);P=$.asGetPublicProperty(ja)}else{if(null===$||void 0===$)throw Error("Cannot call new using "+typeof $);P=$}isAvm2Class($)?pa=construct($,ra):(pa=Object.create(as2GetPrototype(P)||as2GetPrototype(Object)),P.apply(pa,ra));pa.constructor=P;y.push(pa);break;case 64:ga=y.pop();$=r(ga);ra=u(y);Q++;pa=createBuiltinType($,ra);"undefined"===typeof pa&&(isAvm2Class($)?pa=construct($,ra):(pa=Object.create(as2GetPrototype($)||
as2GetPrototype(Object)),$.apply(pa,ra)),pa.constructor=$);y.push(pa);break;case 79:la=y.pop();N=y.pop();$=y.pop();$.asSetPublicProperty(N,la);break;case 69:$=y.pop();y.push("movieclip"===as2GetType($)?$._target:void 0);break;case 148:U=A.readUI16();$=y.pop();C+=U;var eb=A.readBytes(U),fb=b.create(Object($));interpretActions(eb,fb,d,e);break;case 74:y.push(as2ToNumber(y.pop()));break;case 75:y.push(as2ToString(y.pop()));break;case 68:$=y.pop();pa=as2GetType($);y.push(pa);break;case 71:Z=as2ToAddPrimitive(y.pop());
ea=as2ToAddPrimitive(y.pop());"string"===typeof Z||"string"===typeof ea?y.push(as2ToString(ea)+as2ToString(Z)):y.push(as2ToNumber(ea)+as2ToNumber(Z));break;case 72:Z=y.pop();ea=y.pop();y.push(as2Compare(ea,Z));break;case 63:Z=as2ToNumber(y.pop());ea=as2ToNumber(y.pop());y.push(ea%Z);break;case 96:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea&Z);break;case 99:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea<<Z);break;case 97:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea|Z);
break;case 100:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea>>Z);break;case 101:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea>>>Z);break;case 98:Z=as2ToInt32(y.pop());ea=as2ToInt32(y.pop());y.push(ea^Z);break;case 81:Z=as2ToNumber(y.pop());Z--;y.push(Z);break;case 80:Z=as2ToNumber(y.pop());Z++;y.push(Z);break;case 76:y.push(y[y.length-1]);break;case 62:return y.pop();case 77:y.push(y.pop(),y.pop());break;case 135:Oa=A.readUI8();e[Oa]=y[y.length-1];break;case 84:O=y.pop();$=y.pop();
y.push(as2InstanceOf(Object($),O));break;case 85:$=y.pop();y.push(null);forEachPublicProperty($,function(a){y.push(a)});break;case 102:Z=y.pop();ea=y.pop();y.push(ea===Z);break;case 103:Z=y.pop();ea=y.pop();y.push(as2Compare(Z,ea));break;case 104:oa=as2ToString(y.pop());Aa=as2ToString(y.pop());ha=Aa>oa;y.push(F?ha:ha?1:0);break;case 142:ca=A.readString();I=A.readUI16();A.readUI8();sa=A.readUI16();var La=[];ra=[];for(ta=0;ta<I;ta++)Oa=A.readUI8(),ia=A.readString(),ra.push(ia),Oa&&(La[Oa]={type:"param",
name:ia,index:ta});U=A.readUI16();C+=U;var va=1;sa&1&&(La[va++]={type:"var",name:"this"});sa&4&&(La[va++]={type:"var",name:"arguments"});sa&16&&(La[va++]={type:"var",name:"super"});sa&64&&(La[va++]={type:"var",name:"_root"});sa&128&&(La[va++]={type:"var",name:"_parent"});sa&256&&(La[va++]={type:"var",name:"_global"});Ea=g(ca,ra,La,A.readBytes(U));ca?D.asSetPublicProperty(ca,Ea):y.push(Ea);break;case 105:var Ca=y.pop();O=y.pop();$=Object.create(Ca.traitsPrototype||as2GetPrototype(Ca),{constructor:{value:O,
enumerable:!1}});O.__super=Ca;O.prototype=$;break;case 43:$=y.pop();O=y.pop();y.push(as2InstanceOf($,O)?$:null);break;case 44:O=y.pop();I=+y.pop();s(I,y.length);var Ra=[];for(ta=0;ta<I;ta++)Ra.push(y.pop());O.$interfaces=Ra;break;case 143:sa=A.readUI8();var qa=!!(sa&4),Ba=!!(sa&2),Ja=!!(sa&1),X=A.readUI16(),Y=A.readUI16(),Da=A.readUI16(),Ga=qa?A.readUI8():A.readString();C+=X+Y+Da;var Ka=Ba,S=Ja,ba=Ga,Ha=A.readBytes(X),V=A.readBytes(Y),wa=A.readBytes(Da),Na=z.isTryCatchListening;try{z.isTryCatchListening=
!0,interpretActions(Ha,b,d,e)}catch(Ua){z.isTryCatchListening=Na;if(!S)throw Ua;if(!(Ua instanceof AS2Error))throw Ua;"string"===typeof ba?D[ba]=Ua.error:e[ba]=Ua.error;interpretActions(V,b,d,e)}finally{z.isTryCatchListening=Na,Ka&&interpretActions(wa,b,d,e)}break;case 42:throw $=y.pop(),new AS2Error($);case 45:ra=u(y);Q++;pa=v.fscommand.apply(null,ra);y.push(pa);break;case 137:A.readUI8();break;case 0:return;default:throw Error("Unknown action code: "+R);}A.position=C;K=!1}}catch(Va){if(Va instanceof
AS2CriticalError)throw Va;if(Va instanceof AS2Error)throw Va;TelemetryService.reportTelemetry({topic:"error",error:1});A.position=C;if(0<Q)for(;Q--;)y.push(void 0);if(!K){if(1E3<=z.errorsIgnored++)throw new AS2CriticalError("long running script -- AVM1 errors limit is reached");console.error("AVM1 error: "+Va);K=!0}}}
var ActionTracerFactory=function(){function a(){}var b={print:function(){},indent:function(){},unindent:function(){},message:function(){}};a.get=function(){return b};return a}(),ActionNamesMap={"0":"EOA",4:"ActionNextFrame",5:"ActionPreviousFrame",6:"ActionPlay",7:"ActionStop",8:"ActionToggleQuality",9:"ActionStopSounds",10:"ActionAdd",11:"ActionSubtract",12:"ActionMultiply",13:"ActionDivide",14:"ActionEquals",15:"ActionLess",16:"ActionAnd",17:"ActionOr",18:"ActionNot",19:"ActionStringEquals",20:"ActionStringLength",
21:"ActionStringExtract",23:"ActionPop",24:"ActionToInteger",28:"ActionGetVariable",29:"ActionSetVariable",32:"ActionSetTarget2",33:"ActionStringAdd",34:"ActionGetProperty",35:"ActionSetProperty",36:"ActionCloneSprite",37:"ActionRemoveSprite",38:"ActionTrace",39:"ActionStartDrag",40:"ActionEndDrag",41:"ActionStringLess",42:"ActionThrow",43:"ActionCastOp",44:"ActionImplementsOp",45:"ActionFSCommand2",48:"ActionRandomNumber",49:"ActionMBStringLength",50:"ActionCharToAscii",51:"ActionAsciiToChar",52:"ActionGetTime",
53:"ActionMBStringExtrac",54:"ActionMBCharToAscii",55:"ActionMBAsciiToChar",58:"ActionDelete",59:"ActionDelete2",60:"ActionDefineLocal",61:"ActionCallFunction",62:"ActionReturn",63:"ActionModulo",64:"ActionNewObject",65:"ActionDefineLocal2",66:"ActionInitArray",67:"ActionInitObject",68:"ActionTypeOf",69:"ActionTargetPath",70:"ActionEnumerate",71:"ActionAdd2",72:"ActionLess2",73:"ActionEquals2",74:"ActionToNumber",75:"ActionToString",76:"ActionPushDuplicate",77:"ActionStackSwap",78:"ActionGetMember",
79:"ActionSetMember",80:"ActionIncrement",81:"ActionDecrement",82:"ActionCallMethod",83:"ActionNewMethod",84:"ActionInstanceOf",85:"ActionEnumerate2",96:"ActionBitAnd",97:"ActionBitOr",98:"ActionBitXor",99:"ActionBitLShift",100:"ActionBitRShift",101:"ActionBitURShift",102:"ActionStrictEquals",103:"ActionGreater",104:"ActionStringGreater",105:"ActionExtends",129:"ActionGotoFrame",131:"ActionGetURL",135:"ActionStoreRegister",136:"ActionConstantPool",137:"ActionStrictMode",138:"ActionWaitForFrame",139:"ActionSetTarget",
140:"ActionGoToLabel",141:"ActionWaitForFrame2",142:"ActionDefineFunction",143:"ActionTry",148:"ActionWith",150:"ActionPush",153:"ActionJump",154:"ActionGetURL2",155:"ActionDefineFunction",157:"ActionIf",158:"ActionCall",159:"ActionGotoFrame2"};"undefined"!==typeof GLOBAL&&(GLOBAL.createBuiltinType=createBuiltinType,GLOBAL.executeActions=executeActions,GLOBAL.AS2Context=AS2Context);
var $DEBUG,release=!0,checkArguments=!0,useSurrogates=!0,useAsAdd=!0,sealConstTraits=!1,c4CoerceNonPrimitiveParameters=!1,c4CoerceNonPrimitive=!1,c4AsTypeLate=!0,inBrowser="undefined"!=typeof console;this.performance||(this.performance={});this.performance.now||(this.performance.now=dateNow);function backtrace(){try{throw Error();}catch(a){return a.stack?a.stack.split("\n").slice(2).join("\n"):""}}function error(a){inBrowser||console.warn(backtrace());throw Error(a);}
function assert(a){""===a&&(a=!0);if(!a){var b=Array.prototype.slice.call(arguments);b.shift();error(b.join(""))}}function assertNotImplemented(a,b){a||error("NotImplemented: "+b)}function warning(){!0}function notUsed(){!0}function notImplemented(){!0}function somewhatImplemented(a){warning("somewhatImplemented: "+a)}function unexpected(){}function makeForwardingGetter(a){return new Function('return this["'+a+'"]')}
function makeForwardingSetter(a){return new Function("value",'this["'+a+'"] = value;')}function defineReadOnlyProperty(a,b,d){Object.defineProperty(a,b,{value:d,writable:!1,configurable:!0,enumerable:!1})}function bindSafely(a,b){!0;var d=a.bind(b);d.boundTo=b;return d}function createEmptyObject(){return Object.create(null)}
function getOwnPropertyDescriptors(a){for(var b=createEmptyObject(),d=Object.getOwnPropertyNames(a),e=0;e<d.length;e++)b[d[e]]=Object.getOwnPropertyDescriptor(a,d[e]);return b}function cloneObject(a){var b=Object.create(null),d;for(d in a)b[d]=a[d];return b}function extendObject(a,b){var d=Object.create(a);if(b)for(var e in b)d[e]=b[e];return d}function copyProperties(a,b){for(var d in b)a[d]=b[d]}
function toSafeString(a){return"string"===typeof a?'"'+a+'"':"number"===typeof a||"boolean"===typeof a?String(a):typeof a}function toSafeArrayString(a){for(var b=[],d=0;d<a.length;d++)b.push(toSafeString(a[d]));return b.join(", ")}function getLatestGetterOrSetterPropertyDescriptor(a,b){for(var d={};a;){var e=Object.getOwnPropertyDescriptor(a,b);e&&(d.get=d.get||e.get,d.set=d.set||e.set);if(d.get&&d.set)break;a=Object.getPrototypeOf(a)}return d}
function defineNonEnumerableGetterOrSetter(a,b,d,e){var f=getLatestGetterOrSetterPropertyDescriptor(a,b);f.configurable=!0;f.enumerable=!1;e?f.get=d:f.set=d;Object.defineProperty(a,b,f)}function defineNonEnumerableGetter(a,b,d){Object.defineProperty(a,b,{get:d,configurable:!0,enumerable:!1})}function defineNonEnumerableSetter(a,b,d){Object.defineProperty(a,b,{set:d,configurable:!0,enumerable:!1})}
function defineNonEnumerableProperty(a,b,d){Object.defineProperty(a,b,{value:d,writable:!0,configurable:!0,enumerable:!1})}function defineNonEnumerableForwardingProperty(a,b,d){Object.defineProperty(a,b,{get:makeForwardingGetter(d),set:makeForwardingSetter(d),writable:!0,configurable:!0,enumerable:!1})}function defineNewNonEnumerableProperty(a,b,d){!0;defineNonEnumerableProperty(a,b,d)}function isNullOrUndefined(a){return void 0==a}function isPowerOfTwo(a){return a&&0===(a&a-1)}
function time(a,b){for(var d=performance.now(),e=0;e<b;e++)a();d=(performance.now()-d)/b;console.info("Took: "+d.toFixed(2)+"ms.");return d}function clamp(a,b,d){return a<b?b:a>d?d:a}function fromCharCodeArray(a){for(var b="",d=0;d<a.length;d+=16384)var e=Math.min(a.length-d,16384),b=b+String.fromCharCode.apply(null,a.subarray(d,d+e));return b}function hasOwnProperty(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
function toKeyValueArray(a){var b=Object.prototype.hasOwnProperty,d=[],e;for(e in a)b.call(a,e)&&d.push([e,a[e]]);return d}function isNumeric(a){if("number"===typeof a)return a===(a|0);if("string"!==typeof a||0===a.length)return!1;if("0"===a)return!0;var b=a.charCodeAt(0);if(49<=b&&57>=b){for(var d=1,e=a.length;d<e;d++)if(b=a.charCodeAt(d),!(48<=b&&57>=b))return!1;return!0}return!1}function boxValue(a){return isNullOrUndefined(a)||isObject(a)?a:Object(a)}
function isObject(a){return"object"===typeof a||"function"===typeof a}function isString(a){return"string"===typeof a}function isFunction(a){return"function"===typeof a}function isNumber(a){return"number"===typeof a}function toNumber(a){return+a}function setBitFlags(a,b,d){return d?a|b:a&~b}function getBitFlags(a,b){return!!(a&b)}function popManyInto(a,b,d){!0;for(var e=b-1;0<=e;e--)d[e]=a.pop();d.length=b}
(function(){function a(a,d,b){a[d]||Object.defineProperty(a,d,{value:b,writable:!0,configurable:!0,enumerable:!1})}var b=String.prototype;a(b,"padRight",function(a,d){var b=this,l=b.replace(/\033\[[0-9]*m/g,"").length;if(!a||l>=d)return b;for(var l=(d-l)/a.length,m=0;m<l;m++)b+=a;return b});a(b,"padLeft",function(a,d){var b=this,l=b.length;if(!a||l>=d)return b;for(var l=(d-l)/a.length,m=0;m<l;m++)b=a+b;return b});a(b,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});a(b,"endsWith",function(a){return-1!==
this.indexOf(a,this.length-a.length)});b=Array.prototype;a(b,"popMany",function(a){!0;var d=this.length-a,b=this.slice(d,this.length);this.splice(d,a);return b});a(b,"pushMany",function(a){for(var d=0;d<a.length;d++)this.push(a[d])});a(b,"clone",function(){return this.slice(0)});a(b,"first",function(){!0;return this[0]});a(b,"last",function(){!0;return this[this.length-1]});a(b,"peek",function(){!0;return this[this.length-1]});a(b,"empty",function(){return 0===this.length});a(b,"pushUnique",function(a){for(var d=
0,b=this.length;d<b;d++)if(this[d]===a)return;this.push(a)});var d;"undefined"!==typeof Map&&(d=new Map).clear?a(b,"unique",function(){for(var a=[],b=0;b<this.length;b++)d.has(this[b])||(a.push(this[b]),d.set(this[b],!0));d.clear();return a}):a(b,"unique",function(){for(var a=[],d=0;d<this.length;d++)a.pushUnique(this[d]);return a});a(b,"replace",function(a,d){if(a===d)return 0;for(var b=0,l=0;l<this.length;l++)this[l]===a&&(this[l]=d,b++);return b});a(b,"count",function(a){for(var d=0,b=0;b<this.length;b++)this[b]===
a&&d++;return d});a(b,"notEmpty",function(){return 0<this.length});a(b,"contains",function(a){return 0<=this.indexOf(a)});a(b,"top",function(){return this.length&&this[this.length-1]});a(b,"mapWithIndex",function(a){for(var d=[],b=0;b<this.length;b++)d.push(a(this[b],b));return d})})();
function utf8decode(a){for(var b=new Uint8Array(4*a.length),d=0,e=0,f=a.length;e<f;e++){var g=a.charCodeAt(e);if(127>=g)b[d++]=g;else{if(55296<=g&&56319>=g){var l=a.charCodeAt(e+1);56320<=l&&57343>=l&&(g=((g&1023)<<10)+(l&1023)+65536,++e)}0!==(g&4292870144)?(b[d++]=248|g>>>24&3,b[d++]=128|g>>>18&63,b[d++]=128|g>>>12&63,b[d++]=128|g>>>6&63):0!==(g&4294901760)?(b[d++]=240|g>>>18&7,b[d++]=128|g>>>12&63,b[d++]=128|g>>>6&63):0!==(g&4294965248)?(b[d++]=224|g>>>12&15,b[d++]=128|g>>>6&63):b[d++]=192|g>>>
6&31;b[d++]=128|g&63}}return b.subarray(0,d)}
function utf8encode(a){for(var b=0,d="";b<a.length;){var e=a[b++]&255;if(127>=e)d+=String.fromCharCode(e);else{var f=192,g=5;do{if((e&(f>>1|128))===f)break;f=f>>1|128;--g}while(0<=g);if(0>=g)d+=String.fromCharCode(e);else{for(var e=e&(1<<g)-1,f=!1,l=5;l>=g;--l){var m=a[b++];if(128!=(m&192)){f=!0;break}e=e<<6|m&63}if(f)for(g=b-(7-l);g<b;++g)d+=String.fromCharCode(a[g]&255);else d=65536<=e?d+String.fromCharCode(e-65536>>10&1023|55296,e&1023|56320):d+String.fromCharCode(e)}}}return d}
function getFlags(a,b){for(var d="",e=0;e<b.length;e++)a&1<<e&&(d+=b[e]+" ");return 0===d.length?"":d.trim()}function bitCount(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function escapeString(a){void 0!==a&&(a=a.replace(/[^\w$]/gi,"$"),/^\d/.test(a)&&(a="$"+a));return a}
function BitSetFunctor(a){function b(){this.dirty=this.count=0;this.size=e;this.bits=new Uint32Array(e>>5)}function d(){this.dirty=this.count=0;this.size=e;this.bits=0}var e=a+31>>5<<5,f=1===e>>5,g=f?d:b;g.ADDRESS_BITS_PER_WORD=5;g.BITS_PER_WORD=32;g.BIT_INDEX_MASK=31;g.singleword=f;b.prototype={recount:function(){if(this.dirty){for(var a=this.bits,d=0,b=0,e=a.length;b<e;b++)var f=a[b],f=f-(f>>1&1431655765),f=(f&858993459)+(f>>2&858993459),d=d+(16843009*(f+(f>>4)&252645135)>>24);this.count=d;this.dirty=
0}},set:function(a){var d=a>>5,b=this.bits[d];a=b|1<<(a&31);this.bits[d]=a;this.dirty|=b^a},setAll:function(){for(var a=this.bits,d=0,b=a.length;d<b;d++)a[d]=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;for(var d=0,b=this.bits.length;d<b;d++)this.bits[d]=a.bits[d]},clear:function(a){var d=a>>5,b=this.bits[d];a=b&~(1<<(a&31));this.bits[d]=a;this.dirty|=b^a},get:function(a){return 0!==(this.bits[a>>5]&1<<(a&31))},clearAll:function(){for(var a=
this.bits,d=0,b=a.length;d<b;d++)a[d]=0;this.dirty=this.count=0},_union:function(a){var d=this.dirty,b=this.bits;a=a.bits;for(var e=0,f=b.length;e<f;e++){var g=b[e],w=g|a[e];b[e]=w;d|=g^w}this.dirty=d},intersect:function(a){var d=this.dirty,b=this.bits;a=a.bits;for(var e=0,f=b.length;e<f;e++){var g=b[e],w=g&a[e];b[e]=w;d|=g^w}this.dirty=d},subtract:function(a){var d=this.dirty,b=this.bits;a=a.bits;for(var e=0,f=b.length;e<f;e++){var g=b[e],w=g&~a[e];b[e]=w;d|=g^w}this.dirty=d},negate:function(){for(var a=
this.dirty,d=this.bits,b=0,e=d.length;b<e;b++){var f=d[b],g=~f;d[b]=g;a|=f^g}this.dirty=a},forEach:function(a){!0;for(var d=this.bits,b=0,e=d.length;b<e;b++){var f=d[b];if(f)for(var g=0;32>g;g++)f&1<<g&&a(32*b+g)}},toArray:function(){for(var a=[],d=this.bits,b=0,e=d.length;b<e;b++){var f=d[b];if(f)for(var g=0;32>g;g++)f&1<<g&&a.push(32*b+g)}return a},equals:function(a){if(this.size!==a.size)return!1;var d=this.bits;a=a.bits;for(var b=0,e=d.length;b<e;b++)if(d[b]!==a[b])return!1;return!0},contains:function(a){if(this.size!==
a.size)return!1;var d=this.bits;a=a.bits;for(var b=0,e=d.length;b<e;b++)if((d[b]|a[b])!==d[b])return!1;return!0},toBitString:function(d,b){d=d||"1";b=b||"0";for(var e="",f=0;f<a;f++)e+=this.get(f)?d:b;return e},length:a,toString:function(d){for(var b=[],e=0;e<a;e++)this.get(e)&&b.push(d?d[e]:e);return b.join(", ")},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new b;a._union(this);return a}};d.prototype={recount:function(){if(this.dirty){var a=this.bits,a=a-(a>>1&
1431655765),a=(a&858993459)+(a>>2&858993459);this.count=0+(16843009*(a+(a>>4)&252645135)>>24);this.dirty=0}},set:function(a){var d=this.bits;this.bits=a=d|1<<(a&31);this.dirty|=d^a},setAll:function(){this.bits=4294967295;this.count=this.size;this.dirty=0},assign:function(a){this.count=a.count;this.dirty=a.dirty;this.size=a.size;this.bits=a.bits},clear:function(a){var d=this.bits;this.bits=a=d&~(1<<(a&31));this.dirty|=d^a},get:function(a){return 0!==(this.bits&1<<(a&31))},clearAll:function(){this.dirty=
this.count=this.bits=0},_union:function(a){var d=this.bits;this.bits=a=d|a.bits;this.dirty=d^a},intersect:function(a){var d=this.bits;this.bits=a=d&a.bits;this.dirty=d^a},subtract:function(a){var d=this.bits;this.bits=a=d&~a.bits;this.dirty=d^a},negate:function(){var a=this.bits,d=~a;this.bits=d;this.dirty=a^d},forEach:function(a){!0;var d=this.bits;if(d)for(var b=0;32>b;b++)d&1<<b&&a(b)},toArray:function(){var a=[],d=this.bits;if(d)for(var b=0;32>b;b++)d&1<<b&&a.push(b);return a},equals:function(a){return this.bits===
a.bits},contains:function(a){var d=this.bits;return(d|a.bits)===d},isEmpty:function(){this.recount();return 0===this.count},clone:function(){var a=new d;a._union(this);return a},toBitString:b.prototype.toBitString,toString:b.prototype.toString,length:a};return g}
function base64ArrayBuffer(a){var b="";a=new Uint8Array(a);for(var d=a.byteLength,e=d%3,d=d-e,f,g,l,m,p=0;p<d;p+=3)m=a[p]<<16|a[p+1]<<8|a[p+2],f=(m&16515072)>>18,g=(m&258048)>>12,l=(m&4032)>>6,m&=63,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m];1==e?(m=a[d],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&
252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&3)<<4]+"=="):2==e&&(m=a[d]<<8|a[d+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(m&15)<<2]+"=");return b}
var PURPLE="\u001b[94m",YELLOW="\u001b[93m",GREEN="\u001b[92m",RED="\u001b[91m",ENDC="\u001b[0m",IndentingWriter=function(){function a(a,e){this.tab="  ";this.padding="";this.suppressOutput=a;this.out=e||b}var b=inBrowser?console.info.bind(console):print;a.prototype.writeLn=function(a){this.suppressOutput||this.out(this.padding+a)};a.prototype.writeLns=function(a){a=a.split("\n");for(var b=0;b<a.length;b++)this.writeLn(a[b])};a.prototype.debugLn=function(a){this.colorLn("\u001b[94m",a)};a.prototype.yellowLn=
function(a){this.colorLn("\u001b[93m",a)};a.prototype.greenLn=function(a){this.colorLn("\u001b[92m",a)};a.prototype.redLn=function(a){this.colorLn("\u001b[91m",a)};a.prototype.colorLn=function(a,b){this.suppressOutput||(inBrowser?this.out(this.padding+b):this.out(this.padding+a+b+"\u001b[0m"))};a.prototype.enter=function(a){this.suppressOutput||this.out(this.padding+a);this.indent()};a.prototype.leaveAndEnter=function(a){this.leave(a);this.indent()};a.prototype.leave=function(a){this.outdent();this.suppressOutput||
this.out(this.padding+a)};a.prototype.indent=function(){this.padding+=this.tab};a.prototype.outdent=function(){0<this.padding.length&&(this.padding=this.padding.substring(0,this.padding.length-this.tab.length))};a.prototype.writeArray=function(a,b,f){b=b||!1;for(var g=0,l=a.length;g<l;g++){var m="";b&&(m=null===a[g]?"null":void 0===a[g]?"undefined":a[g].constructor.name,m+=" ");var p=f?"":(""+g).padRight(" ",4);this.writeLn(p+m+a[g])}};return a}(),Map=function(){function a(){this.elements={}}a.prototype.set=
function(a,d){this.elements[a]=d};a.prototype.get=function(a){if(this.has(a))return this.elements[a]};a.prototype.has=function(a){return Object.prototype.hasOwnProperty.call(this.elements,a)};a.prototype.remove=function(a){this.has(a)&&delete this.elements[a]};return a}(),SortedList=function(){function a(a){!0;this.compare=a;this.head=null;this.length=0}a.RETURN=1;a.DELETE=2;a.prototype.push=function(a){!0;this.length++;if(this.head){var d=this.head,e=null;a={value:a,next:null};for(var f=this.compare;d;){if(0<
f(d.value,a.value)){e?(a.next=d,e.next=a):(a.next=this.head,this.head=a);return}e=d;d=d.next}e.next=a}else this.head={value:a,next:null}};a.prototype.forEach=function(b){for(var d=this.head,e=null;d;){var f=b(d.value);if(f===a.RETURN)break;else f===a.DELETE?d=e?e.next=d.next:this.head=this.head.next:(e=d,d=d.next)}};a.prototype.pop=function(){if(this.head){this.length--;var a=this.head;this.head=this.head.next;return a.value}};a.prototype.peek=function(){return this.head};a.prototype.contains=function(a){for(var d=
this.head;d;){if(d.value===a)return!0;d=d.next}return!1};a.prototype.toString=function(){for(var a="[",d=this.head;d;)a+=d.value.toString(),(d=d.next)&&(a+=",");return a+"]"};return a}();
(function(){function a(){this.id="$weakmap"+b++}if("function"!==typeof this.WeakMap){var b=0;a.prototype={has:function(a){return a.hasOwnProperty(this.id)},get:function(a,b){return a.hasOwnProperty(this.id)?a[this.id]:b},set:function(a,b){Object.defineProperty(a,this.id,{value:b,enumerable:!1,configurable:!0})}};this.WeakMap=a}})();
var Callback=function(){function a(){this.queues={}}a.prototype.register=function(a,d){var e=this.queues[a];if(e){if(-1<e.indexOf(d))return}else e=this.queues[a]=[];e.push(d)};a.prototype.unregister=function(a,d){var e=this.queues[a];if(e){var f=e.indexOf(d);-1!==f&&e.splice(f,1);0===e.length&&(this.queues[a]=null)}};a.prototype.notify=function(a,d){var e=this.queues[a];if(e){e=e.slice();d=sliceArguments(arguments,0);for(var f=0;f<e.length;f++)e[f].apply(null,d)}};a.prototype.notify1=function(a,d){var e=
this.queues[a];if(e)for(var e=e.slice(),f=0;f<e.length;f++)(0,e[f])(a,d)};return a}(),CircularBuffer=function(){function a(a){this.start=this.index=0;this.array=new a(b)}var b=4096;a.prototype.get=function(a){return this.array[a]};a.prototype.forEachInReverse=function(a){if(!this.isEmpty())for(var e=0===this.index?b-1:this.index-1;e!==this.start&&!a(this.array[e],e);)e=0===e?b-1:e-1};a.prototype.write=function(a){this.array[this.index]=a;this.index=this.index+1&4095;this.index===this.start&&(this.start=
this.start+1&4095)};a.prototype.isFull=function(){return this.index+1&4095===this.start};a.prototype.isEmpty=function(){return this.index===this.start};return a}();function lazyClass(a,b,d){Object.defineProperty(a,b,{get:function(){var e=performance.now(),f=d();print("Initialized Class: "+b+" "+(performance.now()-e).toFixed(4));Object.defineProperty(a,b,{value:f,writable:!0});return f},configurable:!0})}function createNewCompartment(){return newGlobal("new-compartment")}
(function(a){var b,d=function(a,d){this.parent=a;this.timers={};this.name=d;this.count=this.total=this.last=this.begin=0},e=new d(null,"Total"),f=e,g=new d(null,"Flat"),l=[];d.flat=g;d.prototype.start=function(){this.begin=performance.now()};d.prototype.stop=function(){this.last=performance.now()-this.begin;this.total+=this.last;this.count+=1};d.time=function(a,b){d.start(a);b();d.stop()};d.start=function(a){f=f.timers[a]||(f.timers[a]=new d(f,a));f.start();a=g.timers[a]||(g.timers[a]=new d(g,a));
a.start();l.push(a)};d.stop=function(){f.stop();f=f.parent;l.pop().stop()};d.stopStart=function(a){b.stop();b.start(a)};d.prototype.toJSON=function(){return{name:this.name,total:this.total,timers:this.timers}};d.prototype.trace=function(a,d){if(d)a.writeLn("SHUMWAY$JSON "+JSON.stringify({timer:this}));else{a.enter(this.name+": "+this.total.toFixed(2)+" ms, count: "+this.count+", average: "+(this.total/this.count).toFixed(2)+" ms");for(var b in this.timers)this.timers[b].trace(a);a.outdent()}};d.trace=
function(a,d){e.trace(a,d);g.trace(a,d)};b=d;var m=function(a){this.enabled=!!a;this.counts=createEmptyObject()};m.prototype.setEnabled=function(a){this.enabled=a};m.prototype.clear=function(){this.counts={}};m.prototype.toJSON=function(){return{counts:this.counts}};m.prototype.count=function(a,d){if(this.enabled)return void 0===this.counts[a]&&(this.counts[a]=0),this.counts[a]+=void 0!==d?d:1,this.counts[a]};m.prototype.trace=function(a,d){if(d)a.writeLn("SHUMWAY$JSON "+JSON.stringify({counter:this}));
else for(var b in this.counts)a.writeLn(b+": "+this.counts[b])};m.prototype.traceSorted=function(a){var d=[],b;for(b in this.counts)d.push([b,this.counts[b]]);d.sort(function(a,d){return d[1]-a[1]});d.forEach(function(d){a.writeLn(d[0]+": "+d[1])})};var p=function(a){this.samples=new Float64Array(a);this.index=this.count=0};p.prototype.push=function(a){this.count<this.samples.length&&this.count++;this.index++;this.samples[this.index%this.samples.length]=a};p.prototype.average=function(){for(var a=
0,d=0;d<this.count;d++)a+=this.samples[d];return a/this.count};a.Timer=b;a.Counter=m;a.Average=p})("undefined"===typeof exports?metrics={}:exports);var Counter=new metrics.Counter(!0),FrameCounter=new metrics.Counter(!0),Timer=metrics.Timer,systemOptions=new OptionSet("System Options"),disassemble=systemOptions.register(new Option("d","disassemble","boolean",!1,"disassemble")),traceLevel=systemOptions.register(new Option("t","traceLevel","number",0,"trace level"));window.print=function(a){console.log(a)};
var CONSTANT_Undefined=0,CONSTANT_Utf8=1,CONSTANT_Float=2,CONSTANT_Int=3,CONSTANT_UInt=4,CONSTANT_PrivateNs=5,CONSTANT_Double=6,CONSTANT_QName=7,CONSTANT_Namespace=8,CONSTANT_Multiname=9,CONSTANT_False=10,CONSTANT_True=11,CONSTANT_Null=12,CONSTANT_QNameA=13,CONSTANT_MultinameA=14,CONSTANT_RTQName=15,CONSTANT_RTQNameA=16,CONSTANT_RTQNameL=17,CONSTANT_RTQNameLA=18,CONSTANT_NameL=19,CONSTANT_NameLA=20,CONSTANT_NamespaceSet=21,CONSTANT_PackageNamespace=22,CONSTANT_PackageInternalNs=23,CONSTANT_ProtectedNamespace=
24,CONSTANT_ExplicitNamespace=25,CONSTANT_StaticProtectedNs=26,CONSTANT_MultinameL=27,CONSTANT_MultinameLA=28,CONSTANT_TypeName=29,CONSTANT_ClassSealed=1,CONSTANT_ClassFinal=2,CONSTANT_ClassInterface=4,CONSTANT_ClassProtectedNs=8,TRAIT_Slot=0,TRAIT_Method=1,TRAIT_Getter=2,TRAIT_Setter=3,TRAIT_Class=4,TRAIT_Function=5,TRAIT_Const=6,ATTR_Final=1,ATTR_Override=2,ATTR_Metadata=4,SLOT_var=0,SLOT_method=1,SLOT_getter=2,SLOT_setter=3,SLOT_class=4,SLOT_function=6,METHOD_Arguments=1,METHOD_Activation=2,METHOD_Needrest=
4,METHOD_HasOptional=8,METHOD_IgnoreRest=16,METHOD_Native=32,METHOD_Setsdxns=64,METHOD_HasParamNames=128,OP_bkpt=1,OP_nop=2,OP_throw=3,OP_getsuper=4,OP_setsuper=5,OP_dxns=6,OP_dxnslate=7,OP_kill=8,OP_label=9,OP_lf32x4=10,OP_sf32x4=11,OP_ifnlt=12,OP_ifnle=13,OP_ifngt=14,OP_ifnge=15,OP_jump=16,OP_iftrue=17,OP_iffalse=18,OP_ifeq=19,OP_ifne=20,OP_iflt=21,OP_ifle=22,OP_ifgt=23,OP_ifge=24,OP_ifstricteq=25,OP_ifstrictne=26,OP_lookupswitch=27,OP_pushwith=28,OP_popscope=29,OP_nextname=30,OP_hasnext=31,OP_pushnull=
32,OP_pushundefined=33,OP_pushfloat=34,OP_nextvalue=35,OP_pushbyte=36,OP_pushshort=37,OP_pushtrue=38,OP_pushfalse=39,OP_pushnan=40,OP_pop=41,OP_dup=42,OP_swap=43,OP_pushstring=44,OP_pushint=45,OP_pushuint=46,OP_pushdouble=47,OP_pushscope=48,OP_pushnamespace=49,OP_hasnext2=50,OP_li8=53,OP_li16=54,OP_li32=55,OP_lf32=56,OP_lf64=57,OP_si8=58,OP_si16=59,OP_si32=60,OP_sf32=61,OP_sf64=62,OP_newfunction=64,OP_call=65,OP_construct=66,OP_callmethod=67,OP_callstatic=68,OP_callsuper=69,OP_callproperty=70,OP_returnvoid=
71,OP_returnvalue=72,OP_constructsuper=73,OP_constructprop=74,OP_callsuperid=75,OP_callproplex=76,OP_callinterface=77,OP_callsupervoid=78,OP_callpropvoid=79,OP_sxi1=80,OP_sxi8=81,OP_sxi16=82,OP_applytype=83,OP_pushfloat4=84,OP_newobject=85,OP_newarray=86,OP_newactivation=87,OP_newclass=88,OP_getdescendants=89,OP_newcatch=90,OP_findpropstrict=93,OP_findproperty=94,OP_finddef=95,OP_getlex=96,OP_setproperty=97,OP_getlocal=98,OP_setlocal=99,OP_getglobalscope=100,OP_getscopeobject=101,OP_getproperty=102,
OP_getouterscope=103,OP_initproperty=104,OP_setpropertylate=105,OP_deleteproperty=106,OP_deletepropertylate=107,OP_getslot=108,OP_setslot=109,OP_getglobalslot=110,OP_setglobalslot=111,OP_convert_s=112,OP_esc_xelem=113,OP_esc_xattr=114,OP_convert_i=115,OP_convert_u=116,OP_convert_d=117,OP_convert_b=118,OP_convert_o=119,OP_checkfilter=120,OP_convert_f=121,OP_unplus=122,OP_convert_f4=123,OP_coerce=128,OP_coerce_b=129,OP_coerce_a=130,OP_coerce_i=131,OP_coerce_d=132,OP_coerce_s=133,OP_astype=134,OP_astypelate=
135,OP_coerce_u=136,OP_coerce_o=137,OP_negate=144,OP_increment=145,OP_inclocal=146,OP_decrement=147,OP_declocal=148,OP_typeof=149,OP_not=150,OP_bitnot=151,OP_add=160,OP_subtract=161,OP_multiply=162,OP_divide=163,OP_modulo=164,OP_lshift=165,OP_rshift=166,OP_urshift=167,OP_bitand=168,OP_bitor=169,OP_bitxor=170,OP_equals=171,OP_strictequals=172,OP_lessthan=173,OP_lessequals=174,OP_greaterthan=175,OP_greaterequals=176,OP_instanceof=177,OP_istype=178,OP_istypelate=179,OP_in=180,OP_increment_i=192,OP_decrement_i=
193,OP_inclocal_i=194,OP_declocal_i=195,OP_negate_i=196,OP_add_i=197,OP_subtract_i=198,OP_multiply_i=199,OP_getlocal0=208,OP_getlocal1=209,OP_getlocal2=210,OP_getlocal3=211,OP_setlocal0=212,OP_setlocal1=213,OP_setlocal2=214,OP_setlocal3=215,OP_invalid=237,OP_debug=239,OP_debugline=240,OP_debugfile=241,OP_bkptline=242,OP_timestamp=243,INT_MIN_VALUE=-2147483648,INT_MAX_VALUE=2147483647,UINT_MIN_VALUE=0,UINT_MAX_VALUE=4294967295,SORT_CASEINSENSITIVE=1,SORT_DESCENDING=2,SORT_UNIQUESORT=4,SORT_RETURNINDEXEDARRAY=
8,SORT_NUMERIC=16,Errors={CallOfNonFunctionError:{code:1006,message:"%1 is not a function."},ConvertNullToObjectError:{code:1009,message:"Cannot access a property or method of a null object reference."},ConvertUndefinedToObjectError:{code:1010,message:"A term is undefined and has no properties."},ClassNotFoundError:{code:1014,message:"Class %1 could not be found."},CheckTypeFailedError:{code:1034,message:"Type Coercion failed: cannot convert %1 to %2."},WrongArgumentCountError:{code:1063,message:"Argument count mismatch on %1. Expected %2, got %3."},
XMLMarkupMustBeWellFormed:{code:1088,message:"The markup in the document following the root element must be well-formed."},OutOfRangeError:{code:1125,message:"The index %1 is out of range %2."},VectorFixedError:{code:1126,message:"Cannot change the length of a fixed Vector."},InvalidParamError:{code:2004,message:"One of the parameters is invalid."},ParamRangeError:{code:2006,message:"The supplied index is out of bounds."},NullPointerError:{code:2007,message:"Parameter %1 must be non-null."},InvalidEnumError:{code:2008,
message:"Parameter %1 must be one of the accepted values."},ArgumentError:{code:2015,message:"Invalid BitmapData."},CompressedDataError:{code:2058,message:"There was an error decompressing the data."},SocketConnectError:{code:2011,message:"Socket connection failed to %1:%2."},CantAddSelfError:{code:2024,message:"An object cannot be added as a child of itself."},NotAChildError:{code:2025,message:"The supplied DisplayObject must be a child of the caller."},ExternalInterfaceNotAvailableError:{code:2067,
message:"The ExternalInterface is not available in this container. ExternalInterface requires Internet Explorer ActiveX, Firefox, Mozilla 1.7.5 and greater, or other browsers that support NPRuntime."}};function getErrorMessage(a){if(!debuggerMode.value)return"Error #"+a;for(var b in Errors)if(Errors[b].code==a)return"Error #"+a+": "+Errors[b].message;return"Error #"+a+": (unknown)"}
function formatErrorMessage(a){var b=a.message;Array.prototype.slice.call(arguments,1).forEach(function(a,e){b=b.replace("%"+(e+1),a)});return"Error #"+a.code+": "+b}function translateErrorMessage(a){if(a.type)switch(a.type){case "undefined_method":return formatErrorMessage(Errors.CallOfNonFunctionError,"value");default:throw notImplemented(a.type);}else return 0<=a.message.indexOf("is not a function")?formatErrorMessage(Errors.CallOfNonFunctionError,"value"):a.message}
var opcodeTable=[null,{name:"bkpt",operands:"",canThrow:!1,stackDelta:0},{name:"nop",operands:"",canThrow:!1,stackDelta:0},{name:"throw",operands:"",canThrow:!0,stackDelta:-1},{name:"getsuper",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"setsuper",operands:"index:u30",canThrow:!0,stackDelta:-2},{name:"dxns",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"dxnslate",operands:"",canThrow:!0,stackDelta:-1},{name:"kill",operands:"index:u30",canThrow:!1,stackDelta:0},{name:"label",operands:"",
canThrow:!1,stackDelta:0},{name:"lf32x4",operands:"",canThrow:!0,stackDelta:0},{name:"sf32x4",operands:"",canThrow:!0,stackDelta:-2},{name:"ifnlt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifnle",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifngt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifnge",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"jump",operands:"offset:s24",canThrow:!1,stackDelta:0},{name:"iftrue",operands:"offset:s24",canThrow:!1,stackDelta:-1},
{name:"iffalse",operands:"offset:s24",canThrow:!1,stackDelta:-1},{name:"ifeq",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifne",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"iflt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifle",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifgt",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifge",operands:"offset:s24",canThrow:!0,stackDelta:-2},{name:"ifstricteq",operands:"offset:s24",canThrow:!1,stackDelta:-2},
{name:"ifstrictne",operands:"offset:s24",canThrow:!1,stackDelta:-2},{name:"lookupswitch",operands:null,canThrow:!1,stackDelta:-1},{name:"pushwith",operands:"",canThrow:!1,stackDelta:-1},{name:"popscope",operands:"",canThrow:!1,stackDelta:0},{name:"nextname",operands:"",canThrow:!0,stackDelta:-1},{name:"hasnext",operands:"",canThrow:!0,stackDelta:-1},{name:"pushnull",operands:"",canThrow:!1,stackDelta:1},{name:"pushundefined",operands:"",canThrow:!1,stackDelta:1},null,{name:"nextvalue",operands:"",
canThrow:!0,stackDelta:-1},{name:"pushbyte",operands:"value:s08",canThrow:!1,stackDelta:1},{name:"pushshort",operands:"value:s16",canThrow:!1,stackDelta:1},{name:"pushtrue",operands:"",canThrow:!1,stackDelta:1},{name:"pushfalse",operands:"",canThrow:!1,stackDelta:1},{name:"pushnan",operands:"",canThrow:!1,stackDelta:1},{name:"pop",operands:"",canThrow:!1,stackDelta:-1},{name:"dup",operands:"",canThrow:!1,stackDelta:1},{name:"swap",operands:"",canThrow:!1,stackDelta:0},{name:"pushstring",operands:"index:u30S",
canThrow:!1,stackDelta:1},{name:"pushint",operands:"index:u30I",canThrow:!1,stackDelta:1},{name:"pushuint",operands:"index:u30U",canThrow:!1,stackDelta:1},{name:"pushdouble",operands:"index:u30D",canThrow:!1,stackDelta:1},{name:"pushscope",operands:"",canThrow:!1,stackDelta:-1},{name:"pushnamespace",operands:"index:u30N",canThrow:!1,stackDelta:1},{name:"hasnext2",operands:"object:u30,index:u30",canThrow:!0,stackDelta:1},{name:"lix8",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"lix16",
operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"li8",operands:"",canThrow:!0,stackDelta:0},{name:"li16",operands:"",canThrow:!0,stackDelta:0},{name:"li32",operands:"",canThrow:!0,stackDelta:0},{name:"lf32",operands:"",canThrow:!0,stackDelta:0},{name:"lf64",operands:"",canThrow:!0,stackDelta:0},{name:"si8",operands:"",canThrow:!0,stackDelta:-2},{name:"si16",operands:"",canThrow:!0,stackDelta:-2},{name:"si32",operands:"",canThrow:!0,stackDelta:-2},{name:"sf32",operands:"",canThrow:!0,stackDelta:-2},
{name:"sf64",operands:"",canThrow:!0,stackDelta:-2},null,{name:"newfunction",operands:"index:u30MI",canThrow:!0,stackDelta:1},{name:"call",operands:"argCount:u30",canThrow:!0,stackDelta:-1},{name:"construct",operands:"argCount:u30",canThrow:!0,stackDelta:0},{name:"callmethod",operands:"index:u30,argCount:u30",canThrow:!0,stackDelta:0},{name:"callstatic",operands:"index:u30MI,argCount:u30",canThrow:!0,stackDelta:0},{name:"callsuper",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callproperty",
operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"returnvoid",operands:"",canThrow:!1,stackDelta:0},{name:"returnvalue",operands:"",canThrow:!0,stackDelta:-1},{name:"constructsuper",operands:"argCount:u30",canThrow:!0,stackDelta:-1},{name:"constructprop",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callsuperid",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"callproplex",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:0},{name:"callinterface",
operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"callsupervoid",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:-1},{name:"callpropvoid",operands:"index:u30M,argCount:u30",canThrow:!0,stackDelta:-1},{name:"sxi1",operands:"",canThrow:!1,stackDelta:0},{name:"sxi8",operands:"",canThrow:!1,stackDelta:0},{name:"sxi16",operands:"",canThrow:!1,stackDelta:0},{name:"applytype",operands:"argCount:u30",canThrow:!0,stackDelta:0},{name:"pushfloat4",operands:null,canThrow:!1,stackDelta:1},{name:"newobject",
operands:"argCount:u30",canThrow:!0,stackDelta:1},{name:"newarray",operands:"argCount:u30",canThrow:!0,stackDelta:1},{name:"newactivation",operands:"",canThrow:!0,stackDelta:1},{name:"newclass",operands:"index:u30CI",canThrow:!0,stackDelta:0},{name:"getdescendants",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"newcatch",operands:"index:u30EI",canThrow:!0,stackDelta:1},{name:"findpropglobalstrict",operands:null,canThrow:!0,stackDelta:0,internal:!0},{name:"findpropglobal",operands:null,canThrow:!0,
stackDelta:0,internal:!0},{name:"findpropstrict",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"findproperty",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"finddef",operands:null,canThrow:!0,stackDelta:1},{name:"getlex",operands:"index:u30M",canThrow:!0,stackDelta:1},{name:"setproperty",operands:"index:u30M",canThrow:!0,stackDelta:-2},{name:"getlocal",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"setlocal",operands:"index:u30",canThrow:!1,stackDelta:-1},{name:"getglobalscope",
operands:"",canThrow:!1,stackDelta:1},{name:"getscopeobject",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"getproperty",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"getouterscope",operands:null,canThrow:!1,stackDelta:1},{name:"initproperty",operands:"index:u30M",canThrow:!0,stackDelta:-2},null,{name:"deleteproperty",operands:"index:u30M",canThrow:!0,stackDelta:0},null,{name:"getslot",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"setslot",operands:"index:u30",canThrow:!0,
stackDelta:-2},{name:"getglobalslot",operands:"index:u30",canThrow:!1,stackDelta:1},{name:"setglobalslot",operands:"index:u30",canThrow:!1,stackDelta:-1},{name:"convert_s",operands:"",canThrow:!0,stackDelta:0},{name:"esc_xelem",operands:"",canThrow:!0,stackDelta:0},{name:"esc_xattr",operands:"",canThrow:!0,stackDelta:0},{name:"convert_i",operands:"",canThrow:!0,stackDelta:0},{name:"convert_u",operands:"",canThrow:!0,stackDelta:0},{name:"convert_d",operands:"",canThrow:!0,stackDelta:0},{name:"convert_b",
operands:"",canThrow:!0,stackDelta:0},{name:"convert_o",operands:"",canThrow:!0,stackDelta:0},{name:"checkfilter",operands:"",canThrow:!0,stackDelta:0},{name:"convert_f",operands:"",canThrow:!0,stackDelta:0},{name:"unplus",operands:"",canThrow:!0,stackDelta:0},{name:"convert_f4",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,{name:"coerce",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"coerce_b",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_a",operands:"",canThrow:!0,stackDelta:0},
{name:"coerce_i",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_d",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_s",operands:"",canThrow:!0,stackDelta:0},{name:"astype",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"astypelate",operands:"",canThrow:!0,stackDelta:-1},{name:"coerce_u",operands:"",canThrow:!0,stackDelta:0},{name:"coerce_o",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,null,null,{name:"negate",operands:"",canThrow:!0,stackDelta:0},{name:"increment",operands:"",
canThrow:!0,stackDelta:0},{name:"inclocal",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"decrement",operands:"",canThrow:!0,stackDelta:0},{name:"declocal",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"typeof",operands:"",canThrow:!1,stackDelta:0},{name:"not",operands:"",canThrow:!1,stackDelta:0},{name:"bitnot",operands:"",canThrow:!0,stackDelta:0},null,null,null,null,null,null,null,null,{name:"add",operands:"",canThrow:!0,stackDelta:-1},{name:"subtract",operands:"",canThrow:!0,stackDelta:-1},
{name:"multiply",operands:"",canThrow:!0,stackDelta:-1},{name:"divide",operands:"",canThrow:!0,stackDelta:-1},{name:"modulo",operands:"",canThrow:!0,stackDelta:-1},{name:"lshift",operands:"",canThrow:!0,stackDelta:-1},{name:"rshift",operands:"",canThrow:!0,stackDelta:-1},{name:"urshift",operands:"",canThrow:!0,stackDelta:-1},{name:"bitand",operands:"",canThrow:!0,stackDelta:-1},{name:"bitor",operands:"",canThrow:!0,stackDelta:-1},{name:"bitxor",operands:"",canThrow:!0,stackDelta:-1},{name:"equals",
operands:"",canThrow:!0,stackDelta:-1},{name:"strictequals",operands:"",canThrow:!0,stackDelta:-1},{name:"lessthan",operands:"",canThrow:!0,stackDelta:-1},{name:"lessequals",operands:"",canThrow:!0,stackDelta:-1},{name:"greaterthan",operands:"",canThrow:!0,stackDelta:-1},{name:"greaterequals",operands:"",canThrow:!0,stackDelta:-1},{name:"instanceof",operands:"",canThrow:!0,stackDelta:-1},{name:"istype",operands:"index:u30M",canThrow:!0,stackDelta:0},{name:"istypelate",operands:"",canThrow:!0,stackDelta:-1},
{name:"in",operands:"",canThrow:!0,stackDelta:-1},null,null,null,null,null,null,null,null,null,null,null,{name:"increment_i",operands:"",canThrow:!0,stackDelta:0},{name:"decrement_i",operands:"",canThrow:!0,stackDelta:0},{name:"inclocal_i",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"declocal_i",operands:"index:u30",canThrow:!0,stackDelta:0},{name:"negate_i",operands:"",canThrow:!0,stackDelta:0},{name:"add_i",operands:"",canThrow:!0,stackDelta:-1},{name:"subtract_i",operands:"",canThrow:!0,
stackDelta:-1},{name:"multiply_i",operands:"",canThrow:!0,stackDelta:-1},null,null,null,null,null,null,null,null,{name:"getlocal0",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal1",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal2",operands:"",canThrow:!1,stackDelta:1},{name:"getlocal3",operands:"",canThrow:!1,stackDelta:1},{name:"setlocal0",operands:"",canThrow:!1,stackDelta:-1},{name:"setlocal1",operands:"",canThrow:!1,stackDelta:-1},{name:"setlocal2",operands:"",canThrow:!1,stackDelta:-1},
{name:"setlocal3",operands:"",canThrow:!1,stackDelta:-1},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{name:"invalid",operands:"",canThrow:!1,stackDelta:0},null,{name:"debug",operands:"debugType:u08,index:u30S,reg:u08,extra:u30",canThrow:!0,stackDelta:0},{name:"debugline",operands:"lineNumber:u30",canThrow:!0,stackDelta:0},{name:"debugfile",operands:"index:u30S",canThrow:!0,stackDelta:0},null,null,null,null,null,null,null,null,null,null,
null,null,null,null];(function(){for(var a=0;a<opcodeTable.length;a++){var b=opcodeTable[a];if(b&&null!==b.operands){var d=[];if(""!==b.operands)for(var e=b.operands.split(","),f=0;f<e.length;f++){var g=e[f].split(":");d.push({name:g[0],size:g[1].substring(0,3),type:g[1].substring(3)})}b.operands=d}}})();function opcodeName(a){return opcodeTable[a].name}
var AbcStream=function(){function a(a){this.bytes=a;this.view=new DataView(a.buffer,a.byteOffset);this.pos=0}var b=new Int32Array(256);a.prototype={get position(){return this.pos},remaining:function(){return this.bytes.length-this.pos},seek:function(a){this.pos=a},readU8:function(){return this.bytes[this.pos++]},readU8s:function(a){var d=new Uint8Array(a);d.set(this.bytes.subarray(this.pos,this.pos+a),0);this.pos+=a;return d},readS8:function(){return this.bytes[this.pos++]<<24>>24},readU32:function(){return this.readS32()>>>
0},readU30:function(){return this.readU32()},readU30Unsafe:function(){return this.readU32()},readS16:function(){return this.readU30Unsafe()<<16>>16},readS32:function(){var a=this.readU8();a&128&&(a=a&127|this.readU8()<<7,a&16384&&(a=a&16383|this.readU8()<<14,a&2097152&&(a=a&2097151|this.readU8()<<21,a&268435456&&(a=a&268435455|this.readU8()<<28,a&=4294967295))));return a},readWord:function(){var a=this.view.getUint32(this.pos,!0);this.pos+=4;return a},readS24:function(){return(this.readU8()|this.readU8()<<
8|this.readU8()<<16)<<8>>8},readDouble:function(){var a=this.view.getFloat64(this.pos,!0);this.pos+=8;return a},readUTFString:function(a){var d=this.pos,g=d+a,l=this.bytes,m=0;if(!b||b.length<a)b=new Int32Array(2*a);for(a=b;d<g;){var p=l[d++];if(127>=p)a[m++]=p;else if(192<=p){var r=0;224>p?r=(p&31)<<6|l[d++]&63:240>p?r=(p&15)<<12|(l[d++]&63)<<6|l[d++]&63:(r=((p&7)<<18|(l[d++]&63)<<12|(l[d++]&63)<<6|l[d++]&63)-65536,a[m++]=((r&1047552)>>>10)+55296,r=(r&1023)+56320);a[m++]=r}}this.pos=d;return fromCharCodeArray(a.subarray(0,
m))}};if("undefined"!==typeof TextDecoder){var d=new TextDecoder;a.prototype.readUTFString=function(a){var b=this.pos;this.pos+=a;return d.decode(this.bytes.subarray(b,b+a))}}return a}();function parseTraits(a,b,d){for(var e=b.readU30(),f=[],g=0;g<e;g++)f.push(new Trait(a,b,d));return f}
var Trait=function(){function a(a,d,e){var f=a.constantPool,g=a.methods,l=a.classes,m=a.metadata;this.holder=e;this.name=f.multinames[d.readU30()];e=d.readU8();this.kind=e&15;this.attributes=e>>4&15;!0;switch(this.kind){case 0:case 6:this.slotId=d.readU30();this.typeName=f.multinames[d.readU30()];a=d.readU30();this.value=void 0;0!==a&&(this.hasDefaultValue=!0,this.value=f.getValue(d.readU8(),a));break;case 1:case 3:case 2:this.dispId=d.readU30();this.methodInfo=g[d.readU30()];this.methodInfo.name=
this.name;attachHolder(this.methodInfo,this.holder);this.methodInfo.abc=a;break;case 4:this.slotId=d.readU30();!0;this.classInfo=l[d.readU30()];break;case 5:!0}if(this.attributes&4){var p,f=0;for(a=d.readU30();f<a;f++)g=m[d.readU30()],"__go_to_definition_help"===g.name||"__go_to_ctor_definition_help"===g.name||(p||(p={}),p[g.name]=g);p&&(this.isClass()&&(this.classInfo.metadata=p),this.metadata=p)}}a.prototype.isSlot=function(){return 0===this.kind};a.prototype.isConst=function(){return 6===this.kind};
a.prototype.isMethod=function(){return 1===this.kind};a.prototype.isClass=function(){return 4===this.kind};a.prototype.isGetter=function(){return 2===this.kind};a.prototype.isSetter=function(){return 3===this.kind};a.prototype.isProtected=function(){!0;return this.name.namespaces[0].isProtected()};a.prototype.kindName=function(){switch(this.kind){case 0:return"Slot";case 6:return"Const";case 1:return"Method";case 3:return"Setter";case 2:return"Getter";case 4:return"Class";case 5:return"Function"}unexpected()};
a.prototype.isOverride=function(){return this.attributes&2};a.prototype.isFinal=function(){return this.attributes&1};a.prototype.toString=function(){var a=getFlags(this.attributes,["final","override","metadata"]);a&&(a+=" ");a+=Multiname.getQualifiedName(this.name);switch(this.kind){case 0:case 6:return a+", typeName: "+this.typeName+", slotId: "+this.slotId+", value: "+this.value;case 1:case 3:case 2:return a+", "+this.kindName()+": "+this.methodInfo.name;case 4:return a+", slotId: "+this.slotId+
", class: "+this.classInfo}};return a}(),ShumwayNamespace=function(){function a(a,d,e,f){void 0!==a&&(void 0===d&&(d=""),void 0!==e&&(this.prefix=e),this.kind=a,this.originalURI=this.uri=d,b.call(this,f))}function b(a){if(this.isPublic()&&this.uri){var b=this.uri.length-1;58004<this.uri.charCodeAt(b)&&(this.uri=this.uri.substring(0,b-1))}else this.isUnique()&&(this.uri=String(this.uri+g++));a?a=this.uri:(a=this.uri,""===a?a="":(b=l[a],b||(b=String(m.length),m.push(b),l[a]=b),a=b));this.uri=a;!0;this.qualifiedName=
d[this.kind]+"$"+this.uri}var d={};d[CONSTANT_Namespace]="public";d[CONSTANT_PackageNamespace]="public";d[CONSTANT_PackageInternalNs]="packageInternal";d[CONSTANT_PrivateNs]="private";d[CONSTANT_ProtectedNamespace]="protected";d[CONSTANT_ExplicitNamespace]="explicit";d[CONSTANT_StaticProtectedNs]="staticProtected";var e={},f;for(f in d)e[d[f]]=!0;a.PREFIXES=e;var g=0,l=createEmptyObject();createEmptyObject();var m=[];a.fromQualifiedName=function(d){var b=d.indexOf("$"),e=d.indexOf("$",b+1),f=d.substring(0,
b),g=a.kindFromString(f),f=d.substring(b+1,e);d=""===f?f:m[Number(f)];!0;!0;return new a(g,d,void 0,!0)};a.kindFromString=function(a){for(var b in d)if(d[b]===a)return b;return!0};a.createNamespace=function(d,b){return new a(8,d,b)};a.prototype=Object.create({parse:function(a,d){this.kind=d.readU8();this.originalURI=this.uri=a.strings[d.readU30()];b.call(this)},isPublic:function(){return 8===this.kind||22===this.kind},isProtected:function(){return 24===this.kind},isUnique:function(){return 5===this.kind&&
!this.originalURI},isDynamic:function(){return this.isPublic()&&!this.uri},getURI:function(){return this.uri},toString:function(){return d[this.kind]+(this.originalURI?" "+this.originalURI:"")},clone:function(){var d=new a;d.kind=this.kind;d.uri=this.uri;d.originalURI=this.originalURI;d.qualifiedName=this.qualifiedName;return d},isEqualTo:function(a){return this.qualifiedName===a.qualifiedName},inNamespaceSet:function(a){for(var d=0;d<a.length;d++)if(a[d].qualifiedName===this.qualifiedName)return!0;
return!1},getAccessModifier:function(){return d[this.kind]},getQualifiedName:function(){return this.qualifiedName}});a.PUBLIC=new a(8);a.PROTECTED=new a(24);a.PROXY=new a(8,"http://www.adobe.com/2006/actionscript/flash/proxy");var p={};a.fromSimpleName=function(b){if(b in p)return p[b];var e;0===b.indexOf("[")?(!0,e=b.substring(1,b.length-1).split(",")):e=[b];return p[b]=e.map(function(b){b=b.trim();var e;0<b.indexOf(" ")?(e=b.substring(0,b.indexOf(" ")).trim(),b=b.substring(b.indexOf(" ")+1).trim()):
b===d[8]||b===d[23]||b===d[5]||b===d[24]||b===d[25]||b===d[26]?(e=b,b=""):e="public";return new a(a.kindFromString(e),b)})};return a}(),Multiname=function(){function a(a,b,e){void 0!==b&&!0;this.id=d++;this.namespaces=a;this.name=b;this.flags=e||0}function b(a,d){!0;return a?a+"$"+d:d}var d=0;a.TEMPORARY=new a;!0;a.RUNTIME_NAME=4;a.ATTRIBUTE=1;a.parse=function(a,d,b,e){var p=0,r=d.readU8(),s,u=[],w=0;switch(r){case 7:case 13:(p=d.readU30())?u=[a.namespaces[p]]:w&=-5;(p=d.readU30())&&(s=a.strings[p]);
break;case 15:case 16:(p=d.readU30())?s=a.strings[p]:w&=-5;w|=2;break;case 17:case 18:w|=6;break;case 9:case 14:(p=d.readU30())?s=a.strings[p]:w&=-5;p=d.readU30();!0;u=a.namespaceSets[p];break;case 27:case 28:w|=4;p=d.readU30();!0;u=a.namespaceSets[p];break;case 29:return a=d.readU32(),b[a]&&(u=b[a].namespaces,s=b[a].name),d.readU32(),!0,d=d.readU32(),s=new Multiname(u,s,w),s.typeParameter=b[d],b[a]||e.push({multiname:s,index:a}),s;default:unexpected()}switch(r){case 13:case 16:case 18:case 14:case 28:w|=
1}return new Multiname(u,s,w)};a.isMultiname=function(a){return"number"===typeof a||"string"===typeof a||a instanceof Multiname||a instanceof Number};a.needsResolution=function(d){return d instanceof a&&1<d.namespaces.length};a.isQName=function(d){return d instanceof a?d.namespaces&&1===d.namespaces.length:!0};a.isRuntimeName=function(a){return a instanceof Multiname&&a.isRuntimeName()};a.isRuntimeNamespace=function(a){return a instanceof Multiname&&a.isRuntimeNamespace()};a.isRuntime=function(a){return a instanceof
Multiname&&a.isRuntimeName()||a.isRuntimeNamespace()};a.getQualifiedName=function(a){!0;if(a instanceof Multiname){if(void 0!==a.qualifiedName)return a.qualifiedName;var d=String(a.name);if(isNumeric(d))return!0,a.qualifiedName=d;a=a.qualifiedName=b(a.namespaces[0].qualifiedName,d)}return a};a.qualifyName=function(a,d){return b(a.qualifiedName,d)};a.stripPublicQualifier=function(a){return 0!==a.indexOf("public$$")?void 0:a.substring(8)};a.fromQualifiedName=function(a){if(a instanceof Multiname)return a;
!0;var d=a.indexOf("$");if(!(0>d)&&ShumwayNamespace.PREFIXES[a.substring(0,d)]){var b=ShumwayNamespace.fromQualifiedName(a),d=a.indexOf("$",d+1);return new Multiname([b],a.substring(d+1))}};a.getFullQualifiedName=function(d){var b=a.getQualifiedName(d);d instanceof Multiname&&d.typeParameter&&(b+="$"+a.getFullQualifiedName(d.typeParameter));return b};a.PUBLIC_QUALIFIED_NAME_PREFIX="public$$";a.getPublicQualifiedName=function(a){return isNumeric(a)?toNumber(a):null!==a&&isObject(a)?a:"public$$"+a};
a.isPublicQualifiedName=function(a){return"number"===typeof a||isNumeric(a)||0===a.indexOf("public$$")};a.getAccessModifier=function(a){!0;if("number"===typeof a||"string"===typeof a||a instanceof Number)return"public";!0;return a.namespaces[0].getAccessModifier()};a.isNumeric=function(d){if("number"===typeof d)return!0;if("string"===typeof d)return isNumeric(d);!0;return!isNaN(parseInt(a.getName(d),10))};a.getName=function(a){!0;!0;return a.getName()};a.isAnyName=function(a){return"object"===typeof a&&
!a.isRuntimeName()&&!a.name};var e={};a.fromSimpleName=function(a){!0;if(a in e)return e[a];var d,b;d=a.lastIndexOf(".");0>=d&&(d=a.lastIndexOf(" "));0<d&&d<a.length-1?(b=a.substring(d+1).trim(),d=a.substring(0,d).trim()):(b=a,d="");return e[a]=new Multiname(ShumwayNamespace.fromSimpleName(d),b)};a.prototype.getQName=function(a){!0;!0;this.cache||(this.cache=[]);var d=this.cache[a];d||(d=this.cache[a]=new Multiname([this.namespaces[a]],this.name,this.flags));return d};a.prototype.hasQName=function(a){!0;
if(this.name!==a.name)return!1;for(var d=0;d<this.namespaces.length;d++)if(this.namespaces[d].isEqualTo(a.namespaces[0]))return!0;return!1};a.prototype.isAttribute=function(){return this.flags&1};a.prototype.isAnyName=function(){return Multiname.isAnyName(this)};a.prototype.isAnyNamespace=function(){return!this.isRuntimeNamespace()&&(0===this.namespaces.length||this.isAnyName()&&1!==this.namespaces.length)};a.prototype.isRuntimeName=function(){return this.flags&4};a.prototype.isRuntimeNamespace=function(){return this.flags&
2};a.prototype.isRuntime=function(){return this.flags&6};a.prototype.isQName=function(){return 1===this.namespaces.length&&!this.isAnyName()};a.prototype.hasTypeParameter=function(){return!!this.typeParameter};a.prototype.getName=function(){return this.name};a.prototype.getOriginalName=function(){!0;var a=this.namespaces[0].originalURI;a&&(a+=".");return a+this.name};a.prototype.getNamespace=function(){!0;!0;return this.namespaces[0]};a.prototype.nameToString=function(){if(this.isAnyName())return"*";
var a=this.getName();return this.isRuntimeName()?"[]":a};a.prototype.hasObjectName=function(){return"object"===typeof this.name};a.prototype.toString=function(){var a=this.isAttribute()?"@":"";if(this.isAnyNamespace())a+="*::"+this.nameToString();else if(this.isRuntimeNamespace())a+="[]::"+this.nameToString();else if(1===this.namespaces.length&&this.isQName())a+=this.namespaces[0].toString()+"::",a+=this.nameToString();else{for(var a=a+"{",d=0,b=this.namespaces.length;d<b;d++)a+=this.namespaces[d].toString(),
d+1<b&&(a+=",");a+="}::"+this.nameToString()}this.hasTypeParameter()&&(a+="<"+this.typeParameter.toString()+">");return a};a.Int=a.getPublicQualifiedName("int");a.Uint=a.getPublicQualifiedName("uint");a.Class=a.getPublicQualifiedName("Class");a.Array=a.getPublicQualifiedName("Array");a.Object=a.getPublicQualifiedName("Object");a.String=a.getPublicQualifiedName("String");a.Number=a.getPublicQualifiedName("Number");a.Boolean=a.getPublicQualifiedName("Boolean");a.Function=a.getPublicQualifiedName("Function");
a.XML=a.getPublicQualifiedName("XML");a.XMLList=a.getPublicQualifiedName("XMLList");return a}(),ConstantPool=function(){function a(a){var e,f,g=[0];f=a.readU30();for(e=1;e<f;++e)g.push(a.readS32());var l=[0];f=a.readU30();for(e=1;e<f;++e)l.push(a.readU32());var m=[NaN];f=a.readU30();for(e=1;e<f;++e)m.push(a.readDouble());Timer.start("Parse Strings");var p=[""];f=a.readU30();for(e=1;e<f;++e)p.push(a.readUTFString(a.readU30()));this.positionAfterUTFStrings=a.pos;Timer.stop();this.ints=g;this.uints=
l;this.doubles=m;this.strings=p;Timer.start("Parse Namespaces");g=[void 0];f=a.readU30();for(e=1;e<f;++e)l=new ShumwayNamespace,l.parse(this,a),g.push(l);Timer.stop();Timer.start("Parse Namespace Sets");l=[void 0];f=a.readU30();for(e=1;e<f;++e){m=a.readU30();p=[];p.id=b++;for(var r=0;r<m;++r)p.push(g[a.readU30()]);l.push(p)}Timer.stop();this.namespaces=g;this.namespaceSets=l;Timer.start("Parse Multinames");g=[void 0];l=[];f=a.readU30();for(e=1;e<f;++e)g.push(Multiname.parse(this,a,g,l));Timer.stop();
this.multinames=g}var b=1;a.prototype.getValue=function(a,b){switch(a){case 3:return this.ints[b];case 4:return this.uints[b];case 6:return this.doubles[b];case 1:return this.strings[b];case 11:return!0;case 10:return!1;case 12:return null;case 0:break;case 8:case 23:return this.namespaces[b];case 7:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return this.multinames[b];case 2:warning("TODO: CONSTANT_Float may be deprecated?");break;default:!0}};return a}(),MethodInfo=function(){function a(a){!0;
return"p"+String.fromCharCode(65+a)}function b(d,b){for(var g=d.constantPool,l=b.readU30(),m=g.multinames[b.readU30()],p=[],r=0;r<l;r++)p.push({type:g.multinames[b.readU30()]});var s=g.strings[b.readU30()],u=b.readU8(),r=0;if(u&8){r=b.readU30();!0;for(r=l-r;r<l;r++){var w=b.readU30();p[r].value=g.getValue(b.readU8(),w)}}if(u&128)for(r=0;r<l;r++)b.readU30(),p[r].name=a(r);else for(r=0;r<l;r++)p[r].name=a(r);this.abc=d;this.flags=u;this.optionals=null;this.debugName=s;this.parameters=p;this.returnType=
m}function d(a,d){var b=a.constantPool.multinames,b={start:d.readU30(),end:d.readU30(),target:d.readU30(),typeName:b[d.readU30()],varName:b[d.readU30()]};!0;!0;return b}b.prototype={toString:function(){var a=getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL   SET_DXN HAS_PARAM_NAMES".split(" "));return(a?a+" ":"")+this.name},hasOptional:function(){return!!(this.flags&8)},needsActivation:function(){return!!(this.flags&2)},needsRest:function(){return!!(this.flags&4)},needsArguments:function(){return!!(this.flags&
1)},isNative:function(){return!!(this.flags&32)},isClassMember:function(){return this.holder instanceof ClassInfo},isInstanceMember:function(){return this.holder instanceof InstanceInfo},isScriptMember:function(){return this.holder instanceof ScriptInfo}};b.parseBody=function(a,b){var g=a.methods[b.readU30()];g.hasBody=!0;!0;g.maxStack=b.readU30();g.localCount=b.readU30();g.initScopeDepth=b.readU30();g.maxScopeDepth=b.readU30();g.code=b.readU8s(b.readU30());for(var l=[],m=b.readU30(),p=0;p<m;++p)l.push(d(a,
b));g.exceptions=l;g.traits=parseTraits(a,b,g)};b.prototype.hasExceptions=function(){return 0<this.exceptions.length};return b}(),MetaDataInfo=function(){function a(a,d){for(var e=a.constantPool.strings,f=this.name=e[d.readU30()],g=d.readU30(),l=[],m=[],p=0;p<g;p++)l[p]=e[d.readU30()];for(p=0;p<g;p++){var r=l[p];m[p]={key:r,value:e[d.readU30()]};r&&"native"===f&&(!0,this[r]=m[p].value)}this.value=m}a.prototype={toString:function(){return"["+this.name+"]"}};return a}();
function attachHolder(a,b){!0;a.holder=b}
var InstanceInfo=function(){function a(a,e){this.id=b++;this.abc=a;var f=a.constantPool,g=a.methods;this.name=f.multinames[e.readU30()];!0;this.superName=f.multinames[e.readU30()];this.flags=e.readU8();this.protectedNs=void 0;this.flags&8&&(this.protectedNs=f.namespaces[e.readU30()]);var l=e.readU30();this.interfaces=[];for(var m=0;m<l;m++)this.interfaces[m]=f.multinames[e.readU30()];this.init=g[e.readU30()];this.init.isInstanceInitializer=!0;this.init.name=this.name;attachHolder(this.init,this);
this.traits=parseTraits(a,e,this)}var b=1;a.prototype={toString:function(){var a=getFlags(this.flags&8,["sealed","final","interface","protected"]),a=(a?a+" ":"")+this.name;this.superName&&(a+=" extends "+this.superName);return a},isFinal:function(){return this.flags&2},isSealed:function(){return this.flags&1},isInterface:function(){return this.flags&4}};return a}(),ClassInfo=function(){function a(a,e,f){this.id=b++;this.abc=a;this.init=a.methods[f.readU30()];this.init.isClassInitializer=!0;attachHolder(this.init,
this);this.traits=parseTraits(a,f,this);this.instanceInfo=e;this.instanceInfo.classInfo=this;this.defaultValue=Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Int||Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Uint?0:Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Number?NaN:Multiname.getQualifiedName(this.instanceInfo.name)===Multiname.Boolean?!1:null}var b=1;a.prototype.toString=function(){return this.instanceInfo.name.toString()};return a}();
function isClassOrInstanceInfo(a){return a instanceof ClassInfo||a instanceof InstanceInfo}
var ScriptInfo=function(){function a(a,e,f){this.id=b++;this.abc=a;this.name=a.name+"$script"+e;this.init=a.methods[f.readU30()];this.init.isScriptInitializer=!0;this.index=e;attachHolder(this.init,this);this.traits=parseTraits(a,f,this);this.traits.verified=!0}var b=1;a.prototype={get entryPoint(){return this.init},toString:function(){return this.name}};return a}(),AbcFile=function(){function a(a,d){Timer.start("Parse ABC");this.name=d;this.env={};var e,f,g=new AbcStream(a);e=g.readWord();if(3014671>
e)throw Error("Invalid ABC File (magic = "+Number(e).toString(16)+")");Timer.start("Parse constantPool");this.constantPool=new ConstantPool(g,d);Timer.stop();Timer.start("Parse Method Infos");this.methods=[];e=g.readU30();for(f=0;f<e;++f)this.methods.push(new MethodInfo(this,g));Timer.stop();Timer.start("Parse MetaData Infos");this.metadata=[];e=g.readU30();for(f=0;f<e;++f)this.metadata.push(new MetaDataInfo(this,g));Timer.stop();Timer.start("Parse Instance Infos");this.instances=[];e=g.readU30();
for(f=0;f<e;++f)this.instances.push(new InstanceInfo(this,g));Timer.stop();Timer.start("Parse Class Infos");this.classes=[];for(f=0;f<e;++f)this.classes.push(new ClassInfo(this,this.instances[f],g));Timer.stop();Timer.start("Parse Script Infos");this.scripts=[];e=g.readU30();for(f=0;f<e;++f)this.scripts.push(new ScriptInfo(this,f,g));Timer.stop();Timer.start("Parse Method Body Info");e=g.readU30();for(f=0;f<e;++f)MethodInfo.parseBody(this,g);Timer.stop();Timer.stop()}a.prototype={get lastScript(){!0;
return this.scripts[this.scripts.length-1]},toString:function(){return this.name}};return a}(),Bytecode=function(){function a(a){var d=a.readU8();this.op=d;this.originalPosition=a.position;var e=opcodeTable[d];e||unexpected("Unknown Op "+d);this.canThrow=e.canThrow;var f;switch(d){case 27:e=a.readS24();this.offsets=[];f=a.readU30()+1;for(d=0;d<f;d++)this.offsets.push(a.readS24());this.offsets.push(e);break;default:d=0;for(f=e.operands.length;d<f;d++){var g=e.operands[d];switch(g.size){case "u08":this[g.name]=
a.readU8();break;case "s08":this[g.name]=a.readS8();break;case "s16":this[g.name]=a.readS16();break;case "s24":this[g.name]=a.readS24();break;case "u30":this[g.name]=a.readU30();break;case "u32":this[g.name]=a.readU32();break;default:unexpected()}}}}a.prototype={makeBlockHead:function(a){if(this.succs)return a;this.bid=a;this.succs=[];this.preds=[];this.dominatees=[];return a+1},trace:function(a){this.succs&&a.writeLn("#"+this.bid)},toString:function(a){var d=opcodeTable[this.op],e=d.name.padRight(" ",
20),f,g;if(27===this.op){e+="targets:";f=0;for(g=this.targets.length;f<g;f++)e+=(0<f?",":"")+this.targets[f].position}else{f=0;for(g=d.operands.length;f<g;f++){var l=d.operands[f];if("offset"===l.name)e+="target:"+this.target.position;else{var e=e+(l.name+": "),m=this[l.name];if(a)switch(l.type){case "":e+=m;break;case "I":e+=a.constantPool.ints[m];break;case "U":e+=a.constantPool.uints[m];break;case "D":e+=a.constantPool.doubles[m];break;case "S":e+=a.constantPool.strings[m];break;case "N":e+=a.constantPool.namespaces[m];
break;case "CI":e+=a.classes[m];break;case "M":e+=a.constantPool.multinames[m];break;default:e+="?"}else e+=m}f<g-1&&(e+=", ")}}return e}};return a}(),Analysis=function(){function a(a){Counter.count("Analysis");this.method=a;this.method.code&&(Timer.start("Normalize"),this.normalizeBytecode(),Timer.stop())}a.prototype={normalizeBytecode:function(){function a(d,b){if(d&&d[b])return d[b];var e=Object.create(Bytecode.prototype);e.op=237;e.position=b;d&&(d[b]=e);return e}function d(a){0!==a--&&a<e.parameters.length&&
(e.parameters[a].isUsed=!0)}for(var e=this.method,f=[],g=[],l=new AbcStream(this.method.code),m;0<l.remaining();){var p=l.position;m=new Bytecode(l);switch(m.op){case 2:case 9:f[p]=g.length;continue;case 27:this.method.hasLookupSwitches=!0;m.targets=[];for(var r=m.offsets,s=0,u=r.length;s<u;s++)r[s]+=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:m.offset+=l.position;break;case 208:case 209:case 210:case 211:d(m.op-208);
break;case 98:d(m.index)}m.position=g.length;f[p]=g.length;g.push(m)}for(var l={},w=0,z=g.length;w<z;w++)switch(m=g[w],m.op){case 27:r=m.offsets;s=0;for(u=r.length;s<u;s++)p=f[r[s]],m.targets.push(g[p]||a(l,r[s])),r[s]=p;break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=f[m.offset],m.target=g[p]||a(l,m.offset),m.offset=p}this.bytecodes=g;m=this.method.exceptions;s=0;for(u=m.length;s<u;s++)r=m[s],r.start=f[r.start],r.end=
f[r.end],r.offset=f[r.target],r.target=g[r.offset],r.target.exception=r},detectBasicBlocks:function(){var a=this.bytecodes,d=this.method.exceptions,e=0<d.length,f={},g,l,m,p;p=a[0].makeBlockHead(0);l=0;for(m=a.length-1;l<m;l++)switch(g=a[l],g.op){case 71:case 72:case 3:p=a[l+1].makeBlockHead(p);break;case 27:g=g.targets;for(var r=0,s=g.length;r<s;r++)p=g[r].makeBlockHead(p);p=a[l+1].makeBlockHead(p);break;case 16:case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=
g.target.makeBlockHead(p),p=a[l+1].makeBlockHead(p)}g=a[m];switch(g.op){case 27:g=g.targets;r=0;for(s=g.length;r<s;r++)p=g[r].makeBlockHead(p);break;case 16:p=g.target.makeBlockHead(p);break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:p=g.target.makeBlockHead(p),a[l+1]=getInvalidTarget(null,l+1),p=a[l+1].makeBlockHead(p)}if(e){r=0;for(s=d.length;r<s;r++)l=d[r],m=a[l.end+1],p=a[l.start].makeBlockHead(p),m&&(p=m.makeBlockHead(p)),p=
l.target.makeBlockHead(p)}var u=a[0];l=1;for(m=a.length;l<m;l++)if(a[l].succs){!0;f[u.bid]=u;g=a[l-1];u.end=g;var w=a[l];switch(g.op){case 71:case 72:case 3:break;case 27:r=0;for(s=g.targets.length;r<s;r++)u.succs.push(g.targets[r]);break;case 16:u.succs.push(g.target);break;case 21:case 12:case 22:case 13:case 23:case 14:case 24:case 15:case 19:case 20:case 25:case 26:case 17:case 18:u.succs.push(g.target);g.target!==w&&u.succs.push(w);break;default:u.succs.push(w)}if(e){r=u;s=[];g=0;for(var z=d.length;g<
z;g++){var A=d[g];r.position>=A.start&&r.end.position<=A.end&&s.push(A.target)}g=s;u.hasCatches=0<g.length;u.succs.push.apply(u.succs,g)}u=w}f[u.bid]=u;g=a[m-1];switch(g.op){case 27:r=0;for(s=g.targets.length;r<s;r++)u.succs.push(g.targets[r]);break;case 16:u.succs.push(g.target)}u.end=g;var v=BitSetFunctor(p),B=v.ADDRESS_BITS_PER_WORD,y=v.BITS_PER_WORD,D=v.BIT_INDEX_MASK;v.singleton=function(a){var d=new v;d.set(a.bid);d.count=1;d.dirty=0;return d};v.fromBlocks=function(a){var d=new v;d.setBlocks(a);
return d};a=v.prototype;v.singleword?(a.forEachBlock=function(a){!0;var d=this.bits;if(d)for(var b=0;b<y;b++)d&1<<b&&a(f[b])},a.choose=function(){var a=this.bits;if(a)for(var d=0;d<y;d++)if(a&1<<d)return f[d]},a.members=function(){var a=[],d=this.bits;if(d)for(var b=0;b<y;b++)d&1<<b&&a.push(f[b]);return a},a.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++)d|=1<<(a[b].bid&D);this.bits=d}):(a.forEachBlock=function(a){!0;for(var d=this.bits,b=0,e=d.length;b<e;b++){var g=d[b];if(g)for(var l=
0;l<y;l++)g&1<<l&&a(f[b*y+l])}},a.choose=function(){for(var a=this.bits,d=0,b=a.length;d<b;d++){var e=a[d];if(e)for(var g=0;g<y;g++)if(e&1<<g)return f[d*y+g]}},a.members=function(){for(var a=[],d=this.bits,b=0,e=d.length;b<e;b++){var g=d[b];if(g)for(var l=0;l<y;l++)g&1<<l&&a.push(f[b*y+l])}return a},a.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++){var f=a[b].bid;d[f>>B]|=1<<(f&D)}});this.BlockSet=v},normalizeReachableBlocks:function(){var a=this.bytecodes[0];!0;var d=this.BlockSet,
e=[],f={},g={},l=[a];for(g[a.bid]=!0;a=l.top();)if(f[a.bid]){if(1===f[a.bid]){f[a.bid]=2;e.push(a);for(var m=a.succs,p=0,r=m.length;p<r;p++)m[p].preds.push(a)}g[a.bid]=!1;l.pop()}else{f[a.bid]=1;g[a.bid]=!0;m=a.succs;p=0;for(r=m.length;p<r;p++){var s=m[p];g[s.bid]&&(a.spbacks||(a.spbacks=new d),a.spbacks.set(s.bid));!f[s.bid]&&l.push(s)}}this.blocks=e.reverse()},computeDominance:function(){var a=this.blocks,d=a.length,e=Array(d);e[0]=0;for(var f={},g=0;g<d;g++)f[a[g].bid]=g;for(var l=!0;l;){l=!1;
for(g=1;g<d;g++){var m=a[g].preds,p=m.length,r=f[m[0].bid];if(!(r in e))for(var s=1;s<p&&!(r=f[m[s].bid],r in e);s++);!0;for(s=0;s<p;s++){var u=f[m[s].bid];if(u!==r&&u in e){for(;u!==r;){for(;u>r;)u=e[u];for(;r>u;)r=e[r]}r=u}}e[g]!==r&&(e[g]=r,l=!0)}}a[0].dominator=a[0];for(g=1;g<d;g++)f=a[g],p=a[e[g]],f.dominator=p,p.dominatees.push(f),f.npreds=f.preds.length;d=[a[0]];for(a[0].level||(a[0].level=0);f=d.shift();){a=f.dominatees;s=0;for(p=a.length;s<p;s++)a[s].level=f.level+1;d.push.apply(d,a)}},analyzeControlFlow:function(){!0;
this.detectBasicBlocks();this.normalizeReachableBlocks();this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(b,e){var f=new d;f.setBlocks(b);f.recount();this.id=e;this.body=f;this.exit=new d;this.save={};this.head=new d;this.npreds=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var d=this.BlockSet,e;e=this.blocks;for(var f=new d,g=0,l=e.length;g<l;g++){var m=e[g],p=m.spbacks;if(p)for(var m=m.succs,r=0,s=m.length;r<s;r++){var u=m[r];p.get(u.bid)&&
f.set(u.dominator.bid)}}e=f.members();if(0>=e.length)return this.markedLoops=!0;e=e.sort(function(a,d){return a.level-d.level});f=0;for(g=e.length-1;0<=g;g--){for(var l=e[g],p=1,m={},r={},s=[],u=[],w=[],z=l.level+1,A=[l],v=void 0,B=void 0,v=void 0;v=A.top();)if(m[v.bid]){if(u.peek()===v){u.pop();var y=[];do B=s.pop(),r[B.bid]=!0,y.push(B);while(B!==v);(1<y.length||B.spbacks&&B.spbacks.get(B.bid))&&w.push(y)}A.pop()}else{m[v.bid]=p++;s.push(v);u.push(v);for(var B=v.succs,y=0,D=B.length;y<D;y++)if(v=
B[y],!(v.level<z)){var F=v.bid;if(m[F]){if(!r[F])for(;m[u.peek().bid]>m[F];)u.pop()}else A.push(v)}}p=w;if(0!==p.length){m=0;for(r=p.length;m<r;m++){s=p[m];u=new a(s,f++);w=0;for(z=s.length;w<z;w++)if(A=s[w],A.level===l.level+1&&!A.loop){A.loop=u;u.head.set(A.bid);v=A.preds;B=0;for(y=v.length;B<y;B++)u.body.get(v[B].bid)&&A.npreds--;u.npreds+=A.npreds}w=0;for(z=s.length;w<z;w++)A=s[w],A.level===l.level+1&&(A.npreds=u.npreds);u.head.recount()}}}return this.markedLoops=!0}};return a}();
(function(a){function b(a){for(var d=["leadingComments","loc"];a;)a.fields&&(d=a.fields.concat(d)),a=a.extends?f[a.extends]:null;return d}function d(a){return"_"+a}function e(g,m){if(!a[g]){for(var p=b(m),r=[],s=['this.type = "'+g+'";'],u=0,w=p.length;u<w;u++){var z=p[u];"@"===z.charAt(0)&&(p[u]=z=z.substr(1),r.push(z));s.push("this."+z+" = _"+z+";")}p=new Function(p.map(d),s.join("\n"));m.extends&&(s=e(m.extends,f[m.extends]),p.prototype=Object.create(s.prototype));Object.defineProperty(p.prototype,
"_children",{value:r,writable:!0,configurable:!0,enumerable:!1});a[g]=p}return a[g]}var f=a.lang={Node:{},Program:{"extends":"Node",fields:["@body"]},Statement:{"extends":"Node"},EmptyStatement:{"extends":"Statement"},BlockStatement:{"extends":"Statement",fields:["@body"]},ExpressionStatement:{"extends":"Statement",fields:["@expression"]},IfStatement:{"extends":"Statement",fields:["@test","@consequent","@alternate"]},LabeledStatement:{"extends":"Statement",fields:["@label","@body"]},BreakStatement:{"extends":"Statement",
fields:["@label"]},ContinueStatement:{"extends":"Statement",fields:["@label"]},WithStatement:{"extends":"Statement",fields:["@object","@body"]},SwitchStatement:{"extends":"Statement",fields:["@discriminant","@cases","lexical"]},ReturnStatement:{"extends":"Statement",fields:["@argument"]},ThrowStatement:{"extends":"Statement",fields:["@argument"]},TryStatement:{"extends":"Statement",fields:["@block","@handlers","@finalizer"]},WhileStatement:{"extends":"Statement",fields:["@test","@body"]},DoWhileStatement:{"extends":"Statement",
fields:["@body","@test"]},ForStatement:{"extends":"Statement",fields:["@init","@test","@update","@body"]},ForInStatement:{"extends":"Statement",fields:["@left","@right","@body","each"]},LetStatement:{"extends":"Statement",fields:["@head","@body"]},DebuggerStatement:{"extends":"Statement"},Declaration:{"extends":"Statement"},FunctionDeclaration:{"extends":"Declaration",fields:"@id @params @body @decltype generator expression @modifiers".split(" ")},VariableDeclaration:{"extends":"Declaration",fields:["kind",
"@declarations"]},VariableDeclarator:{"extends":"Node",fields:["@id","@init","@decltype","@arguments"]},Expression:{"extends":"Pattern"},ThisExpression:{"extends":"Expression"},ArrayExpression:{"extends":"Expression",fields:["@elements"]},ObjectExpression:{"extends":"Expression",fields:["@properties"]},Property:{"extends":"Node",fields:["@key","@value","kind"]},FunctionExpression:{"extends":"Expression",fields:"@id @params @body @decltype generator expression".split(" ")},SequenceExpression:{"extends":"Expression",
fields:["@expressions"]},UnaryExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},BinaryExpression:{"extends":"Expression",fields:["operator","@left","@right"]},AssignmentExpression:{"extends":"Expression",fields:["@left","operator","@right"]},UpdateExpression:{"extends":"Expression",fields:["operator","@argument","prefix"]},LogicalExpression:{"extends":"Expression",fields:["operator","@left","@right"]},ConditionalExpression:{"extends":"Expression",fields:["@test","@consequent",
"@alternate"]},NewExpression:{"extends":"Expression",fields:["@callee","@arguments"]},CallExpression:{"extends":"Expression",fields:["@callee","@arguments"]},MemberExpression:{"extends":"Expression",fields:["@object","@property","computed","kind"]},YieldExpression:{"extends":"Expression",fields:["@argument"]},ComprehensionExpression:{"extends":"Expression",fields:["@blocks","@filter"]},GeneratorExpression:{"extends":"Expression",fields:["@blocks","@filter"]},LetExpression:{"extends":"Expression",
fields:["@head","@body"]},Pattern:{"extends":"Node"},ObjectPattern:{"extends":"Pattern",fields:["@properties"]},ArrayPattern:{"extends":"Pattern",fields:["@elements"]},SwitchCase:{"extends":"Node",fields:["@test","@consequent"]},CatchClause:{"extends":"Node",fields:["@param","@guard","@body"]},Identifier:{"extends":"Expression",fields:["name","kind"]},Literal:{"extends":"Expression",fields:["value"]},Type:{"extends":"Node"},PointerType:{"extends":"Type",fields:["@base"]},ArrayType:{"extends":"PointerType",
fields:["length"]},StructType:{"extends":"Type",fields:["@id","@members","isUnion"]},MemberDeclarator:{"extends":"Node",fields:["modifiers","@declarator"]},ArrowType:{"extends":"Type",fields:["@params","@return"]},TypeIdentifier:{"extends":"Type",fields:["name"]},TypeAliasDirective:{"extends":"Node",fields:["@original","@alias"]},CastExpression:{"extends":"Expression",fields:["@as","@argument"]}};a.allFields=b;for(var g in f)e(g,f[g]);a.makePass=function(a,d){return function(b){for(var e,f,g,w=this._children,
z=0,A=w.length;z<A;z++)if(g=this[w[z]])if(g instanceof Array){f=this[w[z]]=[];for(var v=0,B=g.length;v<B;v++)g[v]?"function"===typeof g[v][a]&&(e=g[v][a](b),null!==e&&f.push(e)):f.push(g[v])}else"function"===typeof g[a]&&(e=g[a](b),this[w[z]]=null===e?void 0:e);return"function"===typeof this[d]?(b.logger&&"undefined"!==typeof this.loc?(b.logger.push(this),e=this[d](b),b.logger.pop()):e=this[d](b),null===e?null:e?e:this):this}};a.makePass=function(a,d,b){return function(e){for(var f,g,w,z=this._children,
A=0,v=z.length;A<v;A++)if(g=b?z.length-1-A:A,w=this[z[g]])if(w instanceof Array){g=this[z[g]]=[];var B;B=0;for(var y=w.length;B<y;B++)f=b?w.length-1-B:B,w[f]?"function"===typeof w[f][a]&&(f=w[f][a](e),null!==f&&(b?g.unshift(f):g.push(f))):b?g.unshift(w[f]):g.push(w[f])}else"function"===typeof w[a]&&(f=w[a](e),this[z[g]]=null===f?void 0:f);return"function"===typeof this[d]?(e.logger&&"undefined"!==typeof this.loc?(e.logger.push(this),f=this[d](e),e.logger.pop()):f=this[d](e),null===f?null:f?f:this):
this}};a.lift=function m(d){if(!d)return d;if(d instanceof Array)return d.map(function(a){return a?m(a):a});var e=d.type,g=a[e];if(!g)throw Error("unknown node type `"+e+"'");g=new g;g.loc=d.loc;for(var e=b(f[e]),u=0,w=e.length;u<w;u++){var z;"@"===e[u].charAt(0)?(z=e[u].substr(1),d[z]&&(g[z]=m(d[z]))):(z=e[u],g[z]=d[z])}return g};a.flatten=function p(a){if(!a)return a;if(a instanceof Array)return a.map(function(a){return p(a)});for(var d=a.type,e={type:d},d=b(f[d]),g=0,z=d.length;g<z;g++){var A;
"@"===d[g].charAt(0)?(A=d[g].substr(1),e[A]=a[A]?p(a[A]):null):(A=d[g],e[A]=a[A])}return e}})("undefined"===typeof exports?estransform={}:exports);
(function(a){function b(a){var d=a.length,b=[],e;for(e=0;e<d;e+=1)b[e]=a.charAt(e);return b}function d(a,d){var b="";for(d|=0;0<d;d>>>=1,a+=a)d&1&&(b+=a);return b}function e(a){a=a.charAt(a.length-1);return"\r"===a||"\n"===a}function f(a){var d={},b,e;for(b in a)a.hasOwnProperty(b)&&(e=a[b],d[b]="object"===typeof e&&null!==e?f(e):e);return d}function g(a,d){function b(a){return"object"===typeof a&&a instanceof Object&&!(a instanceof RegExp)}var e,f;for(e in d)d.hasOwnProperty(e)&&(f=d[e],b(f)?b(a[e])?
g(a[e],f):a[e]=g({},f):a[e]=f);return a}function l(a){return 0<="\t\v\f \u00a0".indexOf(a)||5760<=a.charCodeAt(0)&&0<="\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\ufeff".indexOf(a)}function m(a){return 0<="\n\r\u2028\u2029".indexOf(a)}function p(a){return"$"===a||"_"===a||"\\"===a||"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a||128<=a.charCodeAt(0)&&Q.NonAsciiIdentifierPart.test(a)}function r(a,d){var b=a.charAt(a.length-1),e=d.charAt(0);return("+"===
b||"-"===b)&&b===e||p(b)&&p(e)?a+" "+d:l(b)||m(b)||l(e)||m(e)?a+d:a+N+d}function s(a){return G+a}function u(a,d){if("Line"===a.type)return e(a.value)?"//"+a.value:"//"+a.value+"\n";if(ca.format.indent.adjustMultilineComment&&/[\n\r]/.test(a.value)){var b=d,f,g,m,r,p,v;f=("/*"+a.value+"*/").split(/\r\n|[\r\n]/);v=Number.MAX_VALUE;g=1;for(m=f.length;g<m;g+=1){r=f[g];for(p=0;p<r.length&&l(r[p]);)p+=1;v>p&&(v=p)}"undefined"!==typeof b?(r=G,"*"===f[1][v]&&(b+=" "),G=b):(1===v%2&&(v-=1),r=G);g=1;for(m=
f.length;g<m;g+=1)f[g]=s(f[g].slice(v));G=r;return f.join("\n")}return"/*"+a.value+"*/"}function w(a,d,b){return d<b?"("+a+")":a}function z(a,d){var b,e;b=!ca.comment||!a.leadingComments;if(a.type===E.BlockStatement&&b)return N+y(a);if(a.type===E.EmptyStatement&&b)return";";b=G;G+=I;e=M+s(y(a,{semicolonOptional:d}));G=b;return e}function A(a,d){return a.type===E.BlockStatement&&(!ca.comment||!a.leadingComments)&&!e(d)?N:e(d)?G+"":(""===M?" ":M)+(G+"")}function v(a){var d,b,e;d="(";b=0;for(e=a.params.length;b<
e;b+=1)d+=a.params[b].name,b+1<e&&(d+=","+N);return d+")"+z(a.body)}function B(a,d){var f,g,l,m,p,u;g=d.precedence;p=d.allowIn;u=d.allowCall;switch(a.type){case E.SequenceExpression:f="";p|=C.Sequence<g;m=0;for(l=a.expressions.length;m<l;m+=1)f+=B(a.expressions[m],{precedence:C.Assignment,allowIn:p,allowCall:!0}),m+1<l&&(f+=","+N);f=w(f,C.Sequence,g);break;case E.AssignmentExpression:p|=C.Assignment<g;f=w(B(a.left,{precedence:C.Call,allowIn:p,allowCall:!0})+N+a.operator+N+B(a.right,{precedence:C.Assignment,
allowIn:p,allowCall:!0}),C.Assignment,g);break;case E.ConditionalExpression:p|=C.Conditional<g;f=w(B(a.test,{precedence:C.LogicalOR,allowIn:p,allowCall:!0})+N+"?"+N+B(a.consequent,{precedence:C.Assignment,allowIn:p,allowCall:!0})+N+":"+N+B(a.alternate,{precedence:C.Assignment,allowIn:p,allowCall:!0}),C.Conditional,g);break;case E.LogicalExpression:case E.BinaryExpression:l=K[a.operator];p|=l<g;f=r(B(a.left,{precedence:l,allowIn:p,allowCall:!0}),a.operator);m=B(a.right,{precedence:l+1,allowIn:p,allowCall:!0});
f="/"===a.operator&&"/"===f.charAt(f.length-1)?f+(" "+m):r(f,m);f="in"===a.operator&&!p?"("+f+")":w(f,l,g);break;case E.CallExpression:f=B(a.callee,{precedence:C.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1});f+="(";m=0;for(l=a.arguments.length;m<l;m+=1)f+=B(a.arguments[m],{precedence:C.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(f+=","+N);f+=")";f=u?w(f,C.Call,g):"("+f+")";break;case E.NewExpression:l=a.arguments.length;p=void 0===d.allowUnparenthesizedNew||d.allowUnparenthesizedNew;
f=r("new",B(a.callee,{precedence:C.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:p&&!W&&0===l}));if(!p||W||0<l){f+="(";for(m=0;m<l;m+=1)f+=B(a.arguments[m],{precedence:C.Assignment,allowIn:!0,allowCall:!0}),m+1<l&&(f+=","+N);f+=")"}f=w(f,C.New,g);break;case E.MemberExpression:f=B(a.object,{precedence:C.Call,allowIn:!0,allowCall:u,allowUnparenthesizedNew:!1});a.computed?f+="["+B(a.property,{precedence:C.Sequence,allowIn:!0,allowCall:u})+"]":(a.object.type===E.Literal&&"number"===typeof a.object.value&&
0>f.indexOf(".")&&!/[eExX]/.test(f)&&!(2<=f.length&&"0"===f[0])&&(f+="."),f+="."+a.property.name);f=w(f,C.Member,g);break;case E.UnaryExpression:m=B(a.argument,{precedence:C.Unary+(a.argument.type===E.UnaryExpression&&3>a.operator.length&&a.argument.operator===a.operator?1:0),allowIn:!0,allowCall:!0});""===N?f=r(a.operator,m):(f=a.operator,2<f.length&&(f+=" "),f+=m);f=w(f,C.Unary,g);break;case E.UpdateExpression:f=a.prefix?w(a.operator+B(a.argument,{precedence:C.Unary,allowIn:!0,allowCall:!0}),C.Unary,
g):w(B(a.argument,{precedence:C.Postfix,allowIn:!0,allowCall:!0})+a.operator,C.Postfix,g);break;case E.FunctionExpression:f="function";f=a.id?f+(" "+a.id.name):f+N;f+=v(a);break;case E.ArrayExpression:if(!a.elements.length){f="[]";break}f="["+M;g=G;G+=I;m=0;for(l=a.elements.length;m<l;m+=1)a.elements[m]?f+=s(B(a.elements[m],{precedence:C.Assignment,allowIn:!0,allowCall:!0})):(f+=G+"",m+1===l&&(f+=",")),m+1<l&&(f+=","+M);G=g;e(f)||(f+=M);f+=G+"]";break;case E.Property:f="get"===a.kind||"set"===a.kind?
a.kind+" "+B(a.key,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+v(a.value):B(a.key,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+":"+N+B(a.value,{precedence:C.Assignment,allowIn:!0,allowCall:!0});break;case E.ObjectExpression:if(!a.properties.length){f="{}";break}f="{"+M;g=G;G+=I;m=0;for(l=a.properties.length;m<l;m+=1)f+=s(B(a.properties[m],{precedence:C.Sequence,allowIn:!0,allowCall:!0})),m+1<l&&(f+=","+M);G=g;e(f)||(f+=M);f+=G+"}";break;case E.ThisExpression:f="this";break;case E.Identifier:f=
a.name;break;case E.Literal:if(a.hasOwnProperty("raw")&&da)try{if(l=da(a.raw).body[0].expression,l.type===E.Literal&&l.value===a.value){f=a.raw;break}}catch(A){}if(null===a.value){f="null";break}if("string"===typeof a.value){f=a.value;u="";var z;m=l=0;"undefined"===typeof f[0]&&(f=b(f));g=0;for(p=f.length;g<p;g+=1){z=f[g];if("'"===z)l+=1;else if('"'===z)m+=1;else if("/"===z&&J)u+="\\";else if(0<="\\\n\r\u2028\u2029".indexOf(z)){var y="\\";switch(z){case "\\":y+="\\";break;case "\n":y+="n";break;case "\r":y+=
"r";break;case "\u2028":y+="u2028";break;case "\u2029":y+="u2029";break;default:throw Error("Incorrectly classified character");}u+=y;continue}else if(J&&" ">z||!J&&!(U||" "<=z&&"~">=z)){var y=f[g+1],D=z.charCodeAt(0),F=D.toString(16),Q="\\";switch(z){case "\b":Q+="b";break;case "\f":Q+="f";break;case "\t":Q+="t";break;default:Q=J||255<D?Q+("u"+"0000".slice(F.length)+F):"\x00"===z&&0>"0123456789".indexOf(y)?Q+"0":"\v"===z?Q+"v":Q+("x"+"00".slice(F.length)+F)}u+=Q;continue}u+=z}l=!("double"===O||"auto"===
O&&m<l);f=u;u=l?"'":'"';"undefined"===typeof f[0]&&(f=b(f));g=0;for(p=f.length;g<p;g+=1){z=f[g];if("'"===z&&l||'"'===z&&!l)u+="\\";u+=z}f=u+(l?"'":'"');break}if("number"===typeof a.value){f=a.value;if(f!==f)throw Error("Numeric literal whose value is NaN");if(0>1/f)throw Error("Numeric literal whose value is negative");if(f===1/0)f=J?"null":H?"1e400":"1e+400";else{g=""+f;if(H&&!(3>g.length)){p=g.indexOf(".");!J&&("0"===g.charAt(0)&&1===p)&&(p=0,g=g.slice(1));l=g;g=g.replace("e+","e");m=0;if(0<(u=
l.indexOf("e")))m=+l.slice(u+1),l=l.slice(0,u);0<=p&&(m-=l.length-p-1,l=+(l.slice(0,p)+l.slice(p+1))+"");for(u=0;"0"===l.charAt(l.length+u-1);)u-=1;0!==u&&(m-=u,l=l.slice(0,u));0!==m&&(l+="e"+m);if((l.length<g.length||P&&1E12<f&&Math.floor(f)===f&&(l="0x"+f.toString(16)).length<g.length)&&+l===f)g=l}f=g}break}f=a.value.toString()}if(void 0===f)throw Error("Unknown expression type: "+a.type);return f}function y(a,b){var f,g,l,p,w,D,F;D=!0;F=";";b&&(D=void 0===b.allowIn||b.allowIn,!fa&&!0===b.semicolonOptional&&
(F=""));switch(a.type){case E.BlockStatement:l="{"+M;p=G;G+=I;f=0;for(g=a.body.length;f<g;f+=1)w=s(y(a.body[f],{semicolonOptional:f===g-1})),l+=w,e(w)||(l+=M);G=p;l+=G+"}";break;case E.BreakStatement:l=a.label?"break "+a.label.name+F:"break"+F;break;case E.ContinueStatement:l=a.label?"continue "+a.label.name+F:"continue"+F;break;case E.DoWhileStatement:l=r("do",z(a.body));l+=A(a.body,l);l+="while"+N+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")"+F;break;case E.CatchClause:p=G;G+=
I;l="catch"+N+"("+B(a.param,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")";G=p;l+=z(a.body);break;case E.DebuggerStatement:l="debugger"+F;break;case E.EmptyStatement:l=";";break;case E.ExpressionStatement:l=B(a.expression,{precedence:C.Sequence,allowIn:!0,allowCall:!0});l="{"===l.charAt(0)||"function"===l.slice(0,8)&&0<=" (".indexOf(l.charAt(8))?"("+l+")"+F:l+F;break;case E.VariableDeclarator:l=a.init?a.id.name+N+"="+N+B(a.init,{precedence:C.Assignment,allowIn:D,allowCall:!0}):a.id.name;break;
case E.VariableDeclaration:l=a.kind;if(1===a.declarations.length&&a.declarations[0].init&&a.declarations[0].init.type===E.FunctionExpression)l+=" "+y(a.declarations[0],{allowIn:D});else{p=G;G+=I;w=a.declarations[0];l=ca.comment&&w.leadingComments?l+("\n"+s(y(w,{allowIn:D}))):l+(" "+y(w,{allowIn:D}));f=1;for(g=a.declarations.length;f<g;f+=1)w=a.declarations[f],l=ca.comment&&w.leadingComments?l+(","+M+s(y(w,{allowIn:D}))):l+(","+N+y(w,{allowIn:D}));G=p}l+=F;break;case E.ThrowStatement:l=r("throw",B(a.argument,
{precedence:C.Sequence,allowIn:!0,allowCall:!0}))+F;break;case E.TryStatement:l="try"+z(a.block);l+=A(a.block,l);f=0;for(g=a.handlers.length;f<g;f+=1)if(l+=y(a.handlers[f]),a.finalizer||f+1!==g)l+=A(a.handlers[f].body,l);a.finalizer&&(l+="finally"+z(a.finalizer));break;case E.SwitchStatement:p=G;G+=I;l="switch"+N+"("+B(a.discriminant,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")"+N+"{"+M;G=p;if(a.cases){f=0;for(g=a.cases.length;f<g;f+=1)w=s(y(a.cases[f],{semicolonOptional:f===g-1})),l+=w,e(w)||
(l+=M)}l+=G+"}";break;case E.SwitchCase:p=G;G+=I;l=a.test?r("case",B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0}))+":":"default:";f=0;if((g=a.consequent.length)&&a.consequent[0].type===E.BlockStatement)w=z(a.consequent[0]),l+=w,f=1;for(f!==g&&!e(l)&&(l+=M);f<g;f+=1)w=s(y(a.consequent[f],{semicolonOptional:f===g-1&&""===F})),l+=w,f+1!==g&&!e(w)&&(l+=M);G=p;break;case E.IfStatement:p=G;G+=I;a.alternate?a.alternate.type===E.IfStatement?(l="if"+N+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,
allowCall:!0})+")",G=p,l+=z(a.consequent),l+=A(a.consequent,l),l+="else "+y(a.alternate)):(l="if"+N+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")",G=p,l+=z(a.consequent),l+=A(a.consequent,l),l=r(l+"else",z(a.alternate,""===F))):(l="if"+N+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")",G=p,l+=z(a.consequent,""===F));break;case E.ForStatement:p=G;G+=I;l="for"+N+"(";l=a.init?a.init.type===E.VariableDeclaration?l+y(a.init,{allowIn:!1}):l+(B(a.init,{precedence:C.Sequence,
allowIn:!1,allowCall:!0})+";"):l+";";l=a.test?l+(N+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+";"):l+";";l=a.update?l+(N+B(a.update,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")"):l+")";G=p;l+=z(a.body,""===F);break;case E.ForInStatement:l="for"+N+"(";a.left.type===E.VariableDeclaration?(p=G,G+=I+I,l+=a.left.kind+" "+y(a.left.declarations[0],{allowIn:!1})):(p=G,G+=I,l+=B(a.left,{precedence:C.Call,allowIn:!0,allowCall:!0}));p=G=p;G+=I;l=r(l,"in");l=r(l,B(a.right,{precedence:C.Sequence,
allowIn:!0,allowCall:!0}))+")";G=p;l+=z(a.body,""===F);break;case E.LabeledStatement:l=a.label.name+":"+z(a.body,""===F);break;case E.Program:l="";f=0;for(g=a.body.length;f<g;f+=1)w=s(y(a.body[f],{semicolonOptional:f===g-1})),l+=w,f+1<g&&!e(w)&&(l+=M);break;case E.FunctionDeclaration:l="function"+N;a.id&&(l+=(""===N?" ":"")+a.id.name);l+=v(a);break;case E.ReturnStatement:l=a.argument?r("return",B(a.argument,{precedence:C.Sequence,allowIn:!0,allowCall:!0}))+F:"return"+F;break;case E.WhileStatement:p=
G;G+=I;l="while"+N+"("+B(a.test,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")";G=p;l+=z(a.body,""===F);break;case E.WithStatement:p=G,G+=I,l="with"+N+"("+B(a.object,{precedence:C.Sequence,allowIn:!0,allowCall:!0})+")",G=p,l+=z(a.body,""===F)}if(void 0===l)throw Error("Unknown statement type: "+a.type);if(ca.comment){f=l;if(a.leadingComments){p=f;F=a.leadingComments[0];f=u(F);e(f)||(f+="\n");g=1;for(l=a.leadingComments.length;g<l;g+=1)F=a.leadingComments[g],F=u(F),e(F)||(F+="\n"),f+=G+F;f+=G+
p}if(a.trailingComments){p=!e(f);g=G+f+I;for(l=g.length-1;0<=l&&!m(g.charAt(l));l-=1);w=d(" ",g.length-1-l);g=0;for(l=a.trailingComments.length;g<l;g+=1)F=a.trailingComments[g],p?(f=0===g?f+I:f+w,f+=u(F,w)):f+=s(u(F)),g!==l-1&&!e(f)&&(f+="\n")}return f}return l}function D(a,d){var b,e,f,g,l,m,r;b=[a];for(e=[];b.length;)if(f=b.pop()){g=d.enter?d.enter(f):void 0;if(g===T.Break)break;b.push(null);e.push(f);if(g!==T.Skip){m=R[f.type];for(g=m.length;0<=(g-=1);)if(r=f[m[g]])if(L(r))for(l=r.length;0<=(l-=
1);)r[l]&&b.push(r[l]);else b.push(r)}}else if(f=e.pop(),g=d.leave?d.leave(f):void 0,g===T.Break)break}function F(a,d){var b,e,f,g;e=d.length;for(f=0;e;)b=e>>>1,g=f+b,d[g].range[0]>a.range[0]?e=b:(f=g+1,e-=b+1);b=f;a.extendedRange=[a.range[0],a.range[1]];b!==d.length&&(a.extendedRange[1]=d[b].range[0]);b-=1;0<=b&&(b<d.length?a.extendedRange[0]=d[b].range[1]:(void 0).length&&(a.extendedRange[1]=d[d.length-1].range[0]));return a}var E,C,K,Q,R,T,L,G,I,J,H,P,O,U,M,N,W,fa,ca,da;E={AssignmentExpression:"AssignmentExpression",
ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",
TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};C={Sequence:0,Assignment:1,Conditional:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,Member:17,Primary:18};K={"||":C.LogicalOR,"&&":C.LogicalAND,
"|":C.BitwiseOR,"^":C.BitwiseXOR,"&":C.BitwiseAND,"==":C.Equality,"!=":C.Equality,"===":C.Equality,"!==":C.Equality,"<":C.Relational,">":C.Relational,"<=":C.Relational,">=":C.Relational,"in":C.Relational,"instanceof":C.Relational,"<<":C.BitwiseSHIFT,">>":C.BitwiseSHIFT,">>>":C.BitwiseSHIFT,"+":C.Additive,"-":C.Additive,"*":C.Multiplicative,"%":C.Multiplicative,"/":C.Multiplicative};Q={NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
(L=Array.isArray)||(L=function(a){return"[object Array]"===Object.prototype.toString.call(a)});R={AssignmentExpression:["left","right"],ArrayExpression:["elements"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DoWhileStatement:["body","test"],DebuggerStatement:[],EmptyStatement:[],ExpressionStatement:["expression"],
ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],
SwitchStatement:["descriminant","cases"],SwitchCase:["test","consequent"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],PointerType:["base"],StructType:["id","fields"],FieldDeclarator:["id","decltype"],ArrowType:["params","return"],TypeIdentifier:[],TypeAliasDirective:["original",
"alias"],CastExpression:["as","argument"]};T={Break:1,Skip:2};a.version="0.0.6-dev";a.generate=function(a,b){var e={indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0}};"undefined"!==typeof b?("string"===typeof b.indent&&(e.format.indent.style=b.indent),"number"===typeof b.base&&(e.format.indent.base=b.base),b=g(e,b),I=b.format.indent.style,
G="string"===typeof b.base?b.base:d(I,b.format.indent.base)):(b=e,I=b.format.indent.style,G=d(I,b.format.indent.base));J=b.format.json;H=b.format.renumber;P=J?!1:b.format.hexadecimal;O=J?"double":b.format.quotes;U=b.format.escapeless;b.format.compact?M=N=I=G="":(M="\n",N=" ");W=b.format.parentheses;fa=b.format.semicolons;da=J?null:b.parse;ca=b;switch(a.type){case E.BlockStatement:case E.BreakStatement:case E.CatchClause:case E.ContinueStatement:case E.DoWhileStatement:case E.DebuggerStatement:case E.EmptyStatement:case E.ExpressionStatement:case E.ForStatement:case E.ForInStatement:case E.FunctionDeclaration:case E.IfStatement:case E.LabeledStatement:case E.Program:case E.ReturnStatement:case E.SwitchStatement:case E.SwitchCase:case E.ThrowStatement:case E.TryStatement:case E.VariableDeclaration:case E.VariableDeclarator:case E.WhileStatement:case E.WithStatement:return y(a);
case E.AssignmentExpression:case E.ArrayExpression:case E.BinaryExpression:case E.CallExpression:case E.ConditionalExpression:case E.FunctionExpression:case E.Identifier:case E.Literal:case E.LogicalExpression:case E.MemberExpression:case E.NewExpression:case E.ObjectExpression:case E.Property:case E.SequenceExpression:case E.ThisExpression:case E.UnaryExpression:case E.UpdateExpression:return B(a,{precedence:C.Sequence,allowIn:!0,allowCall:!0})}throw Error("Unknown node type: "+a.type);};a.traverse=
D;a.attachComments=function(a,d,b){var e=[],g,l;if(!a.range)throw Error("attachComments needs range information");if(!b.length){if(d.length){l=0;for(g=d.length;l<g;l+=1)b=f(d[l]),b.extendedRange=[0,a.range[0]],e.push(b);a.leadingComments=e}return a}l=0;for(g=d.length;l<g;l+=1)e.push(F(f(d[l]),b));D(a,{cursor:0,enter:function(a){for(var d;this.cursor<e.length;){d=e[this.cursor];if(d.extendedRange[1]>a.range[0])break;d.extendedRange[1]===a.range[0]?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.push(d),
e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return T.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return T.Skip}});D(a,{cursor:0,leave:function(a){for(var d;this.cursor<e.length;){d=e[this.cursor];if(a.range[1]<d.extendedRange[0])break;a.range[1]===d.extendedRange[0]?(a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(d),e.splice(this.cursor,1)):this.cursor+=1}if(this.cursor===e.length)return T.Break;if(e[this.cursor].extendedRange[0]>a.range[1])return T.Skip}});
return a}})("undefined"===typeof exports?escodegen={}:exports);
var verifierOptions=systemOptions.register(new OptionSet("Verifier Options")),verifierTraceLevel=verifierOptions.register(new Option("tv","tv","number",0,"Verifier Trace Level")),Type=function(){function a(){unexpected("Type is Abstract")}a.prototype.equals=function(a){return this===a};a.prototype.merge=function(a){unexpected("Merging "+this+" with "+a)};a.cache={name:{},classInfo:[],instanceInfo:[],scriptInfo:[],methodInfo:[]};a.from=function(d,b){var f=null;d instanceof ClassInfo?f=a.cache.classInfo:
d instanceof InstanceInfo?f=a.cache.instanceInfo:d instanceof ScriptInfo&&(f=a.cache.scriptInfo);return f?f[d.id]||(f[d.id]=new TraitsType(d,b)):d instanceof Activation?new TraitsType(d.methodInfo):d instanceof Global?new TraitsType(d.scriptInfo):d instanceof Interface?new TraitsType(d.classInfo,b):d instanceof MethodInfo?new MethodType(d):b&&d instanceof Class?a.from(d.classInfo,b):Type.Any};a.fromSimpleName=function(a,b){return Type.fromName(Multiname.fromSimpleName(a),b)};a.fromName=function(d,
b){if(void 0===d)return Type.Undefined;var f=Multiname.isQName(d)?Multiname.getFullQualifiedName(d):void 0;if(f){var g=a.cache.name[f];if(g)return g}if(f===Multiname.getPublicQualifiedName("void"))return Type.Void;!0;g=(g=b.findClassInfo(d))?a.from(g,b):Type.Any;d.hasTypeParameter()&&(g=new ParameterizedType(g,a.fromName(d.typeParameter,b)));return a.cache.name[f]=g};a.prototype.applyType=function(a){return new ParameterizedType(this,a)};a.prototype.toString=function(){return"[type]"};a.prototype.isNumeric=
function(){return this===Type.Int||this===Type.Uint||this===Type.Number};a.prototype.isString=function(){return this===Type.String};a.prototype.isDirectlyReadable=function(){return this===Type.Array};a.prototype.isIndexedReadable=function(){return this.isParameterizedType()};a.prototype.isDirectlyWriteable=function(){return this===Type.Array};a.prototype.isIndexedWriteable=function(){return this.isParameterizedType()};a.prototype.isVector=function(){return this.isParameterizedType()};a.prototype.isNotDirectlyIndexable=
function(){return this===Type.Any||this===Type.XML||this===Type.XMLList||this===Type.Dictionary};a.prototype.isParameterizedType=function(){return this instanceof ParameterizedType};a.prototype.instanceType=function(){return this};a.prototype.getTrait=function(){return null};a.prototype.super=function(){unexpected("Can't call super on "+this)};a.prototype.isSubtypeOf=function(a){return this===a||this.equals(a)?!0:this.merge(a)===this};var b=!1;a.initializeTypes=function(d){b||(a.Any=new AtomType("Any"),
a.Null=new AtomType("Null"),a.Undefined=new AtomType("Undefined"),a.Void=new AtomType("Void"),a.Int=Type.fromSimpleName("int",d).instanceType(),a.Uint=Type.fromSimpleName("uint",d).instanceType(),a.Class=Type.fromSimpleName("Class",d).instanceType(),a.Array=Type.fromSimpleName("Array",d).instanceType(),a.Object=Type.fromSimpleName("Object",d).instanceType(),a.String=Type.fromSimpleName("String",d).instanceType(),a.Number=Type.fromSimpleName("Number",d).instanceType(),a.Boolean=Type.fromSimpleName("Boolean",
d).instanceType(),a.Function=Type.fromSimpleName("Function",d).instanceType(),a.XML=Type.fromSimpleName("XML",d).instanceType(),a.XMLList=Type.fromSimpleName("XMLList",d).instanceType(),a.Dictionary=Type.fromSimpleName("flash.utils.Dictionary",d).instanceType(),b=!0)};return a}(),AtomType=function(){function a(a){this.name=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){if(this===Type.Any)return"?";if(this===Type.Undefined)return"_";if(this===Type.Null)return"X";if(this===
Type.Void)return"V";unexpected()};a.prototype.merge=function(a){return a instanceof TraitsType?Type.Any:this===a?this:Type.Any};return a}(),MethodType=function(){function a(a){this.methodInfo=a}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MT "+this.methodInfo};return a}(),TraitsType=function(){function a(a,d){!0;this.object=a;this.traits=a.traits;this.domain=d;this.object instanceof InstanceInfo&&!0}function b(a){if(a instanceof ScriptInfo)return"SI";if(a instanceof
ClassInfo)return"CI:"+a.instanceInfo.name.name;if(a instanceof InstanceInfo)return"II:"+a.name.name;if(a instanceof MethodInfo)return"MI";if(a instanceof Activation)return"AC";!0}function d(a,b,g){var l=!g,m;if(Multiname.isQName(b)){u=Multiname.getQualifiedName(b);r=0;for(s=a.length;r<s;r++)if(m=a[r],Multiname.getQualifiedName(m.name)===u&&!(g&&m.isGetter()||l&&m.isSetter()))return m}else if(!(b instanceof MultinameType)){!0;for(var p,r=0,s=b.namespaces.length;r<s;r++){var u=b.getQName(r);if(b.namespaces[r].isDynamic())p=
u;else if(m=d(a,u,g))return m}if(p)return d(a,p,g)}}a.prototype=Object.create(Type.prototype);a.prototype.getTrait=function(a,b,g){if(a instanceof MultinameType||a.isAttribute())return null;if(g&&(this.isInstanceInfo()||this.isClassInfo())){g=this;do{var l=g.getTrait(a,b,!1);l||(g=g.super())}while(!l&&g);return l}return d(this.traits,a,b)};a.prototype.getTraitAt=function(a){if(this.object instanceof ScriptInfo||this.object instanceof MethodInfo){a:{for(var d=this.traits,b=d.length-1;0<=b;b--)if(d[b].slotId===
a){a=d[b];break a}unexpected("Cannot find trait with slotId: "+a+" in "+d);a=void 0}return a}};a.prototype.toString=function(){switch(this){case Type.Int:return"I";case Type.Uint:return"U";case Type.Array:return"A";case Type.Object:return"O";case Type.String:return"S";case Type.Number:return"N";case Type.Boolean:return"B";case Type.Function:return"F"}return b(this.object)};a.prototype.instanceType=function(){!0;return this.instanceCache||(this.instanceCache=Type.from(this.object.instanceInfo,this.domain))};
a.prototype.classType=function(){!0;return this.instanceCache||(this.instanceCache=Type.from(this.object.classInfo,this.domain))};a.prototype.super=function(){if(this.object instanceof ClassInfo)return Type.Class;!0;if(this.object.superName){var a=Type.fromName(this.object.superName,this.domain).instanceType();!0;return a}return null};a.prototype.isClassInfo=function(){return this.object instanceof ClassInfo};a.prototype.isInstanceInfo=function(){return this.object instanceof InstanceInfo};a.prototype.isInstanceOrClassInfo=
function(){return this.isInstanceInfo()||this.isClassInfo()};a.prototype.equals=function(a){return this.traits===a.traits};a.prototype.merge=function(a){if(a instanceof TraitsType){if(this.equals(a))return this;if(this.isNumeric()&&a.isNumeric())return Type.Number;if(this.isInstanceInfo()&&a.isInstanceInfo()){for(var d=[],b=this;b;b=b.super())d.push(b);for(b=a;b;b=b.super())for(a=0;a<d.length;a++)if(d[a].equals(b))return b;return Type.Object}}return Type.Any};return a}(),MultinameType=function(){function a(a,
d,e){this.namespaces=a;this.name=d;this.flags=e}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return"MN"};return a}(),ParameterizedType=function(){function a(a,d){this.type=a;this.parameter=d}a.prototype=Object.create(Type.prototype);a.prototype.toString=function(){return this.type+"<"+this.parameter+">"};a.prototype.instanceType=function(){!0;return new ParameterizedType(this.type.instanceType(),this.parameter.instanceType())};a.prototype.equals=function(a){return a instanceof
ParameterizedType?this.type.equals(a.type)&&this.parameter.equals(a.parameter):!1};a.prototype.merge=function(a){return a instanceof TraitsType&&this.equals(a)?this:Type.Any};return a}(),TypeInformation=function(){function a(){}a.prototype.toString=function(){return toKeyValueArray(this).map(function(a){return a[0]+": "+a[1]}).join(" | ")};return a}(),Verifier=function(){function a(a){this.name="VerifierError";this.message=a||""}function b(){this.writer=new IndentingWriter}var d,e=function(){this.id=
m+=1;this.stack=[];this.scope=[];this.local=[]},f=function(a,d){if(a.length!=d.length)return!1;for(var b=a.length-1;0<=b;b--)if(!a[b].equals(d[b]))return!1;return!0},g=function(a,d){if(a.length!=d.length)return!1;for(var b=a.length-1;0<=b;b--)if(!(a[b]===d[b]||a[b].equals(d[b]))&&a[b].merge(d[b])!==a[b])return!1;return!0},l=function(a,d){!0;for(var b=a.length-1;0<=b;b--)!0,a[b]!==d[b]&&(a[b]=a[b].merge(d[b]))},m=0;e.prototype.clone=function(){var a=new d;a.originalId=this.id;a.stack=this.stack.slice(0);
a.scope=this.scope.slice(0);a.local=this.local.slice(0);return a};e.prototype.trace=function(a){a.writeLn(this.toString())};e.prototype.toString=function(){return"<"+this.id+(this.originalId?":"+this.originalId:"")+", L["+this.local.join(", ")+"], S["+this.stack.join(", ")+"], $["+this.scope.join(", ")+"]>"};e.prototype.equals=function(a){return f(this.stack,a.stack)&&f(this.scope,a.scope)&&f(this.local,a.local)};e.prototype.isSubset=function(a){return g(this.stack,a.stack)&&g(this.scope,a.scope)&&
g(this.local,a.local)};e.prototype.merge=function(a){l(this.local,a.local);l(this.stack,a.stack);l(this.scope,a.scope)};d=e;var p=function(a,d){this.scope=d;this.methodInfo=a;this.domain=a.abc.applicationDomain;this.writer=new IndentingWriter;this.returnType=Type.Undefined};p.prototype.verify=function(){var a=this.methodInfo,b=verifierTraceLevel.value?this.writer:null,e=a.analysis.blocks;e.forEach(function(a){a.entryState=a.exitState=null});b&&this.methodInfo.trace(b);var f=new d;!0;this.thisType=
a.holder?Type.from(a.holder,this.domain):Type.Any;f.local.push(this.thisType);for(var g=0;g<a.parameters.length;g++)f.local.push(Type.fromName(a.parameters[g].type,this.domain).instanceType());var l=a.localCount-a.parameters.length-1;if(a.needsRest()||a.needsArguments())f.local.push(Type.Array),l-=1;for(g=0;g<l;g++)f.local.push(Type.Undefined);!0;b&&f.trace(b);a=0;for(g=e.length;a<g;a++)e[a].bdo=a;var m=new SortedList(function(a,d){return a.bdo-d.bdo});e[0].entryState=f;for(m.push(e[0]);m.peek();){var p=
m.pop(),y=p.exitState=p.entryState.clone();this.verifyBlock(p,y);p.succs.forEach(function(a){m.contains(a)?(b&&b.writeLn("Forward Merged Block: "+a.bid+" "+y.toString()+" with "+a.entryState.toString()),a.entryState.merge(y),b&&b.writeLn("Merged State: "+a.entryState)):a.entryState?a.entryState.isSubset(y)||(b&&b.writeLn("Backward Merged Block: "+p.bid+" with "+a.bid+" "+y.toString()+" with "+a.entryState.toString()),a.entryState.merge(y),m.push(a),b&&b.writeLn("Merged State: "+a.entryState)):(a.entryState=
y.clone(),m.push(a),b&&b.writeLn("Added Block: "+a.bid+" to worklist: "+a.entryState.toString()))})}b&&b.writeLn("Inferred return type: "+this.returnType);this.methodInfo.inferredReturnType=this.returnType};p.prototype.verifyBlock=function(d,b){function e(a){return a instanceof TraitsType||a instanceof ParameterizedType?a===Type.Function||a===Type.Class||a===Type.Object?Type.Object:a.instanceType():Type.Any}function f(){return H.ti||(H.ti=new TypeInformation)}function g(a){!0;f().type=a;Q.push(a)}
function l(){return Q.pop()}function m(a,d){if(a instanceof MultinameType)return Type.Any;for(var b=R.length-1;0<=b;b--)if(R[b]instanceof TraitsType){var e=R[b].getTrait(a,!1,!0);if(e)return f().scopeDepth=R.length-b-1,R[b]}else return Type.Any;if(isClassOrInstanceInfo(J.holder)){var g;J.holder instanceof ClassInfo?g=Type.from(J.holder,G):J.holder instanceof InstanceInfo&&(g=Type.from(J.holder,G).classType());if(e=g.getTrait(a,!1,!0))return J.isInstanceInitializer||(f().object=LazyInitializer.create(g.object)),
g}return C&&(C.object&&a instanceof Multiname)&&(b=C.findScopeProperty(a.namespaces,a.name,a.flags,G,d,!0))?(e=C.findDepth(b),!0,f().scopeDepth=e+R.length,Type.from(b,G)):(b=G.findDefiningScript(a,!1))?(f().object=LazyInitializer.create(b.script),Type.from(b.script,G)):Type.Any}function p(){var a=I[H.index];if(a.isRuntime()){var d=a.namespaces,b=a.name;a.isRuntimeName()&&(b=l());a.isRuntimeNamespace()&&(d=[l()]);return new MultinameType(d,b,a.flags)}return a}function y(a){if(a instanceof TraitsType&&
(a=a.getTraitAt(H.index),T&&T.debugLn("accessSlot() -> "+a),a)){f().trait=a;if(a.isSlot())return Type.fromName(a.typeName,G).instanceType();if(a.isClass())return Type.from(a.classInfo,G)}return Type.Any}function D(a){return a instanceof Multiname&&isNumeric(a.name)||a instanceof MultinameType&&(a.name instanceof TraitsType&&a.name.isNumeric()||isNumeric(a.name))}function F(a,d){if(a instanceof TraitsType||a instanceof ParameterizedType){var b=a.getTrait(d,!1,!0);T&&T.debugLn("getProperty("+d+") -> "+
b);if(b){f().trait=b;if(b.isSlot()||b.isConst())return Type.fromName(b.typeName,G).instanceType();if(b.isGetter())return Type.fromName(b.methodInfo.returnType,G).instanceType();if(b.isClass())return Type.from(b.classInfo,G);if(b.isMethod())return Type.from(b.methodInfo,G)}else a.isDirectlyReadable()&&d instanceof Multiname&&(f().propertyQName=Multiname.getPublicQualifiedName(d.name));if(D(d))if(a.isIndexedReadable()){if(f().isIndexedReadable=!0,a.isVector())return a.parameter}else a.isDirectlyReadable()&&
(f().isDirectlyReadable=!0)}return Type.Any}function E(a,d){if(a instanceof TraitsType||a instanceof ParameterizedType){var b=a.getTrait(d,!0,!0);T&&T.debugLn("setProperty("+d+") -> "+b);b?f().trait=b:a.isDirectlyWriteable()&&d instanceof Multiname&&(f().propertyQName=Multiname.getPublicQualifiedName(d.name));D(d)&&(a.isDirectlyWriteable()?f().isDirectlyWriteable=!0:a.isVector()&&(f().isIndexedWriteable=!0))}}var C=this.scope,K=b.local,Q=b.stack,R=b.scope,T=verifierTraceLevel.value?this.writer:null,
L=this.methodInfo.analysis.bytecodes,G=this.methodInfo.abc.applicationDomain,I=this.methodInfo.abc.constantPool.multinames,J=this.methodInfo,H,P,O,U;T&&T.enter("verifyBlock: "+d.bid+", range: ["+d.position+", "+d.end.position+"], entryState: "+b.toString()+" {");for(var M=d.position,N=d.end.position;M<=N;M++){H=L[M];U=H.op;T&&1<verifierTraceLevel.value&&T.writeLn(("stateBefore: "+b.toString()).padRight(" ",100)+" : "+M+", "+H.toString(J.abc));switch(U){case 1:break;case 3:l();break;case 4:O=p();P=
l();!0;f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);g(F(P.super(),O));break;case 5:U=l();O=p();P=l();!0;f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);E(P.super(),O,U);break;case 6:notImplemented(H);break;case 7:notImplemented(H);break;case 8:b.local[H.index]=Type.Undefined;break;case 10:notImplemented(H);break;case 11:notImplemented(H);break;case 12:case 24:case 13:case 23:case 14:case 22:case 15:case 21:case 19:case 20:case 25:case 26:l();
l();break;case 16:break;case 17:case 18:l();break;case 27:l(Type.Int);break;case 29:R.pop();break;case 30:case 35:l(Type.Int);l();g(Type.Any);break;case 31:g(Type.Boolean);break;case 50:g(Type.Boolean);break;case 32:g(Type.Null);break;case 33:g(Type.Undefined);break;case 34:notImplemented(H);break;case 36:g(Type.Int);break;case 37:g(Type.Int);break;case 44:g(Type.String);break;case 45:g(Type.Int);break;case 46:g(Type.Uint);break;case 47:g(Type.Number);break;case 38:g(Type.Boolean);break;case 39:g(Type.Boolean);
break;case 40:g(Type.Number);break;case 41:l();break;case 42:U=l();g(U);g(U);break;case 43:P=l();O=l();g(P);g(O);break;case 28:l();R.push(Type.Any);break;case 48:R.push(l());break;case 49:notImplemented(H);break;case 53:case 54:case 55:g(Type.Int);break;case 56:case 57:g(Type.Number);break;case 58:case 59:case 60:l(Type.Int);break;case 61:case 62:l(Type.Number);break;case 64:g(Type.Function);break;case 65:Q.popMany(H.argCount);P=l();l();g(Type.Any);break;case 67:throw new a("callmethod");case 68:notImplemented(H);
break;case 69:case 78:case 79:case 70:case 76:Q.popMany(H.argCount);O=p();P=l();if(69===U||78===U)P=this.thisType.super(),f().baseClass=LazyInitializer.create(this.thisType.super().classType().object);P=F(P,O);if(79===U||78===U)break;P=P instanceof MethodType?Type.fromName(P.methodInfo.returnType,G).instanceType():P instanceof TraitsType&&P.isClassInfo()?P.instanceType():Type.Any;g(P);break;case 71:this.returnType.merge(Type.Undefined);break;case 72:P=l();J.returnType&&(O=Type.fromName(J.returnType,
this.domain).instanceType(),O.isSubtypeOf(P)&&(f().noCoercionNeeded=!0));break;case 73:Q.popMany(H.argCount);Q.pop();this.thisType.isInstanceInfo()&&this.thisType.super()===Type.Object&&(f().noCallSuperNeeded=!0);break;case 66:Q.popMany(H.argCount);g(e(l()));break;case 74:Q.popMany(H.argCount);O=p();g(e(F(Q.pop(),O)));break;case 75:notImplemented(H);break;case 77:notImplemented(H);break;case 80:case 81:case 82:break;case 83:!0;U=l();P=l();g(P.applyType(U));break;case 84:notImplemented(H);break;case 85:Q.popMany(2*
H.argCount);g(Type.Object);break;case 86:Q.popMany(H.argCount);g(Type.Array);break;case 87:g(Type.from(new Activation(this.methodInfo)));break;case 88:g(Type.Any);break;case 89:p();l();g(Type.XMLList);break;case 90:g(Type.Any);break;case 93:g(m(p(),!0));break;case 94:g(m(p(),!1));break;case 95:notImplemented(H);break;case 96:O=p();g(F(m(O,!0),O));break;case 104:case 97:U=l();O=p();P=l();E(P,O,U,H);break;case 98:g(K[H.index]);break;case 99:K[H.index]=l();break;case 100:g(Type.from(C.global.object));
break;case 101:g(R[H.index]);break;case 102:O=p();P=l();g(F(P,O));break;case 103:notImplemented(H);break;case 105:notImplemented(H);break;case 106:p();l();g(Type.Boolean);break;case 107:notImplemented(H);break;case 108:g(y(l()));break;case 109:U=l();P=l();y(P);break;case 110:notImplemented(H);break;case 111:notImplemented(H);break;case 112:l();g(Type.String);break;case 113:l();g(Type.String);break;case 114:l();g(Type.String);break;case 131:case 115:l();g(Type.Int);break;case 136:case 116:l();g(Type.Uint);
break;case 132:case 117:l();g(Type.Number);break;case 129:case 118:l();g(Type.Boolean);break;case 119:notImplemented(H);break;case 120:break;case 121:l();g(Type.Number);break;case 122:notImplemented(H);break;case 123:notImplemented(H);break;case 128:P=l();O=Type.fromName(I[H.index],this.domain).instanceType();O.isSubtypeOf(P)&&(f().noCoercionNeeded=!0);g(O);break;case 130:break;case 133:l();g(Type.String);break;case 134:notImplemented(H);break;case 135:P=l();l();P instanceof TraitsType?g(P.instanceType()):
g(Type.Any);break;case 137:notImplemented(H);break;case 144:case 145:case 147:l();g(Type.Number);break;case 146:case 148:K[H.index]=Type.Number;break;case 149:l();g(Type.String);break;case 150:l();g(Type.Boolean);break;case 160:O=l();P=l();P.isNumeric()&&O.isNumeric()?g(Type.Number):P===Type.String||O===Type.String?g(Type.String):g(Type.Any);break;case 161:case 162:case 163:case 164:l();l();g(Type.Number);break;case 168:case 169:case 170:case 165:case 166:case 167:l();l();g(Type.Int);break;case 151:l();
g(Type.Int);break;case 171:case 172:case 173:case 174:case 175:case 176:case 177:case 180:l();l();g(Type.Boolean);break;case 178:l();g(Type.Boolean);break;case 179:l();l();g(Type.Boolean);break;case 194:case 195:K[H.index]=Type.Int;break;case 193:case 192:case 196:l();g(Type.Int);break;case 197:case 198:case 199:l();l();g(Type.Int);break;case 208:case 209:case 210:case 211:g(K[U-208]);break;case 212:case 213:case 214:case 215:K[U-OP_setlocal0]=l();break;case 239:break;case 240:break;case 241:break;
case 242:break;case 243:break;default:console.info("Not Implemented: "+H)}T&&H.ti&&T.debugLn("> TI: "+H.ti)}T&&(T.leave("}"),T.writeLn("verifiedBlock: "+d.bid+", range: ["+d.position+", "+d.end.position+"], exitState: "+b.toString()))};b.prototype.verifyMethod=function(d,b){try{(new p(d,b)).verify(),d.verified=!0,Counter.count("Verifier: Methods")}catch(e){if(!(e instanceof a))throw e;}};return b}();
(function(a){function b(a,d){!0;return Object.create(a.prototype,{nodeName:{value:d}})}function d(a){var d;if(a instanceof Z)return a.value instanceof Multiname?a.value.name:a.value;if(a instanceof fa)return a.name;if(a instanceof W)return d="|"+a.id+"|",d;if(a instanceof s)return d="{"+a.id+"}",d;if(a instanceof da)return a.type===da.Type.STORE?(d="["+a.id+"->"+a.argument.id+"]",d):(d="("+a.id+")",d);if(a instanceof D)return d="("+a.id+")",d;if(a instanceof p)return a.id;unexpected(a+" "+typeof a)}
function e(a){return a.id}function f(a,d){for(var b=0;b<a.length;b++)d(a[b])}function g(a){return a instanceof Z}var l=!1,m=[],p,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype.nodeName="Node";r.prototype.visitInputs=function(){};p=r;var s,r=function(){!0;this.id=m[m.length-1]+=1};r.prototype=b(p,"Control");r.prototype.nodeName="Control";r.prototype.visitInputs=function(){};s=r;var u,r=function(a){!0;this.predecessors=a?[a]:[];this.id=m[m.length-1]+=1};r.prototype=b(s,"Region");r.prototype.nodeName=
"Region";r.prototype.visitInputs=function(a){f(this.predecessors,a)};u=r;var w,r=function(a){!0;this.control=this;this.predecessors=a?[a]:[];this.domain=this.scope=void 0;this.id=m[m.length-1]+=1};r.prototype=b(u,"Start");r.prototype.nodeName="Start";r.prototype.visitInputs=function(a){f(this.predecessors,a);a(this.scope);a(this.domain)};w=r;var z,r=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};r.prototype=b(s,"End");r.prototype.nodeName="End";r.prototype.visitInputs=function(a){a(this.control)};
z=r;r=function(a,d,b){!0;!0;!0;!0;this.control=a;this.store=d;this.argument=b;this.id=m[m.length-1]+=1};r.prototype=b(z,"Stop");r.prototype.nodeName="Stop";r.prototype.visitInputs=function(a){a(this.control);a(this.store);a(this.argument)};var A=function(a,d){!0;!0;!0;this.control=a;this.predicate=d;this.id=m[m.length-1]+=1};A.prototype=b(z,"If");A.prototype.nodeName="If";A.prototype.visitInputs=function(a){a(this.control);a(this.predicate)};var v,B=function(a,d){!0;!0;!0;this.control=a;this.determinant=
d;this.id=m[m.length-1]+=1};B.prototype=b(z,"Switch");B.prototype.nodeName="Switch";B.prototype.visitInputs=function(a){a(this.control);a(this.determinant)};v=B;var y,B=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};B.prototype=b(z,"Jump");B.prototype.nodeName="Jump";B.prototype.visitInputs=function(a){a(this.control)};y=B;var D,B=function(){!0;this.id=m[m.length-1]+=1};B.prototype=b(p,"Value");B.prototype.nodeName="Value";B.prototype.visitInputs=function(){};D=B;var F=function(a,d){!0;
!0;!0;this.control=a;this.store=d;this.loads=void 0;this.id=m[m.length-1]+=1};F.prototype=b(D,"StoreDependent");F.prototype.nodeName="StoreDependent";F.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a)};B=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.callee=b;this.object=e;this.args=f;this.flags=g;this.id=m[m.length-1]+=1};B.prototype=b(F,"Call");B.prototype.nodeName="Call";B.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.callee);this.object&&a(this.object);f(this.args,a)};var E=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.args=f;this.flags=g;this.id=m[m.length-1]+=1};E.prototype=b(F,"CallProperty");E.prototype.nodeName="CallProperty";E.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,
a);a(this.object);a(this.name);f(this.args,a)};var C=function(a,d,b,e,f,g,l){!0;!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.args=f;this.flags=g;this.isLex=l;this.id=m[m.length-1]+=1};C.prototype=b(E,"ASCallProperty");C.prototype.nodeName="ASCallProperty";C.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);f(this.args,a)};var K=function(a,d,b,e,f,g,l){!0;
!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.args=f;this.flags=g;this.scope=l;this.id=m[m.length-1]+=1};K.prototype=b(E,"ASCallSuper");K.prototype.nodeName="ASCallSuper";K.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);f(this.args,a);a(this.scope)};var Q=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.callee=b;this.args=
e;this.id=m[m.length-1]+=1};Q.prototype=b(F,"New");Q.prototype.nodeName="New";Q.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.callee);f(this.args,a)};var R=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.callee=b;this.args=e;this.id=m[m.length-1]+=1};R.prototype=b(Q,"ASNew");R.prototype.nodeName="ASNew";R.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&f(this.loads,a);a(this.callee);f(this.args,a)};Q=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};Q.prototype=b(F,"GetProperty");Q.prototype.nodeName="GetProperty";Q.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var T=function(a,d,b,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=
b;this.name=e;this.flags=f;this.id=m[m.length-1]+=1};T.prototype=b(Q,"ASGetProperty");T.prototype.nodeName="ASGetProperty";T.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var L=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};L.prototype=b(Q,"ASGetDescendants");L.prototype.nodeName="ASGetDescendants";L.prototype.visitInputs=
function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var G=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};G.prototype=b(Q,"ASHasProperty");G.prototype.nodeName="ASHasProperty";G.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var I=function(a,d,b,
e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};I.prototype=b(Q,"ASGetSlot");I.prototype.nodeName="ASGetSlot";I.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var J=function(a,d,b,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.scope=f;this.id=m[m.length-1]+=1};J.prototype=b(Q,"ASGetSuper");
J.prototype.nodeName="ASGetSuper";J.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.scope)};var H,P=function(a,d,b,e,f){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.id=m[m.length-1]+=1};P.prototype=b(F,"SetProperty");P.prototype.nodeName="SetProperty";P.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);
this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};H=P;P=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.flags=g;this.id=m[m.length-1]+=1};P.prototype=b(H,"ASSetProperty");P.prototype.nodeName="ASSetProperty";P.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};var O=function(a,d,b,e,f){!0;
!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.id=m[m.length-1]+=1};O.prototype=b(H,"ASSetSlot");O.prototype.nodeName="ASSetSlot";O.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value)};var U=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.value=f;this.scope=g;this.id=
m[m.length-1]+=1};U.prototype=b(H,"ASSetSuper");U.prototype.nodeName="ASSetSuper";U.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name);a(this.value);a(this.scope)};var M=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};M.prototype=b(F,"DeleteProperty");M.prototype.nodeName="DeleteProperty";M.prototype.visitInputs=function(a){this.control&&
a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};var N=function(a,d,b,e){!0;!0;!0;!0;!0;this.control=a;this.store=d;this.loads=void 0;this.object=b;this.name=e;this.id=m[m.length-1]+=1};N.prototype=b(M,"ASDeleteProperty");N.prototype.nodeName="ASDeleteProperty";N.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.object);a(this.name)};M=function(a,d,b,e,f,g){!0;!0;!0;!0;!0;!0;
this.control=a;this.store=d;this.loads=void 0;this.scope=b;this.name=e;this.domain=f;this.strict=g;this.id=m[m.length-1]+=1};M.prototype=b(F,"ASFindProperty");M.prototype.nodeName="ASFindProperty";M.prototype.visitInputs=function(a){this.control&&a(this.control);this.store&&a(this.store);this.loads&&f(this.loads,a);a(this.scope);a(this.name);a(this.domain)};b(D,"Store");var W,F=function(a,d){!0;!0;this.control=a;this.args=d?[d]:[];this.id=m[m.length-1]+=1};F.prototype=b(D,"Phi");F.prototype.nodeName=
"Phi";F.prototype.visitInputs=function(a){this.control&&a(this.control);f(this.args,a)};W=F;var fa,F=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};F.prototype=b(D,"Variable");F.prototype.nodeName="Variable";F.prototype.visitInputs=function(){};fa=F;F=function(a){!0;this.argument=a;this.id=m[m.length-1]+=1};F.prototype=b(D,"Copy");F.prototype.nodeName="Copy";F.prototype.visitInputs=function(a){a(this.argument)};var ca=function(a,d){!0;this.to=a;this.from=d;this.id=m[m.length-1]+=1};ca.prototype=
b(D,"Move");ca.prototype.nodeName="Move";ca.prototype.visitInputs=function(a){a(this.to);a(this.from)};var da,ia=function(a,d,b){!0;this.argument=a;this.type=d;this.selector=b;this.id=m[m.length-1]+=1};ia.prototype=b(D,"Projection");ia.prototype.nodeName="Projection";ia.prototype.visitInputs=function(a){a(this.argument)};da=ia;ia=function(a,d,b,e){!0;!0;this.control=a;this.condition=d;this.left=b;this.right=e;this.id=m[m.length-1]+=1};ia.prototype=b(D,"Latch");ia.prototype.nodeName="Latch";ia.prototype.visitInputs=
function(a){this.control&&a(this.control);a(this.condition);a(this.left);a(this.right)};var ja,ga=function(a,d,b){!0;this.operator=a;this.left=d;this.right=b;this.id=m[m.length-1]+=1};ga.prototype=b(D,"Binary");ga.prototype.nodeName="Binary";ga.prototype.visitInputs=function(a){a(this.left);a(this.right)};ja=ga;var la,ga=function(a,d){!0;this.operator=a;this.argument=d;this.id=m[m.length-1]+=1};ga.prototype=b(D,"Unary");ga.prototype.nodeName="Unary";ga.prototype.visitInputs=function(a){a(this.argument)};
la=ga;var Z,ga=function(a){!0;this.value=a;this.id=m[m.length-1]+=1};ga.prototype=b(D,"Constant");ga.prototype.nodeName="Constant";ga.prototype.visitInputs=function(){};Z=ga;ga=function(a){!0;this.name=a;this.id=m[m.length-1]+=1};ga.prototype=b(D,"GlobalProperty");ga.prototype.nodeName="GlobalProperty";ga.prototype.visitInputs=function(){};var ea,na=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};na.prototype=b(D,"This");na.prototype.nodeName="This";na.prototype.visitInputs=function(a){a(this.control)};
ea=na;na=function(a,d){!0;!0;this.control=a;this.argument=d;this.id=m[m.length-1]+=1};na.prototype=b(D,"Throw");na.prototype.nodeName="Throw";na.prototype.visitInputs=function(a){a(this.control);a(this.argument)};var ha,oa=function(a){!0;!0;this.control=a;this.id=m[m.length-1]+=1};oa.prototype=b(D,"Arguments");oa.prototype.nodeName="Arguments";oa.prototype.visitInputs=function(a){a(this.control)};ha=oa;var Aa,oa=function(a,d,b){!0;!0;this.control=a;this.index=d;this.name=b;this.id=m[m.length-1]+=
1};oa.prototype=b(D,"Parameter");oa.prototype.nodeName="Parameter";oa.prototype.visitInputs=function(a){a(this.control)};Aa=oa;oa=function(a,d){!0;!0;this.control=a;this.elements=d;this.id=m[m.length-1]+=1};oa.prototype=b(D,"NewArray");oa.prototype.nodeName="NewArray";oa.prototype.visitInputs=function(a){a(this.control);f(this.elements,a)};var $=function(a,d){!0;!0;this.control=a;this.properties=d;this.id=m[m.length-1]+=1};$.prototype=b(D,"NewObject");$.prototype.nodeName="NewObject";$.prototype.visitInputs=
function(a){a(this.control);f(this.properties,a)};var ra=function(a,d){!0;this.key=a;this.value=d;this.id=m[m.length-1]+=1};ra.prototype=b(D,"KeyValuePair");ra.prototype.nodeName="KeyValuePair";ra.prototype.visitInputs=function(a){a(this.key);a(this.value)};var Ea=function(a,d,b){!0;this.parent=a;this.object=d;this.isWith=b;this.id=m[m.length-1]+=1};Ea.prototype=b(D,"ASScope");Ea.prototype.nodeName="ASScope";Ea.prototype.visitInputs=function(a){a(this.parent);a(this.object)};var pa=function(a,d){!0;
!0;!0;this.control=a;this.scope=d;this.id=m[m.length-1]+=1};pa.prototype=b(D,"ASGlobal");pa.prototype.nodeName="ASGlobal";pa.prototype.visitInputs=function(a){this.control&&a(this.control);a(this.scope)};var sa=function(a){!0;this.methodInfo=a;this.id=m[m.length-1]+=1};sa.prototype=b(D,"ASNewActivation");sa.prototype.nodeName="ASNewActivation";sa.prototype.visitInputs=function(){};var ta=function(a,d,b){!0;this.namespaces=a;this.name=d;this.flags=b;this.id=m[m.length-1]+=1};ta.prototype=b(D,"ASMultiname");
ta.prototype.nodeName="ASMultiname";ta.prototype.visitInputs=function(a){a(this.namespaces);a(this.name)};p.startNumbering=function(){m.push(0)};p.stopNumbering=function(){m.pop()};p.prototype.toString=function(a){if(a)return d(this);var b=[];this.visitInputs(function(a){b.push(d(a))});a=d(this)+" = "+this.nodeName.toUpperCase();this.toStringDetails&&(a+=" "+this.toStringDetails());b.length&&(a+=" "+b.join(", "));return a};p.prototype.visitInputsNoConstants=function(a){this.visitInputs(function(d){g(d)||
a(d)})};p.prototype.replaceInput=function(a,d){var b=0,e;for(e in this){var f=this[e];f instanceof p&&f===a&&(this[e]=d,b++);f instanceof Array&&(b+=f.replace(a,d))}return b};da.Type={CASE:"case",TRUE:"true",FALSE:"false",STORE:"store",SCOPE:"scope"};da.prototype.project=function(){return this.argument};W.prototype.seal=function(){this.sealed=!0};W.prototype.pushValue=function(a){!0;!0;this.args.push(a)};ra.prototype.mustFloat=!0;ta.prototype.mustFloat=!0;ta.prototype.isAttribute=function(){return this.flags&
1};var aa=function(a,d,b){this.name=a;this.binary=b;this.evaluate=d;Oa[a]=this},Oa={};aa.ADD=new aa("+",function(a,d){return a+d},!0);aa.SUB=new aa("-",function(a,d){return a-d},!0);aa.MUL=new aa("*",function(a,d){return a*d},!0);aa.DIV=new aa("/",function(a,d){return a/d},!0);aa.MOD=new aa("%",function(a,d){return a%d},!0);aa.AND=new aa("&",function(a,d){return a&d},!0);aa.OR=new aa("|",function(a,d){return a|d},!0);aa.XOR=new aa("^",function(a,d){return a^d},!0);aa.LSH=new aa("<<",function(a,d){return a<<
d},!0);aa.RSH=new aa(">>",function(a,d){return a>>d},!0);aa.URSH=new aa(">>>",function(a,d){return a>>>d},!0);aa.SEQ=new aa("===",function(a,d){return a===d},!0);aa.SNE=new aa("!==",function(a,d){return a!==d},!0);aa.EQ=new aa("==",function(a,d){return a==d},!0);aa.NE=new aa("!=",function(a,d){return a!=d},!0);aa.LE=new aa("<=",function(a,d){return a<=d},!0);aa.GT=new aa(">",function(a,d){return a>d},!0);aa.LT=new aa("<",function(a,d){return a<d},!0);aa.GE=new aa(">=",function(a,d){return a>=d},!0);
aa.BITWISE_NOT=new aa("~",function(a){return~a},!1);aa.PLUS=new aa("+",function(a){return+a},!1);aa.NEG=new aa("-",function(a){return-a},!1);aa.TRUE=new aa("!!",function(a){return!!a},!1);aa.FALSE=new aa("!",function(a){return!a},!1);aa.AS_ADD=new aa("+",function(a,d){return"string"===typeof a||"string"===typeof d?String(a)+String(d):a+d},!0);var Ia=aa.SEQ,Fa=aa.SNE;Ia.not=Fa;Fa.not=Ia;Ia=aa.EQ;Fa=aa.NE;Ia.not=Fa;Fa.not=Ia;Ia=aa.TRUE;Fa=aa.FALSE;Ia.not=Fa;Fa.not=Ia;aa.fromName=function(a){return Oa[a]};
aa.prototype.isBinary=function(){return this.binary};aa.prototype.toString=function(){return this.name};Ia=new Z(null);Fa=new Z(void 0);Fa.toString=function(){return"_"};var Pa,ua=function(a,d,b){d&&!0;this.region=d;this.id=a;this.successors=[];this.predecessors=[];this.nodes=[d,b]};ua.prototype.pushSuccessorAt=function(a,d,b){!0;!0;this.successors[d]=a;b&&a.pushPredecessor(this)};ua.prototype.pushSuccessor=function(a,d){!0;this.successors.push(a);d&&a.pushPredecessor(this)};ua.prototype.pushPredecessor=
function(a){!0;this.predecessors.push(a)};ua.prototype.visitNodes=function(a){for(var d=this.nodes,b=0,e=d.length;b<e;b++)a(d[b])};ua.prototype.visitSuccessors=function(a){for(var d=this.successors,b=0,e=d.length;b<e;b++)a(d[b])};ua.prototype.visitPredecessors=function(a){for(var d=this.predecessors,b=0,e=d.length;b<e;b++)a(d[b])};ua.prototype.append=function(a){!0;!0;!0;!0;a.mustFloat||this.nodes.splice(this.nodes.length-1,0,a)};ua.prototype.toString=function(){return"B"+this.id+(this.name?" ("+
this.name+")":"")};ua.prototype.trace=function(a){a.writeLn(this)};Pa=ua;var ua=function(a){this.exit=a},xa=function(a,d,b){var e=[];a=[a];for(var f=a.push.bind(a),g;g=a.pop();)1!==e[g.id]&&(e[g.id]=1,b(g),a.push(g),d(g,f))},Ma=function(a,d,b){function e(a){f[a.id]||g.push(a)}for(var f=[],g=[a];a=g.top();)f[a.id]?(1===f[a.id]&&(f[a.id]=2,b(a)),g.pop()):(f[a.id]=1,d(a,e))};ua.prototype.buildCFG=function(){return ya.fromDFG(this)};ua.prototype.forEachInPreOrderDepthFirstSearch=function(a){function d(a){g(a)||
(!0,e.push(a))}for(var b=Array(1024),e=[this.exit],f;f=e.pop();)b[f.id]||(b[f.id]=1,a&&a(f),e.push(f),f.visitInputs(d))};ua.prototype.forEach=function(a,d){(d?Ma:xa)(this.exit,function(a,d){a.visitInputsNoConstants(d)},a)};ua.prototype.traceMetrics=function(a){var d=new metrics.Counter(!0);xa(this.exit,function(a,d){a.visitInputsNoConstants(d)},function(a){d.count(a.nodeName)});d.trace(a)};ua.prototype.trace=function(a){function d(a){return a instanceof s?"yellow":a instanceof W?"purple":a instanceof
D?"green":"white"}function b(a){return a instanceof da?a.project():a}function e(a){a=b(a);g[a.id]||(g[a.id]=!0,a.block&&l.push(a.block),f.push(a),a.visitInputsNoConstants(e))}var f=[],g={},l=[];e(this.exit);a.writeLn("");a.enter("digraph DFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [color = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("rankdir = BT;");l.forEach(function(d){a.enter("subgraph cluster"+d.nodes[0].id+
" { bgcolor = gray20;");d.visitNodes(function(d){d=b(d);a.writeLn("N"+d.id+";")});a.leave("}")});f.forEach(function(b){a.writeLn("N"+b.id+' [label = "'+b.toString()+'", color = "'+d(b)+'"];')});f.forEach(function(e){e.visitInputsNoConstants(function(f){f=b(f);a.writeLn("N"+e.id+" -> N"+f.id+" [color="+d(f)+"];")})});a.leave("}");a.writeLn("")};var ya,ka=function(){this.nextBlockID=0;this.blocks=[];this.exit;this.root};ka.fromDFG=function(a){function d(a){a instanceof da&&(a=a.project());!0;if(!e[a.id]){e[a.id]=
!0;var f=a.control;f instanceof u||(f=a.control=new u(f));a=f.block=b.buildBlock(f,a);f instanceof w&&(b.root=a);for(var g=0;g<f.predecessors.length;g++){var l=f.predecessors[g],m,r=!1;l instanceof da?(m=l.project(),r=l.type===da.Type.TRUE):m=l;m instanceof u&&(m=new y(l),m=new da(m,da.Type.TRUE),f.predecessors[g]=m,m=m.project(),r=!0);d(m);var p=m.control.block;m instanceof v?(!0,p.pushSuccessorAt(a,l.selector.value,!0)):r&&0<p.successors.length?(p.pushSuccessor(a,!0),p.hasFlippedSuccessors=!0):
p.pushSuccessor(a,!0)}}}var b=new ya;!0;b.dfg=a;var e=[];d(a.exit);b.splitCriticalEdges();b.exit=a.exit.control.block;b.computeDominators(!0);return b};ka.prototype.buildRootAndExit=function(){!0;0<this.blocks[0].predecessors.length?(this.root=new Pa(this.nextBlockID++),this.blocks.push(this.root),this.root.pushSuccessor(this.blocks[0],!0)):this.root=this.blocks[0];for(var a=[],d=0;d<this.blocks.length;d++){var b=this.blocks[d];0===b.successors.length&&a.push(b)}if(0===a.length)unexpected("Must have an exit block.");
else if(1===a.length&&a[0]!==this.root)this.exit=a[0];else{this.exit=new Pa(this.nextBlockID++);this.blocks.push(this.exit);for(d=0;d<a.length;d++)a[d].pushSuccessor(this.exit,!0)}!0;!0};ka.prototype.fromString=function(a,d){function b(a){var d=f[a];if(d)return d;f[a]=d=new Pa(e.nextBlockID++);d.name=a;g.push(d);return d}var e=this,f=e.blockNames||(e.blockNames={}),g=e.blocks;a.replace(/\ /g,"").split(",").forEach(function(a){a=a.split("->");for(var d=null,e=0;e<a.length;e++){var f=a[e];if(d){var g=
f;b(d).pushSuccessor(b(g),!0)}else b(f);d=f}});!0;this.root=f[d]};ka.prototype.buildBlock=function(a,d){var b=new Pa(this.nextBlockID++,a,d);this.blocks.push(b);return b};ka.prototype.createBlockSet=function(){this.setConstructor||(this.setConstructor=BitSetFunctor(this.blocks.length));return new this.setConstructor};ka.prototype.computeReversePostOrder=function(){if(this.order)return this.order;var a=this.order=[];this.depthFirstSearch(null,a.push.bind(a));a.reverse();for(var d=0;d<a.length;d++)a[d].rpo=
d;return a};ka.prototype.depthFirstSearch=function(a,d){function b(f){e.set(f.id);a&&a(f);for(var g=f.successors,l=0,m=g.length;l<m;l++){var r=g[l];e.get(r.id)||b(r)}d&&d(f)}var e=this.createBlockSet();b(this.root)};ka.prototype.computeDominators=function(a){!0;for(var d=new Int32Array(this.blocks.length),b=0;b<d.length;b++)d[b]=-1;var e=this.createBlockSet();this.depthFirstSearch(function(a){for(var b=a.successors,f=0,g=b.length;f<g;f++){var l=b[f].id,m=a.id,r=d,p=l;if(!(0>d[l])){l=d[l];for(e.clearAll();0<=
l;)e.set(l),l=d[l];for(;0<=m&&!e.get(m);)m=d[m]}r[p]=m}});if(a){b=0;for(a=this.blocks.length;b<a;b++)this.blocks[b].dominator=this.blocks[d[b]];var f=function(a){var d;if(void 0!==a.dominatorDepth)return a.dominatorDepth;d=a.dominator?f(a.dominator)+1:0;return a.dominatorDepth=d},b=0;for(a=this.blocks.length;b<a;b++)f(this.blocks[b])}return d};ka.prototype.computeLoops=function(){function a(f){if(b.get(f.id))return d.get(f.id)&&!f.isLoopHeader&&(f.isLoopHeader=!0,f.loops=1<<e,e+=1),f.loops;b.set(f.id);
d.set(f.id);for(var g=0,l=0,m=f.successors.length;l<m;l++)g|=a(f.successors[l]);f.isLoopHeader&&(g&=~f.loops);f.loops=g;d.clear(f.id);return g}var d=this.createBlockSet(),b=this.createBlockSet(),e=0;a(this.root)};var za=function(){this.entries=[]};za.prototype.addUse=function(a,d){var b=this.entries[a.id];b||(b=this.entries[a.id]={def:a,uses:[]});b.uses.pushUnique(d)};za.prototype.trace=function(a){a.enter("> Uses");this.entries.forEach(function(d){a.writeLn(d.def.id+" -> ["+d.uses.map(e).join(", ")+
"] "+d.def)});a.leave("<")};za.prototype.replace=function(a,d){var b=this.entries[a.id];if(0===b.uses.length)return!1;var e=0;b.uses.forEach(function(b){e+=b.replaceInput(a,d)});!0;b.uses=[];return!0};ka.prototype.computeUses=function(){Timer.start("computeUses");var a=l&&new IndentingWriter;l&&a.enter("> Compute Uses");var d=this.dfg,b=new za;d.forEachInPreOrderDepthFirstSearch(function(a){a.visitInputs(function(d){b.addUse(d,a)})});l&&(a.enter("> Uses"),b.entries.forEach(function(d){a.writeLn(d.def.id+
" -> ["+d.uses.map(e).join(", ")+"] "+d.def)}),a.leave("<"),a.leave("<"));Timer.stop();return b};ka.prototype.verify=function(){var a=l&&new IndentingWriter;l&&a.enter("> Verify");this.computeReversePostOrder().forEach(function(a){a.phis&&a.phis.forEach(function(){!0;!0})});l&&a.leave("<")};ka.prototype.optimizePhis=function(){function a(d,b){b=b.unique();if(1===b.length)return b[0];if(2===b.length){if(b[0]===d)return b[1];if(b[1]===d)return b[0]}return d}var d=l&&new IndentingWriter;l&&d.enter("> Optimize Phis");
var b=[],f=this.computeUses().entries;f.forEach(function(a){a.def instanceof W&&b.push(a.def)});l&&d.writeLn("Trying to optimize "+b.length+" phis.");for(var g=0,m=0,r=!0;r;)m++,r=!1,b.forEach(function(b){var m=a(b,b.args),p;if(p=m!==b)if(l&&d.writeLn("Update "+b+" with "+m),p=f[b.id],0===p.uses.length)p=!1;else{l&&d.writeLn("Replacing: "+b.id+" in ["+p.uses.map(e).join(", ")+"] with "+m.id);for(var v=0,s=p.uses,u=0,w=s.length;u<w;u++)v+=s[u].replaceInput(b,m);!0;p.uses=[];p=!0}p&&(r=!0,g++)});l&&
(d.writeLn("Simplified "+g+" phis, in "+m+" iterations."),d.leave("<"))};ka.prototype.splitCriticalEdges=function(){var a=l&&new IndentingWriter,d=this.blocks,b=[];l&&a.enter("> Splitting Critical Edges");for(var e=0;e<d.length;e++){var f=d[e].successors;if(1<f.length)for(var g=0;g<f.length;g++)1<f[g].predecessors.length&&b.push({from:d[e],to:f[g]})}if((d=b.length)&&l)a.writeLn("Splitting: "+d),this.trace(a);for(var m;m=b.pop();){e=m.from.successors.indexOf(m.to);f=m.to.predecessors.indexOf(m.from);
!0;l&&a.writeLn("Splitting critical edge: "+m.from+" -> "+m.to);var g=m.to,r=g.region,p=new u(r.predecessors[f]),v=new y(p),p=this.buildBlock(p,v);r.predecessors[f]=new da(v,da.Type.TRUE);m=m.from;m.successors[e]=p;p.pushPredecessor(m);p.pushSuccessor(g);g.predecessors[f]=p}d&&l&&this.trace(a);l&&a.leave("<");return d};ka.prototype.allocateVariables=function(){function a(b){if(!(b instanceof da&&(!da.Type.STORE||b.type===da.Type.STORE))&&!(b instanceof H)&&b instanceof D)b.variable=new fa("l"+b.id),
l&&d.writeLn("Allocated: "+b.variable+" to "+b)}var d=l&&new IndentingWriter;l&&d.enter("> Allocating Virtual Registers");var b=this.computeReversePostOrder();b.forEach(function(d){d.nodes.forEach(a);d.phis&&d.phis.forEach(a)});for(var e=[],f=0;f<b.length;f++){var g=b[f],m=g.phis,g=g.predecessors;if(m)for(var r=0;r<m.length;r++){var p=m[r];l&&d.writeLn("Emitting moves for: "+p);arguments=p.args;!0;for(var v=0;v<g.length;v++){var s=g[v],u=arguments[v];if(!u.abstract&&!(u instanceof da&&(!da.Type.STORE||
u.type===da.Type.STORE)))s=e[s.id]||(e[s.id]=[]),u=u.variable||u,p.variable!==u&&s.push(new ca(p.variable,u))}}}var w=this.blocks;e.forEach(function(a,b){var e=w[b],f=0;for(l&&d.writeLn(e+" Moves: "+a);a.length;){for(var g=0;g<a.length;g++){for(var m=a[g],r=0;r<a.length;r++)if(g!==r&&a[r].from===m.to){m=null;break}m&&(a.splice(g--,1),e.append(m))}if(a.length){l&&d.writeLn("Breaking Cycle");m=a[0];r=new fa("t"+f++);w[b].append(new ca(r,m.to));for(g=1;g<a.length;g++)a[g].from===m.to&&(a[g].from=r)}}});
l&&d.leave("<")};ka.prototype.scheduleEarly=function(){function a(d){return d.mustNotFloat||d.shouldNotFloat?!1:d.mustFloat||d.shouldFloat||d instanceof Aa||d instanceof ea||d instanceof ha?!0:d instanceof ja||d instanceof la||d instanceof Aa}function d(b){!0;v[b.id]=!0;!0;a(b)||b.control.block.append(b)}function b(a,e){!0;!0;!0;l&&m.writeLn("Scheduled: "+a+" in "+e);a.control=e;d(a)}function f(a){l&&m.enter("> Schedule: "+a);var p=[];a.visitInputs(function(a){g(a)||a instanceof D&&p.push(a instanceof
da?a.project():a)});l&&m.writeLn("Inputs: ["+p.map(e)+"], length: "+p.length);for(var s=0;s<p.length;s++){var u=p[s];!(u instanceof W)&&!v[u.id]&&f(u)}if(a.control)a instanceof z||(a instanceof W||a instanceof w||v[a.id])||d(a);else if(p.length){u=p[0].control;for(s=1;s<p.length;s++){var A=p[s].control;u.block.dominatorDepth<A.block.dominatorDepth&&(u=A)}b(a,u)}else b(a,r.root.region);l&&m.leave("<")}var l=!1,m=l&&new IndentingWriter;l&&m.enter("> Schedule Early");var r=this,p=this.dfg,v=[],s=[];
p.forEachInPreOrderDepthFirstSearch(function(d){d instanceof u||d instanceof y||(d.control&&s.push(d),d instanceof W&&d.args.forEach(function(d){a(d)&&(d.mustNotFloat=!0)}))},!0);l&&s.forEach(function(a){print("Root: "+a)});for(var A=0;A<s.length;A++){var E=s[A];if(E instanceof W){var F=E.control.block;(F.phis||(F.phis=[])).push(E)}E.control&&f(E)}l&&m.leave("<");s.forEach(function(a){a=a instanceof da?a.project():a;a===p.start||a instanceof u||!0})};ka.prototype.trace=function(a){function d(a){e[a.id]||
(e[a.id]=!0,f.push(a),a.visitSuccessors(d))}function b(a){!0;return a===g?"house":a===l?"invhouse":"box"}var e=[],f=[],g=this.root,l=this.exit;d(g);a.writeLn("");a.enter("digraph CFG {");a.writeLn("graph [bgcolor = gray10];");a.writeLn("edge [fontname = Consolas, fontsize = 11, color = white, fontcolor = white];");a.writeLn("node [shape = box, fontname = Consolas, fontsize = 11, color = white, fontcolor = white, style = filled];");a.writeLn("rankdir = TB;");f.forEach(function(d){var e="";void 0!==
d.name&&(e+=" "+d.name);void 0!==d.rpo&&(e+=" O: "+d.rpo);a.writeLn("B"+d.id+' [label = "B'+d.id+e+'", fillcolor = "black", shape='+b(d)+", style=filled];")});f.forEach(function(d){d.visitSuccessors(function(b){a.writeLn("B"+d.id+" -> B"+b.id)});d.dominator&&a.writeLn("B"+d.id+" -> B"+d.dominator.id+" [color = orange];");d.follow&&a.writeLn("B"+d.id+" -> B"+d.follow.id+" [color = purple];")});a.leave("}");a.writeLn("")};ya=ka;var ka=function(){},Qa=function(a,d){!0;if(g(a.argument))return new Z(a.operator.evaluate(a.argument.value));
if(d){var b=Sa(a.argument,!0);if(a.operator===aa.TRUE)return b;if(b instanceof la){if(a.operator===aa.FALSE&&b.operator===aa.FALSE)return b.argument}else return new la(a.operator,b)}return a},Sa=function(a,d){var b;a instanceof la?b=Qa(a,d):a instanceof ja?(!0,b=g(a.left)&&g(a.right)?new Z(a.operator.evaluate(a.left.value,a.right.value)):a):b=a;return b};ka.prototype.tryFold=Sa;a.isConstant=g;a.Block=Pa;a.Node=p;a.Start=w;a.Null=Ia;a.Undefined=Fa;a.This=ea;a.Throw=na;a.Arguments=ha;a.ASGlobal=pa;
a.Projection=da;a.Region=u;a.Latch=ia;a.Binary=ja;a.Unary=la;a.Constant=Z;a.ASFindProperty=M;a.GlobalProperty=ga;a.GetProperty=Q;a.SetProperty=H;a.CallProperty=E;a.ASCallProperty=C;a.ASCallSuper=K;a.ASGetProperty=T;a.ASGetSuper=J;a.ASHasProperty=G;a.ASDeleteProperty=N;a.ASGetDescendants=L;a.ASSetProperty=P;a.ASSetSuper=U;a.ASGetSlot=I;a.ASSetSlot=O;a.Call=B;a.ASNew=R;a.Phi=W;a.Stop=r;a.If=A;a.Switch=v;a.End=z;a.Jump=y;a.ASScope=Ea;a.Operator=aa;a.Variable=fa;a.Move=ca;a.Copy=F;a.Parameter=Aa;a.NewArray=
oa;a.NewObject=$;a.ASNewActivation=sa;a.KeyValuePair=ra;a.ASMultiname=ta;a.DFG=ua;a.CFG=ya;a.Flags={INDEXED:1,RESOLVED:2,PRISTINE:4,IS_METHOD:8};a.PeepholeOptimizer=ka})("undefined"===typeof exports?IR={}:exports);
var c4Options=systemOptions.register(new OptionSet("C4 Options")),enableC4=c4Options.register(new Option("c4","c4","boolean",!1,"Enable the C4 compiler.")),c4TraceLevel=c4Options.register(new Option("tc4","tc4","number",0,"Compiler Trace Level")),enableRegisterAllocator=c4Options.register(new Option("ra","ra","boolean",!1,"Enable register allocator.")),getPublicQualifiedName=Multiname.getPublicQualifiedName,createName=function(a,b){return isNumeric(b)||isObject(b)?b:new Multiname(a,b)};
(function(a){function b(a){return a instanceof R&&isString(a.value)}function d(a){return a instanceof R&&isNumeric(a.value)?!0:a.ty&&a.ty.isNumeric()}function e(a){return new R(a)}function f(a,d,b){!0;b=b.split(".");for(var f=0;f<b.length;f++)d=new IR.GetProperty(null,a.store,d,e(b[f])),d.shouldFloat=!0,a.loads.push(d);return d}function g(a){a=new IR.GlobalProperty(a);a.mustFloat=!0;return a}function l(a,d){var b=new Q(a,d);W&&(b=W.tryFold(b));return b}function m(a,d,b){var e=new K(a,d,b);d.ty&&(d.ty!==
Type.Any&&d.ty===b.ty)&&(a===I.EQ?e.operator=I.SEQ:a===I.NE&&(e.operator=I.SNE));W&&(e=W.tryFold(e));return e}function p(a){return m(I.OR,a,e(0))}function r(a){return m(I.URSH,a,e(0))}function s(a){return d(a)?a:l(I.PLUS,a)}function u(a){return l(I.FALSE,l(I.FALSE,a))}function w(a,d,b){return new T(null,null,a,d,b,IR.Flags.PRISTINE)}function z(a,d){return w(g(a),null,[d])}function A(a){!0;return Z[Multiname.getQualifiedName(a)]}var v=IR.Node,B=IR.Start,y=IR.Null,D=IR.Undefined,F=IR.This,E=IR.Projection,
C=IR.Region,K=IR.Binary,Q=IR.Unary,R=IR.Constant,T=IR.Call,L=IR.Phi,G=IR.Stop,I=IR.Operator,J=IR.Parameter,H=IR.NewArray,P=IR.NewObject,O=IR.KeyValuePair,U=IR.isConstant,M=IR.DFG,N=new IndentingWriter,W=new IR.PeepholeOptimizer,fa,ca=function(a){this.id=ga+=1;this.index=a;this.local=[];this.stack=[];this.scope=[];this.store=D;this.loads=[];this.saved=D},da=function(a,d,b){a=d instanceof L&&d.control===a?d:new L(a,d);a.pushValue(b);return a},ia=function(a,d,b){for(var e=0;e<d.length;e++)d[e]=da(a,
d[e],b[e])},ja=function(a){return a instanceof v?a.toString(!0):a},ga=0;ca.prototype.clone=function(a){var d=new fa;d.index=void 0!==a?a:this.index;d.local=this.local.slice(0);d.stack=this.stack.slice(0);d.scope=this.scope.slice(0);d.loads=this.loads.slice(0);d.saved=this.saved;d.store=this.store;return d};ca.prototype.matches=function(a){return this.stack.length===a.stack.length&&this.scope.length===a.scope.length&&this.local.length===a.local.length};ca.prototype.makeLoopPhis=function(a){function d(b){b=
new L(a,b);b.isLoop=!0;return b}var b=new fa;!0;b.index=this.index;b.local=this.local.map(d);b.stack=this.stack.map(d);b.scope=this.scope.map(d);b.loads=this.loads.slice(0);b.saved=this.saved;b.store=d(this.store);return b};ca.prototype.optimize=function(){function a(d){if(d instanceof L&&!d.isLoop){var b=d.args.unique();if(1===b.length)return d.seal(),Counter.count("Builder: OptimizedPhi"),b[0]}return d}this.local=this.local.map(a);this.stack=this.stack.map(a);this.scope=this.scope.map(a);this.saved=
a(this.saved);this.store=a(this.store)};ca.prototype.merge=function(a,d){!0;!0;ia(a,this.local,d.local);ia(a,this.stack,d.stack);ia(a,this.scope,d.scope);this.store=da(a,this.store,d.store);this.store.abstract=!0};ca.prototype.trace=function(a){a.writeLn(this.toString())};ca.prototype.toString=function(){return"<"+String(this.id+" @ "+this.index).padRight(" ",10)+(" M: "+ja(this.store)).padRight(" ",14)+(" X: "+ja(this.saved)).padRight(" ",14)+(" $: "+this.scope.map(ja).join(", ")).padRight(" ",20)+
(" L: "+this.local.map(ja).join(", ")).padRight(" ",40)+(" S: "+this.stack.map(ja).join(", ")).padRight(" ",60)};fa=ca;var la=z.bind(null,"asCoerceString"),ca=z.bind(null,"asCoerceObject"),Z=createEmptyObject();Z[Multiname.Int]=p;Z[Multiname.Uint]=r;Z[Multiname.Number]=s;Z[Multiname.String]=la;Z[Multiname.Object]=ca;Z[Multiname.Boolean]=u;var ea=createEmptyObject();ea[Multiname.Int]=p;ea[Multiname.Uint]=r;ea[Multiname.Number]=z.bind(null,"Number");ea[Multiname.String]=z.bind(null,"String");ea[Multiname.Object]=
z.bind(null,"Object");ea[Multiname.Boolean]=z.bind(null,"Boolean");var na=function(a,d,b){!0;this.abc=a.abc;this.scope=d;this.methodInfo=a;this.hasDynamicScope=b};na.prototype.buildStart=function(a){var d=this.methodInfo,b=a.entryState=new fa(0);b.local.push(new F(a));for(var l=this.hasDynamicScope?1:0,m=d.parameters.length,r=0;r<m;r++)b.local.push(new J(a,l+r,PARAMETER_PREFIX+d.parameters[r].name));for(r=m;r<d.localCount;r++)b.local.push(D);b.store=new E(a,E.Type.STORE);a.scope=this.hasDynamicScope?
new J(a,0,SAVED_SCOPE_NAME):new R(this.scope);b.saved=new E(a,E.Type.SCOPE);a.domain=new R(this.domain);r=new IR.Arguments(a);if(d.needsRest()||d.needsArguments()){var p=e(l+(d.needsRest()?m:0));b.local[m+1]=new T(a,b.store,g("sliceArguments"),null,[r,p],IR.Flags.PRISTINE)}p=f(b,r,"length");for(r=0;r<m;r++){var v=d.parameters[r],s=r+1,u=b.local[s];if(void 0!==v.value)var w=new IR.Binary(I.LT,p,e(l+r+1)),u=new IR.Latch(null,w,e(v.value),u);v.type&&!v.type.isAnyName()&&((w=A(v.type))?u=w(u):c4CoerceNonPrimitiveParameters&&
(u=new T(a,b.store,g("asCoerceByMultiname"),null,[e(this.abc.applicationDomain),e(v.type),u],!0)));b.local[s]=u}return a};na.prototype.buildGraph=function(){function a(v,z,C){function B(a){if(void 0!==a){if(a<Ka.length)return Ka[Ka.length-1-a];if(a===Ka.length)return C.saved;var d=C.saved;a-=Ka.length;for(var b=0;b<a;b++)d=ka(d,"parent");return d}return 0<Ka.length?Ka.top():C.saved}function L(a){!0;V.ti&&!a.ty&&(a.ty=V.ti.type);Ga.push(a)}function G(){return Ga.pop()}function M(a){var d=Da,b=G();
b.shouldNotFloat=!0;d[a]=b}function ha(a){var d=ca[a],b=d.flags;a=d.isRuntimeName()?Ga.pop():e(d.name);d.isRuntimeNamespace()?(d=new H(v,[G()]),!0,d.shouldFloat=!0):d=e(d.namespaces);return new IR.ASMultiname(d,a,b)}function oa(a,d,b){d=new IR.ASFindProperty(v,C.store,B(),a,fa,d);if(b){if(b.object)return b.object instanceof Global&&!b.object.isExecuting()?(console.info("Can't optimize findProperty "+a+", global object is not yet executed or executing."),d):e(b.object);if(void 0!==b.scopeDepth)return xa(B(b.scopeDepth))}console.info("Can't optimize findProperty "+
a);return d}function ka(a,d){return f(C,a,d)}function Aa(a,d){var b=A(a);return b?b(d):c4CoerceNonPrimitive?va(g("asCoerceByMultiname"),null,[fa,e(a),d]):d}function xa(a){return a instanceof IR.ASScope?a.object:ka(a,"object")}function ma(a){C.store=new E(a,E.Type.STORE);a.loads=C.loads.slice(0);C.loads.length=0;return a}function ya(a){var d=a.namespaces,b=a.name;if(globalMultinameAnalysis.value)if(!U(d)||!U(b)||a.isAttribute())Counter.count("GlobalMultinameResolver: Cannot resolve runtime multiname or attribute.");
else return isNumeric(b.value)||!isString(b.value)||!b.value?(Counter.count("GlobalMultinameResolver: Cannot resolve numeric or any names."),!1):GlobalMultinameResolver.resolveMultiname(new Multiname(d.value,b.value,a.flags))}function za(a,d,b,f){!0;f=!!f;if(b){if(b.trait){if(b.trait.isConst()&&b.trait.hasDefaultValue)return e(b.trait.value);a=new IR.GetProperty(v,C.store,a,e(Multiname.getQualifiedName(b.trait.name)));b.trait.isGetter()?a=ma(a):C.loads.push(a);return a}if(b.propertyQName)return ma(new IR.GetProperty(v,
C.store,a,e(b.propertyQName)));if(b.isDirectlyReadable)return ma(new IR.GetProperty(v,C.store,a,d.name));if(b.isIndexedReadable)return ma(new IR.ASGetProperty(v,C.store,a,d,IR.Flags.INDEXED|(f?IR.Flagas.IS_METHOD:0)))}console.info("Can't optimize getProperty "+d);if(b=ya(d))return ma(new IR.ASGetProperty(v,C.store,a,e(Multiname.getQualifiedName(b)),IR.Flags.RESOLVED|(f?IR.Flagas.IS_METHOD:0)));Counter.count("Compiler: Slow ASGetProperty");return ma(new IR.ASGetProperty(v,C.store,a,d,f?IR.Flagas.IS_METHOD:
0))}function La(a,d,b,f){!0;if(f){if(f.trait){(d=f.trait.typeName?A(f.trait.typeName):null)&&(b=d(b));ma(new IR.SetProperty(v,C.store,a,e(Multiname.getQualifiedName(f.trait.name)),b));return}if(f.propertyQName)return ma(new IR.SetProperty(v,C.store,a,e(f.propertyQName),b));if(f.isDirectlyWriteable)return ma(new IR.SetProperty(v,C.store,a,d.name,b));if(f.isIndexedWriteable)return ma(new IR.ASSetProperty(v,C.store,a,d,b,IR.Flags.INDEXED))}console.info("Can't optimize setProperty "+d);ya(d);return ma(new IR.ASSetProperty(v,
C.store,a,d,b,0))}function va(a,d,b){return ma(new T(v,C.store,a,d,b,IR.Flags.PRISTINE))}function Ca(a){var d;a.isBinary()&&(d=G());var b=G();a=d?m(a,b,d):l(a,b);W&&(a=W.tryFold(a,!0));return a}function Ra(a){a=l(I.FALSE,Ca(a));W&&(a=W.tryFold(a,!0));return a}function qa(a,d){var b,e;a.isBinary()?(e=G(),b=G(),d&&(e=p(e),b=p(b)),L(m(a,b,e))):(b=G(),d&&(b=p(b)),L(l(a,b)))}function Ba(a){!0;a=new IR.If(v,a);Ha=[{control:new E(a,E.Type.FALSE),target:F[V.position+1],state:C},{control:new E(a,E.Type.TRUE),
target:V.target,state:C}]}!0;C.optimize();var Ja=z.entryState;if(Ja){da&&N.writeLn("Type State: "+Ja);for(var X=0;X<Ja.local.length;X++){var Y=Ja.local[X],Da=C.local[X];Da.ty||(Da.ty=Y)}}var Da=C.local,Ga=C.stack,Ka=C.scope,S,ba,Ha=null;da&&(N.writeLn("Processing Region: "+v+", Block: "+z.bid),N.enter(("> state: "+v.entryState.toString()).padRight(" ",100)));v.processed=!0;var V,Ja=z.position;for(z=z.end.position;Ja<=z;Ja++){V=F[Ja];var wa=V.op;C.index=Ja;switch(wa){case 3:ma(new IR.Throw(v,G()));
na.push({region:v,store:C.store,value:D});!0;Ha=[];break;case 98:L(Da[V.index]);break;case 208:case 209:case 210:case 211:L(Da[wa-208]);break;case 99:M(V.index);break;case 212:case 213:case 214:case 215:M(wa-212);break;case 28:Ka.push(new IR.ASScope(B(),G(),!0));break;case 48:Ka.push(new IR.ASScope(B(),G(),!1));break;case 29:Ka.pop();break;case 100:L(new IR.ASGlobal(null,C.saved));break;case 101:L(xa(C.scope[V.index]));break;case 93:L(oa(ha(V.index),!0,V.ti));break;case 94:L(oa(ha(V.index),!1,V.ti));
break;case 102:X=ha(V.index);Y=G();L(za(Y,X,V.ti,!1,ic(V)));break;case 89:X=ha(V.index);S=Y=G();X=X instanceof R&&X.value instanceof Multiname&&Multiname.isQName(X.value)?e(Multiname.getQualifiedName(X.value)):X;S=new IR.ASGetDescendants(v,C.store,S,X);L(S);break;case 96:X=ha(V.index);L(za(oa(X,!0,V.ti),X,V.ti,!1,ic(V)));break;case 104:case 97:S=G();X=ha(V.index);Y=G();La(Y,X,S,V.ti,ic(V));break;case 106:X=ha(V.index);Y=G();L(ma(new IR.ASDeleteProperty(v,C.store,Y,X)));break;case 108:Y=G();a:{S=Y;
X=e(V.index);if(ba=V.ti)if(Y=ba.trait){if(Y.isConst()&&ba.trait.hasDefaultValue){S=e(Y.value);break a}X=Multiname.getQualifiedName(Y.name);S=ma(new IR.GetProperty(v,C.store,S,e(X)));break a}console.info("Can't optimize getSlot "+X);S=ma(new IR.ASGetSlot(null,C.store,S,X))}L(S);break;case 109:S=G();Y=G();a:{X=Y;ba=e(V.index);if(Y=V.ti)if(Y=Y.trait){ba=Multiname.getQualifiedName(Y.name);ma(new IR.SetProperty(v,C.store,X,e(ba),S));break a}console.info("Can't optimize setSlot "+ba);ma(new IR.ASSetSlot(v,
C.store,X,ba,S))}break;case 4:X=ha(V.index);Y=G();ba=C.saved;S=Y;Y=X;(X=V.ti)&&X.trait&&X.trait.isGetter()&&X.baseClass?(ba=VM_OPEN_GET_METHOD_PREFIX+Multiname.getQualifiedName(X.trait.name),X=ka(e(X.baseClass),"traitsPrototype."+ba),S=va(X,S,[])):S=ma(new IR.ASGetSuper(v,C.store,S,Y,ba));L(S);break;case 5:S=G();X=ha(V.index);Y=G();var Na=C.saved;ba=Y;(Y=V.ti)&&Y.trait&&Y.trait.isSetter()&&Y.baseClass?(X=VM_OPEN_SET_METHOD_PREFIX+Multiname.getQualifiedName(Y.trait.name),X=ka(e(Y.baseClass),"traitsPrototype."+
X),va(X,ba,[S])):ma(new IR.ASSetSuper(v,C.store,ba,X,S,Na));break;case 241:case 240:break;case 64:L(w(Ma,null,[e(ga[V.index]),B(),e(!0)]));break;case 65:ba=Ga.popMany(V.argCount);Y=G();S=G();L(ma(new T(v,C.store,S,Y,ba,0)));break;case 70:case 79:case 76:ba=Ga.popMany(V.argCount);X=ha(V.index);Y=G();a:{S=Y;Y=X;X=ba;Na=76===wa;if((ba=V.ti)&&ba.trait){if(ba.trait.isMethod()){Y=void 0;Y=ba.trait.holder instanceof InstanceInfo&&ba.trait.holder.isInterface()?Multiname.getPublicQualifiedName(Multiname.getName(ba.trait.name)):
Multiname.getQualifiedName(ba.trait.name);Y=VM_OPEN_METHOD_PREFIX+Y;S=ma(new IR.CallProperty(v,C.store,S,e(Y),X,IR.Flags.PRISTINE));break a}if(ba.trait.isClass()){Y=ba.trait.name;!0;if(Y=ea[Multiname.getQualifiedName(Y)]){S=Y(X[0]);break a}ba=Multiname.getQualifiedName(ba.trait.name);S=ma(new IR.CallProperty(v,C.store,S,e(ba),X,0));break a}}else if(ba&&ba.propertyQName){S=ma(new IR.CallProperty(v,C.store,S,e(ba.propertyQName),X,IR.Flags.PRISTINE));break a}S=(ba=ya(Y))?ma(new IR.ASCallProperty(v,C.store,
S,e(Multiname.getQualifiedName(ba)),X,IR.Flags.PRISTINE|IR.Flags.RESOLVED,Na)):ma(new IR.ASCallProperty(v,C.store,S,Y,X,IR.Flags.PRISTINE,Na))}79!==wa&&L(S);break;case 69:case 78:X=ha(V.index);ba=Ga.popMany(V.argCount);Y=G();Na=C.saved;S=Y;Y=X;X=ba;(ba=V.ti)&&ba.trait&&ba.trait.isMethod()&&ba.baseClass?(Y=VM_OPEN_METHOD_PREFIX+Multiname.getQualifiedName(ba.trait.name),ba=ka(e(ba.baseClass),"traitsPrototype."+Y),S=va(ba,S,X)):S=ma(new IR.ASCallSuper(v,C.store,S,Y,X,IR.Flags.PRISTINE,Na));78!==wa&&
L(S);break;case 66:ba=Ga.popMany(V.argCount);Y=G();L(ma(new IR.ASNew(v,C.store,Y,ba)));break;case 73:ba=Ga.popMany(V.argCount);Y=G();if(!V.ti||!V.ti.noCallSuperNeeded)S=ka(C.saved,"object.baseClass.instanceConstructorNoInitialize"),va(S,Y,ba);break;case 74:ba=Ga.popMany(V.argCount);X=ha(V.index);Y=G();S=za(Y,X,V.ti,!1,ic(V));L(ma(new IR.ASNew(v,C.store,S,ba)));break;case 128:if(V.ti&&V.ti.noCoercionNeeded){Counter.count("Compiler: NoCoercionNeeded");break}else Counter.count("Compiler: CoercionNeeded");
S=G();L(Aa(ca[V.index],S));break;case 131:case 115:L(p(G()));break;case 136:case 116:L(r(G()));break;case 132:case 117:L(s(G()));break;case 129:case 118:L(u(G()));break;case 120:L(va(g("checkFilter"),null,[G()]));break;case 130:break;case 133:L(la(G()));break;case 112:S=G();S=b(S)?S:w(g("String"),null,[S]);L(S);break;case 135:Y=G();c4AsTypeLate&&(S=G(),L(va(g("asAsType"),null,[Y,S])));break;case 72:case 71:S=D;if(72===wa&&(S=G(),Q.returnType&&(!V.ti||!V.ti.noCoercionNeeded)))S=Aa(Q.returnType,S);
na.push({region:v,store:C.store,value:S});!0;Ha=[];break;case 30:case 35:S=G();Y=G();L(new IR.CallProperty(v,C.store,Y,e(30===wa?"asNextName":"asNextValue"),[S],IR.Flags.PRISTINE));break;case 50:S=va(g("asHasNext2"),null,[Da[V.object],Da[V.index]]);Da[V.object]=ka(S,"object");L(Da[V.index]=ka(S,"index"));break;case 32:L(y);break;case 33:L(D);break;case 34:notImplemented();break;case 36:L(e(V.value));break;case 37:L(e(V.value));break;case 44:L(e(ja[V.index]));break;case 45:L(e(K[V.index]));break;case 46:L(e(ia[V.index]));
break;case 47:L(e(J[V.index]));break;case 38:L(e(!0));break;case 39:L(e(!1));break;case 40:L(e(NaN));break;case 41:G();break;case 42:S=G();S.shouldNotFloat=!0;L(S);L(S);break;case 43:C.stack.push(G(),G());break;case 239:case 240:case 241:break;case 12:Ba(Ra(I.LT));break;case 24:Ba(Ca(I.GE));break;case 13:Ba(Ra(I.LE));break;case 23:Ba(Ca(I.GT));break;case 14:Ba(Ra(I.GT));break;case 22:Ba(Ca(I.LE));break;case 15:Ba(Ra(I.GE));break;case 21:Ba(Ca(I.LT));break;case 16:!0;Ha=[{control:v,target:V.target,
state:C}];break;case 17:Ba(Ca(I.TRUE));break;case 18:Ba(Ca(I.FALSE));break;case 19:Ba(Ca(I.EQ));break;case 20:Ba(Ca(I.NE));break;case 25:Ba(Ca(I.SEQ));break;case 26:Ba(Ca(I.SNE));break;case 27:S=G();!0;if(2<V.targets.length){Ha=[];S=new IR.Switch(v,S);for(X=0;X<V.targets.length;X++)Ha.push({control:new E(S,E.Type.CASE,e(X)),target:V.targets[X],state:C})}else!0,S=m(I.SEQ,S,e(0)),S=new IR.If(v,S),Ha=[{control:new E(S,E.Type.FALSE),target:V.targets[1],state:C},{control:new E(S,E.Type.TRUE),target:V.targets[0],
state:C}];break;case 150:qa(I.FALSE);break;case 151:qa(I.BITWISE_NOT);break;case 160:X=G();S=G();ba=d(S)&&d(X)||(b(S)||S.ty&&S.ty.isString())&&(b(X)||X.ty&&X.ty.isString())?I.ADD:useAsAdd?I.AS_ADD:I.ADD;L(m(ba,S,X));break;case 197:qa(I.ADD,!0);break;case 161:qa(I.SUB);break;case 198:qa(I.SUB,!0);break;case 162:qa(I.MUL);break;case 199:qa(I.MUL,!0);break;case 163:qa(I.DIV);break;case 164:qa(I.MOD);break;case 165:qa(I.LSH);break;case 166:qa(I.RSH);break;case 167:qa(I.URSH);break;case 168:qa(I.AND);
break;case 169:qa(I.OR);break;case 170:qa(I.XOR);break;case 171:qa(I.EQ);break;case 172:qa(I.SEQ);break;case 173:qa(I.LT);break;case 174:qa(I.LE);break;case 175:qa(I.GT);break;case 176:qa(I.GE);break;case 144:qa(I.NEG);break;case 196:qa(I.NEG,!0);break;case 145:case 192:case 147:case 193:L(e(1));145===wa||147===wa?L(s(G())):L(p(G()));145===wa||192===wa?qa(I.ADD):qa(I.SUB);break;case 146:case 194:case 148:case 195:L(e(1));146===wa||148===wa?L(s(Da[V.index])):L(p(Da[V.index]));146===wa||194===wa?qa(I.ADD):
qa(I.SUB);M(V.index);break;case 177:Y=G();S=G();L(va(ka(Y,"isInstanceOf"),null,[S]));break;case 178:S=G();X=ha(V.index);Y=za(oa(X,!1),X);L(va(g("asIsType"),null,[Y,S]));break;case 179:Y=G();S=G();L(va(g("asIsType"),null,[Y,S]));break;case 180:Y=G();S=G();X=new IR.ASMultiname(D,S,0);L(ma(new IR.ASHasProperty(v,C.store,Y,X)));break;case 149:L(va(g("asTypeOf"),null,[G()]));break;case 8:L(D);M(V.index);break;case 83:ba=Ga.popMany(V.argCount);Y=G();S=g("applyType");L(va(S,null,[fa,Y,new H(v,ba)]));break;
case 86:ba=Ga.popMany(V.argCount);L(new H(v,ba));break;case 85:ba=[];for(X=0;X<V.argCount;X++)S=G(),Y=G(),!0,Y=e(Multiname.getPublicQualifiedName(Y.value)),ba.push(new O(Y,S));L(new P(v,ba));break;case 87:L(new IR.ASNewActivation(e(Q)));break;case 88:S=g("createClass");L(va(S,null,[e(Z[V.index]),G(),B()]));break;default:unexpected("Not Implemented: "+V)}239===wa||(241===wa||240===wa)||da&&N.writeLn(("state: "+C.toString()).padRight(" ",100)+" : "+Ja+", "+V.toString(this.abc))}da&&N.leave(("< state: "+
C.toString()).padRight(" ",100));Ha||(Ha=[],V.position+1<=F.length&&Ha.push({control:v,target:F[V.position+1],state:C}));return Ha}for(var v=this.methodInfo.analysis,z=v.blocks,F=v.bytecodes,Q=this.methodInfo,K=this.abc.constantPool.ints,ia=this.abc.constantPool.uints,J=this.abc.constantPool.doubles,ja=this.abc.constantPool.strings,ga=this.abc.methods,Z=this.abc.classes,ca=this.abc.constantPool.multinames,fa=new R(this.abc.applicationDomain),da=2<c4TraceLevel.value,na=[],v=0;v<z.length;v++)z[v].blockDominatorOrder=
v;var xa=new SortedList(function(a,d){return a.block.blockDominatorOrder-d.block.blockDominatorOrder}),v=new B(null);this.buildStart(v);var Ma=g("createFunction");for(xa.push({region:v,block:z[0]});z=xa.pop();)a(z.region,z.block,z.region.entryState.clone()).forEach(function(a){var d=a.target,b=d.region;b?(da&&N.enter("Merging into region: "+b+" @ "+d.position+", block "+d.bid+" {"),da&&N.writeLn("  R "+b.entryState),da&&N.writeLn("+ I "+a.state),b.entryState.merge(b,a.state),b.predecessors.push(a.control),
da&&N.writeLn("  = "+b.entryState),da&&N.leave("}")):(b=d.region=new C(a.control),d.loop&&da&&N.writeLn("Adding PHIs to loop region."),b.entryState=d.loop?a.state.makeLoopPhis(b):a.state.clone(d.position),da&&N.writeLn("Adding new region: "+b+" @ "+d.position+" to worklist."),xa.push({region:b,block:d}))}),da&&N.enter("Worklist: {"),xa.forEach(function(a){da&&N.writeLn(a.region+" "+a.block.bdo+" "+a.region.entryState)}),da&&N.leave("}");da&&N.writeLn("Done");if(1<na.length){var ya=new C(null),ka=
new L(ya,null),za=new L(ya,null);na.forEach(function(a){ya.predecessors.push(a.region);ka.pushValue(a.value);za.pushValue(a.store)});z=new G(ya,za,ka)}else z=new G(na[0].region,na[0].store,na[0].value);return new M(z)};a.buildMethod=function(a,d,b,e){!0;!0;!0;Counter.count("Compiler: Compiled Methods");Timer.start("Compiler");Timer.start("Mark Loops");d.analysis.markLoops();Timer.stop();enableVerifier.value&&(Timer.start("Verify"),a.verifyMethod(d,b),Timer.stop());a=0<c4TraceLevel.value;var f=1<c4TraceLevel.value;
Timer.start("Build IR");v.startNumbering();d=(new na(d,b,e)).buildGraph();Timer.stop();f&&d.trace(N);Timer.start("Build CFG");d=d.buildCFG();Timer.stop();Timer.start("Optimize Phis");d.optimizePhis();Timer.stop();Timer.start("Schedule Nodes");d.scheduleEarly();Timer.stop();f&&d.trace(N);Timer.start("Verify IR");d.verify();Timer.stop();Timer.start("Allocate Variables");d.allocateVariables();Timer.stop();Timer.start("Generate Source");f=Backend.generate(d,enableRegisterAllocator.value);Timer.stop();
a&&N.writeLn(f.body);v.stopNumbering();Timer.stop();return f}})("undefined"===typeof exports?Builder={}:exports);var Compiler=new (function(){function a(){this.verifier=new Verifier}a.prototype.compileMethod=function(a,d,e){return Builder.buildMethod(this.verifier,a,d,e)};return a}());
(function(a){var b,d=function(a){this.kind=1;this.body=a},e=function(a){this.kind=2;this.body=a},f=function(a,d,b,e){this.kind=3;this.cond=a;this.then=d;this.else=b;this.negated=!1;this.nothingThrownLabel=e},g=function(a,d){this.kind=4;this.index=a;this.body=d},l=function(a,d,b){this.kind=5;this.determinant=a;this.cases=d;this.nothingThrownLabel=b},m=function(a,d){this.kind=6;this.labels=a;this.body=d},p=function(a){for(var d={},b=0,e=a.length;b<e;b++){var f=a[b];f.labels||print(f.toSource());for(var g=
0,l=f.labels.length;g<l;g++)d[f.labels[g]]=f}this.kind=7;this.cases=a;this.labelMap=d},r=function(a){this.kind=8;this.label=a},s=function(a,d){this.kind=9;this.label=a;this.head=d},u=function(a,d){this.kind=10;this.label=a;this.head=d;this.necessary=!0},w=function(a,d){this.kind=11;this.body=a;this.catches=d},z=function(a,d,b){this.kind=12;this.varName=a;this.typeName=d;this.body=b};d.prototype={trace:function(a){for(var d=this.body,b=0,e=d.length;b<e;b++)d[b].trace(a)},first:function(){return this.body[0]},
slice:function(a,b){return new d(this.body.slice(a,b))}};e.prototype={trace:function(a){a.enter("loop {");this.body.trace(a);a.leave("}")}};f.prototype={trace:function(a){this.cond.trace(a);this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");a.enter("if"+(this.negated?" not":"")+" {");this.then&&this.then.trace(a);this.else&&(a.outdent(),a.enter("} else {"),this.else.trace(a));a.leave("}");this.nothingThrownLabel&&a.leave("}")}};g.prototype={trace:function(a){0<=this.index?
a.writeLn("case "+this.index+":"):a.writeLn("default:");a.indent();this.body&&this.body.trace(a);a.outdent()}};l.prototype={trace:function(a){this.nothingThrownLabel&&a.enter("if (label is "+this.nothingThrownLabel+") {");this.determinant.trace(a);a.writeLn("switch {");for(var d=0,b=this.cases.length;d<b;d++)this.cases[d].trace(a);a.writeLn("}");this.nothingThrownLabel&&a.leave("}")}};m.prototype={trace:function(a){a.enter("if (label is "+this.labels.join(" or ")+") {");this.body&&this.body.trace(a);
a.leave("}")}};p.prototype={trace:function(a){for(var d=0,b=this.cases.length;d<b;d++)this.cases[d].trace(a)}};r.prototype={trace:function(a){a.writeLn("label = "+this.label)}};s.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);a.writeLn("break")}};u.prototype={trace:function(a){this.label&&a.writeLn("label = "+this.label);this.necessary&&a.writeLn("continue")}};w.prototype={trace:function(a){a.enter("try {");this.body.trace(a);a.writeLn("label = "+this.nothingThrownLabel);
for(var d=0,b=this.catches.length;d<b;d++)this.catches[d].trace(a);a.leave("}")}};z.prototype={trace:function(a){a.outdent();a.enter("} catch ("+(this.varName||"e")+(this.typeName?" : "+this.typeName:"")+") {");this.body.trace(a)}};b={SEQ:1,LOOP:2,IF:3,CASE:4,SWITCH:5,LABEL_CASE:6,LABEL_SWITCH:7,EXIT:8,BREAK:9,CONTINUE:10,TRY:11,CATCH:12,Seq:d,Loop:e,If:f,Case:g,Switch:l,LabelCase:m,LabelSwitch:p,Exit:r,Break:s,Continue:u,Try:w,Catch:z};var A=function(a,d){this.options=d||{};var b=a.blocks,e=BitSetFunctor(a.blocks.length),
f=e.ADDRESS_BITS_PER_WORD,g=e.BITS_PER_WORD,l=e.BIT_INDEX_MASK;e.singleton=function(a){var d=new e;d.set(a.id);d.count=1;d.dirty=0;return d};e.fromBlocks=function(a){var d=new e;d.setBlocks(a);return d};var m=e.prototype;e.singleword?(m.forEachBlock=function(a){!0;var d=this.bits;if(d)for(var e=0;e<g;e++)d&1<<e&&a(b[e])},m.choose=function(){var a=this.bits;if(a)for(var d=0;d<g;d++)if(a&1<<d)return b[d]},m.members=function(){var a=[],d=this.bits;if(d)for(var e=0;e<g;e++)d&1<<e&&a.push(b[e]);return a},
m.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++)d|=1<<(a[b].id&l);this.bits=d}):(m.forEachBlock=function(a){!0;for(var d=this.bits,e=0,f=d.length;e<f;e++){var l=d[e];if(l)for(var m=0;m<g;m++)l&1<<m&&a(b[e*g+m])}},m.choose=function(){for(var a=this.bits,d=0,e=a.length;d<e;d++){var f=a[d];if(f)for(var l=0;l<g;l++)if(f&1<<l)return b[d*g+l]}},m.members=function(){for(var a=[],d=this.bits,e=0,f=d.length;e<f;e++){var l=d[e];if(l)for(var m=0;m<g;m++)l&1<<m&&a.push(b[e*g+m])}return a},
m.setBlocks=function(a){for(var d=this.bits,b=0,e=a.length;b<e;b++){var g=a[b].id;d[g>>f]|=1<<(g&l)}});this.BlockSet=e;this.hasExceptions=!1;this.normalizeReachableBlocks(a.root)},e=function(a,d,b){return function(e,f,g){function l(a){return g+a.id}function m(a){a.fn=a.fn.bind(r)}var r=this;g=g||"";var p=this.bytecodes;p&&(a.forEach(m),d.forEach(m),writeGraphViz(e,f.toString(),p[0],l,function(a){return a.successors||[]},a,d,function(a){return"Block: "+a.id+"\\l"},b&&b.bind(this,l)))}};A.prototype=
{normalizeReachableBlocks:function(a){!0;var d=this.BlockSet,b=[],e={},f={},g=[a];for(f[a.id]=!0;a=g.top();)if(e[a.id])1===e[a.id]&&(e[a.id]=2,b.push(a)),f[a.id]=!1,g.pop();else{e[a.id]=1;f[a.id]=!0;for(var l=a.successors,m=0,r=l.length;m<r;m++){var p=l[m];f[p.id]&&(a.spbacks||(a.spbacks=new d),a.spbacks.set(p.id));!e[p.id]&&g.push(p)}}this.blocks=b.reverse()},computeDominance:function(){var a=this.blocks,d=a.length,b=Array(d);b[0]=0;for(var e=[],f=0;f<d;f++)e[a[f].id]=f,a[f].dominatees=[];for(var g=
!0;g;){g=!1;for(f=1;f<d;f++){var l=a[f].predecessors,m=l.length,r=e[l[0].id];if(!(r in b))for(var p=1;p<m&&!(r=e[l[p].id],r in b);p++);!0;for(p=0;p<m;p++){var s=e[l[p].id];if(s!==r&&s in b){for(;s!==r;){for(;s>r;)s=b[s];for(;r>s;)r=b[r]}r=s}}b[f]!==r&&(b[f]=r,g=!0)}}a[0].dominator=a[0];for(f=1;f<d;f++)e=a[f],m=a[b[f]],e.dominator=m,m.dominatees.push(e),e.npredecessors=e.predecessors.length;d=[a[0]];for(a[0].level||(a[0].level=0);e=d.shift();){a=e.dominatees;p=0;for(m=a.length;p<m;p++)a[p].level=e.level+
1;d.push.apply(d,a)}},computeFrontiers:function(){for(var a=this.BlockSet,d=this.blocks,b=0,e=d.length;b<e;b++)d[b].frontier=new a;b=1;for(e=d.length;b<e;b++){var a=d[b],f=a.predecessors;if(2<=f.length)for(var g=a.dominator,l=0,m=f.length;l<m;l++)for(var r=f[l];r!==g;)r.frontier.set(a.id),r=r.dominator}},analyzeControlFlow:function(){this.computeDominance();return this.analyzedControlFlow=!0},markLoops:function(){function a(b,e){var f=new d;f.setBlocks(b);f.recount();this.id=e;this.body=f;this.exit=
new d;this.save={};this.head=new d;this.npredecessors=0}if(!this.analyzedControlFlow&&!this.analyzeControlFlow())return!1;var d=this.BlockSet,b;b=this.blocks;for(var e=new d,f=0,g=b.length;f<g;f++){var l=b[f],m=l.spbacks;if(m)for(var l=l.successors,r=0,p=l.length;r<p;r++){var s=l[r];m.get(s.id)&&e.set(s.dominator.id)}}b=e.members();if(0>=b.length)return this.markedLoops=!0;b=b.sort(function(a,d){return a.level-d.level});e=0;for(f=b.length-1;0<=f;f--){for(var g=b[f],m=1,l={},r={},p=[],s=[],u=[],w=
g.level+1,A=[g],z=void 0,H=void 0,z=void 0;z=A.top();)if(l[z.id]){if(s.peek()===z){s.pop();var P=[];do H=p.pop(),r[H.id]=!0,P.push(H);while(H!==z);(1<P.length||H.spbacks&&H.spbacks.get(H.id))&&u.push(P)}A.pop()}else{l[z.id]=m++;p.push(z);s.push(z);for(var H=z.successors,P=0,O=H.length;P<O;P++)if(z=H[P],!(z.level<w)){var U=z.id;if(l[U]){if(!r[U])for(;l[s.peek().id]>l[U];)s.pop()}else A.push(z)}}m=u;if(0!==m.length){l=0;for(r=m.length;l<r;l++){p=m[l];s=new a(p,e++);u=0;for(w=p.length;u<w;u++)if(A=p[u],
A.level===g.level+1&&!A.loop){A.loop=s;s.head.set(A.id);z=A.predecessors;H=0;for(P=z.length;H<P;H++)s.body.get(z[H].id)&&A.npredecessors--;s.npredecessors+=A.npredecessors}u=0;for(w=p.length;u<w;u++)A=p[u],A.level===g.level+1&&(A.npredecessors=s.npredecessors);s.head.recount()}}}return this.markedLoops=!0},induceControlTree:function(){function a(d,b){d.recount();if(0===d.count)return null;d.save=b;return d}function d(l,m,r,p,s,u,w){for(var A=[];l;)if(1<l.count){for(var z=new f,J={},H=[],P=l.members(),
O=0,U=P.length;O<U;O++){var M=P[O],N=M.id,W;if(M.loop&&l.contains(M.loop.head)){var fa=M.loop;if(!fa.induced){for(var ca=fa.head.members(),da=0,ia=0,ja=ca.length;ia<ja;ia++)da+=l.save[ca[ia].id];if(0<M.npredecessors-da)M.npredecessors-=l.save[N],M.save=l.save[N],W=d(M,z,J,p),H.push(new b.LabelCase([N],W));else{ia=0;for(ja=ca.length;ia<ja;ia++)W=ca[ia],W.npredecessors-=da,W.save=da;W=d(M,z,J,p);H.push(new b.LabelCase(fa.head.toArray(),W));fa.induced=!0}}}else M.npredecessors-=l.save[N],M.save=l.save[N],
W=d(M,z,J,p),H.push(new b.LabelCase([N],W))}for(var M=[],ia=0,O=0,U=H.length;O<U;O++){W=H[O];ja=W.labels;fa=ca=0;for(da=ja.length;fa<da;fa++)N=ja[fa],z.get(N)&&0<P[O].npredecessors-l.save[N]?M.push(N):ja[ca++]=N;ja.length=ca;0<ja.length&&(H[ia++]=W)}H.length=ia;if(0===H.length){O=0;for(U=M.length;O<U;O++)N=M[O],r[N]=(r[N]||0)+l.save[N],m.set(N);break}A.push(new b.LabelSwitch(H));l=a(z,J)}else{1===l.count?(M=l.choose(),N=M.id,M.npredecessors-=l.save[N],M.save=l.save[N]):(M=l,N=M.id);if(s)s=!1;else{if(p&&
!p.body.get(N)){M.npredecessors+=M.save;p.exit.set(N);p.save[N]=(p.save[N]||0)+M.save;A.push(new b.Break(N,p));break}if(p&&M.loop===p){M.npredecessors+=M.save;A.push(new b.Continue(N,p));break}if(M===w)break;if(0<M.npredecessors){M.npredecessors+=M.save;r[N]=(r[N]||0)+M.save;m.set(N);A.push(u?new b.Break(N,u):new b.Exit(N));break}if(M.loop){var ja=M.loop;if(1===ja.head.count)z=d(ja.head.choose(),null,null,ja,!0);else{z=[];ca=ja.head.members();O=0;for(U=ca.length;O<U;O++)W=ca[O],J=W.id,W=d(W,null,
null,ja,!0),z.push(new b.LabelCase([J],W));z=new b.LabelSwitch(z)}A.push(new b.Loop(z));l=a(ja.exit,ja.save);continue}}z=new f;J={};if(e&&M.hasCatches){W=M.successors;H=[];l=[];O=0;for(U=W.length;O<U;O++)P=W[O],(P.exception?H:l).push(P);ia=[];O=0;for(U=H.length;O<U;O++)P=H[O],P.npredecessors-=1,P.save=1,W=d(P,z,J,p),P=P.exception,ia.push(new b.Catch(P.varName,P.typeName,W));U=new b.Try(M,ia)}else l=M.successors,U=M;if(2<l.length){H=[];for(O=l.length-1;0<=O;O--)P=l[O],P.npredecessors-=1,P.save=1,W=
d(P,z,J,p,null,M,l[O+1]),H.unshift(new b.Case(O,W));H.top().index=void 0;e&&M.hasCatches?(U.nothingThrownLabel=g,U=new b.Switch(U,H,g++)):U=new b.Switch(U,H);l=a(z,J)}else 2===l.length?(O=M.hasFlippedSuccessors?l[1]:l[0],W=M.hasFlippedSuccessors?l[0]:l[1],O.npredecessors-=1,O.save=1,O=d(O,z,J,p),W.npredecessors-=1,W.save=1,W=d(W,z,J,p),e&&M.hasCatches?(U.nothingThrownLabel=g,U=new b.If(U,O,W,g++)):U=new b.If(U,O,W),l=a(z,J)):(W=l[0])?e&&M.hasCatches?(U.nothingThrownLabel=W.id,J[W.id]=(J[W.id]||0)+
1,z.set(W.id),l=a(z,J)):(W.npredecessors-=1,W.save=1,l=W):e&&M.hasCatches?(U.nothingThrownLabel=-1,l=a(z,J)):l=W;A.push(U)}return 1<A.length?new b.Seq(A):A[0]}var e=this.hasExceptions,f=this.BlockSet,g=this.blocks.length;this.controlTree=d(this.blocks[0],new f,{})},restructureControlFlow:function(){Timer.start("Restructure Control Flow");if(!this.markedLoops&&!this.markLoops())return Timer.stop(),!1;this.induceControlTree();this.restructuredControlFlow=!0;Timer.stop();return!0},trace:function(a){function d(a){return a.id}
var b=this.bytecodes;a.enter("analysis {");a.enter("cfg {");this.blocks.forEach(function(e){e.dominator?(a.enter("block "+e.id+(0<e.successors.length?" -> "+e.successors.map(d).join(","):"")+" {"),a.writeLn("npredecessors".padRight(" ",10)+e.npredecessors),a.writeLn("idom".padRight(" ",10)+e.dominator.id),a.writeLn("domcs".padRight(" ",10)+e.dominatees.map(d).join(",")),e.frontier&&a.writeLn("frontier".padRight(" ",10)+"{"+e.frontier.toArray().join(",")+"}"),a.writeLn("level".padRight(" ",10)+e.level)):
a.enter("block unreachable {");e.loop&&(a.writeLn("loop".padRight(" ",10)+"{"+e.loop.body.toArray().join(",")+"}"),a.writeLn("  id".padRight(" ",10)+e.loop.id),a.writeLn("  head".padRight(" ",10)+"{"+e.loop.head.toArray().join(",")+"}"),a.writeLn("  exit".padRight(" ",10)+"{"+e.loop.exit.toArray().join(",")+"}"),a.writeLn("  npredecessors".padRight(" ",10)+e.loop.npredecessors));a.writeLn("");if(0<=e.position)for(var f=e.position;f<=e.end.position;f++)a.writeLn((""+f).padRight(" ",5)+b[f]);else a.writeLn("abstract");
a.leave("}")});a.leave("}");this.controlTree&&(a.enter("control-tree {"),this.controlTree.trace(a),a.leave("}"));a.leave("}")},traceCFG:e([{fn:function(a){return a.successors||[]},style:""}],[{fn:function(a){return a.predecessors||[]},style:""}]),traceDJ:e([{fn:function(a){return a.dominatees||[]},style:"style=dashed"},{fn:function(a){var d=new this.BlockSet;d.setBlocks(a.successors);d.subtract(this.BlockSet.fromBlocks(a.dominatees));a.spbacks&&d.subtract(a.spbacks);return d.members()},style:""},
{fn:function(a){return a.spbacks?a.spbacks.members():[]},style:"style=bold"}],[{fn:function(a){return a.predecessors||[]},style:""}],function(a,d){for(var b=this.bytecodes[0],e=[b],f=b.level,g=[];b=e.shift();)f!=b.level&&(d.writeLn("{rank=same; "+g.map(function(d){return"block_"+a(d)}).join(" ")+"}"),g.length=0,f=b.level),g.push(b),e.push.apply(e,b.dominatees)})};a.Control=b;a.analyze=function(a){a=new A(a);a.restructureControlFlow();return a.controlTree}})("undefined"===typeof exports?Looper={}:
exports);
(function(){var a=estransform,b=a.Node,d=a.Identifier,e=a.VariableDeclarator,f=a.AssignmentExpression,g=a.MemberExpression,l=a.IfStatement,m=a.WhileStatement,p=a.FunctionDeclaration;new IndentingWriter;var r=function(a,d,b){this.id=a;this.start=d;this.end=b},s=function(a,d){this.intervals=a.slice(0);this.maxRegisters=d};r.prototype.toString=function(){return"["+this.start+","+this.end+"]"};s.prototype.allocate=function(){var a=this.intervals;this.intervals.sort(function(a,d){return a.start-d.start});
for(var d=new SortedList(function(a,d){return a.end-d.end}),b=this.maxRegisters,e=[],f=b-1;0<=f;f--)e.push("R"+f);a.forEach(function(a){d.forEach(function(d){if(d.end>=a.start)return SortedList.RETURN;e.push(d.register);return SortedList.DELETE});d.length===b?notImplemented("Cannot Spill"):(a.register=e.pop(),d.push(a))})};s.Interval=r;Transform.transform=function(r){var w=a.makePass("scan","scanNode"),z=0;b.prototype.scan=function(a){this.position=z++;return w.apply(this,a)};var A=[],v={},B=[];p.prototype.scan=
function(){this.params.forEach(function(a){a.name in v||(v[a.name]=A.length,A.push(a.name))});this.body.scan();return this};e.prototype.scan=function(){this.position=z++;this.id.name in v||(v[this.id.name]=A.length,A.push(this.id.name));return this};f.prototype.scan=function(a){this.left.scan(a);this.right.scan(a);this.position=z++;return this};m.prototype.scan=function(a){this.position=z++;this.test.scan(a);this.body.scan(a);this.afterPosition=z++;return this};r.scan();for(var y=BitSetFunctor(A.length),
D=BitSetFunctor(z),F=[],E=0;E<A.length;E++)F.push(new D);b.prototype.markLiveness=a.makePass("markLiveness","markLivenessNode",!0);d.prototype.markLiveness=function(a){var d=this.name;if("undefined"===d||a&&a.isProperty||!(d in v))return this;B.push(this);a=a.live;d=v[d];F[d].set(this.position);a.set(d);return this};e.prototype.markLiveness=function(){B.push(this.id);return this};l.prototype.markLiveness=function(a){var d=a.live.clone(),b=a.live.clone();this.alternate&&this.alternate.markLiveness({live:d});
this.consequent&&this.consequent.markLiveness({live:b});a.live.assign(d);a.live._union(b);this.test.markLiveness(a);return this};m.prototype.markLiveness=function(a){var d=a.live.clone(),b=this.afterPosition;do{var e=d.clone();this.body.markLiveness({live:d});this.test.markLiveness({live:d});(e=!e.equals(d))&&d.forEach(function(a){F[a].set(b)})}while(e);a.live.assign(d);return this};f.prototype.markLiveness=function(a){this.right.markLiveness(a);if(this.left instanceof d){a=a.live;var b=v[this.left.name];
F[b].set(this.position);a.clear(b);B.push(this.left)}else this.left.markLiveness(a);return this};g.prototype.markLiveness=function(a){(this.computed||!(this.property instanceof d))&&this.property.markLiveness(a);this.object.markLiveness(a);return this};r.markLiveness({live:new y});r=[];for(E=0;E<F.length;E++){for(var y=F[E],C=D=-1,K=0;K<y.length;K++)if(y.get(K)){D=K;break}for(K=y.length-1;0<=K;K--)if(y.get(K)){C=K;break}y=[D,C];r.push(new s.Interval(E,y[0],y[1]))}(new s(r,1024)).allocate();y=createEmptyObject();
for(E=0;E<A.length;E++)y[A[E]]=r[E].register;for(E=0;E<B.length;E++)B[E].patched||(B[E].name=y[B[E].name],B[E].patched=!0)}})("undefined"===typeof exports?Transform={}:exports);
(function(){function a(a){if("string"===typeof a||null===a||!0===a||!1===a)return new u(a);if(void 0===a)return new w("undefined");if("object"===typeof a||"function"===typeof a)return new w(objectConstantName(a));if("number"===typeof a&&isNaN(a))return new w("NaN");if(Infinity===a)return new w("Infinity");if(-Infinity===a)return new T("-",new w("Infinity"));if("number"===typeof a&&0>1/a)return new T("-",new u(Math.abs(a)));if("number"===typeof a)return new u(a);unexpected("Cannot emit constant for value: ",
a)}function b(a){!0;return new w(a)}function d(a){if(!("$"===a[0]||"_"===a[0]||"\\"===a[0]||"a"<=a[0]&&"z">=a[0]||"A"<=a[0]&&"Z">=a[0]))return!1;for(var d=1;d<a.length;d++)if(!("$"===a[d]||"_"===a[d]||"\\"===a[d]||"a"<=a[d]&&"z">=a[d]||"A"<=a[d]&&"Z">=a[d]||"0"<=a[d]&&"9">=a[d]))return!1;return!0}function e(a){for(var b=1;b<arguments.length;b++){var e=arguments[b];a="string"===typeof e?d(e)?new v(a,new w(e),!1):new v(a,new u(e),!0):e instanceof u&&d(e.value)?new v(a,new w(e.value),!1):new v(a,e,!0)}return a}
function f(a,d){!0;!0;return new y(a,d)}function g(a,d){!0;return new D(a,"=",d)}function l(){this.label=new da("$L");this.variables=[];this.parameters=[]}function m(a,d,e){!0;!0;!0;!0;if(e||!a.variable)return a.compile(d);!0;return b(a.variable.name)}function p(d,b){return[m(d.namespaces,b),m(d.name,b),a(d.flags)]}function r(a){return escodegen.generate(a,{base:"",indent:"  ",comment:!0,format:{compact:!1}})}var s=estransform,u=s.Literal,w=s.Identifier,z=s.VariableDeclaration,A=s.VariableDeclarator,
v=s.MemberExpression,B=s.BinaryExpression,y=s.CallExpression,D=s.AssignmentExpression,F=s.ExpressionStatement,E=s.ReturnStatement,C=s.FunctionDeclaration,K=s.ConditionalExpression,Q=s.ObjectExpression,R=s.ArrayExpression,T=s.UnaryExpression,L=s.NewExpression,G=s.Property,I=s.BlockStatement,J=s.ThisExpression,H=s.ThrowStatement,P=s.IfStatement,O=s.WhileStatement,U=s.BreakStatement,M=s.ContinueStatement,N=s.SwitchStatement,W=s.SwitchCase,s=IR.Block,fa=IR.Operator,ca=Looper.Control,da=IR.Variable;ca.Break.prototype.compile=
function(a,d){return a.compileBreak(this,d)};ca.Continue.prototype.compile=function(a,d){return a.compileContinue(this,d)};ca.Exit.prototype.compile=function(a,d){return a.compileExit(this,d)};ca.LabelSwitch.prototype.compile=function(a,d){return a.compileLabelSwitch(this,d)};ca.Seq.prototype.compile=function(a,d){return a.compileSequence(this,d)};s.prototype.compile=function(a,d){return a.compileBlock(this,d)};ca.Loop.prototype.compile=function(a,d){return a.compileLoop(this,d)};ca.Switch.prototype.compile=
function(a,d){return a.compileSwitch(this,d)};ca.If.prototype.compile=function(a,d){return a.compileIf(this,d)};ca.Try.prototype.compile=function(a,d){return a.compileTry(this,d)};l.prototype.useVariable=function(a){!0;return this.variables.pushUnique(a)};l.prototype.useParameter=function(a){return this.parameters[a.index]=a};l.prototype.compileLabelBody=function(a){var d=[];void 0!==a.label&&(this.useVariable(this.label),d.push(new F(g(b(this.label.name),new u(a.label)))));return d};l.prototype.compileBreak=
function(a){a=this.compileLabelBody(a);a.push(new U(null));return new I(a)};l.prototype.compileContinue=function(a){a=this.compileLabelBody(a);a.push(new M(null));return new I(a)};l.prototype.compileExit=function(a){return new I(this.compileLabelBody(a))};l.prototype.compileIf=function(d){var b=d.cond.compile(this),e=null,f=null;d.then&&(e=d.then.compile(this));d.else&&(f=d.else.compile(this));var g=m(b.end.predicate,this);if(d.negated)a:{d=g;if(d instanceof Constant){if(!0===d.value||!1===d.value){d=
a(!d.value);break a}}else if(d instanceof w){d=new T(fa.FALSE.name,d);break a}!0;var g=d instanceof B?d.left:d.argument,l=d.right,r=fa.fromName(d.operator);d=r===fa.EQ&&l instanceof u&&!1===l.value||r===fa.FALSE?g:r.not?d instanceof B?new B(r.not.name,g,l):new T(r.not.name,g):new T(fa.FALSE.name,d)}else d=g;b.body.push(new P(d,e||new I([]),f||null));return b};l.prototype.compileSwitch=function(a){var d=a.determinant.compile(this),b=[];a.cases.forEach(function(a){var d;a.body&&(d=a.body.compile(this));
a="number"===typeof a.index?new u(a.index):void 0;b.push(new W(a,d?[d]:[]))},this);a=m(d.end.determinant,this);d.body.push(new N(a,b,!1));return d};l.prototype.compileLabelSwitch=function(a){function d(a){!0;return new B("===",f,new u(a))}for(var e=null,f=b(this.label.name),g=a.cases.length-1;0<=g;g--){for(var l=a.cases[g],m=l.labels,r=d(m[0]),p=1;p<m.length;p++)r=new B("||",r,d(m[p]));e=new P(r,l.body?l.body.compile(this):new I,e)}return e};l.prototype.compileLoop=function(d){d=d.body.compile(this);
return new O(a(!0),d)};l.prototype.compileSequence=function(a){var d=this,b=[];a.body.forEach(function(a){a=a.compile(d);a instanceof I?b=b.concat(a.body):b.push(a)});return new I(b)};l.prototype.compileBlock=function(a){for(var d=[],e=1;e<a.nodes.length-1;e++){var f=a.nodes[e],l;f instanceof IR.Throw?l=m(f,this,!0):(f instanceof IR.Move?(l=b(f.to.name),this.useVariable(f.to),f=m(f.from,this)):(f.variable?(l=b(f.variable.name),this.useVariable(f.variable)):l=null,f=m(f,this,!0)),l=l?new F(g(l,f)):
new F(f));d.push(l)}e=a.nodes.last();e instanceof IR.Stop&&d.push(new E(m(e.argument,this)));d=new I(d);d.end=a.nodes.last();!0;return d};IR.Parameter.prototype.compile=function(a){a.useParameter(this);return b(this.name)};IR.Constant.prototype.compile=function(){return a(this.value)};IR.Variable.prototype.compile=function(){return b(this.name)};IR.Phi.prototype.compile=function(a){!0;return m(this.variable,a)};IR.ASScope.prototype.compile=function(a){var d=m(this.parent,a);a=m(this.object,a);var e=
new u(this.isWith);return new L(b("Scope"),[d,a,e])};IR.ASFindProperty.prototype.compile=function(a){var d=m(this.scope,a),b=p(this.name,a);a=m(this.domain,a);var g=new u(this.strict);return f(e(d,"findScopeProperty"),b.concat([a,g]))};IR.ASGetProperty.prototype.compile=function(a){var d=m(this.object,a);if(this.flags&IR.Flags.INDEXED)return!0,f(e(d,"asGetNumericProperty"),[m(this.name.name,a)]);if(this.flags&IR.Flags.RESOLVED)return f(e(d,"asGetResolvedStringProperty"),[m(this.name,a)]);a=p(this.name,
a);var b=new u(this.flags&IR.Flags.IS_METHOD);return f(e(d,"asGetProperty"),a.concat(b))};IR.ASGetSuper.prototype.compile=function(a){var d=m(this.scope,a),b=m(this.object,a);a=p(this.name,a);return f(e(b,"asGetSuper"),[d].concat(a))};IR.Latch.prototype.compile=function(a){return new K(m(this.condition,a),m(this.left,a),m(this.right,a))};IR.Unary.prototype.compile=function(a){return new T(this.operator.name,m(this.argument,a))};IR.Copy.prototype.compile=function(a){return m(this.argument,a)};IR.Binary.prototype.compile=
function(a){var d=m(this.left,a);a=m(this.right,a);return this.operator===fa.AS_ADD?f(b("asAdd"),[d,a]):new B(this.operator.name,d,a)};IR.CallProperty.prototype.compile=function(a){var d=m(this.object,a),b=m(this.name,a),b=e(d,b),g=this.args.map(function(d){return m(d,a)});return this.flags&IR.Flags.PRISTINE?f(b,g):f(e(b,"call"),[d].concat(g))};IR.ASCallProperty.prototype.compile=function(a){var d=m(this.object,a),b=this.args.map(function(d){return m(d,a)});if(this.flags&IR.Flags.RESOLVED)return f(e(d,
"asCallResolvedStringProperty"),[m(this.name,a),new u(this.isLex),new R(b)]);var g=p(this.name,a);return f(e(d,"asCallProperty"),g.concat([new u(this.isLex),new R(b)]))};IR.ASCallSuper.prototype.compile=function(a){var d=m(this.scope,a),b=m(this.object,a),g=this.args.map(function(d){return m(d,a)}),l=p(this.name,a);return f(e(b,"asCallSuper"),[d].concat(l).concat(new R(g)))};IR.Call.prototype.compile=function(a){var d=this.args.map(function(d){return m(d,a)}),b=m(this.callee,a),g;g=this.object?m(this.object,
a):new u(null);return null===this.object?f(b,d):f(e(b,"call"),[g].concat(d))};IR.ASNew.prototype.compile=function(a){var d=this.args.map(function(d){return m(d,a)}),b=m(this.callee,a),b=e(b,"instanceConstructor");return new L(b,d)};IR.This.prototype.compile=function(){return new J};IR.Throw.prototype.compile=function(a){a=m(this.argument,a);return new H(a)};IR.Arguments.prototype.compile=function(){return b("arguments")};IR.ASGlobal.prototype.compile=function(a){a=m(this.scope,a);return e(a,"global",
"object")};IR.ASSetProperty.prototype.compile=function(a){var d=m(this.object,a),b=m(this.value,a);if(this.flags&IR.Flags.INDEXED)return f(e(d,"asSetNumericProperty"),[m(this.name.name,a),b]);a=p(this.name,a);return f(e(d,"asSetProperty"),a.concat(b))};IR.ASSetSuper.prototype.compile=function(a){var d=m(this.scope,a),b=m(this.object,a),g=p(this.name,a);a=m(this.value,a);return f(e(b,"asSetSuper"),[d].concat(g).concat([a]))};IR.ASDeleteProperty.prototype.compile=function(a){var d=m(this.object,a);
a=p(this.name,a);return f(e(d,"asDeleteProperty"),a)};IR.ASHasProperty.prototype.compile=function(a){var d=m(this.object,a);a=p(this.name,a);return f(e(d,"asHasProperty"),a)};IR.GlobalProperty.prototype.compile=function(){return b(this.name)};IR.GetProperty.prototype.compile=function(a){var d=m(this.object,a);a=m(this.name,a);return e(d,a)};IR.SetProperty.prototype.compile=function(a){var d=m(this.object,a),b=m(this.name,a);a=m(this.value,a);return g(e(d,b),a)};IR.ASGetDescendants.prototype.compile=
function(a){var d=m(this.object,a);a=m(this.name,a);return f(b("getDescendants"),[d,a])};IR.ASSetSlot.prototype.compile=function(a){var d=m(this.object,a),e=m(this.name,a);a=m(this.value,a);return f(b("asSetSlot"),[d,e,a])};IR.ASGetSlot.prototype.compile=function(a){var d=m(this.object,a);a=m(this.name,a);return f(b("asGetSlot"),[d,a])};IR.Projection.prototype.compile=function(a){!0;!0;return m(this.argument.scope,a)};IR.NewArray.prototype.compile=function(a){var d;d=this.elements;!0;d=d.map(function(d){return m(d,
a)});return new R(d)};IR.NewObject.prototype.compile=function(a){var d=this.properties.map(function(d){var b=m(d.key,a);d=m(d.value,a);return new G(b,d,"init")});return new Q(d)};IR.ASNewActivation.prototype.compile=function(a){a=m(this.methodInfo,a);return f(b("createActivation"),[a])};IR.ASMultiname.prototype.compile=function(a){var d=m(this.namespaces,a);a=m(this.name,a);return f(b("createName"),[d,a])};Backend.generate=function(a,d){Timer.start("Looper");var e=Looper.analyze(a);Timer.stop();var f=
new IndentingWriter,g=new l;Timer.start("Construct AST");var m=e.compile(g);Timer.stop();for(var e=[],p=0;p<g.parameters.length;p++)e.push(b(g.parameters[p]?g.parameters[p].name:"_"));g.variables.length&&(Counter.count("Backend: Locals",g.variables.length),g=g.variables.map(function(a){return new A(b(a.name))}),g=new z("var",g),m.body.unshift(g));g=new C(b("fn"),e,m);if(d)return 0<c4TraceLevel.value&&(f.writeLn("=== BEFORE ==============================="),f.writeLn(r(g)),f.writeLn("=== TRANSFORMING =========================")),
Transform.transform(g),0<c4TraceLevel.value&&(f.writeLn("=== AFTER ================================"),f.writeLn(r(g)),f.writeLn("==========================================")),f=r(m),{parameters:e.map(function(a){return a.name}),body:f};Timer.start("Serialize AST");f=r(m);Timer.stop();return{parameters:e.map(function(a){return a.name}),body:f}}})("undefined"===typeof exports?Backend={}:exports);
var domainOptions=systemOptions.register(new OptionSet("ApplicationDomain Options")),traceClasses=domainOptions.register(new Option("tc","traceClasses","boolean",!1,"trace class creation")),traceDomain=domainOptions.register(new Option("td","traceDomain","boolean",!1,"trace domain property access")),EXECUTION_MODE={INTERPRET:1,COMPILE:2};
function executeScript(a){var b=a.abc;!0;var d=new Global(a);b.applicationDomain.allowNatives&&(d[Multiname.getPublicQualifiedName("unsafeJSNative")]=getNative);a.executing=!0;b=new Scope(null,a.global);createFunction(a.init,b).call(a.global,!1);a.executed=!0}function ensureScriptIsExecuted(a,b){!a.executed&&!a.executing&&(2<=traceExecution.value&&print("Executing Script For: "+b),executeScript(a))}var Glue=createEmptyObject();Glue.PUBLIC_PROPERTIES=1;Glue.PUBLIC_METHODS=2;
Glue.ALL=Glue.PUBLIC_PROPERTIES|Glue.PUBLIC_METHODS;
var ApplicationDomain=function(){function a(a,d,e,f){!0;!0;this.vm=a;this.abcs=[];this.loadedAbcs={};this.loadedClasses=[];this.classCache=createEmptyObject();this.scriptCache=createEmptyObject();this.classInfoCache=createEmptyObject();this.base=d;this.allowNatives=f;this.mode=e;this.onMessage=new Callback;this.system=d?d.system:this}a.passthroughCallable=function(a){return{call:function(d){Array.prototype.shift.call(arguments);return a.apply(d,arguments)},apply:function(d,e){return a.apply(d,e)}}};
a.coerceCallable=function(a){return{call:function(d,e){return asCoerce(a,e)},apply:function(d,e){return asCoerce(a,e[0])}}};a.constructingCallable=function(a){return{call:function(d){return new Function.bind.apply(a,arguments)},apply:function(d,e){return new Function.bind.apply(a,[d].concat(e))}}};a.prototype={getType:function(a){return this.getProperty(a,!0,!0)},getProperty:function(a,d,e){if(e=this.findDefiningScript(a,e))return!e.script.executing?void 0:e.script.global[Multiname.getQualifiedName(e.trait.name)];
if(d)return unexpected("Cannot find property "+a)},getClass:function(a){var d=this.classCache,e=d[a];e||(e=d[a]=this.getProperty(Multiname.fromSimpleName(a),!0,!0));!0;return e},findClass:function(a){return a in this.classCache?!0:this.findDomainProperty(Multiname.fromSimpleName(a),!1,!0)},findDomainProperty:function(a,d,e){traceDomain.value&&print("ApplicationDomain.findDomainProperty: "+a);if(e=this.findDefiningScript(a,e))return e.script.global;if(d)return unexpected("Cannot find property "+a)},
findClassInfo:function(a){var d;if(Multiname.isQName(a)){d=Multiname.getQualifiedName(a);var e=this.classInfoCache[d]}else e=this.classInfoCache[a.id];if(e||this.base&&(e=this.base.findClassInfo(a)))return e;for(var e=this.abcs,f=0;f<e.length;f++)for(var g=e[f],g=g.scripts,l=0;l<g.length;l++)for(var m=g[l].traits,p=0;p<m.length;p++){var r=m[p];if(r.isClass()){var s=Multiname.getQualifiedName(r.name);if(d){if(s===d)return this.classInfoCache[d]=r.classInfo}else for(var u=0,w=a.namespaces.length;u<
w;u++){var z=a.getQName(u);if(s===Multiname.getQualifiedName(z))return this.classInfoCache[z]=r.classInfo}}}if(!this.base&&this.vm.findDefiningAbc&&(g=this.vm.findDefiningAbc(a),null!==g&&!this.loadedAbcs[g.name]))return this.loadedAbcs[g.name]=!0,this.loadAbc(g),this.findClassInfo(a)},installNative:function(a,d){natives[a]=function(){return d}},findDefiningScript:function(a,d){var e=this.scriptCache[a.id];if(e&&(e.script.executed||!d)||this.base&&(e=this.base.findDefiningScript(a,d)))return e;Counter.count("ApplicationDomain: findDefiningScript");
for(var e=this.abcs,f=0;f<e.length;f++)for(var g=e[f],g=g.scripts,l=0;l<g.length;l++){var m=g[l],p=m.traits;if(a instanceof Multiname)for(var r=0;r<p.length;r++){var s=p[r];if(a.hasQName(s.name))return d&&ensureScriptIsExecuted(m,s.name),this.scriptCache[a.id]={script:m,trait:s}}else unexpected()}if(!this.base&&this.vm.findDefiningAbc&&(g=this.vm.findDefiningAbc(a),null!==g&&!this.loadedAbcs[g.name]))return this.loadedAbcs[g.name]=!0,this.loadAbc(g),this.findDefiningScript(a,d)},compileAbc:function(a){this.loadAbc(a);
var d=new IndentingWriter;d.enter("var classes = {");for(var e=0;e<a.scripts.length;e++)compileScript(a.scripts[e],d);d.leave("}")},executeAbc:function(a){this.loadAbc(a);executeScript(a.lastScript)},loadAbc:function(a){traceExecution.value&&print("Loading: "+a.name);a.applicationDomain=this;GlobalMultinameResolver.loadAbc(a);this.abcs.push(a);this.base||Type.initializeTypes(this)},broadcastMessage:function(a,d,e){this.onMessage.notify1(a,{data:d,origin:e,source:this})},traceLoadedClasses:function(a){var d=
new IndentingWriter;a||d.enter("Loaded Classes And Interfaces");(a?[this.loadedClasses.last()]:this.loadedClasses).forEach(function(a){a!==Class&&a.trace(d)});a||d.leave("")}};return a}(),SecurityDomain=function(){function a(){this.compartment=createNewCompartment();this.compartment.environment=environment;this.compartment.homePath=homePath;this.compartment.eval(snarf("compartment.js"));this.compartment.release=!0}a.prototype.initializeShell=function(a,d){var e=this.compartment;e.avm2=new e.AVM2(a,
d);e.avm2.systemDomain.executeAbc(e.grabAbc(homePath+"src/avm2/generated/builtin/builtin.abc"));e.avm2.systemDomain.executeAbc(e.grabAbc(homePath+"src/avm2/generated/shell/shell.abc"));this.systemDomain=e.avm2.systemDomain;this.applicationDomain=e.avm2.applicationDomain};return a}(),traitsWriter=null,Binding=function(){function a(a){!0;this.trait=a}a.KEY_PREFIX_LENGTH=4;a.getKey=function(a,d){var e=a;d.isGetter()?e="get "+a:d.isSetter()&&(e="set "+a);return e};a.prototype.toString=function(){return String(this.trait)};
return a}(),Bindings=function(){function a(){this.map=createEmptyObject();this.slots=[];this.nextSlotId=1}function b(a,d,b,e){this.name=a;this.isConst=d;this.type=b;this.trait=e}function d(){this.byID=[];this.byQN=createEmptyObject()}function e(a,d){!0;for(var b=0;b<a.length;b++){var e=a[b];if(3<=traceExecution.value){var f="Patching: ";e.name?f+=e.name:e.get?f+="get "+e.get:e.set&&(f+="set "+e.set);traitsWriter&&traitsWriter.redLn(f)}e.get?defineNonEnumerableGetterOrSetter(e.object,e.get,d,!0):e.set?
defineNonEnumerableGetterOrSetter(e.object,e.set,d,!1):defineNonEnumerableProperty(e.object,e.name,d)}}function f(a,d,b,f,g){!0;if(d.isMethod()){var u=makeTrampoline(function(a){var b=getTraitFunction(d,f,g);e(a.patchTargets,b);return b},d.methodInfo.parameters.length);u.patchTargets=[{object:b,name:a},{object:b,name:VM_OPEN_METHOD_PREFIX+a}];var w=bindSafely(u,b);defineReadOnlyProperty(w,VM_LENGTH,u[VM_LENGTH]);defineReadOnlyProperty(w,Multiname.getPublicQualifiedName("prototype"),null);defineNonEnumerableProperty(b,
a,w);defineNonEnumerableProperty(b,VM_OPEN_METHOD_PREFIX+a,w)}else d.isGetter()||d.isSetter()?(u=makeTrampoline(function(a){var b=getTraitFunction(d,f,g);e(a.patchTargets,b);return b}),u.patchTargets=d.isGetter()?[{object:b,get:a}]:[{object:b,set:a}],defineNonEnumerableGetterOrSetter(b,a,u,d.isGetter())):unexpected(d)}function g(a,d,b,f,g){!0;if(d.isMethod()){var u={value:null},w=makeTrampoline(function(a){var b=getTraitFunction(d,f,g);e(a.patchTargets,b);return b},d.methodInfo.parameters.length,
String(d.name));u.value=w;var z=b[VM_OPEN_METHODS];z[a]=w;defineNonEnumerableProperty(b,VM_OPEN_METHOD_PREFIX+a,w);defineNonEnumerableGetter(b,a,makeMemoizer(a,u));w.patchTargets=[{object:u,name:"value"},{object:z,name:a},{object:b,name:VM_OPEN_METHOD_PREFIX+a}]}else if(d.isGetter()||d.isSetter())w=makeTrampoline(function(a){var b=getTraitFunction(d,f,g);e(a.patchTargets,b);return b},0,String(d.name)),d.isGetter()?(defineNonEnumerableProperty(b,VM_OPEN_GET_METHOD_PREFIX+a,w),w.patchTargets=[{object:b,
get:a},{object:b,name:VM_OPEN_GET_METHOD_PREFIX+a}]):(defineNonEnumerableProperty(b,VM_OPEN_SET_METHOD_PREFIX+a,w),w.patchTargets=[{object:b,set:a},{object:b,name:VM_OPEN_SET_METHOD_PREFIX+a}]),defineNonEnumerableGetterOrSetter(b,a,w,d.isGetter())}a.prototype.assignNextSlot=function(a){!0;!0;a.slotId?this.nextSlotId=a.slotId+1:a.slotId=this.nextSlotId++;!0;this.slots[a.slotId]=a};a.prototype.trace=function(a){a.enter("Bindings");for(var d in this.map){var b=this.map[d];a.writeLn(b.trait.kindName()+
": "+d+" -> "+b)}a.leaveAndEnter("Slots");a.writeArray(this.slots);a.outdent()};a.prototype.applyTo=function(a,e){!0;!0;!0;defineNonEnumerableProperty(e,VM_SLOTS,new d);defineNonEnumerableProperty(e,VM_BINDINGS,[]);defineNonEnumerableProperty(e,VM_OPEN_METHODS,createEmptyObject());defineNonEnumerableProperty(e,"bindings",this);defineNonEnumerableProperty(e,"resolutionMap",[]);traitsWriter&&traitsWriter.greenLn("Applying Traits");for(var p in this.map){var r=this.map[p],s=r.trait,u=Multiname.getQualifiedName(s.name);
if(s.isSlot()||s.isConst()||s.isClass()){r=void 0;if(s.isSlot()||s.isConst())s.hasDefaultValue?r=s.value:s.typeName&&(r=a.findClassInfo(s.typeName).defaultValue);p!==u?(traitsWriter&&traitsWriter.yellowLn("Binding Trait: "+p+" -> "+u),defineNonEnumerableGetter(e,p,makeForwardingGetter(u)),e[VM_BINDINGS].pushUnique(p)):(traitsWriter&&traitsWriter.greenLn("Applying Trait "+s.kindName()+": "+s),defineNonEnumerableProperty(e,u,r),e[VM_BINDINGS].pushUnique(u),r=new b(u,s.isConst(),s.typeName?a.getProperty(s.typeName,
!1,!1):null,s),e[VM_SLOTS].byID[s.slotId]=r,e[VM_SLOTS].byQN[u]=r)}else if(s.isMethod()||s.isGetter()||s.isSetter()){if(s.isGetter()||s.isSetter())p=p.substring(Binding.KEY_PREFIX_LENGTH);p!==u?traitsWriter&&traitsWriter.yellowLn("Binding Trait: "+p+" -> "+u):traitsWriter&&traitsWriter.greenLn("Applying Trait "+s.kindName()+": "+s);e[VM_BINDINGS].pushUnique(p);this instanceof ScriptBindings?f(p,s,e,r.scope,r.natives):g(p,s,e,r.scope,r.natives)}}};return a}(),ActivationBindings=function(){function a(a){Bindings.call(this);
!0;this.methodInfo=a;a=a.traits;for(var d=0;d<a.length;d++){var e=a[d];!0;var f=Multiname.getQualifiedName(e.name);this.map[f]=new Binding(e);this.assignNextSlot(e)}}a.prototype=Object.create(Bindings.prototype);return a}(),CatchBindings=function(){function a(a,d){Bindings.call(this);var e=Multiname.getQualifiedName(d.name);this.map[e]=new Binding(d);!0;this.assignNextSlot(d)}a.prototype=Object.create(Bindings.prototype);return a}(),ScriptBindings=function(){function a(a,d){Bindings.call(this);this.scope=
d;this.scriptInfo=a;for(var e=a.traits,f=0;f<e.length;f++){var g=e[f],l=Multiname.getQualifiedName(g.name),l=Binding.getKey(l,g),l=this.map[l]=new Binding(g);(g.isSlot()||g.isConst()||g.isClass())&&this.assignNextSlot(g);g.isClass()&&(g.metadata&&g.metadata.native)&&(g.classInfo.native=g.metadata.native);if(g.isMethod()||g.isGetter()||g.isSetter())l.scope=this.scope}}a.prototype=Object.create(Bindings.prototype);return a}(),ClassBindings=function(){function a(a,d,e){Bindings.call(this);this.scope=
d;this.natives=e;this.classInfo=a;a=a.traits;for(d=0;d<a.length;d++){e=a[d];var f=Multiname.getQualifiedName(e.name),f=Binding.getKey(f,e),f=this.map[f]=new Binding(e);(e.isSlot()||e.isConst())&&this.assignNextSlot(e);if(e.isMethod()||e.isGetter()||e.isSetter())f.scope=this.scope,f.natives=this.natives}}a.prototype=Object.create(Bindings.prototype);return a}(),InstanceBindings=function(){function a(a,d,e,f){Bindings.call(this);this.scope=e;this.natives=f;this.parent=a;this.instanceInfo=d;this.implementedInterfaces=
a?cloneObject(a.implementedInterfaces):createEmptyObject();a&&(this.slots=a.slots.slice(),this.nextSlotId=a.nextSlotId);d=this.instanceInfo;var g;e=this.map;var l,m,p;if(a)for(l in a.map)m=a.map[l],f=m.trait,e[l]=m,f.isProtected()&&(p=Multiname.getQualifiedName(new Multiname([d.protectedNs],f.name.getName())),p=Binding.getKey(p,f),e[p]=m);var r=d.traits;for(a=0;a<r.length;a++){f=r[a];l=Multiname.getQualifiedName(f.name);l=Binding.getKey(l,f);m=new Binding(f);g=e;p=m;g[l]&&!0;!0;g[l]=p;if(f.isProtected())for(g=
this.parent;g;)p=Multiname.getQualifiedName(new Multiname([g.instanceInfo.protectedNs],f.name.getName())),p=Binding.getKey(p,f),p in e&&(e[p]=m),g=g.parent;(f.isSlot()||f.isConst())&&this.assignNextSlot(f);if(f.isMethod()||f.isGetter()||f.isSetter())m.scope=this.scope,m.natives=this.natives}l=d.abc.applicationDomain;f=d.interfaces;for(a=0;a<f.length;a++)m=l.getProperty(f[a],!0,!0),!0,copyProperties(this.implementedInterfaces,m.interfaceBindings.implementedInterfaces),this.implementedInterfaces[Multiname.getQualifiedName(m.name)]=
m;for(var s in this.implementedInterfaces){m=this.implementedInterfaces[s];g=m.interfaceBindings;for(var u in g.map)a=g.map[u],d.isInterface()?e[u]=a:(l=Multiname.getPublicQualifiedName(a.trait.name.getName()),l=Binding.getKey(l,a.trait),e[u]=e[l])}}a.prototype=Object.create(Bindings.prototype);a.prototype.toString=function(){return this.instanceInfo.toString()};return a}(),Interface=function(){function a(a){var d=a.instanceInfo;!0;this.name=d.name;this.classInfo=a}a.createInterface=function(b){var d=
b.instanceInfo;!0;if(traceExecution.value){var e="Creating Interface "+d.name;d.interfaces.length&&(e+=" implements "+d.interfaces.map(function(a){return a.getName()}).join(", "));print(e)}b=new a(b);b.interfaceBindings=new InstanceBindings(null,d);return b};a.prototype={toString:function(){return"[interface "+this.name+"]"},isInstance:function(a){if(null===a||"object"!==typeof a)return!1;!0;var d=Multiname.getQualifiedName(this.name);return void 0!==a.class.implementedInterfaces[d]},trace:function(a){a.enter("interface "+
this.name.getName());a.enter("interfaceBindings: ");this.interfaceBindings.trace(a);a.outdent();a.outdent();a.leave("}")},call:function(a,d){return d},apply:function(a,d){return d[0]}};return a}(),Class=function(){function a(a,d,b){this.debugName=a;d&&(!0,this.instanceConstructorNoInitialize=this.instanceConstructor=d,this.hasInitialize=0,this.instanceConstructor.class=this);b?b===ApplicationDomain.coerceCallable&&(b=ApplicationDomain.coerceCallable(this)):b=ApplicationDomain.coerceCallable(this);
defineNonEnumerableProperty(this,"call",b.call);defineNonEnumerableProperty(this,"apply",b.apply)}function b(a){defineNonEnumerableProperty(a.dynamicPrototype,Multiname.getPublicQualifiedName("constructor"),a);defineReadOnlyProperty(a.traitsPrototype,"class",a);defineReadOnlyProperty(a.instanceConstructor,"class",a)}a.createClass=function(d,b,g){var l=d.instanceInfo,m=d.abc.applicationDomain,p=Multiname.getName(l.name),r=d.native;if(r){var s=getNative(d.native.cls);s||unexpected("No native for "+
d.native.cls);b||(g=new Scope(g,a))}g=new Scope(g,null);var u=createFunction(l.init,g,!1),s=r?s(m,g,u,b):new a(p,u);s.className=p;s.classInfo=d;s.scope=g;g.object=s;var w,z;r?s.native&&(w=s.native.static,z=s.native.instance):s.extend(b);s.classBindings=new ClassBindings(d,g,w);s.classBindings.applyTo(m,s);defineReadOnlyProperty(s,VM_IS_CLASS,!0);s.instanceBindings=new InstanceBindings(b?b.instanceBindings:null,l,g,z);s.instanceConstructor&&s.instanceBindings.applyTo(m,s.traitsPrototype);s.implementedInterfaces=
s.instanceBindings.implementedInterfaces;return s};a.prototype={setSymbol:function(a){this.instanceConstructor.prototype.symbol=a},getSymbol:function(){return this.instanceConstructor.prototype.symbol},initializeInstance:function(a){for(var d=this,b=[];d;)d.hasInitialize&1&&b.push(d.instanceConstructor.prototype.initialize),d=d.baseClass;for(;d=b.pop();)d.call(a);Counter.count("Initialize Instance "+a.class)},createInstance:function(a){var d=Object.create(this.instanceConstructor.prototype);this.instanceConstructor.apply(d,
a);return d},createAsSymbol:function(a){var d=Object.create(this.instanceConstructor.prototype);if(d.symbol){var b=Object.create(d.symbol),l;for(l in a)b[l]=a[l];d.symbol=b}else d.symbol=a;return d},extendNative:function(a,d){this.baseClass=a;this.dynamicPrototype=Object.getPrototypeOf(d.prototype);this.instanceConstructor.prototype=this.traitsPrototype=d.prototype;b(this)},extendWrapper:function(a,d){!0;this.baseClass=a;this.dynamicPrototype=Object.create(a.dynamicPrototype);var g=Object.create(this.dynamicPrototype,
getOwnPropertyDescriptors(d.prototype));this.instanceConstructor.prototype=this.traitsPrototype=g;b(this)},extendBuiltin:function(a){!0;this.baseClass=a;this.dynamicPrototype=this.traitsPrototype=this.instanceConstructor.prototype;b(this)},extend:function(a){!0;this.baseClass=a;this.dynamicPrototype=Object.create(a.dynamicPrototype);if(a.hasInitialize){var d=this.instanceConstructor,g=this;this.instanceConstructor=function(){g.initializeInstance(this);d.apply(this,arguments)};defineReadOnlyProperty(this.instanceConstructor,
"class",d.class);this.hasInitialize|=2}this.instanceConstructor.prototype=this.traitsPrototype=Object.create(this.dynamicPrototype);b(this)},setDefaultProperties:function(){b(this)},link:function(a){function d(a,b){for(var e=Object.keys(b),f=0;f<e.length;f++){var g=e[f],l=b[g],m=!1;0<=l.indexOf("open ")&&(l=l.substring(5),m=!0);!0;l=Multiname.getQualifiedName(Multiname.fromSimpleName(l));m&&(l=VM_OPEN_METHOD_PREFIX+l);!0;(m=Object.getOwnPropertyDescriptor(a,l))&&m.get?Object.defineProperty(a,g,m):
Object.defineProperty(a,g,{get:new Function("","return this."+l),set:new Function("v","this."+l+" = v")})}}function b(a){var d=createEmptyObject();a.forEach(function(a){a.name.getNamespace().isPublic()&&(d[a.name.getName()]=(a.isMethod()?"open ":"")+"public "+a.name.getName())});return d}!0;!0;if(a.initialize){if(!this.hasInitialize){var l=this.instanceConstructor,m=this;this.instanceConstructor=function(){m.initializeInstance(this);l.apply(this,arguments)};defineReadOnlyProperty(this.instanceConstructor,
"class",l.class);this.instanceConstructor.prototype=l.prototype}this.hasInitialize|=1}for(var p=this.dynamicPrototype,r=Object.keys(a),s=0;s<r.length;s++){var u=r[s];Object.defineProperty(p,u,Object.getOwnPropertyDescriptor(a,u))}if((a=a.__glue__)&&a.script)a.script.instance&&(isNumber(a.script.instance)?(!0,d(p,b(this.classInfo.instanceInfo.traits))):d(p,a.script.instance)),a.script.static&&(isNumber(a.script.static)?(!0,d(this,b(this.classInfo.traits))):d(this,a.script.static))},linkNatives:function(a){this.native=
a.__glue__.native},verify:function(){!0;!0;!0;!0;!0},coerce:function(a){return a},isInstanceOf:function(a){return this.isInstance(a)},isInstance:function(a){return null===a||"object"!==typeof a?!1:this.dynamicPrototype.isPrototypeOf(a)},trace:function(a){a.enter("class "+(this.debugName+(this.baseClass?" extends "+this.baseClass.debugName:""))+" {");a.writeLn("scope: "+this.scope);a.writeLn("baseClass: "+this.baseClass);a.writeLn("classInfo: "+this.classInfo);a.writeLn("dynamicPrototype: "+this.dynamicPrototype);
a.writeLn("traitsPrototype: "+this.traitsPrototype);a.writeLn("dynamicPrototype === traitsPrototype: "+(this.dynamicPrototype===this.traitsPrototype));a.writeLn("instanceConstructor: "+this.instanceConstructor);a.writeLn("instanceConstructorNoInitialize: "+this.instanceConstructorNoInitialize);a.writeLn("instanceConstructor === instanceConstructorNoInitialize: "+(this.instanceConstructor===this.instanceConstructorNoInitialize));var d=this.traitsPrototype;a.enter("traitsPrototype: ");d&&(a.enter("VM_SLOTS: "),
a.writeArray(d[VM_SLOTS].byID.map(function(a){return a.trait})),a.outdent(),a.enter("VM_BINDINGS: "),a.writeArray(d[VM_BINDINGS].map(function(a){var b=Object.getOwnPropertyDescriptor(d,a);b.get||b.set?(b.get&&(a+=" getter: "+debugName(b.get)),b.set&&(a+=" setter: "+debugName(b.set))):a+=" value: "+debugName(b.value);return a})),a.outdent(),a.enter("VM_OPEN_METHODS: "),a.writeArray(toKeyValueArray(d[VM_OPEN_METHODS]).map(function(a){return a[0]+": "+debugName(a[1])})),a.outdent());a.enter("classBindings: ");
this.classBindings.trace(a);a.outdent();a.enter("instanceBindings: ");this.instanceBindings.trace(a);a.outdent();a.outdent();a.writeLn("call: "+this.call);a.writeLn("apply: "+this.apply);a.leave("}")},toString:function(){return"[class "+this.classInfo.instanceInfo.name.name+"]"}};var d=ApplicationDomain.coerceCallable(a);defineNonEnumerableProperty(a,"call",d.call);defineNonEnumerableProperty(a,"apply",d.apply);a.instanceConstructor=a;a.toString=a.prototype.toString;a.native={instance:{prototype:{get:function(){return this.dynamicPrototype}}}};
return a}();function MethodClosure(a,b){var d=bindSafely(b,a);defineNonEnumerableProperty(this,"call",d.call.bind(d));defineNonEnumerableProperty(this,"apply",d.apply.bind(d))}MethodClosure.prototype={toString:function(){return"function Function() {}"}};
var XRegExp=function(a){function b(a,d,b){var e;if(b)if(a.__proto__)a.__proto__=w.prototype;else for(e in w.prototype)a[e]=w.prototype[e];a[u]={captureNames:d};return a}function d(a){return A.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function e(a,e){if(!w.isRegExp(a))throw new TypeError("Type RegExp expected");var f=A.exec.call(/\/([a-z]*)$/i,String(a))[1];e=e||{};e.add&&(f=d(f+e.add));e.remove&&(f=A.replace.call(f,RegExp("["+e.remove+"]+","g"),""));return a=b(RegExp(a.source,f),a.xregexp&&a.xregexp.captureNames?
a.xregexp.captureNames.slice(0):null,e.addProto)}function f(a,d){if(Array.prototype.indexOf)return a.indexOf(d);var b=a.length,e;for(e=0;e<b;++e)if(a[e]===d)return e;return-1}function g(a,d){return R.call(a)==="[object "+d+"]"}function l(a,d,b){return A.test.call(-1<b.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(d))}function m(a){a=a||{};g(a,"String")&&(a=w.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function p(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");
Q[a]=!0}function r(a){RegExp.prototype.exec=(a?v:A).exec;RegExp.prototype.test=(a?v:A).test;String.prototype.match=(a?v:A).match;String.prototype.replace=(a?v:A).replace;String.prototype.split=(a?v:A).split;z.natives=a}function s(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");return a}var u="xregexp",w,z={astral:!1,natives:!1},A={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},
v={},B={},y={},D=[],F={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},E=/\$(?:{([\w$]+)}|([\d$&`']))/g,C=A.exec.call(/()??/,"")[1]===a,K=RegExp.prototype.sticky!==a,Q={g:!0,i:!0,m:!0,y:K},R={}.toString,T;w=function(f,g){var l={hasNamedCapture:!1,captureNames:[]},m="default",r="",p=0,s,v;if(w.isRegExp(f)){if(g!==
a)throw new TypeError("Cannot supply flags when copying a RegExp");return e(f,{addProto:!0})}f=f===a?"":String(f);g=g===a?"":String(g);v=f+"***"+g;if(!y[v]){s=f;var u=g,z;if(d(u)!==u)throw new SyntaxError("Invalid duplicate regex flag "+u);s=A.replace.call(s,/^\(\?([\w$]+)\)/,function(a,b){if(A.test.call(/[gy]/,b))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);u=d(u+b);return""});for(z=0;z<u.length;++z)if(!Q[u.charAt(z)])throw new SyntaxError("Unknown regex flag "+u.charAt(z));
s={pattern:s,flags:u};f=s.pattern;for(g=s.flags;p<f.length;){do{s=f;z=g;for(var E=p,C=m,B=l,K=D.length,R=null,T=void 0,ga=void 0;K--;)if(ga=D[K],(ga.scope===C||"all"===ga.scope)&&(!ga.flag||-1<z.indexOf(ga.flag)))if(T=w.exec(s,ga.regex,E,"sticky")){R={matchLength:T[0].length,output:ga.handler.call(B,T,C,z),reparse:ga.reparse};break}(s=R)&&s.reparse&&(f=f.slice(0,p)+s.output+f.slice(p+s.matchLength))}while(s&&s.reparse);s?(r+=s.output,p+=s.matchLength||1):(s=w.exec(f,F[m],p,"sticky")[0],r+=s,p+=s.length,
"["===s&&"default"===m?m="class":"]"===s&&"class"===m&&(m="default"))}y[v]={pattern:A.replace.call(r,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:A.replace.call(g,/[^gimy]+/g,""),captures:l.hasNamedCapture?l.captureNames:null}}v=y[v];return b(RegExp(v.pattern,v.flags),v.captures,!0)};w.prototype=RegExp();w.version="3.0.0-pre";w.addToken=function(a,d,b){b=b||{};var f=b.optionalFlags,g;b.flag&&p(b.flag);if(f){f=A.split.call(f,"");for(g=0;g<f.length;++g)p(f[g])}D.push({regex:e(a,{add:"g"+(K?"y":
"")}),handler:d,scope:b.scope||"default",flag:b.flag,reparse:b.reparse});w.cache.flush("patterns")};w.cache=function(a,d){var b=a+"***"+(d||"");return B[b]||(B[b]=w(a,d))};w.cache.flush=function(a){"patterns"===a?y={}:B={}};w.escape=function(a){return A.replace.call(s(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};w.exec=function(a,d,b,f){var g="g";if(K&&(f||d.sticky&&!1!==f))g+="y";d[u]=d.xregexp||{captureNames:null};g=d.xregexp[g]||(d[u][g]=e(d,{add:g,remove:!1===f?"y":""}));g.lastIndex=b=b||0;a=v.exec.call(g,
a);f&&(a&&a.index!==b)&&(a=null);d.global&&(d.lastIndex=a?g.lastIndex:0);return a};w.forEach=function(a,d,b,e){for(var f=0,g=-1;f=w.exec(a,d,f);)b.call(e,f,++g,a,d),f=f.index+(f[0].length||1);return e};w.globalize=function(a){return e(a,{add:"g",addProto:!0})};w.install=function(a){a=m(a);!z.astral&&a.astral&&(w.cache.flush("patterns"),z.astral=!0);!z.natives&&a.natives&&r(!0)};w.isInstalled=function(a){return!!z[a]};w.isRegExp=function(a){return"[object RegExp]"===R.call(a)};w.match=function(a,d,
b){var f=d.global&&"one"!==b||"all"===b,g=(f?"g":"")+(d.sticky?"y":"");d[u]=d.xregexp||{captureNames:null};g=d.xregexp[g||"noGY"]||(d[u][g||"noGY"]=e(d,{add:g,remove:"one"===b?"g":""}));a=A.match.call(s(a),g);d.global&&(d.lastIndex="one"===b&&a?a.index+a[0].length:0);return f?a||[]:a&&a[0]};w.matchChain=function(a,d){return function J(a,b){var e=d[b].regex?d[b]:{regex:d[b]},f=[],g=function(a){if(e.backref){if(!(a.hasOwnProperty(e.backref)||+e.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+
e.backref);f.push(a[e.backref]||"")}else f.push(a[0])},l;for(l=0;l<a.length;++l)w.forEach(a[l],e.regex,g);return b===d.length-1||!f.length?f:J(f,b+1)}([a],0)};w.replace=function(a,d,b,f){var g=w.isRegExp(d),l=d.global&&"one"!==f||"all"===f,m=(l?"g":"")+(d.sticky?"y":""),r=d;g?(d[u]=d.xregexp||{captureNames:null},r=d.xregexp[m||"noGY"]||(d[u][m||"noGY"]=e(d,{add:m,remove:"one"===f?"g":""}))):l&&(r=RegExp(w.escape(String(d)),"g"));a=v.replace.call(s(a),r,b);g&&d.global&&(d.lastIndex=0);return a};w.replaceEach=
function(a,d){var b,e;for(b=0;b<d.length;++b)e=d[b],a=w.replace(a,e[0],e[1],e[2]);return a};w.split=function(a,d,b){return v.split.call(s(a),d,b)};w.test=function(a,d,b,e){return!!w.exec(a,d,b,e)};w.uninstall=function(a){a=m(a);z.astral&&a.astral&&(w.cache.flush("patterns"),z.astral=!1);z.natives&&a.natives&&r(!1)};w.union=function(a,d){var b=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,e=[],f=0,l,m,r,p=function(a,d,b){var e=m[f-l];if(d){if(++f,e)return"(?<"+e+">"}else if(b)return"\\"+
(+b+l);return a},s;if(!g(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(s=0;s<a.length;++s)r=a[s],w.isRegExp(r)?(l=f,m=r.xregexp&&r.xregexp.captureNames||[],e.push(A.replace.call(w(r.source).source,b,p))):e.push(w.escape(r));return w(e.join("|"),d)};v.exec=function(d){var b=this.lastIndex,g=A.exec.apply(this,arguments),l,m;if(g){!C&&(1<g.length&&-1<f(g,""))&&(l=e(this,{remove:"g"}),A.replace.call(String(d).slice(g.index),l,function(){var d=arguments.length,
b;for(b=1;b<d-2;++b)arguments[b]===a&&(g[b]=a)}));if(this.xregexp&&this.xregexp.captureNames)for(m=1;m<g.length;++m)(l=this.xregexp.captureNames[m-1])&&(g[l]=g[m]);this.global&&(!g[0].length&&this.lastIndex>g.index)&&(this.lastIndex=g.index)}this.global||(this.lastIndex=b);return g};v.test=function(a){return!!v.exec.call(this,a)};v.match=function(a){var d;if(w.isRegExp(a)){if(a.global)return d=A.match.apply(this,arguments),a.lastIndex=0,d}else a=RegExp(a);return v.exec.call(a,s(this))};v.replace=
function(d,b){var e=w.isRegExp(d),l,m,r;e?(d.xregexp&&(m=d.xregexp.captureNames),l=d.lastIndex):d+="";r=g(b,"Function")?A.replace.call(String(this),d,function(){var f=arguments,g;if(m){f[0]=new String(f[0]);for(g=0;g<m.length;++g)m[g]&&(f[0][m[g]]=f[g+1])}e&&d.global&&(d.lastIndex=f[f.length-2]+f[0].length);return b.apply(a,f)}):A.replace.call(null==this?this:String(this),d,function(){var a=arguments;return A.replace.call(String(b),E,function(d,b,e){if(b){e=+b;if(e<=a.length-3)return a[e]||"";e=m?
f(m,b):-1;if(0>e)throw new SyntaxError("Backreference to undefined group "+d);return a[e+1]||""}if("$"===e)return"$";if("&"===e||0===+e)return a[0];if("`"===e)return a[a.length-1].slice(0,a[a.length-2]);if("'"===e)return a[a.length-1].slice(a[a.length-2]+a[0].length);e=+e;if(!isNaN(e)){if(e>a.length-3)throw new SyntaxError("Backreference to undefined group "+d);return a[e]||""}throw new SyntaxError("Invalid token "+d);})});e&&(d.lastIndex=d.global?0:l);return r};v.split=function(d,b){if(!w.isRegExp(d))return A.split.apply(this,
arguments);var e=String(this),f=[],g=d.lastIndex,l=0,m;b=(b===a?-1:b)>>>0;w.forEach(e,d,function(a){a.index+a[0].length>l&&(f.push(e.slice(l,a.index)),1<a.length&&a.index<e.length&&Array.prototype.push.apply(f,a.slice(1)),m=a[0].length,l=a.index+m)});l===e.length?(!A.test.call(d,"")||m)&&f.push(""):f.push(e.slice(l));d.lastIndex=g;return f.length>b?f.slice(0,b):f};T=w.addToken;T(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(a,d){if("B"===a[1]&&"default"===
d)return a[0];throw new SyntaxError("Invalid escape "+a[0]);},{scope:"all"});T(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});T(/\(\?#[^)]*\)/,function(a,d,b){return l(a.input,a.index+a[0].length,b)?"":"(?:)"});T(/\s+|#.*/,function(a,d,b){return l(a.input,a.index+a[0].length,b)?"":"(?:)"},{flag:"x"});T(/\./,function(){return"[\\s\\S]"},{flag:"s"});T(/\\k<([\w$]+)>/,function(a){var d=isNaN(a[1])?f(this.captureNames,a[1])+1:+a[1],b=a.index+a[0].length;if(!d||d>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+
a[0]);return"\\"+d+(b===a.input.length||isNaN(a.input.charAt(b))?"":"(?:)")});T(/\\(\d+)/,function(a,d){if(!("default"===d&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});T(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+
a[0]);if(-1<f(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});T(/\((?!\?)/,function(a,d,b){if(-1<b.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n"});return w}(),runtimeOptions=systemOptions.register(new OptionSet("Runtime Options")),traceScope=runtimeOptions.register(new Option("ts","traceScope","boolean",!1,"trace scope execution")),traceExecution=runtimeOptions.register(new Option("tx",
"traceExecution","number",0,"trace script execution")),traceCallExecution=runtimeOptions.register(new Option("txc","traceCallExecution","number",0,"trace call execution")),functionBreak=runtimeOptions.register(new Option("fb","functionBreak","number",-1,"Inserts a debugBreak at function index #.")),compileOnly=runtimeOptions.register(new Option("co","compileOnly","number",-1,"Compiles only function number.")),compileUntil=runtimeOptions.register(new Option("cu","compileUntil","number",-1,"Compiles only until a function number.")),
debuggerMode=runtimeOptions.register(new Option("dm","debuggerMode","boolean",!1,"matches avm2 debugger build semantics")),enableVerifier=runtimeOptions.register(new Option("verify","verify","boolean",!1,"Enable verifier.")),globalMultinameAnalysis=runtimeOptions.register(new Option("ga","globalMultinameAnalysis","boolean",!1,"Global multiname analysis.")),traceInlineCaching=runtimeOptions.register(new Option("tic","traceInlineCaching","boolean",!1,"Trace inline caching execution.")),compilerEnableExceptions=
runtimeOptions.register(new Option("cex","exceptions","boolean",!1,"Compile functions with catch blocks.")),compilerMaximumMethodSize=runtimeOptions.register(new Option("cmms","maximumMethodSize","number",4096,"Compiler maximum method size.")),jsGlobal=function(){return this||(0,eval)("this")}(),VM_SLOTS="vm slots",VM_LENGTH="vm length",VM_BINDINGS="vm bindings",VM_NATIVE_PROTOTYPE_FLAG="vm native prototype",VM_OPEN_METHODS="vm open methods",VM_IS_CLASS="vm is class",VM_OPEN_METHOD_PREFIX="method_",
VM_OPEN_SET_METHOD_PREFIX="set_",VM_OPEN_GET_METHOD_PREFIX="get_",VM_NATIVE_BUILTIN_SURROGATES=[{object:Object,methods:["toString","valueOf"]},{object:Function,methods:["toString","valueOf"]}],VM_NATIVE_BUILTIN_ORIGINALS="vm originals",SAVED_SCOPE_NAME="$SS",PARAMETER_PREFIX="p",$M=[];XRegExp.install({natives:!0});var VM_METHOD_OVERRIDES=createEmptyObject(),vmNextShapeId=1;function defineObjectShape(a){defineReadOnlyProperty(a,"shape",vmNextShapeId++)}
var vmNextInterpreterFunctionId=1,vmNextCompiledFunctionId=1,vmNextTrampolineId=1,vmNextMemoizerId=1,InlineCache=function(){function a(){this.value=this.key=void 0}a.prototype.update=function(a,d){this.key=a;return this.value=d};return a}();function ic(a){return a.ic||(a.ic=new InlineCache)}var AS=1,JS=2,RUNTIME_ENTER_LEAVE_STACK=[1];function enter(a){RUNTIME_ENTER_LEAVE_STACK.push(a)}function leave(){RUNTIME_ENTER_LEAVE_STACK.pop();!0}function inJS(){return 2===RUNTIME_ENTER_LEAVE_STACK.top()}
function inAS(){return 1===RUNTIME_ENTER_LEAVE_STACK.top()}var callWriter=new IndentingWriter(!1,function(a){print(a)}),objectIDs=0,OBJECT_NAME="Object Name";
function objectConstantName(a){!0;if(a.hasOwnProperty("Object Name"))return a["Object Name"];if(a instanceof LazyInitializer)return a.getName();var b;b=objectIDs++;b=a instanceof Global?"$G"+b:a instanceof Multiname?"$M"+b:isClass(a)?"$C"+b:"$O"+b;Object.defineProperty(a,"Object Name",{value:b,writable:!1,enumerable:!1});jsGlobal[b]=a;return b}
var LazyInitializer=function(){function a(a){this.target=a}var b=jsGlobal;a.create=function(a){return a.lazyInitializer?a.lazyInitializer:a.lazyInitializer=new LazyInitializer(a)};a.prototype.getName=function(){if(this.name)return this.name;var a=this.target,e;this.target instanceof ScriptInfo?(this.name="$S"+objectIDs++,e=function(){ensureScriptIsExecuted(a,"Lazy Initializer");return a.global}):this.target instanceof ClassInfo?(this.name=Multiname.getQualifiedName(a.instanceInfo.name),e=function(){return a.abc.applicationDomain.getProperty(a.instanceInfo.name)}):
notImplemented(a);var f=this.name;Object.defineProperty(b,f,{get:function(){var a=e();Object.defineProperty(b,f,{value:a,writable:!0});return a},configurable:!0});return f};return a}();
function getNamespaceResolutionMap(a){var b=this.resolutionMap[a.id];if(b)return b;var b=this.resolutionMap[a.id]=createEmptyObject(),d=this.bindings,e;for(e in d.map){var f=e,g=d.map[e].trait;if(g.isGetter()||g.isSetter())f=f.substring(Binding.KEY_PREFIX_LENGTH);f=Multiname.fromQualifiedName(f);f.getNamespace().inNamespaceSet(a)&&(b[f.getName()]=Multiname.getQualifiedName(g.name))}return b}
function resolveMultinameProperty(a,b){"object"===typeof b&&(b=String(b));if(isNumeric(b))return toNumber(b);if(!a)return Multiname.getPublicQualifiedName(b);if(1<a.length){var d=this.getNamespaceResolutionMap(a)[b];return d?d:Multiname.getPublicQualifiedName(b)}return a[0].qualifiedName+"$"+b}function asGetPublicProperty(a){return this.asGetProperty(void 0,a,0)}
function asGetProperty(a,b,d){a=this.resolveMultinameProperty(a,b,d);return this.asGetNumericProperty&&Multiname.isNumeric(a)?this.asGetNumericProperty(a):this[a]}function asGetPropertyLikelyNumeric(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)}function asGetResolvedStringProperty(a){!0;return this[a]}function asCallResolvedStringProperty(a,b,d){b=b?null:this;var e=this["vm open methods"];return(b&&e&&e[a]?e[a]:this[a]).apply(b,d)}
function fromResolvedName(a){!0;return a.substring(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length)}function asGetResolvedStringPropertyFallback(a){a=fromResolvedName(a);return this.asGetProperty([ShumwayNamespace.PUBLIC],a,0)}function asSetPublicProperty(a,b){return this.asSetProperty(void 0,a,0,b)}
function asSetProperty(a,b,d,e){"object"===typeof b&&(b=String(b));a=this.resolveMultinameProperty(a,b,d);if(this.asSetNumericProperty&&Multiname.isNumeric(a))return this.asSetNumericProperty(a,e);if(b=this["vm slots"].byQN[a]){if(b.const)return;(b=b.type)&&b.coerce&&(e=b.coerce(e))}this[a]=e}function asSetPropertyLikelyNumeric(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)}
function asDefinePublicProperty(a,b){return this.asDefineProperty(void 0,a,0,b)}function asDefineProperty(a,b,d,e){"object"===typeof b&&(b=String(b));a=this.resolveMultinameProperty(a,b,d);Object.defineProperty(this,a,e)}function asCallPublicProperty(a,b){return this.asCallProperty(void 0,a,0,!1,b)}var callCounter=new metrics.Counter(!0);
function asCallProperty(a,b,d,e,f){if(traceCallExecution.value){var g=this.class?this.class.className+" ":"";callWriter.enter("call "+g+b+"("+toSafeArrayString(f)+") #"+callCounter.count(b))}g=e?null:this;isProxyObject(this)?f=this[VM_CALL_PROXY](new Multiname(a,b,d),g,f):(a=this.resolveMultinameProperty(a,b,d),this.asGetNumericProperty&&Multiname.isNumeric(a)?a=this.asGetNumericProperty(a):(b=this["vm open methods"],a=g&&b&&b[a]?b[a]:this[a]),f=a.apply(g,f));0<traceCallExecution.value&&callWriter.leave("return "+
toSafeString(f));return f}function asCallSuper(a,b,d,e,f){traceCallExecution.value&&callWriter.enter("call super "+(this.class?this.class.className+" ":"")+d+"("+toSafeArrayString(f)+") #"+callCounter.count(d));a=a.object.baseClass;b=a.traitsPrototype.resolveMultinameProperty(b,d,e);f=a.traitsPrototype["vm open methods"][b].apply(this,f);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(f));return f}
function asSetSuper(a,b,d,e,f){traceCallExecution.value&&callWriter.enter("set super "+(this.class?this.class.className+" ":"")+d+"("+toSafeString(f)+") #"+callCounter.count(d));a=a.object.baseClass;var g=a.traitsPrototype.resolveMultinameProperty(b,d,e);this["vm slots"].byQN[g]?this.asSetProperty(b,d,e,f):a.traitsPrototype["set_"+g].call(this,f);0<traceCallExecution.value&&callWriter.leave("")}
function asGetSuper(a,b,d,e){traceCallExecution.value&&callWriter.enter("get super "+(this.class?this.class.className+" ":"")+d+" #"+callCounter.count(d));a=a.object.baseClass;var f=a.traitsPrototype.resolveMultinameProperty(b,d,e);b=this["vm slots"].byQN[f]?this.asGetProperty(b,d,e):a.traitsPrototype["get_"+f].call(this);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(b));return b}
function construct(a,b){if(a.classInfo){var d=a.classInfo.instanceInfo.name.qualifiedName;if(d===Multiname.String)return String.apply(null,b);if(d===Multiname.Boolean)return Boolean.apply(null,b);if(d===Multiname.Number)return Number.apply(null,b)}return new (Function.bind.apply(a.instanceConstructor,[,].concat(b)))}
function asConstructProperty(a,b,d,e){a=this.asGetProperty(a,b,d);traceCallExecution.value&&callWriter.enter("construct "+b+"("+toSafeArrayString(e)+") #"+callCounter.count(b));b=construct(a,e);0<traceCallExecution.value&&callWriter.leave("return "+toSafeString(b));return b}function asHasProperty(a,b,d,e){return this.hasProperty?this.hasProperty(a,b,d):e?nonProxyingHasProperty(this,this.resolveMultinameProperty(a,b,d)):this.resolveMultinameProperty(a,b,d)in this}
function asDeleteProperty(a,b,d){return delete this[this.resolveMultinameProperty(a,b,d)]}function asGetNumericProperty(a){return this[a]}function asSetNumericProperty(a,b){this[a]=b}function asGetDescendants(){notImplemented("asGetDescendants")}function asNextNameIndex(a){0===a&&defineNonEnumerableProperty(this,"enumerableKeys",this.asGetEnumerableKeys());for(var b=this.enumerableKeys;a<b.length;){if(this.asHasProperty(void 0,b[a],0))return a+1;a++}return 0}
function asNextName(a){var b=this.enumerableKeys;!0;return b[a-1]}function asNextValue(a){return this.asGetPublicProperty(this.asNextName(a))}function asGetEnumerableKeys(){var a=this.valueOf();if("string"===typeof a||"number"===typeof a)return[];for(var a=Object.keys(this),b=[],d=0;d<a.length;d++){var e=a[d];isNumeric(e)?b.push(e):(e=Multiname.stripPublicQualifier(e),void 0!==e&&b.push(e))}return b}
function initializeGlobalObject(a){var b=a[VM_NATIVE_BUILTIN_ORIGINALS]=createEmptyObject();VM_NATIVE_BUILTIN_SURROGATES.forEach(function(d){var e=d.object;b[e.name]=createEmptyObject();d.methods.forEach(function(d){var g=e.prototype[d];b[e.name][d]=g;var l=Multiname.getPublicQualifiedName(d);useSurrogates&&(a[e.name].prototype[d]=function(){return this[l]?this[l]():g.call(this)})})});"Object Number Boolean String Array Date RegExp".split(" ").forEach(function(d){defineReadOnlyProperty(a[d].prototype,
"vm native prototype",!0)});defineNonEnumerableProperty(a.Object.prototype,"getNamespaceResolutionMap",getNamespaceResolutionMap);defineNonEnumerableProperty(a.Object.prototype,"resolveMultinameProperty",resolveMultinameProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetProperty",asGetProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetPublicProperty",asGetPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asGetResolvedStringProperty",asGetResolvedStringProperty);
defineNonEnumerableProperty(a.Object.prototype,"asSetProperty",asSetProperty);defineNonEnumerableProperty(a.Object.prototype,"asSetPublicProperty",asSetPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asDefineProperty",asDefineProperty);defineNonEnumerableProperty(a.Object.prototype,"asDefinePublicProperty",asDefinePublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallProperty",asCallProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallSuper",asCallSuper);
defineNonEnumerableProperty(a.Object.prototype,"asGetSuper",asGetSuper);defineNonEnumerableProperty(a.Object.prototype,"asSetSuper",asSetSuper);defineNonEnumerableProperty(a.Object.prototype,"asCallPublicProperty",asCallPublicProperty);defineNonEnumerableProperty(a.Object.prototype,"asCallResolvedStringProperty",asCallResolvedStringProperty);defineNonEnumerableProperty(a.Object.prototype,"asConstructProperty",asConstructProperty);defineNonEnumerableProperty(a.Object.prototype,"asHasProperty",asHasProperty);
defineNonEnumerableProperty(a.Object.prototype,"asDeleteProperty",asDeleteProperty);defineNonEnumerableProperty(a.Object.prototype,"asNextName",asNextName);defineNonEnumerableProperty(a.Object.prototype,"asNextValue",asNextValue);defineNonEnumerableProperty(a.Object.prototype,"asNextNameIndex",asNextNameIndex);defineNonEnumerableProperty(a.Object.prototype,"asGetEnumerableKeys",asGetEnumerableKeys);"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" ").forEach(function(d){d in
a?(defineNonEnumerableProperty(a[d].prototype,"asGetNumericProperty",asGetNumericProperty),defineNonEnumerableProperty(a[d].prototype,"asSetNumericProperty",asSetNumericProperty),defineNonEnumerableProperty(a[d].prototype,"asGetProperty",asGetPropertyLikelyNumeric),defineNonEnumerableProperty(a[d].prototype,"asSetProperty",asSetPropertyLikelyNumeric)):print(d+" was not found in globals")});a.Array.prototype.asGetProperty=function(a,b,f){return"number"===typeof b?this[b]:asGetProperty.call(this,a,
b,f)};a.Array.prototype.asSetProperty=function(a,b,f,g){if("number"===typeof b)this[b]=g;else return asSetProperty.call(this,a,b,f,g)}}initializeGlobalObject(jsGlobal);function isNativePrototype(a){return Object.prototype.hasOwnProperty.call(a,"vm native prototype")}function asTypeOf(a){if(a){if(a.constructor===String)return"string";if(a.constructor===Number)return"number";if(a.constructor===Boolean)return"boolean";if(a instanceof XML||a instanceof XMLList)return"xml"}return typeof a}
function publicizeProperties(a){for(var b=Object.keys(a),d=0;d<b.length;d++){var e=b[d];if(!Multiname.isPublicQualifiedName(e)){var f=a[e];a[Multiname.getPublicQualifiedName(e)]=f;delete a[e]}}}function asGetSlot(a,b){return a[a["vm slots"].byID[b].name]}function asSetSlot(a,b,d){b=a["vm slots"].byID[b];if(!b.const){var e=b.type;a[b.name]=e&&e.coerce?e.coerce(d):d}}
function asHasNext2(a,b){if(isNullOrUndefined(a))return{index:0,object:null};a=boxValue(a);var d=a.asNextNameIndex(b);if(0<d)return{index:d,object:a};for(;;){a=Object.getPrototypeOf(a);if(!a)break;d=a.asNextNameIndex(0);if(0<d)return{index:d,object:a}}return{index:0,object:null}}function getDescendants(a,b){if(!isXMLType(a))throw"Not XML object in getDescendants";return a.descendants(b)}
function checkFilter(a){if(!a.class||!isXMLType(a))throw"TypeError operand of childFilter not of XML type";return a}function Activation(a){this.methodInfo=a}
var ScopeStack=function(){function a(a){this.parent=a;this.stack=[];this.isWith=[]}a.prototype.push=function(a,d){this.stack.push(a);this.isWith.push(!!d)};a.prototype.get=function(a){return this.stack[a]};a.prototype.clear=function(){this.stack.length=0;this.isWith.length=0};a.prototype.pop=function(){this.isWith.pop();this.stack.pop()};a.prototype.topScope=function(){this.scopes||(this.scopes=[]);for(var a=this.parent,d=0;d<this.stack.length;d++){var e=this.stack[d],f=this.isWith[d],g=this.scopes[d];
if(!g||g.parent!==a||g.object!==e||g.isWith!==f)g=this.scopes[d]=new Scope(a,e,f);a=g}return a};return a}(),Scope=function(){function a(a,d,e){this.parent=a;this.object=boxValue(d);!0;this.global=a?a.global:this;this.isWith=e;this.cache=createEmptyObject()}a.prototype.findDepth=function(a){for(var d=this,e=0;d;){if(d.object===a)return e;e++;d=d.parent}return-1};a.prototype.findScopeProperty=function(a,d,e,f,g,l){var m,p;p=a?1<a.length?a.id+"$"+d:a[0].qualifiedName+"$"+d:d;if(!l&&(m=this.cache[p]))return m;
if(this.object.asHasProperty(a,d,e,!0))return this.isWith?this.object:this.cache[p]=this.object;if(this.parent)return this.cache[p]=this.parent.findScopeProperty(a,d,e,f,g,l);if(l)return null;if(m=f.findDomainProperty(new Multiname(a,d,e),g,!0))return m;g&&unexpected("Cannot find property "+d);return this.global.object};a.prototype.trace=function(){for(var a=this;a;)print(a.object+(a.object?" - "+a.object.debugName:"")),a=a.parent};return a}();
function bindFreeMethodScope(a,b){var d=a.freeMethod;if(a.lastBoundMethod&&a.lastBoundMethod.scope===b)return a.lastBoundMethod.boundMethod;!0;var e,f=b.global.object;if(!a.hasOptional()&&!a.needsArguments()&&!a.needsRest())switch(a.parameters.length){case 0:e=function(){return d.call(this===jsGlobal?f:this,b)};break;case 1:e=function(a){return d.call(this===jsGlobal?f:this,b,a)};break;case 2:e=function(a,e){return d.call(this===jsGlobal?f:this,b,a,e)};break;case 3:e=function(a,e,m){return d.call(this===
jsGlobal?f:this,b,a,e,m)}}e||(Counter.count("Bind Scope - Slow Path"),e=function(){Array.prototype.unshift.call(arguments,b);return d.apply(this===jsGlobal?b.global.object:this,arguments)});e.methodInfo=a;e.instanceConstructor=e;a.lastBoundMethod={scope:b,boundMethod:e};return e}function nameInTraits(a,b){if(a.hasOwnProperty("vm bindings")&&a.hasOwnProperty(b))return!0;var d=Object.getPrototypeOf(a);return d.hasOwnProperty("vm bindings")&&d.hasOwnProperty(b)}
function resolveMultinameUnguarded(a,b,d){!0;!0;a=boxValue(a);for(var e,f=isNativePrototype(a),g=0,l=b.namespaces.length;g<l;g++){var m=b.getQName(g);if(d){if(nameInTraits(a,Multiname.getQualifiedName(m)))return m}else if(b.namespaces[g].isDynamic()){if(e=m,f)break}else if(!f&&Multiname.getQualifiedName(m)in a)return m}if(e&&!d&&Multiname.getQualifiedName(e)in a)return e}function resolveMultiname(a,b,d){enter(2);a=resolveMultinameUnguarded(a,b,d);leave(2);return a}
function sliceArguments(a,b){return Array.prototype.slice.call(a,b)}function nonProxyingHasProperty(a,b){return b in a}function forEachPublicProperty(a,b,d){if(a["vm bindings"])for(f in a)if(isNumeric(f))b.call(d,f,a[f]);else{if(Multiname.isPublicQualifiedName(f)&&0>a["vm bindings"].indexOf(f)){var e=f.substr(Multiname.PUBLIC_QUALIFIED_NAME_PREFIX.length);b.call(d,e,a[f])}}else for(var f in a)b.call(d,f,a[f])}
function wrapJSObject(a){var b=Object.create(a),d;for(d in a)Object.defineProperty(b,Multiname.getPublicQualifiedName(d),function(a,d){return{get:function(){return a[d]},set:function(b){a[d]=b},enumerable:!0}}(a,d));return b}function createActivation(a){return Object.create(a.activationPrototype)}function isClass(a){!0;return Object.hasOwnProperty.call(a,"vm is class")}function isTrampoline(a){!0;return a.isTrampoline}function isMemoizer(a){!0;return a.isMemoizer}
function CatchScopeObject(a,b){b&&(new CatchBindings(new Scope(null,this),b)).applyTo(a,this)}
var Global=function(){function a(a){this.scriptInfo=a;a.global=this;a.scriptBindings=new ScriptBindings(a,new Scope(null,this));a.scriptBindings.applyTo(a.abc.applicationDomain,this);a.loaded=!0}a.prototype.toString=function(){return"[object global]"};a.prototype.isExecuted=function(){return this.scriptInfo.executed};a.prototype.isExecuting=function(){return this.scriptInfo.executing};a.prototype.ensureExecuted=function(){ensureScriptIsExecuted(this.scriptInfo)};defineNonEnumerableProperty(a.prototype,
Multiname.getPublicQualifiedName("toString"),function(){return this.toString()});return a}();function canCompile(a){return!a.hasBody||a.hasExceptions()&&!compilerEnableExceptions.value||a.code.length>compilerMaximumMethodSize.value?!1:!0}function shouldCompile(a){return!canCompile(a)||a.isClassInitializer||a.isScriptInitializer?!1:!0}
function forceCompile(a){if(a.hasExceptions())return!1;a=a.holder;a instanceof ClassInfo&&(a=a.instanceInfo);if(a instanceof InstanceInfo){switch(a.name.namespaces[0].originalURI){case "flash.geom":case "flash.events":return!0}switch(a.name.getOriginalName()){case "com.google.youtube.model.VideoData":return!0}}return!1}
function createInterpretedFunction(a,b,d){var e=!1,f=a.parameters.map(function(a){void 0!==a.value&&(e=!0);return a.value});d=d?function(d){var b=this===jsGlobal?d.global.object:this,m=sliceArguments(arguments,1);e&&m.length<f.length&&(m=m.concat(f.slice(m.length-f.length)));return Interpreter.interpretMethod(b,a,d,m)}:function(){var d=this===jsGlobal?b.global.object:this,l=sliceArguments(arguments);e&&l.length<f.length&&(l=l.concat(f.slice(arguments.length-f.length)));return Interpreter.interpretMethod(d,
a,b,l)};d.instanceConstructor=d;d.debugName="Interpreter Function #"+vmNextInterpreterFunctionId++;return d}var totalFunctionCount=0,compiledFunctionCount=0;function debugName(a){return isFunction(a)?a.debugName:a}
function createCompiledFunction(a,b,d,e){$M.push(a);d=Compiler.compileMethod(a,b,d);b=d.parameters;d=d.body;var f=a.name?Multiname.getQualifiedName(a.name):"fn"+compiledFunctionCount;if(a.holder){var g="";a.holder instanceof ClassInfo?g="static$"+a.holder.instanceInfo.name.getName():a.holder instanceof InstanceInfo?g=a.holder.name.getName():a.holder instanceof ScriptInfo&&(g="script");f=g+"$"+f}f=escapeString(f);a.verified&&(f+="$V");if(compiledFunctionCount==functionBreak.value||e)d="{ debugger; \n"+
d+"}";e="function "+f+" ("+b.join(", ")+") "+d;1<traceLevel.value&&a.trace(new IndentingWriter,a.abc);a.debugTrace=function(){a.trace(new IndentingWriter,a.abc)};0<traceLevel.value&&print(e);e=(new Function("return "+e))();e.debugName="Compiled Function #"+vmNextCompiledFunctionId++;return e}
function getMethodOverrideKey(a){return a.holder instanceof ClassInfo?"static "+a.holder.instanceInfo.name.getOriginalName()+"::"+a.name.getOriginalName():a.holder instanceof InstanceInfo?a.holder.name.getOriginalName()+"::"+a.name.getOriginalName():a.name.getOriginalName()}function checkMethodOverrides(a){if(a.name&&(a=getMethodOverrideKey(a),a in VM_METHOD_OVERRIDES))return warning("Overriding Method: "+a),VM_METHOD_OVERRIDES[a]}
function makeTrampoline(a,b,d){!0;var e=null,f=function(){3<=traceExecution.value&&print("Trampolining");Counter.count("Executing Trampoline");1<traceCallExecution.value&&callWriter.writeLn("Trampoline: "+d);e||(e=a(f),!0);return e.apply(this,arguments)};f.trigger=function(){Counter.count("Triggering Trampoline");e||(e=a(f),!0)};f.isTrampoline=!0;f.debugName="Trampoline #"+vmNextTrampolineId++;defineReadOnlyProperty(f,"vm length",b);return f}
function makeMemoizer(a,b){function d(){Counter.count("Runtime: Memoizing");3<=traceExecution.value&&print("Memoizing: "+a);1<traceCallExecution.value&&callWriter.writeLn("Memoizing: "+a);if(isNativePrototype(this))return Counter.count("Runtime: Method Closures"),bindSafely(b.value,this);isTrampoline(b.value)&&b.value.trigger();!0;var d=null;if(isClass(this))return Counter.count("Runtime: Static Method Closures"),d=bindSafely(b.value,this),defineReadOnlyProperty(this,a,d),d;if(Object.prototype.hasOwnProperty.call(this,
a)){if(Object.getOwnPropertyDescriptor(this,a).get)return Counter.count("Runtime: Method Closures"),bindSafely(b.value,this);Counter.count("Runtime: Unpatched Memoizer");return this[a]}d=bindSafely(b.value,this);d.methodInfo=b.value.methodInfo;defineReadOnlyProperty(d,Multiname.getPublicQualifiedName("prototype"),null);defineReadOnlyProperty(this,a,d);return d}Counter.count("Runtime: Memoizers");d.isMemoizer=!0;d.debugName="Memoizer #"+vmNextMemoizerId++;return d}
function createFunction(a,b,d,e){!0;if(a.freeMethod)return d?bindFreeMethodScope(a,b):a.freeMethod;var f;if(f=checkMethodOverrides(a))return!0,f;ensureFunctionIsInitialized(a);totalFunctionCount++;f=!1;if((a.abc.applicationDomain.mode===EXECUTION_MODE.INTERPRET||!shouldCompile(a))&&!forceCompile(a))f=!0;0<=compileOnly.value&&Number(compileOnly.value)!==totalFunctionCount&&(print("Compile Only Skipping "+totalFunctionCount),f=!0);0<=compileUntil.value&&(1E3<totalFunctionCount&&(print(backtrace()),
print(AVM2.getStackTrace())),totalFunctionCount>compileUntil.value&&(print("Compile Until Skipping "+totalFunctionCount),f=!0));f?a.freeMethod=createInterpretedFunction(a,b,d):(compiledFunctionCount++,console.info("Compiling: "+a+" count: "+compiledFunctionCount),(0<=compileOnly.value||0<=compileUntil.value)&&print("Compiling "+totalFunctionCount),a.freeMethod=createCompiledFunction(a,b,d,e,a.isInstanceInitializer));a.freeMethod.methodInfo=a;return d?bindFreeMethodScope(a,b):a.freeMethod}
function ensureFunctionIsInitialized(a){if(!a.analysis){a.analysis=new Analysis(a);a.needsActivation()&&(a.activationPrototype=new Activation(a),(new ActivationBindings(a)).applyTo(a.abc.applicationDomain,a.activationPrototype));for(var b=a.exceptions,d=0,e=b.length;d<e;d++){var f=b[d];if(f.varName){var g=Object.create(Trait.prototype);g.kind=0;g.name=f.varName;g.typeName=f.typeName;g.holder=a;f.scopeObject=new CatchScopeObject(a.abc.applicationDomain,g)}else f.scopeObject=new CatchScopeObject}}}
function getTraitFunction(a,b,d){!0;!0;var e=a.methodInfo,f;if(e.isNative()){var g=a.metadata;g&&g.native?f=(d=getNative(g.native.value[0].value))&&d(null,b):g&&g.unsafeJSNative?f=getNative(g.unsafeJSNative.value[0].value):d&&(b=Multiname.getName(e.name),f=a.isGetter()?d[b]?d[b].get:void 0:a.isSetter()?d[b]?d[b].set:void 0:d[b]);if(!f)return warning("No native method for: "+a.kindName()+" "+e.holder.name+"::"+Multiname.getQualifiedName(e.name)),function(){warning("Calling undefined native method: "+
a.kindName()+" "+e.holder.name+"::"+Multiname.getQualifiedName(e.name))}}else 2<=traceExecution.value&&print("Creating Function For Trait: "+a.holder+" "+a),f=createFunction(e,b,!1),!0;3<=traceExecution.value&&print("Made Function: "+Multiname.getQualifiedName(e.name));return f}function makeQualifiedNameTraitMap(a){for(var b=createEmptyObject(),d=0;d<a.length;d++)b[Multiname.getQualifiedName(a[d].name)]=a[d];return b}
function createClass(a,b,d){!0;var e=a.instanceInfo,f=a.abc.applicationDomain,g=Multiname.getName(e.name);traceExecution.value&&print("Creating "+(e.isInterface()?"Interface":"Class")+": "+g+(a.native?" replaced with native "+a.native.cls:""));g=e.isInterface()?Interface.createInterface(a):Class.createClass(a,b,d);traceClasses.value&&(f.loadedClasses.push(g),f.traceLoadedClasses(!0));if(e.isInterface())return g;f.onMessage.notify1("classCreated",g);g.instanceConstructor&&g!==Class&&g.verify();if(b&&
("Proxy"===Multiname.getQualifiedName(b.classInfo.instanceInfo.name.name)||b.isProxy))installProxyClassWrapper(g),g.isProxy=!0;createFunction(a.init,d,!1).call(g);sealConstTraits&&this.sealConstantTraits(g,a.traits);return g}
function sealConstantTraits(a,b){for(var d=0,e=b.length;d<e;d++){var f=b[d];f.isConst()&&(f=Multiname.getQualifiedName(f.name),function(d,b){Object.defineProperty(a,d,{configurable:!1,enumerable:!1,get:function(){return b},set:function(){throwErrorFromVM(AVM2.currentDomain(),"ReferenceError","Illegal write to read-only property "+d+".")}})}(f,a[f]))}}
function applyType(a,b,d){b=b.classInfo.instanceInfo.name.name;if("Vector"===b){!0;d=d[0];if(!isNullOrUndefined(d))switch(b=d.classInfo.instanceInfo.name.name.toLowerCase(),b){case "int":case "uint":case "double":case "object":return a.getClass("packageInternal __AS3__.vec.Vector$"+b)}return a.getClass("packageInternal __AS3__.vec.Vector$object").applyType(d)}return notImplemented(b)}function checkArgumentCount(a,b,d){d!==b&&throwError("ArgumentError",Errors.WrongArgumentCountError,a,b,d)}
function throwError(a,b){var d=formatErrorMessage.apply(null,Array.prototype.slice.call(arguments,1));throwErrorFromVM(AVM2.currentDomain(),a,d,b.code)}function throwErrorFromVM(a,b,d,e){throw new (a.getClass(b).instanceConstructor)(d,e);}function translateError(a,b){if(b instanceof Error){var d=a.getClass(b.name);if(d)return new d.instanceConstructor(translateErrorMessage(b));unexpected("Can't translate error: "+b)}return b}function asIsInstanceOf(a,b){return a.isInstanceOf(b)}
function asIsType(a,b){return a.isInstance(b)}function asAsType(a,b){return asIsType(a,b)?b:null}function asCoerceByMultiname(a,b,d){!0;switch(Multiname.getQualifiedName(b)){case Multiname.Int:return asCoerceInt(d);case Multiname.Uint:return asCoerceUint(d);case Multiname.String:return asCoerceString(d);case Multiname.Number:return asCoerceNumber(d);case Multiname.Boolean:return asCoerceBoolean(d);case Multiname.Object:return asCoerceObject(d)}return asCoerce(a.getType(b),d)}
function asCoerce(a,b){if(a.coerce)return a.coerce(b);if(isNullOrUndefined(b))return null;if(a.isInstance(b))return b;!0}function asCoerceString(a){return"string"===typeof a?a:void 0==a?null:a+""}function asCoerceInt(a){return a|0}function asCoerceUint(a){return a>>>0}function asCoerceNumber(a){return+a}function asCoerceBoolean(a){return!!a}function asCoerceObject(a){return void 0==a?null:"string"===typeof a||"number"===typeof a?a:Object(a)}
function asDefaultCompareFunction(a,b){return String(a).localeCompare(String(b))}function asCompare(a,b,d,e){!0;!0;var f=0;e||(e=asDefaultCompareFunction);d&1&&(a=String(a).toLowerCase(),b=String(b).toLowerCase());d&16?(a=toNumber(a),b=toNumber(b),f=a<b?-1:a>b?1:0):f=e(a,b);d&2&&(f*=-1);return f}function asAdd(a,b){return"string"===typeof a||"string"===typeof b?String(a)+String(b):a+b}
var GlobalMultinameResolver=function(){function a(a){for(var f=0;f<a.length;f++){var g=a[f],l=g.name.name,g=g.name.getNamespace();g.isDynamic()||(b[l]=!0,d[l]&&notImplemented("We have to the undo the optimization, "+l+" can now bind to "+g))}}var b=createEmptyObject(),d=createEmptyObject();return{loadAbc:function(d){if(globalMultinameAnalysis.value){var b=d.scripts,g=d.classes;d=d.methods;for(var l=0;l<b.length;l++)a(b[l].traits);for(l=0;l<g.length;l++)a(g[l].traits),a(g[l].instanceInfo.traits);for(l=
0;l<d.length;l++)d[l].traits&&a(d[l].traits)}},resolveMultiname:function(a){var f=a.name;if(!b[f])return d[f]=!0,new Multiname([ShumwayNamespace.PUBLIC],a.name)}}}();VM_METHOD_OVERRIDES["static mochi.as3.MochiServices::connect"]=function(){};VM_METHOD_OVERRIDES["static MochiBot::track"]=function(){};VM_METHOD_OVERRIDES["com.midasplayer.debug.DebugLog::trace"]=function(a){console.log(a)};VM_METHOD_OVERRIDES["com.midasplayer.engine.comm.DebugGameComm::getGameData"]=function(){return'<gamedata randomseed="554884453" version="1">\n<musicOn>true</musicOn>\n<soundOn>true</soundOn>\n<isShortGame>false</isShortGame>\n<booster_1>0</booster_1>\n<booster_2>0</booster_2>\n<booster_3>0</booster_3>\n<booster_4>0</booster_4>\n<booster_5>0</booster_5>\n<bestScore>0</bestScore>\n<bestChain>0</bestChain>\n<bestLevel>0</bestLevel>\n<bestCrushed>0</bestCrushed>\n<bestMixed>0</bestMixed>\n<text id="outro.crushed">Candy crushed</text>\n<text id="outro.bestever">best ever</text>\n<text id="outro.trophy.two">scored {0} in one game</text>\n<text id="outro.combo_color_color">All Clear Created</text>\n<text id="outro.trophy.one">crushed {0} candy in one game</text>\n<text id="outro.score">Score</text>\n<text id="outro.opengame">Please register to play the full game</text>\n<text id="outro.chain">Longest chain</text>\n<text id="outro.time">Game ends in {0} seconds</text>\n<text id="outro.combo_color_line">Super Stripes Created</text>\n<text id="game.nomoves">No more moves!</text>\n<text id="outro.combo_wrapper_line">Mega-Candy Created</text>\n<text id="intro.time">Game starts in {0} seconds</text>\n<text id="outro.now">now</text>\n<text id="outro.level">Level reached</text>\n<text id="outro.title">Game Over</text>\n<text id="intro.info1">Match 3 Candy of the same colour to crush them. Matching 4 or 5 in different formations generates special sweets that are extra tasty.</text>\n<text id="intro.info2">You can also combine the special sweets for additional effects by switching them with each other. Try these combinations for a taste you will not forget: </text>\n<text id="outro.combo_color_wrapper">Double Colour Bombs Created</text>\n<text id="outro.trophy.three">made {0} combined candy in one game</text>\n<text id="intro.title">Play like this:</text>\n</gamedata>'};
VM_METHOD_OVERRIDES["com.antkarlov.Preloader::com.antkarlov:Preloader.isUrl"]=function(){return!0};VM_METHOD_OVERRIDES["static com.demonsters.debugger.MonsterDebugger::initialize"]=function(){};VM_METHOD_OVERRIDES["com.spilgames.api.core.tracking.TrackConfig::getTrackers"]=function(){return[]};
VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateProperties"]=VM_METHOD_OVERRIDES["com.spilgames.api.components.TextFields.AutoFitTextFieldEx::com.spilgames.api.components.TextFields:AutoFitTextFieldEx.updateTextSize"]=function(){};function asCheckVectorSetNumericProperty(a,b,d){(0>a||a>b||a===b&&d||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}
function asCheckVectorGetNumericProperty(a,b){(0>a||a>=b||!isNumeric(a))&&throwError("RangeError",Errors.OutOfRangeError,a,b)}
var TypedArrayVector=function(){function a(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(10,a+4));this._offset=0;this._length=a}function b(a,b){return String(a).localeCompare(String(b))}a.callable=function(d){if(d instanceof a)return d;var b=d.asGetProperty(void 0,"length");if(void 0!==b){for(var f=new a(b,!1),g=0;g<b;g++)f.asSetNumericProperty(g,d.asGetPublicProperty(g));return f}unexpected()};a.prototype.internalToString=function(){for(var a="",b=this._offset,f=b+this._length,g=
0;g<this._buffer.length;g++)g===b&&(a+="["),g===f&&(a+="]"),a+=this._buffer[g],g<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};a.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a};a.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};
a.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))};a.prototype.concat=function(){notImplemented("TypedArrayVector.concat")};a.prototype.every=function(a,b){for(var f=0;f<this._length;f++)if(!a.call(b,this.asGetNumericProperty(f),f,this))return!1;return!0};a.prototype.filter=
function(d,b){for(var f=new a,g=0;g<this._length;g++)d.call(b,this.asGetNumericProperty(g),g,this)&&f.push(this.asGetNumericProperty(g));return f};a.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var f=0;f<this._length;f++)if(a.call(b,this.asGetNumericProperty(f),f,this))return!0;return!1};a.prototype.forEach=function(a,b){for(var f=0;f<this._length;f++)a.call(b,
this.asGetNumericProperty(f),f,this)};a.prototype.join=function(){notImplemented("TypedArrayVector.join")};a.prototype.indexOf=function(){notImplemented("TypedArrayVector.indexOf")};a.prototype.lastIndexOf=function(){notImplemented("TypedArrayVector.lastIndexOf")};a.prototype.map=function(d,b){isFunction(d)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var f=new a,g=0;g<this._length;g++)f.push(d.call(b,this.asGetNumericProperty(g),g,this));return f};a.prototype.push=function(){this._checkFixed();
this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};a.prototype.pop=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset+this._length]};a.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,f=this._buffer;a<b;){var g=f[a];f[a]=f[b];f[b]=g;a++;b--}};a.CASEINSENSITIVE=1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=
16;a.prototype._sortNumeric=function(a){for(var b=this._view(),f=[],g=-1,l=0,m=b.length-1,p,r,s,u;;)if(100>=m-l){for(r=l+1;r<=m;r++){s=b[r];for(p=r-1;p>=l&&b[p]>s;)b[p+1]=b[p--];b[p+1]=s}if(-1==g)break;m=f[g--];l=f[g--]}else{u=l+m>>1;p=l+1;r=m;s=b[u];b[u]=b[p];b[p]=s;b[l]>b[m]&&(s=b[l],b[l]=b[m],b[m]=s);b[p]>b[m]&&(s=b[p],b[p]=b[m],b[m]=s);b[l]>b[p]&&(s=b[l],b[l]=b[p],b[p]=s);for(u=b[p];;){do p++;while(b[p]<u);do r--;while(b[r]>u);if(r<p)break;s=b[p];b[p]=b[r];b[r]=s}b[l+1]=b[r];b[r]=u;m-p+1>=r-l?
(f[++g]=p,f[++g]=m,m=r-1):(f[++g]=l,f[++g]=r-1,l=p)}a&&this.reverse()};a.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var d,e=0;arguments[0]instanceof Function?d=arguments[0]:isNumber(arguments[0])&&(e=arguments[0]);isNumber(arguments[1])&&(e=arguments[1]);if(e&TypedArrayVector.NUMERIC)return this._sortNumeric(e&a.DESCENDING);Array.prototype.sort.call(this._view(),function(f,g){var l=f,m=g,p=e,r=d;assertNotImplemented(!(p&a.CASEINSENSITIVE),"CASEINSENSITIVE");
assertNotImplemented(!(p&a.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(p&a.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var s=0;r||(r=b);p&a.NUMERIC?(l=toNumber(l),m=toNumber(m),s=l<m?-1:l>m?1:0):s=r(l,m);p&a.DESCENDING&&(s*=-1);return s})};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};a.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);
a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};a.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};a.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+
arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var d=[],b=0;b<this._length;b++)d.push(b);return d};a.prototype.asHasProperty=function(d,b,f){if(a.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,d,b,f);d=
toNumber(b);return 0<=d&&d<this._length};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,f=this._offset+a;b<f;b++)this._buffer[b]=0}this._length=a}});a.prototype._spliceHelper=function(a,b,f,g,l){b=clamp(b,0,g.length-l);f=clamp(f,0,this._length-a);this._ensureCapacity(this._length-f+b);var m=this._offset+a+f,m=this._buffer.subarray(m,m+this._length-a-f);this._buffer.set(m,
this._offset+a+b);this._length+=b-f;for(f=0;f<b;f++)this._buffer[this._offset+a+f]=g.asGetNumericProperty(l+f)};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var d=[],b=0;b<this._length;b++)d.push(b);return d};return a}(),typedArrayVectorTemplate='var EXTRA_CAPACITY=4,INITIAL_CAPACITY=10,DEFAULT_VALUE=0;function vector(a,b){a|=0;this._fixed=!!b;this._buffer=new Int32Array(Math.max(INITIAL_CAPACITY,a+EXTRA_CAPACITY));this._offset=0;this._length=a}vector.callable=function(a){if(a instanceof vector)return a;var b=a.asGetProperty(void 0,"length");if(void 0!==b){for(var c=new vector(b,!1),d=0;d<b;d++)c.asSetNumericProperty(d,a.asGetPublicProperty(d));return c}unexpected()}; vector.prototype.internalToString=function(){for(var a="",b=this._offset,c=b+this._length,d=0;d<this._buffer.length;d++)d===b&&(a+="["),d===c&&(a+="]"),a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");this._offset+this._length===this._buffer.length&&(a+="]");return a+": offset: "+this._offset+", length: "+this._length+", capacity: "+this._buffer.length};vector.prototype.toString=function(){for(var a="",b=0;b<this._length;b++)a+=this._buffer[this._offset+b],b<this._length-1&&(a+=",");return a}; vector.prototype._view=function(){return this._buffer.subarray(this._offset,this._offset+this._length)};vector.prototype._ensureCapacity=function(a){var b=this._offset+a;b<this._buffer.length||(a<=this._buffer.length?(b=this._buffer.length-a>>2,this._buffer.set(this._view(),b),this._offset=b):(a=3*this._buffer.length>>2,a<b&&(a=b),b=new Int32Array(a),b.set(this._buffer,0),this._buffer=b))}; vector.prototype.every=function(a,b){for(var c=0;c<this._length;c++)if(!a.call(b,this.asGetNumericProperty(c),c,this))return!1;return!0};vector.prototype.filter=function(a,b){for(var c=new vector,d=0;d<this._length;d++)a.call(b,this.asGetNumericProperty(d),d,this)&&c.push(this.asGetNumericProperty(d));return c}; vector.prototype.some=function(a,b){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=0;c<this._length;c++)if(a.call(b,this.asGetNumericProperty(c),c,this))return!0;return!1};vector.prototype.forEach=function(a,b){for(var c=0;c<this._length;c++)a.call(b,this.asGetNumericProperty(c),c,this)};vector.prototype.join=function(a){notImplemented("TypedArrayVector.join")}; vector.prototype.indexOf=function(a,b){notImplemented("TypedArrayVector.indexOf")};vector.prototype.lastIndexOf=function(a,b){notImplemented("TypedArrayVector.lastIndexOf")};vector.prototype.map=function(a,b){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var c=new vector,d=0;d<this._length;d++)c.push(a.call(b,this.asGetNumericProperty(d),d,this));return c}; vector.prototype.push=function(){this._checkFixed();this._ensureCapacity(this._length+arguments.length);for(var a=0;a<arguments.length;a++)this._buffer[this._offset+this._length++]=arguments[a]};vector.prototype.pop=function(){this._checkFixed();if(0===this._length)return DEFAULT_VALUE;this._length--;return this._buffer[this._offset+this._length]};vector.prototype.reverse=function(){for(var a=this._offset,b=this._offset+this._length-1,c=this._buffer;a<b;){var d=c[a];c[a]=c[b];c[b]=d;a++;b--}}; vector.CASEINSENSITIVE=1;vector.DESCENDING=2;vector.UNIQUESORT=4;vector.RETURNINDEXEDARRAY=8;vector.NUMERIC=16;function defaultCompareFunction(a,b){return String(a).localeCompare(String(b))} function compare(a,b,c,d){assertNotImplemented(!(c&vector.CASEINSENSITIVE),"CASEINSENSITIVE");assertNotImplemented(!(c&vector.UNIQUESORT),"UNIQUESORT");assertNotImplemented(!(c&vector.RETURNINDEXEDARRAY),"RETURNINDEXEDARRAY");var f=0;d||(d=defaultCompareFunction);c&vector.NUMERIC?(a=toNumber(a),b=toNumber(b),f=a<b?-1:a>b?1:0):f=d(a,b);c&vector.DESCENDING&&(f*=-1);return f} function _sort(a){for(var b=[],c=-1,d=0,f=a.length-1,e,g,h,k;;)if(100>=f-d){for(g=d+1;g<=f;g++){h=a[g];for(e=g-1;e>=d&&a[e]>h;)a[e+1]=a[e--];a[e+1]=h}if(-1==c)break;f=b[c--];d=b[c--]}else{k=d+f>>1;e=d+1;g=f;h=a[k];a[k]=a[e];a[e]=h;a[d]>a[f]&&(h=a[d],a[d]=a[f],a[f]=h);a[e]>a[f]&&(h=a[e],a[e]=a[f],a[f]=h);a[d]>a[e]&&(h=a[d],a[d]=a[e],a[e]=h);for(k=a[e];;){do e++;while(a[e]<k);do g--;while(a[g]>k);if(g<e)break;h=a[e];a[e]=a[g];a[g]=h}a[d+1]=a[g];a[g]=k;f-e+1>=g-d?(b[++c]=e,b[++c]=f,f=g-1):(b[++c]=d, b[++c]=g-1,d=e)}return a}vector.prototype._sortNumeric=function(a){_sort(this._view());a&&this.reverse()};vector.prototype.sort=function(){if(0===arguments.length)return Array.prototype.sort.call(this._view());var a,b=0;arguments[0]instanceof Function?a=arguments[0]:isNumber(arguments[0])&&(b=arguments[0]);isNumber(arguments[1])&&(b=arguments[1]);if(b&TypedArrayVector.NUMERIC)return this._sortNumeric(b&vector.DESCENDING);Array.prototype.sort.call(this._view(),function(c,d){return compare(c,d,b,a)})}; vector.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._length);return this._buffer[this._offset+a]};vector.prototype.asSetNumericProperty=function(a,b){checkArguments&&asCheckVectorSetNumericProperty(a,this._length,this._fixed);a===this._length&&(this._ensureCapacity(this._length+1),this._length++);this._buffer[this._offset+a]=b};vector.prototype.shift=function(){this._checkFixed();if(0===this._length)return 0;this._length--;return this._buffer[this._offset++]}; vector.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};vector.prototype._slide=function(a){this._buffer.set(this._view(),this._offset+a);this._offset+=a};vector.prototype.unshift=function(){this._checkFixed();if(arguments.length){this._ensureCapacity(this._length+arguments.length);this._slide(arguments.length);this._offset-=arguments.length;this._length+=arguments.length;for(var a=0;a<arguments.length;a++)this._buffer[this._offset+a]=arguments[a]}}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};vector.prototype.asHasProperty=function(a,b,c){if(vector.prototype===this||!isNumeric(b))return Object.prototype.asHasProperty.call(this,a,b,c);a=toNumber(b);return 0<=a&&a<this._length}; Object.defineProperty(vector.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;if(a>this._length){this._ensureCapacity(a);for(var b=this._offset+this._length,c=this._offset+a;b<c;b++)this._buffer[b]=DEFAULT_VALUE}this._length=a}}); vector.prototype._spliceHelper=function(a,b,c,d,f){debugger;b=clamp(b,0,d.length-f);c=clamp(c,0,this._length-a);this._ensureCapacity(this._length-c+b);var e=this._offset+a+c,e=this._buffer.subarray(e,e+this._length-a-c);this._buffer.set(e,this._offset+a+b);this._length+=b-c;for(c=0;c<b;c++)this._buffer[this._offset+a+c]=d.asGetNumericProperty(f+c)}; vector.prototype.asGetEnumerableKeys=function(){if(vector.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);for(var a=[],b=0;b<this._length;b++)a.push(b);return a};',
Int32Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Int32Array")+" return vector;"))(),Uint32Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Uint32Array")+" return vector;"))(),Float64Vector=(new Function(typedArrayVectorTemplate.replace(/Int32Array/g,"Float64Array")+" return vector;"))(),Int32Vector=TypedArrayVector;Int32Vector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};
Int32Vector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};Uint32Vector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};Uint32Vector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};
Float64Vector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};Float64Vector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};
var GenericVector=function(){function a(a,d,e){a|=0;this._fixed=!!d;this._buffer=Array(a);this._defaultValue=(this._type=e)?e.defaultValue:null;this._fill(0,a,this._defaultValue)}a.applyType=function(b){function d(d,f){a.call(this,d,f,b)}d.prototype=Object.create(a.prototype);d.callable=a.callable;return d};a.callable=function(b){if(b instanceof a)return b;var d=b.asGetProperty(void 0,"length");if(void 0!==d){for(var e=new a(d,!1),f=0;f<d;f++)e.asSetNumericProperty(f,b.asGetPublicProperty(f));return e}unexpected()};
a.prototype._fill=function(a,d,e){for(var f=0;f<d;f++)this._buffer[a+f]=e};a.prototype.toString=function(){for(var a="",d=0;d<this._buffer.length;d++)a+=this._buffer[d],d<this._buffer.length-1&&(a+=",");return a};a.prototype.every=function(a,d){for(var e=0;e<this._buffer.length;e++)if(!a.call(d,this.asGetNumericProperty(e),e,this))return!1;return!0};a.prototype.filter=function(b,d){for(var e=new a,f=0;f<this._buffer.length;f++)b.call(d,this.asGetNumericProperty(f),f,this)&&e.push(this.asGetNumericProperty(f));
return e};a.prototype.some=function(a,d){2!==arguments.length?throwError("ArgumentError",Errors.WrongArgumentCountError):isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=0;e<this._buffer.length;e++)if(a.call(d,this.asGetNumericProperty(e),e,this))return!0;return!1};a.prototype.forEach=function(a,d){isFunction(a)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=0;e<this._buffer.length;e++)a.call(d,this.asGetNumericProperty(e),e,this)};a.prototype.map=
function(b,d){isFunction(b)||throwError("ArgumentError",Errors.CheckTypeFailedError);for(var e=new a,f=0;f<this._buffer.length;f++)e.push(b.call(d,this.asGetNumericProperty(f),f,this));return e};a.prototype.push=function(){this._checkFixed();for(var a=0;a<arguments.length;a++)this._buffer.push(this._coerce(arguments[a]))};a.prototype.pop=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.pop()};a.prototype.reverse=function(){this._buffer.reverse()};a.CASEINSENSITIVE=
1;a.DESCENDING=2;a.UNIQUESORT=4;a.RETURNINDEXEDARRAY=8;a.NUMERIC=16;a.prototype.sort=function(a){return this._buffer.sort(a)};a.prototype.asGetNumericProperty=function(a){checkArguments&&asCheckVectorGetNumericProperty(a,this._buffer.length);return this._buffer[a]};a.prototype._coerce=function(a){return this._type?this._type.coerce(a):void 0===a?null:a};a.prototype.asSetNumericProperty=function(a,d){checkArguments&&asCheckVectorSetNumericProperty(a,this._buffer.length,this._fixed);this._buffer[a]=
this._coerce(d)};a.prototype.shift=function(){this._checkFixed();return 0===this._buffer.length?void 0:this._buffer.shift()};a.prototype._checkFixed=function(){this._fixed&&throwError("RangeError",Errors.VectorFixedError)};a.prototype.unshift=function(){if(arguments.length){this._checkFixed();for(var a=[],d=0;d<arguments.length;d++)a.push(this._coerce(arguments[d]));this._buffer.unshift.apply(this._buffer,a)}};Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.length},
set:function(a){a>>>=0;if(a>this._buffer.length)for(var d=this._buffer.length;d<a;d++)this._buffer[d]=this._defaultValue;else this._buffer.length=a;!0}});a.prototype._spliceHelper=function(a,d,e,f,g){d=clamp(d,0,f.length-g);e=clamp(e,0,this._buffer.length-a);for(var l=[],m=0;m<d;m++)l.push(this._coerce(f.asGetNumericProperty(g+m)));this._buffer.splice.apply(this._buffer,[a,e].concat(l))};a.prototype.asGetEnumerableKeys=function(){if(a.prototype===this)return Object.prototype.asGetEnumerableKeys.call(this);
for(var b=[],d=0;d<this._buffer.length;d++)b.push(d);return b};a.prototype.asHasProperty=function(b,d,e){if(a.prototype===this||!isNumeric(d))return Object.prototype.asHasProperty.call(this,b,d,e);b=toNumber(d);return 0<=b&&b<this._buffer.length};return a}();GenericVector.prototype.asGetProperty=function(a,b,d){return"number"===typeof b?this.asGetNumericProperty(b):asGetProperty.call(this,a,b,d)};
GenericVector.prototype.asSetProperty=function(a,b,d,e){if("number"===typeof b)this.asSetNumericProperty(b,e);else return asSetProperty.call(this,a,b,d,e)};function arraySort(a,b){if(0===b.length)return a.sort();var d,e=0;b[0]instanceof Function?d=b[0]:isNumber(b[0])&&(e=b[0]);isNumber(b[1])&&(e=b[1]);a.sort(function(a,b){return asCompare(a,b,e,d)});return a}
function ArrayClass(a,b,d,e){a=new Class("Array",Array,ApplicationDomain.passthroughCallable(Array));a.extendBuiltin(e);var f=createEmptyObject();a.native={"static":{_pop:function(a){return a.pop()},_reverse:function(a){return a.reverse()},_concat:function(a,d){return a.concat.apply(a,d)},_shift:function(a){return a.shift()},_slice:function(a,d,b){return a.slice(d,b)},_unshift:function(a,d){return a.unshift.apply(a,d)},_splice:function(a,d){return a.splice.apply(a,d)},_sort:function(a,d){if(0===d.length)return a.sort();
var b,e=0;d[0]instanceof Function?b=d[0]:isNumber(d[0])&&(e=d[0]);isNumber(d[1])&&(e=d[1]);a.sort(function(a,d){return asCompare(a,d,e,b)});return a},_sortOn:function(a,d,b){isString(d)&&(d=[d]);isNumber(b)&&(b=[b]);for(var e=d.length-1;0<=e;e--){var r=Multiname.getPublicQualifiedName(d[e]);if(b[e]&16){var s="var x = toNumber(a."+r+"), y = toNumber(b."+r+");",s=b[e]&2?s+"return x < y ? 1 : (x > y ? -1 : 0);":s+"return x < y ? -1 : (x > y ? 1 : 0);",u=f[s];u||(u=f[s]=new Function("a","b",s));a.sort(u)}else a.sort(function(a,
d){return asCompare(a[r],d[r],b[e]|0)})}return a},_indexOf:function(a,d,b){return a.indexOf(d,b)},_lastIndexOf:function(a,d,b){return a.lastIndexOf(d,b)},_every:function(a,d,b){for(var e=0;e<a.length&&!0===d.call(b,a[e],e,a);e++);return!1},_filter:function(a,d,b){for(var e=[],f=0;f<a.length;f++)!0===d.call(b,a[f],f,a)&&e.push(a[f]);return e},_forEach:function(a,d,b){return a.forEach(d,b)},_map:function(a,d,b){return a.map(d,b)},_some:function(a,d,b){return a.some(d,b)}},instance:{pop:Array.prototype.pop,
push:Array.prototype.push,unshift:Array.prototype.unshift,length:{get:function(){return this.length},set:function(a){this.length=a}}}};a.coerce=function(a){return a};a.isInstanceOf=function(){return!0};return a}var XMLClass,XMLListClass,QNameClass,ASXML,XML,ASXMLList,XMLList,isXMLType,isXMLName,XMLParser;
(function(){function a(){function a(d,b){if(d.isXML)switch(d.kind){case "element":return b.element(d);case "attribute":return b.attribute(d);case "text":return b.text(d);case "cdata":return b.cdata(d);case "comment":return b.comment(d);case "processing-instruction":return b.pi(d)}else{if(d.isXMLList)return b.list(d);throw"Not implemented";}}this.encode=function(b){return a(b,{element:function(d){var b,e,f=d.name.mn.namespaces[0],g=f.prefix?f.prefix+":":"";b="<"+g+d.name.localName;var l=[];(f.prefix||
f.originalURI)&&l.push(f);g&&(l[f.prefix]=!0);for(e=d;e;){for(var m=0;m<e.inScopeNamespaces.length;m++)f=e.inScopeNamespaces[m],l[f.prefix]||(l.push(f),l[f.prefix]=!0);e=e.parent}for(m=0;m<l.length;m++)e=l[m],b=e.prefix?b+(" xmlns:"+e.prefix+'="'+e.originalURI+'"'):b+(' xmlns="'+e.originalURI+'"');for(m=0;m<d.attributes.length;m++)e=d.attributes[m],f=d.name.uri,g=d.prefix?f.prefix+":":"",b+=" "+(g+e.name.localName)+'="'+e.value+'"';if(d.children.length){b+=">";for(m=0;m<d.children.length;m++)b+=a(d.children[m],
this);b+="</"+g+d.name.mn.name+">"}else b+="/>";return b},text:function(a){return a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},attribute:function(a){return a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},cdata:function(){},comment:function(){},pi:function(){},doctype:function(){},list:function(a){for(var b="",e=0;e<a.children.length;e++)0<e&&(b+="\n"),b+=d(a.children[e],[]);return b}})}}function b(a){if("object"===typeof a&&null!==a)switch(a.kind){case "text":case "attribute":return a.value;
default:if(a.hasSimpleContent()){var e="";a.children.forEach(function(a){e+=b(a)});return e}return d(a)}else return String(a)}function d(d,b,e){return(new a(b,e,!0)).encode(d)}function e(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a.isXML)return a;if(a.isXMLList){if(1===a.length())return a.children[0];throw new TypeError(formatErrorMessage(Errors.XMLMarkupMustBeWellFormed));
}a=w.parseFromString(String(a));if(0===a.length())return a=new XML("text");if(1===a.length())return a.children[0].parent=null,a.children[0];throw"SyntaxError in ToXML";}function f(a){if(null===a)throw new TypeError(formatErrorMessage(Errors.ConvertNullToObjectError));if(void 0===a)throw new TypeError(formatErrorMessage(Errors.ConvertUndefinedToObjectError));if(a instanceof XML){var d=new XMLList(a.parent,a.name);d.append(a);return d}if(a instanceof XMLList)return a;a=new ASXML("<parent xmlns='"+z+
"'>"+String(a)+"</parent>");for(var d=new XMLList,b=0;b<a.length();b++){var e=a.children[b];e.parent=null;d.append(e)}return d}function g(a){if(void 0===a||null===a||"boolean"===typeof a||"number"===typeof a)throw"TypeError: invalid operand to ToAttributeName()";if(isXMLType(a))a=b(a);else if(a instanceof Object&&null!==a){if(a instanceof QName)return new QName(a.uri,a.localName,!0);a=b(a)}if("string"===typeof a)var d=new ASNamespace,d=new QName(d,a,!0);return d}function l(a){for(;a;){var d=a.object;
if(void 0!==d.defaultNamepsace)return d.defaultNamespace;a=a.parent}return ShumwayNamespace.createNamespace("","")}function m(a,d,b,e){a=isNumeric(d)?toNumber(d):d instanceof QName?d.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],d,b);return this.getProperty(a,e)}function p(a,d,b,e){a=isNumeric(d)?toNumber(d):d instanceof QName?d.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],d,b);this.setProperty(a,e)}function r(a,d,b){a=isNumeric(d)?toNumber(d):d instanceof QName?d.mn:new Multiname(a?a:[ShumwayNamespace.PUBLIC],
d,b);return this.hasProperty(a)}function s(a,d,b,e,f){var g=e?null:this,l=this.asGetProperty(a,d,b,!0);return!l?this.toString().asCallProperty(a?a:[ShumwayNamespace.PUBLIC],d,b,e,f):l.apply(g,f)}function u(a){var d=0,d=a.isAttribute()?d|1:d|2;a.isAnyName()&&(d|=4);a.isAnyNamespace()&&(d|=8);return d}XMLParser=function(){this.parseFromString=function(a){for(var d=new XML("element","","",""),b=[],e={beginElement:function(a,e,f,g){var l=d;b.push(l);d=new XML("element",a.namespace,a.localName,a.prefix);
for(a=0;a<e.length;++a){var m=new XML("attribute",e[a].name.namespace,e[a].name.localName,e[a].name.prefix);m.value=e[a].value;d.attributes.push(m)}e=f.namespaces;for(a=0;a<e.length;++a)f=ShumwayNamespace.createNamespace(e[a].uri,e[a].prefix),d.inScopeNamespaces.push(f);l.insert(l.length(),d);g&&(d=b.pop())},endElement:function(){d=b.pop()},text:function(a){var b=new XML("text","","",void 0);b.value=a;d.insert(d.length(),b)},cdata:function(a){var b=new XML("text","","",void 0);b.value=a;d.insert(d.length(),
b)},comment:function(){},pi:function(){},doctype:function(){}},f=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},g=function(a){return a.replace(/&([^;]+);/g,function(a,d){if("#x"===d.substring(0,2))return String.fromCharCode(parseInt(d.substring(2),16));if("#"===d.substring(0,1))return String.fromCharCode(parseInt(d.substring(1),10));switch(d){case "lt":return"<";case "gt":return">";case "amp":return"&"}throw"Unknown entity: "+d;})},l=function(a,d){var b=a.indexOf(":");if(0<=b){var e;
a:{e=a.substring(0,b);for(var f=s.length-1;0<=f;--f)if(s[f].namespaces.hasOwnProperty(e)){e=s[f].namespaces[e];break a}throw"Unknown namespace: "+e;}f=a.substring(0,b);b=a.substring(b+1);return{name:e+"::"+b,localName:b,prefix:f,namespace:e}}if(d){a:{for(b=s.length-1;0<=b;--b)if(s[b].hasOwnProperty("xmlns")){b=s[b].xmlns;break a}b=void 0}b={name:a,localName:a,prefix:"",namespace:b}}else b={name:a,localName:a,prefix:"",namespace:""};return b},m=function(a,d){var b=a.charCodeAt(d);return 10==b||13==
b||9==b||32==b},r=function(a,d){function b(){for(;e<a.length&&m(a,e);)++e}for(var e=d,f,l=[];e<a.length&&!m(a,e)&&">"!==a.charAt(e)&&"/"!==a.charAt(e);)++e;f=a.substring(d,e);for(b();e<a.length&&">"!==a.charAt(e)&&"/"!==a.charAt(e)&&"?"!==a.charAt(e);){b();for(var r="",p="";e<a.length&&!m(a,e)&&"="!==a.charAt(e);)r+=a.charAt(e),++e;b();if("="!==a.charAt(e))throw"'=' expected";++e;b();p=a.charAt(e);if('"'!==p&&"'"!==p)throw"Quote expected";var s=a.indexOf(p,++e);if(0>s)throw new "Unexpected EOF[6]";
p=a.substring(e,s);l.push({name:r,value:g(p)});e=s+1;b()}return{name:f,attributes:l,parsed:e-d}},p=0,s=[{space:"default",xmlns:"",namespaces:{xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace"}}];p<a.length;){var u=a.charAt(p),w=p;if("<"===u)switch(++w,a.charAt(w)){case "/":++w;p=a.indexOf(">",w);if(0>p)throw"Unexpected EOF[1]";w=l(a.substring(w,p),!0);e.endElement(w);s.pop();w=p+1;break;case "?":++w;u=r(a,w);if("?>"!=a.substring(w+u.parsed,w+u.parsed+2))throw"Unexpected EOF[2]";
e.pi(u.name,u.attributes);w+=u.parsed+2;break;case "!":if("--"===a.substring(w+1,w+3)){p=a.indexOf("--\x3e",w+3);if(0>p)throw"Unexpected EOF[3]";e.comment(a.substring(w+3,p));w=p+3}else if("[CDATA["===a.substring(w+1,w+8)){p=a.indexOf("]]\x3e",w+8);if(0>p)throw"Unexpected EOF[4]";e.cdata(a.substring(w+8,p));w=p+3}else if("DOCTYPE"===a.substring(w+1,w+8)){var z=a.indexOf("[",w+8),u=!1,p=a.indexOf(">",w+8);if(0>p)throw"Unexpected EOF[5]";if(0<z&&p>z){p=a.indexOf("]>",w+8);if(0>p)throw"Unexpected EOF[7]";
u=!0}w=a.substring(w+8,p+(u?1:0));e.doctype(w);w=p+(u?2:1)}else throw"Unknown !tag";break;default:u=r(a,w);z=!1;if("/>"===a.substring(w+u.parsed,w+u.parsed+2))z=!0;else if(">"!==a.substring(w+u.parsed,w+u.parsed+1))throw"Unexpected EOF[2]";for(var I={namespaces:[]},p=0;p<u.attributes.length;++p)if("xmlns:"===u.attributes[p].name.substring(0,6)){var J=u.attributes[p].name.substring(6),H=u.attributes[p].value;I.namespaces[J]=f(H);I.namespaces.push({uri:H,prefix:J});delete u.attributes[p]}else if("xmlns"===
u.attributes[p].name)J="",H=u.attributes[p].value,I.namespaces.xmlns=f(H),I.namespaces.push({uri:H,prefix:J}),delete u.attributes[p];else if("xml:"===u.attributes[p].name.substring(0,4))I[u.attributes[p].name.substring(4)]=f(u.attributes[p].value);else if("xml"===u.attributes[p].name.substring(0,3))throw"Invalid xml attribute";s.push(I);J=[];for(p=0;p<u.attributes.length;++p)u.attributes[p]&&J.push({name:l(u.attributes[p].name,!1),value:u.attributes[p].value});e.beginElement(l(u.name,!0),J,I,z);w+=
u.parsed+(z?2:1);z&&s.pop()}else{do if(++w>=a.length)break;while("<"!==a.charAt(w));p=a.substring(p,w);u=0===p.replace(/^\s+/,"").length;if(!(z=!u))a:{for(z=s.length-1;0<=z;--z)if("preserve"===s[z].space){z=!0;break a}z=!1}z&&e.text(g(p),u)}p=w}return d}};var w=new XMLParser;isXMLType=function(a){return a.isXML||a.isXMLList};var z="";isXMLName=function(a){try{new QName(a)}catch(d){return!1}return!0};XMLClass=function(a,f,w,z){ASXML=function(a){if(!(this instanceof ASXML))return a instanceof ASXML?
a:new ASXML(a);if(null===a||void 0===a)a="";var d=e(a);isXMLType(a)&&(d=d.deepCopy());return d};XML=function(a,d,b,e){void 0===a&&(a="text");void 0===d&&(d="");void 0===b&&(b="");this.init(a,d,b,e)};var D=new Class("XML",ASXML,ApplicationDomain.passthroughCallable(ASXML));D.flags=15;D.prettyIndent=2;D.extend(z);var F=XML.prototype=ASXML.prototype;F.init=function(a,d,b,e){this.name=new QName(new Multiname([new ASNamespace(e,d)],b));this.kind=a;this.parent=null;this.inScopeNamespaces=[];switch(a){case "element":this.attributes=
[];this.children=[];break;case "attribute":case "text":this.value=""}return this};F.length=function(){return!this.children?0:this.children.length};F.canHandleProperties=!0;F.deepCopy=function(){return new ASXML(d(this))};F.resolveValue=function(){return this};F.hasSimpleContent=function(){if("comment"===this.kind||"processing-instruction"===this.kind)return!1;var a=!0;this.children&&this.children.forEach(function(d){"element"===d.kind&&(a=!1)});return a};F.asGetEnumerableKeys=function(){if(F===this)return Object.prototype.asGetEnumerableKeys.call(this);
var a=[];this.children.forEach(function(d){a.push(d.name)});return a};F.setProperty=function(a,d){var e,g,m;if(a===a>>>0)throw"TypeError in XML.prototype.setProperty(): invalid property name "+a;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind))if(g=!d||!d.isXML&&!d.isXMLList||"text"===d.kind||"attribute"===d.kind?b(d):d.deepCopy(),m=new QName(a),m.isAttr)this.attributes&&(this.attributes.forEach(function(a,d,b){a.name===m.localName&&delete b[d]}),
e=new XML("attribute",m.uri,m.localName),e.value=d,e.parent=this,this.attributes.push(e));else if(isXMLName(m)||"*"===m.localName){e=void 0;for(var r=!isXMLType(g)&&"*"!==m.localName,p=this.length()-1;0<=p;p--)if((m.isAny||"element"===this.children[p].kind&&this.children[p].name.localName===m.localName)&&(null===m.uri||"element"===this.children[p].kind&&this.children[p].name.uri===m.uri))void 0!==e&&this.deleteByIndex(String(e)),e=p;if(void 0===e&&(e=this.length(),r)){var s=null===m.uri?new QName(l(f),
m):new QName(m),p=new XML("element",s.uri,s.localName,s.prefix);p.parent=this;s=s.getNamespace();this.replace(String(e),p);p.addInScopeNamespace(s)}r?(this.children[e].children=[],g=b(g),""!==g&&this.children[e].replace("0",g)):this.replace(String(e),g)}};F.asGetProperty=m;F.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;F.asSetProperty=p;F.asHasProperty=r;F.asCallProperty=s;F.getProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:resolveMultiname(this,a);return this[Multiname.getQualifiedName(b)]}if(isNumeric(a))return 0===
Number(0)?this:null;var e=new QName(a),f=new XMLList(this,e),b=u(e.mn),g=b&4,l=b&8;b&1?this.attributes&&this.attributes.forEach(function(a){(g||a.name.localName===e.localName)&&(l||a.name.uri===e.uri)&&f.append(a)}):this.children.forEach(function(a){(g||"element"===a.kind&&a.name.localName===e.localName)&&(l||"element"===a.kind&&a.name.uri===e.uri)&&f.append(a)});return f};F.hasProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(b)]}if(isNumeric(a))return 0===
Number(0)?!0:!1;var e=new QName(a),b=u(e.mn),f=b&4,g=b&8;if(b&1)return this.attributes.some(function(a){if((f||a.name.localName===e.localName)&&(g||a.name.uri===e.uri))return!0});if(this.children.some(function(a){if((f||"element"===a.kind&&a.name.localName===e.localName)&&(g||"element"===a.kind&&a.name.uri===e.uri))return!0}))return!0;b=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(b)]};F.delete=function(){notImplemented("XML.[[Delete]]")};F.deleteByIndex=
function(a){var d=a>>>0;if(String(d)!==String(a))throw"TypeError in XML.prototype.deleteByIndex(): invalid index "+a;if(a<this.length()&&this.children[a]){this.children[a].parent=null;delete this.children[a];for(q=d+1;q<this.length();q++)this.children[q-1]=this.children[q];this.children.length-=1}};F.isXML=!0;F.insert=function(a,d){var b,e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){b=a>>>0;if(String(a)!==String(b))throw"TypeError in XML.prototype.insert(): invalid property name "+
a;if("element"===this.kind)for(e=this;e;){if(e===d)throw"Error in XML.prototype.insert()";e=e.parent}if(this.isXMLList){if(e=this.length(),0===e)return}else e=1;for(var f=this.length()-1;f>=b;f--)this[f+e]=this[f];if(this.isXMLList){e=d.length();for(f=0;f<e;f++)d.children[f].parent=this,this[b+f]=d[f]}else d.parent=this,this.children[b]=d}};F.replace=function(a,d){var e;if(!("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)){e=a>>>0;if(String(a)!==
String(e))throw"TypeError in XML.prototype.replace(): invalid name "+a;e>=this.length()&&(a=String(this.length()));if("element"===d.kind)for(e=this;e;){if(e===d)throw"Error in XML.prototype.replace()";e=e.parent}"element"===d.kind||"text"===d.kind||"comment"===d.kind||"processing-instruction"===d.kind?(d.parent=this,this[a]&&(this.children[a].parent=null),this.children[a]=d):this.isXMLList?(this.deleteByIndex(a),this.insert(a,d)):(e=b(d),t=new XML,t.parent=this,t.value=e,this[a]&&(this.children[a].parent=
null),this.children[a]=t)}};F.addInScopeNamespace=function(a){var d;d=this;if(!("text"===d.kind||"comment"===d.kind||"processing-instruction"===d.kind||"attribute"===d.kind)&&void 0!==a.prefix&&!(""===a.prefix&&""===d.name.uri)){var b=null;d.inScopeNamespaces.forEach(function(d){d.prefix===a.prefix&&(b=d)});null!==b&&b.uri!==a.uri&&d.inScopeNamespaces.forEach(function(e,f){e.prefix===b.prefix&&(d.inScopeNamespaces[f]=a)});d.name.prefix===a.prefix&&(d.name.prefix=void 0);d.attributes.forEach(function(d){d.name.prefix===
a.name.prefix&&(d.name.prefix=void 0)})}};F.descendants=function(a){a=new QName(a);var d=new XMLList;if("element"!==this.kind)return d;a.isAttr?this.attributes.forEach(function(b){(a.isAny||a.localName===b.name.localName)&&d.append(b)}):this.children.forEach(function(b){(a.isAny||a.localName===b.name.localName)&&d.append(b)});this.children.forEach(function(b){d.append(b.descendants(a))});return d};F.comments=function(){var a=new XMLList(this,null);this.children.forEach(function(d){"comment"===d.kind&&
a.append(d)});return a};F.text=function(){var a=new XMLList(this,null);this.children.forEach(function(d){"text"===d.kind&&a.append(d)});return a};D.native={"static":{ignoreComments:{get:function(){return getBitFlags(D.flags,1)},set:function(a){D.flags=setBitFlags(D.flags,1,a)}},ignoreProcessingInstructions:{get:function(){return getBitFlags(D.flags,2)},set:function(a){D.flags=setBitFlags(D.flags,2,a)}},ignoreWhitespace:{get:function(){return getBitFlags(D.flags,4)},set:function(a){D.flags=setBitFlags(D.flags,
4,a)}},prettyPrinting:{get:function(){return getBitFlags(D.flags,8)},set:function(a){D.flags=setBitFlags(D.flags,8,a)}},prettyIndent:{get:function(){return D.prettyIndent},set:function(a){D.prettyIndent=a}}},instance:{toString:function(){return b(this)},hasOwnProperty:function(a){somewhatImplemented("XML.hasOwnProperty");return this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XML.propertyIsEnumerable")},addNamespace:function(){notImplemented("XML.addNamespace")},appendChild:function(a){var d=
this.getProperty("*");d.setProperty(d.length(),a);return this},attribute:function(a){return this.getProperty(g(a))},attributes:function(){return this.getProperty(g("*"))},child:function(a){return this.getProperty(a)},childIndex:function(){notImplemented("XML.childIndex")},children:function(){var a=new XMLList;Array.prototype.push.apply(a.children,this.children);return a},comments:function(){return this.comments()},contains:function(){notImplemented("XML.contains")},copy:function(){return this.deepCopy()},
descendants:function(a){void 0===a&&(a="*");return this.descendants(a)},elements:function(a){var d=!1;void 0===a&&(a="*",d=!0);a=new QName(a);var b=new XMLList(this.parent,a);this.children.forEach(function(e){"element"===e.kind&&((d||e.name.localName===a.localName)&&(null===a.uri||"element"===e.kind&&e.name.uri===a.uri))&&b.append(e)});return b},hasComplexContent:function(){notImplemented("XML.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},inScopeNamespaces:function(){notImplemented("XML.inScopeNamespaces")},
insertChildAfter:function(){notImplemented("XML.insertChildAfter")},insertChildBefore:function(){notImplemented("XML.insertChildBefore")},localName:function(){return this.name.localName},name:function(){return this.name},_namespace:function(){somewhatImplemented("XML._namespace()");return this.name.uri},namespaceDeclarations:function(){return new XMLList},nodeKind:function(){return this.kind},normalize:function(){notImplemented("XML.normalize")},parent:function(){notImplemented("XML.parent")},processingInstructions:function(){notImplemented("XML.processingInstructions")},
prependChild:function(){notImplemented("XML.prependChild")},removeNamespace:function(){notImplemented("XML.removeNamespace")},replace:function(a,d){var b,e;if("text"===this.kind||"comment"===this.kind||"processing-instruction"===this.kind||"attribute"===this.kind)return this;b=isXMLType(d)?d.deepCopy():d.toString();if(String(a)===String(a>>>0))return this.replace(a,b),this;n=new QName(a);e=void 0;for(k=this.length()-1;0<=k;k--){var f=this.children[k];if(n.isAny||"element"===f.kind&&f.name.localName===
n.localName&&(null===n.uri||"element"===f.kind&&f.name.uri===n.uri))void 0!==e&&this.deleteByIndex(String(e)),e=k}void 0!==e&&this.replace(e.toString(),b);return this},setChildren:function(){notImplemented("XML.setChildren")},setLocalName:function(){notImplemented("XML.setLocalName")},setName:function(){notImplemented("XML.setName")},setNamespace:function(){notImplemented("XML.setNamespace")},text:function(){return this.text()},toXMLString:function(){return d(this)},notification:function(){notImplemented("XML.notification")},
setNotification:function(){notImplemented("XML.setNotification")}}};return D};XMLListClass=function(a,l,u,w){ASXMLList=function(a){if(!(this instanceof ASXMLList)){if(null===a||void 0===a)a="";return f(a)}if(null===a||void 0===a)a="";if(a.isXMLList){var d=new XMLList;d.append(a);a=d}else a=f(a);return a};XMLList=function(a,d){this.targetObject=a?a:null;this.targetProperty=d?d:null;this.children=[]};a=new Class("XMLList",ASXMLList,ApplicationDomain.passthroughCallable(ASXMLList));a.extend(w);var z=
XMLList.prototype=ASXMLList.prototype;z.canHandleProperties=!0;z.hasSimpleContent=function(){if(0===this.length())return!0;if(1===this.length())return e(this).hasSimpleContent();var a=!0;this.children.forEach(function(d){"element"===d.kind&&(a=!1)});return a};z.asGetProperty=m;z.asGetResolvedStringProperty=asGetResolvedStringPropertyFallback;z.asSetProperty=p;z.asHasProperty=r;z.asCallProperty=s;z.setProperty=function(a,d){var e,f,l;e=this;f=a>>>0;if(String(a)===String(f)){l=this.targetObject;var m=
this.targetProperty;if(null!==l){if(l=l.resolveValue(),null===l)return}else l=null;if(f>=e.length()){if(l&&l.isXMLList){if(1!==l.length)return;l=l.children[0]}if(l&&"element"!==l.kind)return;var r=new XML;r.parent=l;r.name=e.targetProperty;if(null===m||"*"===m.localName)r.name=null,r.kind="text";else if(m.isAttr){if(0<l.getProperty(r.name).length())return;l.kind="attribute"}else r.kind="element";f=e.length();if("attribute"!==r.kind){if(null!==l){if(0<f)for(m=0;m<l.length()-1&&l.children[m]!==e.children[f-
1];)m++;else m=l.length()-1;l.insert(String(m+1),r)}d.isXML?r.name=d.name:d.isXMLList&&(r.name=d.targetProperty)}e.append(r)}if(!d.isXML&&!d.isXMLList||"text"===d.kind||"attribute"===d.kind)d=b(d);if("attribute"===e.children[f].kind)l=g(e.children[f].name),e.children[f].parent.setProperty(l,d),l=e.children[f].parent.getProperty(l),e.children[f]=l.children[0];else if(d.isXMLList){var p=d.deepCopy(),s=e.children[f].parent;if(null!==s){var u;s.children.some(function(a,d){if(a==e.children[f])return u=
d,!0});s.replace(u,p);p.children.forEach(function(a,d){p.children[d]=s.children[u>>>0+d]})}if(0===p.length())for(m=e+1;m<e.length()-1;m++)e.children[String(m-1)]=e.children[m];else for(m=e.length()-1;m>=f+1;m--)e.children[String(m+p.length()-1)]=e.children[m];for(m=0;m<p.length();m++)e.children[f+m]=p.children[m]}else d.isXML||"text"===(k=e.children[f].kind)||"comment"===k||"processing-instruction"===k?(s=e.children[f].parent,null!==s&&(s.children.some(function(a,d){if(a==e.children[f])return u=d,
!0}),s.replace(u,d),d=s.children[u]),"string"===typeof d?(l=new XML("text"),l.parent=e,l.value=d,e.children[f]=l):e.children[f]=d):e.children[f].setProperty("*",d)}else if(1>=e.length()){if(0===e.length()){l=e.resolveValue();if(null===l||1!==l.length())return;e.append(l)}e.children[0].setProperty(a,d)}};z.getProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:resolveMultiname(this,a);return this[Multiname.getQualifiedName(b)]}if(String(a)===String(a>>>0))return this.children[a];var b=new QName(a),
e=new XMLList(this,b);this.children.forEach(function(d){"element"===d.kind&&(d=d.getProperty(a),0<d.length()&&e.append(d))});return e};z.hasProperty=function(a,d){if(d){var b=Multiname.isQName(a)?a:resolveMultiname(this,a);return!!this[Multiname.getQualifiedName(b)]}if(String(a)===String(a>>>0))return!!this.children[a];new QName(a);return this.children.some(function(d){if(0<d.getProperty(a).length())return!0})};z.delete=function(){};z.append=function(a){if(a.isXMLList){if(this.targetObject=a.targetObject,
this.targetProperty=a.targetProperty,0!==a.length())for(var d=0;d<a.length();d++)this.children.push(a.children[d])}else a.isXML&&this.children.push(a)};z.length=function(){return this.children.length};z.resolve=function(){var a=this.targetObject.resolveValue();if(null===a)return null;var d=this.targetObject.getProperty(this.targetProperty);if(0===a.length)return notImplemented("XMLList.resolve"),a.setProperty(this.targetProperty,""),d=a.getProperty(this.targetProperty)};z.deepCopy=function(){var a=
new XMLList;this.children.forEach(function(d,b){a.children[b]=d.deepCopy()});return a};z.descendants=function(a){var d=new XMLList(null);this.children.forEach(function(b){"element"===b.kind&&d.append(b.descendants(a))});return d};z.resolveValue=function(){if(0<this.length())return this;var a=this.name,d=this.targetObject,b=this.targetProperty;if(null===d||null===b||a.isAttr||a.isAny)return null;a=d.resolveValue();if(null===a)return null;d=a.getProperty(b);if(0===d.length()){if(a.isXMLList&&1<a.length())return null;
a.setProperty(b,"");d=a.getProperty(b)}return d};z.asGetEnumerableKeys=function(){if(z===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[];this.children.forEach(function(d,b){a.push(b)});return a};a.native={instance:{init:function(){}}};z.isXMLList=!0;a.native={"static":{},instance:{toString:function(){return b(this)},hasOwnProperty:function(a){somewhatImplemented("XMLList.hasOwnProperty");return this.hasProperty(a)},propertyIsEnumerable:function(){notImplemented("XMLList.propertyIsEnumerable")},
attribute:function(a){return this.getProperty(g(a))},attributes:function(){return this.getProperty(g("*"))},child:function(){notImplemented("XMLList.child")},children:function(){for(var a=new XMLList,d=0;d<this.children.length;d++)Array.prototype.push.apply(a.children,this.children[d].children);return a},comments:function(){var a=new XMLList(this,null);this.children.forEach(function(d){"element"===d.kind&&a.append(d.comments())});return a},contains:function(a){for(var d=0;d<this.children.length;d++)if(this.children[d]===
a)return!0;return!1},copy:function(){return this.deepCopy()},descendants:function(a){return this.descendants(void 0===a?"*":a)},elements:function(a){void 0===a&&(a="*");a=new QName(a);var d=new XMLList(this,a);this.children.forEach(function(a){"element"===a.kind&&d.append(a.comments())});return d},hasComplexContent:function(){notImplemented("XMLList.hasComplexContent")},hasSimpleContent:function(){return this.hasSimpleContent()},length:function(){return this.children.length},name:function(){return e(this).name},
normalize:function(){notImplemented("XMLList.normalize")},parent:function(){notImplemented("XMLList.parent")},processingInstructions:function(){notImplemented("XMLList.processingInstructions")},text:function(){var a=new XMLList(this,null);this.children.forEach(function(d){("text"===d.kind||"element"===d.kind)&&a.append(d.text())});return a},toXMLString:function(){return d(this)},addNamespace:function(){notImplemented("XMLList.addNamespace")},appendChild:function(a){e(this).appendChild(a);return this},
childIndex:function(){notImplemented("XMLList.childIndex")},inScopeNamespaces:function(){notImplemented("XMLList.inScopeNamespaces")},insertChildAfter:function(){notImplemented("XMLList.insertChildAfter")},insertChildBefore:function(){notImplemented("XMLList.insertChildBefore")},nodeKind:function(){return e(this).kind},_namespace:function(){notImplemented("XMLList._namespace")},localName:function(){notImplemented("XMLList.localName")},namespaceDeclarations:function(){somewhatImplemented("XMLList.prototype.namespaceDeclarations()");
return new XMLList},prependChild:function(){notImplemented("XMLList.prependChild")},removeNamespace:function(){notImplemented("XMLList.removeNamespace")},replace:function(a,d){e(this).replace(a,d);return this},setChildren:function(){notImplemented("XMLList.setChildren")},setLocalName:function(){notImplemented("XMLList.setLocalName")},setName:function(){notImplemented("XMLList.setName")},setNamespace:function(){notImplemented("XMLList.setNamespace")}}};return a};QNameClass=function(a,d,e,f){QName=
function F(a,e,f){if(!(this instanceof F))return void 0===e&&a instanceof F?a:new F(a,e);void 0===e&&(e=a,a=void 0);if("string"===typeof a||a instanceof F)a=new ASNamespace(a);e instanceof F?a=void 0===a?e.mn:new Multiname([a],e.mn.getName()):e instanceof Multiname?a=void 0===a?e.isQName()||e.isAnyName()||e.isAnyNamespace()?e:new Multiname([l(d)],e.getName(),e.flags):new Multiname([a],e.getName(),e.flags):"*"===e?a=new Multiname([],null,f?Multiname.ATTRIBUTE:0):"@*"===e?a=new Multiname([],null,Multiname.ATTRIBUTE):
(a=void 0===a?l(d):a,a=void 0===e?new Multiname([a],""):new Multiname([a],b(e),f?Multiname.ATTRIBUTE:0));this.mn=a;this.isAny=a.isAnyName();this.isAnyNamespace=a.isAnyNamespace();this.isAttr=a.isAttribute()};a=new Class("QName",QName,ApplicationDomain.passthroughCallable(QName));a.extend(f);QNp=QName.prototype;defineNonEnumerableGetter(QNp,"localName",function(){this._localName||(this._localName=this.isAny?"*":this.mn.getName());return this._localName});defineNonEnumerableGetter(QNp,"uri",function(){if(!this._uri){var a=
this.mn.namespaces[0];this._uri=a&&a.originalURI?a.originalURI:this.isAny||this.isAnyNamespace?null:""}return this._uri});defineNonEnumerableGetter(QNp,"prefix",function(){return this.mn.namespaces[0].prefix});defineNonEnumerableSetter(QNp,"prefix",function(a){this.mn.namespaces[0].prefix=a});QNp.getNamespace=function(a){if(null===this.uri)throw"TypeError in QName.prototype.getNamespace()";a||(a=[]);for(var d,b=0;b<a.length;b++)this.uri===a[b].uri&&(d=a[b]);d||(d=ShumwayNamespace.createNamespace(this.uri));
return d};a.native={"static":{},instance:{localName:{get:function(){return this.localName}},uri:{get:function(){return this.uri}}}};return a}})();var JSON;JSON||(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var d=m[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,e){var f,m,z,A,v=g,B,y=e[a];y&&"object"===typeof y&&"function"===typeof y.toJSON&&(y=y.toJSON(a));"function"===typeof p&&(y=p.call(e,a,y));switch(typeof y){case "string":return b(y);case "number":return isFinite(y)?String(y):"null";case "boolean":case "null":return String(y);
case "object":if(!y)return"null";g+=l;B=[];if("[object Array]"===Object.prototype.toString.apply(y)){A=y.length;for(f=0;f<A;f+=1)B[f]=d(f,y)||"null";z=0===B.length?"[]":g?"[\n"+g+B.join(",\n"+g)+"\n"+v+"]":"["+B.join(",")+"]";g=v;return z}if(p&&"object"===typeof p){A=p.length;for(f=0;f<A;f+=1)"string"===typeof p[f]&&(m=p[f],(z=d(m,y))&&B.push(b(m)+(g?": ":":")+z))}else for(m in y)Object.prototype.hasOwnProperty.call(y,m)&&(z=d(m,y))&&B.push(b(m)+(g?": ":":")+z);z=0===B.length?"{}":g?"{\n"+g+B.join(",\n"+
g)+"\n"+v+"}":"{"+B.join(",")+"}";g=v;return z}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,l,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,e){var f;l=g="";if("number"===typeof e)for(f=0;f<e;f+=1)l+=" ";else"string"===typeof e&&(l=e);if((p=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function b(a,e){var f,g,l=a[e];if(l&&"object"===typeof l)for(f in l)Object.prototype.hasOwnProperty.call(l,f)&&(g=b(l,f),void 0!==g?l[f]=g:delete l[f]);return d.call(a,e,l)}var f;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof d?b({"":f},""):f;throw new SyntaxError("JSON.parse");})})();
var AMFUtils=function(){function a(a,d){if(65535<d.length)throw"AMF short string exceeded";if(d.length){var b=utf8decode(d);a.writeByte(b.length>>8&255);a.writeByte(b.length&255);for(var e=0;e<b.length;e++)a.writeByte(b[e])}else a.writeByte(0),a.writeByte(0)}function b(a){var d=a.readByte()<<8|a.readByte();if(!d)return"";for(var b=new Uint8Array(d),e=0;e<d;e++)b[e]=a.readByte();return utf8encode(b)}function d(a,d){var b=new ArrayBuffer(8),e=new DataView(b);e.setFloat64(0,d,!1);for(var f=0;f<b.byteLength;f++)a.writeByte(e.getUint8(f))}
function e(a){for(var d=new ArrayBuffer(8),b=new DataView(d),e=0;e<d.byteLength;e++)b.setUint8(e,a.readByte());return b.getFloat64(0,!1)}function f(a){var d=a.readByte();if(0===(d&128))return d;var b=a.readByte();if(0===(b&128))return(d&127)<<7|b;var e=a.readByte();if(0===(e&128))return(d&127)<<14|(b&127)<<7|e;a=a.readByte();return(d&127)<<22|(b&127)<<15|(e&127)<<8|a}function g(a,d){if(0===(d&4294967168))a.writeByte(d&127);else if(0===(d&4294950912))a.writeByte(128|d>>7&127),a.writeByte(d&127);else if(0===
(d&4292870144))a.writeByte(128|d>>14&127),a.writeByte(128|d>>7&127),a.writeByte(d&127);else if(0===(d&3221225472))a.writeByte(128|d>>22&127),a.writeByte(128|d>>15&127),a.writeByte(128|d>>8&127),a.writeByte(d&255);else throw"AMF3 U29 range";}function l(a,d){var b=f(a);if(1===b)return"";var e=d.stringsCache||(d.stringsCache=[]);if(0===(b&1))return e[b>>1];for(var b=b>>1,g=new Uint8Array(b),l=0;l<b;l++)g[l]=a.readByte();b=utf8encode(g);e.push(b);return b}function m(a,d,b){if(""===d)a.writeByte(1);else{b=
b.stringsCache||(b.stringsCache=[]);var e=b.indexOf(d);if(0<=e)g(a,e<<1);else{b.push(d);d=utf8decode(d);g(a,1|d.length<<1);for(b=0;b<d.length;b++)a.writeByte(d[b])}}}function p(a,d){var b=a.readByte();switch(b){case 1:return null;case 0:break;case 2:return!1;case 3:return!0;case 4:return f(a);case 5:return e(a);case 6:return l(a,d);case 8:return new Date(e(a));case 10:var g=f(a);if(0===(g&1))return d.objectsCache[g>>1];if(0!==(g&4))throw"AMF3 Traits-Ext is not supported";var m;if(0===(g&2))b=d.traitsCache[g>>
2],m=b.class;else{var b={},r=l(a,d);m=(b.className=r)&&u.names[r];b.class=m;b.isDynamic=0!==(g&8);b.members=[];for(var s=m&&m.instanceBindings.slots,r=0,g=g>>4;r<g;r++){for(var F=l(a,d),E=null,g=1;s&&g<s.length;g++)if(s[g].name.name===F){E=s[g];break}b.members.push(E?Multiname.getQualifiedName(E.name):Multiname.getPublicQualifiedName(F))}(d.traitsCache||(d.traitsCache=[])).push(b)}m=m?m.createInstance():{};(d.objectsCache||(d.objectsCache=[])).push(m);for(r=0;r<b.members.length;r++)s=p(a,d),m[b.members[r]]=
s;if(b.isDynamic)for(;;){r=l(a,d);if(!r.length)break;s=p(a,d);m.asSetPublicProperty(r,s)}return m;case 9:g=f(a);if(0===(g&1))return d.objectsCache[g>>1];m=[];(d.objectsCache||(d.objectsCache=[])).push(m);for(b=g>>1;;){r=l(a,d);if(!r.length)break;s=p(a,d);m.asSetPublicProperty(r,s)}for(r=0;r<b;r++)s=p(a,d),m.asSetPublicProperty(r,s);return m;default:throw"AMF3 Unknown marker "+b;}}function r(a,d,b){b=b.objectsCache||(b.objectsCache=[]);var e=b.indexOf(d);if(0>e)return b.push(d),!1;g(a,e<<1);return!0}
function s(a,b,e){switch(typeof b){case "boolean":a.writeByte(b?3:2);break;case "number":b===(b|0)?(a.writeByte(4),g(a,b)):(a.writeByte(5),d(a,b));break;case "undefined":a.writeByte(0);break;case "string":a.writeByte(6);m(a,b,e);break;case "object":if(null===b)a.writeByte(1);else if(Array.isArray(b)){a.writeByte(9);if(r(a,b,e))break;for(var f=0;f in b;)++f;g(a,f<<1|1);forEachPublicProperty(b,function(d,b){if(!isNumeric(d)||!(0<=d&&d<f))m(a,d,e),s(a,b,e)});m(a,"",e);for(var l=0;l<f;l++)s(a,b[l],e)}else if(b instanceof
Date){a.writeByte(8);if(r(a,b,e))break;g(a,1);d(a,b.valueOf())}else{a.writeByte(10);if(r(a,b,e))break;var l=!0,p=b.class;if(p){var l=!p.classInfo.instanceInfo.isSealed(),D=u.classes.get(p)||"",F,E=e.traitsCache||(e.traitsCache=[]),C=e.traitsInfos||(e.traitsInfos=[]),K=E.indexOf(p);if(0>K){var Q=p.instanceBindings.slots;F=[];for(var K=[],R=1;R<Q.length;R++){var T=Q[R];T.name.getNamespace().isPublic()&&(F.push(Multiname.getQualifiedName(T.name)),K.push(T.name.name))}E.push(p);C.push(F);p=K.length;g(a,
(l?11:3)+(p<<4));m(a,D,e);for(R=0;R<p;R++)m(a,K[R],e)}else F=C[K],p=F.length,g(a,1+(K<<2));for(R=0;R<p;R++)s(a,b[F[R]],e)}else g(a,11),m(a,"",e);l&&(forEachPublicProperty(b,function(d,b){m(a,d,e);s(a,b,e)}),m(a,"",e))}}}var u={classes:new WeakMap,names:Object.create(null)};return{encodings:[{write:function(b,e){switch(typeof e){case "boolean":b.writeByte(1);b.writeByte(e?1:0);break;case "number":b.writeByte(0);d(b,e);break;case "undefined":b.writeByte(6);break;case "string":b.writeByte(2);a(b,e);
break;case "object":null===e?b.writeByte(5):(Array.isArray(e)?(b.writeByte(8),b.writeByte(e.length>>>24&255),b.writeByte(e.length>>16&255),b.writeByte(e.length>>8&255),b.writeByte(e.length&255),forEachPublicProperty(e,function(d,e){a(b,d);this.write(b,e)},this)):(b.writeByte(3),forEachPublicProperty(e,function(d,e){a(b,d);this.write(b,e)},this)),b.writeByte(0),b.writeByte(0),b.writeByte(9))}},read:function(a){var d=a.readByte();switch(d){case 0:return e(a);case 1:return!!a.readByte();case 2:return b(a);
case 3:for(d={};;){var f=b(a);if(!f.length)break;var g=this.read(a);d.asSetPublicProperty(f,g)}if(9!==a.readByte())throw"AMF0 End marker is not found";return d;case 5:return null;case 6:break;case 8:d=[];for(d.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();;){f=b(a);if(!f.length)break;g=this.read(a);d.asSetPublicProperty(f,g)}if(9!==a.readByte())throw"AMF0 End marker is not found";return d;case 10:d=[];d.length=a.readByte()<<24|a.readByte()<<16|a.readByte()<<8|a.readByte();
for(f=0;f<d.length;f++)d[f]=this.read(a);return d;case 17:return p(a,{});default:throw"AMF0 Unknown marker "+d;}}},null,null,{write:function(a,d){s(a,d,{})},read:function(a){return p(a,{})}}],aliasesCache:u}}();function ProxyClass(a,b,d,e){function f(){somewhatImplemented("Proxy")}a=new Class("Proxy",f,ApplicationDomain.coerceCallable(f));a.extendBuiltin(e);return a}var proxyTrapQns={getProperty:null,setProperty:null,hasProperty:null,callProperty:null},name;
for(name in proxyTrapQns)proxyTrapQns[name]="method_"+Multiname.getQualifiedName(new Multiname([ShumwayNamespace.PROXY],name));var VM_IS_PROXY="vm is proxy",VM_CALL_PROXY="vm call proxy";function isProxyObject(a){return a["vm is proxy"]}function nameFromQualifiedName(a){if(isNumeric(a))return a;a=Multiname.fromQualifiedName(a);return void 0===a?void 0:a.name}function hasNonProxyingCaller(){for(var a=arguments.callee,b=0;5>b&&a;b++){if(a===nonProxyingHasProperty)return!0;a=a.caller}return!1}
function installProxyClassWrapper(a){var b=a.instanceConstructor;a.instanceConstructor=function(){var a=Object.create(b.prototype),e=Proxy.create({get:function(b,e){if("vm is proxy"===e)return!0;if("vm call proxy"===e)return function(e,g,l){g=(g=Multiname.isQName(e)?e:resolveMultiname(a,e))?Multiname.getQualifiedName(g):Multiname.getPublicQualifiedName(e.name);if(!nameInTraits(a,g))return a[proxyTrapQns.callProperty](e.name,l);if(a["vm open methods"]&&a["vm open methods"][g])return a["vm open methods"][g].apply(b,
l)};if(!hasNonProxyingCaller()){var l=nameFromQualifiedName(e);if(void 0!==l&&!nameInTraits(a,e))return a[proxyTrapQns.getProperty](l)}return a["vm open methods"]&&a["vm open methods"][e]?bindSafely(a["vm open methods"][e],b):a[e]},set:function(b,e,l){if(!hasNonProxyingCaller()&&(b=nameFromQualifiedName(e),void 0!==b&&!nameInTraits(a,e))){a[proxyTrapQns.setProperty](b,l);return}a[e]=l},has:function(b){if(!hasNonProxyingCaller()){var e=nameFromQualifiedName(b);if(void 0!==e&&!nameInTraits(a,b))return a[proxyTrapQns.hasProperty](e)}return b in
a},hasOwn:function(b){if(!hasNonProxyingCaller()){var e=nameFromQualifiedName(b);if(void 0!==e&&!nameInTraits(a,b))return a[proxyTrapQns.hasProperty](e)}return!!Object.getOwnPropertyDescriptor(a,b)},enumerate:function(){notImplemented("enumerate")},keys:function(){notImplemented("keys")}},b.prototype);b.apply(e,sliceArguments(arguments,0));return e}}
function DictionaryClass(a,b,d,e){function f(a){this.weakKeys=a;this.map=new WeakMap;a||(this.keys=[]);this.primitiveMap=createEmptyObject()}function g(a){if("string"===typeof a||"number"===typeof a)return a}a=new Class("Dictionary",f,ApplicationDomain.passthroughCallable(f));a.extendNative(e,f);var l=f.prototype;defineNonEnumerableProperty(l,"asGetProperty",function(a,d){var b=g(d);return void 0!==b?this.primitiveMap[b]:this.map.get(Object(d))});defineNonEnumerableProperty(l,"asGetResolvedStringProperty",
asGetResolvedStringPropertyFallback);defineNonEnumerableProperty(l,"asSetProperty",function(a,d,b,e){a=g(d);void 0!==a?this.primitiveMap[a]=e:(this.map.set(Object(d),e),!this.weakKeys&&0>this.keys.indexOf(d)&&this.keys.push(d))});defineNonEnumerableProperty(l,"asCallProperty",function(){notImplemented("asCallProperty")});defineNonEnumerableProperty(l,"asHasProperty",function(a,d){var b=g(d);return void 0!==b?b in this.primitiveMap:this.map.has(Object(d))});defineNonEnumerableProperty(l,"asDeleteProperty",
function(a,d){var b=g(d);void 0!==b&&delete this.primitiveMap[b];this.map.delete(Object(d));var e;!this.weakKeys&&0<=(e=this.keys.indexOf(d))&&this.keys.splice(e,1);return!0});defineNonEnumerableProperty(l,"asGetEnumerableKeys",function(){if(l===this)return Object.prototype.asGetEnumerableKeys.call(this);var a=[],d;for(d in this.primitiveMap)a.push(d);return this.weakKeys?a:a.concat(this.keys)});a.native={instance:{init:function(){}}};return a}
function debugBreak(a){debugger;print("\u001b[91mdebugBreak: "+a+"\u001b[0m")}
var ASNamespace,natives=function(){function a(a,d){var b;if(a){var e="Vector$"+a.classInfo.instanceInfo.name.name;switch(e){case "Vector$int":b=Int32Vector;break;case "Vector$uint":b=Uint32Vector;break;case "Vector$Number":b=Float64Vector;break;case "Vector$Object":b=GenericVector;break;default:unexpected()}}else b=GenericVector.applyType(null);var f=b.prototype,g=new Class(e,b,p(b.callable));b===GenericVector&&(g.applyType=function(){return g});g.extendWrapper(d,b);g.native={instance:{fixed:{get:function(){return this._fixed},
set:function(a){this._fixed=a}},length:{get:function(){return this.length},set:function(a){this.length=a}},push:f.push,pop:f.pop,shift:f.shift,unshift:f.unshift,_reverse:f.reverse,_filter:f.filter,_map:f.map,newThisType:function(){return new g.instanceConstructor},_spliceHelper:function(a,d,b,e,f){return this._spliceHelper(a,d,b,e,f)}},"static":{_some:function(a,d,b){return a.some(d,b)},_every:function(a,d,b){return a.every(d,b)},_forEach:function(a,d,b){return a.forEach(d,b)},_sort:arraySort}};g.vectorType=
a;g.coerce=function(a){return a};g.isInstanceOf=function(){return!0};g.isInstance=function(a){return null===a||"object"!==typeof a?!1:!this.instanceConstructor.vectorType&&a.class.vectorType?!0:this.instanceConstructor.prototype.isPrototypeOf(a)};return g}function b(a){return a|0}function d(a){return Object(a|0)}function e(a){return a>>>0}function f(a){return Object(a>>>0)}function g(a){var d={__glue__:{script:{instance:{message:"public message",name:"public name"}},"native":{instance:{getStackTrace:function(){somewhatImplemented("Error.getStackTrace()");
return AVM2.getStackTrace()}},"static":{getErrorMessage:getErrorMessage}}}};return function(b,e,f,g){b=new Class(a,f);b.extend(g);"Error"===a&&(b.link(d),b.linkNatives(d));return b}}function l(a,d,b,e){a=new Class("RegExp",XRegExp,p(XRegExp));a.extendBuiltin(e);l.exec=function(){var a=this.exec.apply(this,arguments);if(!a)return a;for(var d=Object.keys(a),b=0;b<d.length;b++){var e=d[b];isNumeric(e)||void 0===a[e]&&(a[e]="")}publicizeProperties(a);return a};l.test=function(){return null!==this.exec.apply(this,
arguments)};a.native={instance:{global:{get:function(){return this.global}},source:{get:function(){return this.source}},ignoreCase:{get:function(){return this.ignoreCase}},multiline:{get:function(){return this.multiline}},lastIndex:{get:function(){return this.lastIndex},set:function(a){this.lastIndex=a}},dotall:{get:function(){return this.dotall}},extended:{get:function(){return this.extended}},exec:l.exec,test:l.test}};return a}function m(a){return function(){return a}}var p=ApplicationDomain.passthroughCallable;
return{print:m(print),notImplemented:m(notImplemented),debugBreak:m(debugBreak),bugzilla:m(function(a){switch(a){case 574600:return!0}return!1}),decodeURI:m(decodeURI),decodeURIComponent:m(decodeURIComponent),encodeURI:m(encodeURI),encodeURIComponent:m(encodeURIComponent),isNaN:m(isNaN),isFinite:m(isFinite),parseInt:m(parseInt),parseFloat:m(parseFloat),escape:m(escape),unescape:m(unescape),isXMLName:m("undefined"!==typeof isXMLName?isXMLName:function(){notImplemented("Chrome doesn't support isXMLName.")}),
Function:Function,String:String,Array:Array,Number:Number,Boolean:Boolean,Math:Math,Date:Date,RegExp:RegExp,Object:Object,ObjectClass:function(){var a=new Class("Object",Object,p(Object));a.native={instance:{length:{get:function(){return this.length},set:function(a){this.length=a}},isPrototypeOf:Object.prototype.isPrototypeOf,hasOwnProperty:function(a){if(void 0===a)return!1;a=Multiname.getPublicQualifiedName(a);return Object.prototype.hasOwnProperty.call(this,a)?!0:Object.getPrototypeOf(this).hasOwnProperty(a)},
propertyIsEnumerable:function(a){if(void 0===a)return!1;a=Multiname.getPublicQualifiedName(a);return Object.prototype.propertyIsEnumerable.call(this,a)}},"static":{_setPropertyIsEnumerable:function(a,d){d=Multiname.getPublicQualifiedName(d);var b=Object.getOwnPropertyDescriptor(a,d);b.enumerable=!1;Object.defineProperty(a,d,b)}}};a.dynamicPrototype=a.traitsPrototype=Object.prototype;a.setDefaultProperties();a.defaultValue=null;a.coerce=function(a){return asCoerceObject(a)};a.isInstanceOf=function(a){return null===
a?!1:!0};a.isInstance=function(a){return null===a||void 0===a?!1:!0};return a},Class:function(a,d,b,e){var f=Class;f.debugName="Class";f.prototype.extendBuiltin.call(f,e);f.coerce=function(a){return a};f.isInstanceOf=function(){return!0};f.isInstance=function(a){return a instanceof f.instanceConstructor};return f},NamespaceClass:function(a,d,b,e){ASNamespace=function(a,d){void 0===d&&(d=a,a=void 0);var b,e;if(void 0===a)void 0===d?e=b="":"object"===typeof d?(b=d.prefix,d instanceof ShumwayNamespace?
e=d.originalURI:d instanceof QName&&(e=d.uri)):(e=d+"",b=""===e?"":void 0);else if(e="object"===typeof d&&d instanceof QName&&null!==d.uri?d.uri:d+"",""===e)if(void 0===a||""===a+"")b="";else throw"type error";else b=void 0===a||""===a?void 0:a+"";return ShumwayNamespace.createNamespace(e,b)};a=new Class("Namespace",ASNamespace,p(ASNamespace));a.extendNative(e,ShumwayNamespace);e=ShumwayNamespace.prototype;a.native={instance:{prefix:{get:e.getPrefix},uri:{get:e.getURI}}};return a},FunctionClass:function(a,
d,b,e){a=new Class("Function",Function,p(Function));a.extendBuiltin(e);a.native={instance:{prototype:{get:function(){return this.prototype},set:function(a){this.prototype=a}},length:{get:function(){return this.hasOwnProperty("vm length")?this["vm length"]:this.length}},call:Function.prototype.call,apply:Function.prototype.apply}};a.coerce=function(a){return a};a.isInstanceOf=function(a){return"function"===typeof a};a.isInstance=function(a){return"function"===typeof a};return a},MethodClosureClass:function(a,
d,b,e){a=new Class("MethodClosure",MethodClosure);a.extendBuiltin(e);return a},BooleanClass:function(a,d,b,e){a=new Class("Boolean",Boolean,p(Boolean));a.extendBuiltin(e);a.native={instance:{toString:Boolean.prototype.toString,valueOf:Boolean.prototype.valueOf}};a.coerce=Boolean;a.isInstanceOf=function(a){return"boolean"===typeof a||a instanceof Boolean};a.isInstance=function(a){return"boolean"===typeof a||a instanceof Boolean?!0:!1};return a},StringClass:function(a,d,b,e){a=new Class("String",String,
p(String));a.extendBuiltin(e);var f=String.prototype;a.native={instance:{length:{get:function(){return this.length}},indexOf:f.indexOf,lastIndexOf:f.lastIndexOf,charAt:f.charAt,charCodeAt:f.charCodeAt,concat:f.concat,localeCompare:f.localeCompare,match:function(a){if(void 0===a||null===a)return null;if(a instanceof RegExp&&a.global){for(var d=[],b;b=a.exec(this);)d.push(b[0]);return d}!(a instanceof RegExp)&&"string"!==typeof a&&(a=String(a));return this.match(a)},replace:f.replace,search:function(a){return void 0===
a?-1:this.search(a)},slice:f.slice,split:f.split,substr:f.substr,substring:f.substring,toLowerCase:f.toLowerCase,toLocaleLowerCase:f.toLocaleLowerCase,toUpperCase:function(){var a=f.toUpperCase.apply(this);return a=a.replace(/\u039C/g,String.fromCharCode(181))},toLocaleUpperCase:function(){var a=f.toLocaleUpperCase.apply(this);return a=a.replace(/\u039C/g,String.fromCharCode(181))},toString:f.toString,valueOf:f.valueOf},"static":String};a.isInstance=function(a){return null!==a&&void 0!==a&&"string"===
typeof a.valueOf()};a.coerce=function(a){return null===a||void 0===a?null:String(a)};a.isInstanceOf=function(a){return Object(a)instanceof String};a.isInstance=function(a){return Object(a)instanceof String};return a},NumberClass:function(a,d,b,e){a=new Class("Number",Number,p(Number));a.extendBuiltin(e);a.native={instance:Number.prototype};a.defaultValue=Number(0);a.isInstance=function(a){return null!==a&&void 0!==a&&"number"===typeof a.valueOf()};a.coerce=Number;a.isInstanceOf=function(a){return Object(a)instanceof
Number};a.isInstance=function(a){return Object(a)instanceof Number};return a},intClass:function(a,e,f,g){a=new Class("int",d,p(b));a.extendBuiltin(g);a.defaultValue=0;a.coerce=b;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return(a|0)===a};return a},uintClass:function(a,d,b,g){a=new Class("uint",f,p(e));a.extend(g);a.defaultValue=0;a.isInstanceOf=function(){return!1};a.isInstance=function(a){a instanceof Number&&(a=a.valueOf());return a>>>0===a};
a.coerce=e;return a},ArrayClass:ArrayClass,VectorClass:function(d,b,e,f){return a(void 0,f)},ObjectVectorClass:function(d,b,e,f){return a(d.getClass("Object"),f)},IntVectorClass:function(d,b,e,f){return a(d.getClass("int"),f)},UIntVectorClass:function(d,b,e,f){return a(d.getClass("uint"),f)},DoubleVectorClass:function(d,b,e,f){return a(d.getClass("Number"),f)},ByteArrayClass:function(a,d,b,e){d=function(){ByteArray.call(this)};a=d.prototype=Object.create(ByteArray.prototype);d=new Class("ByteArray",
d,p(d));d.extendBuiltin(e);a.asGetNumericProperty=function(a){return a>=this.length?void 0:this.uint8v[a]};a.asSetNumericProperty=function(a,d){var b=a+1;this.ensureCapacity(b);this.uint8v[a]=d;b>this.length&&(this.length=b)};a.readUTF=function(){return this.readUTFBytes(this.readShort())};a.readUTFBytes=function(a){var d=this.position;d+a>this.length&&throwEOFError();this.position+=a;return utf8encode(new Int8Array(this.a,d,a))};a.writeUTF=function(a){a=utf8decode(a);this.writeShort(a.length);this.writeRawBytes(a)};
a.writeUTFBytes=function(a){a=utf8decode(a);this.writeRawBytes(a)};a.toString=function(){return utf8encode(new Int8Array(this.a,0,this.length))};d.native={instance:{length:{get:function(){return this.length},set:function(a){a>this.a.byteLength&&this.ensureCapacity(a);this.length=a;this.position=clamp(this.position,0,this.length)}},bytesAvailable:{get:function(){return this.length-this.position}},position:{get:function(){return this.position},set:function(a){this.position=a}},endian:{get:function(){return this.le?
"littleEndian":"bigEndian"},set:function(a){this.le="littleEndian"===a}},objectEncoding:{get:function(){return this.objectEncoding},set:function(a){this.objectEncoding=a}},writeBytes:a.writeBytes,writeBoolean:a.writeBoolean,writeByte:a.writeByte,writeShort:a.writeShort,writeInt:a.writeInt,writeUnsignedInt:a.writeUnsignedInt,writeFloat:a.writeFloat,writeDouble:a.writeDouble,writeMultiByte:a.writeMultiByte,writeObject:function(a){return AMFUtils.encodings[this.objectEncoding].write(this,a)},writeUTF:a.writeUTF,
writeUTFBytes:a.writeUTFBytes,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readUnsignedByte:a.readUnsignedByte,readShort:a.readShort,readUnsignedShort:a.readUnsignedShort,readInt:a.readInt,readUnsignedInt:a.readUnsignedInt,readFloat:a.readFloat,readDouble:a.readDouble,readMultiByte:a.readMultiByte,readObject:function(){return AMFUtils.encodings[this.objectEncoding].read(this)},readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,toString:a.toString,clear:a.clear,_compress:a.compress,
_uncompress:a.uncompress},"static":{defaultObjectEncoding:{get:function(){return ByteArray.DEFAULT_OBJECT_ENCODING},set:function(a){ByteArray.DEFAULT_OBJECT_ENCODING=a}}}};return d},ProxyClass:ProxyClass,ErrorClass:g("Error"),DefinitionErrorClass:g("DefinitionError"),EvalErrorClass:g("EvalError"),RangeErrorClass:g("RangeError"),ReferenceErrorClass:g("ReferenceError"),SecurityErrorClass:g("SecurityError"),SyntaxErrorClass:g("SyntaxError"),TypeErrorClass:g("TypeError"),URIErrorClass:g("URIError"),VerifyErrorClass:g("VerifyError"),
UninitializedErrorClass:g("UninitializedError"),ArgumentErrorClass:g("ArgumentError"),DateClass:function(a,d,b,e){a=new Class("Date",Date,p(Date));a.extendBuiltin(e);a.native={instance:Date.prototype,"static":Date};return a},MathClass:function(){var a=new Class("Math");a.native={"static":Math};return a},RegExpClass:l,DictionaryClass:DictionaryClass,XMLClass:XMLClass,XMLListClass:XMLListClass,QNameClass:QNameClass,JSONClass:function(a,d,b,e){function f(a){if("object"!==typeof a)return a;for(var d=
Object.keys(a),b=a instanceof Array?[]:{},e=0;e<d.length;e++)b.asSetPublicProperty(d[e],f(a[d[e]]));return b}function g(a){if("object"!==typeof a)return a;for(var d=Object.keys(a),b=a instanceof Array?[]:{},e=0;e<d.length;e++){var f=d[e],l=f;isNumeric(f)||(l=fromResolvedName(f));b[l]=g(a[f])}return b}function l(){}a=new Class("JSON",l,p(l));a.extend(e);a.native={"static":{parseCore:function(a){return f(JSON.parse(a))},stringifySpecializedToString:function(a,d,b,e){return JSON.stringify(g(a),b,e)}}};
return a},ShumwayClass:function(a,d,b,e){function f(){}a=new Class("Shumway",f,p(f));a.extend(e);a.native={"static":{info:function(a){console.info(a)},json:function(a){return JSON.stringify(a)},eval:function(a){return eval(a)},"debugger":function(){debugger}}};return a},CapabilitiesClass:function(a,d,b,e){function f(){}a=new Class("Capabilities",f,p(f));a.extend(e);a.native={"static":{playerType:{get:function(){return"AVMPlus"}}}};return a},FileClass:function(a,d,b,e){function f(){}a=new Class("File",
f,p(f));a.extend(e);a.native={"static":{exists:function(){notImplemented("File.exists");return!1},read:function(a){return snarf(a)},write:function(){notImplemented("File.write");return!0},readByteArray:function(a){var d=AVM2.currentDomain().getClass("flash.utils.ByteArray").createInstance();d.writeRawBytes(snarf(a,"binary"));return d},writeByteArray:function(a,d){write("bin/"+a,d.getBytes());return!0}}};return a},DomainClass:function(a,d,b,e){a=new Class("File",b,p(b));a.extend(e);a.native={instance:{init:function(a){this.base=
a;this.nativeObject=new ApplicationDomain(avm2,a?a.nativeObject:null)},loadBytes:function(a){this.nativeObject.executeAbc(new AbcFile(a.readRawBytes()))},getClass:function(a){return this.nativeObject.getClass(a)}},"static":{currentDomain:{get:function(){var a=Object.create(b.prototype);a.nativeObject=AVM2.currentDomain();return a}}}};return a},SystemClass:function(a,d,b,e){a=new Class("System",b,p(b));a.extend(e);a.native={"static":{swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},
getArgv:function(){return[]},getRunmode:function(){return"mixed"}}};return a},getQualifiedClassName:m(function(a){if(null===a)return"null";if(void 0===a)return"void";switch(typeof a){case "number":return(a|0)===a?"int":"Number";case "string":return"String";case "boolean":return"Boolean";case "object":if(a instanceof Date)return"Date";var d;a instanceof Class?d=a:a.class?d=a.class:a.classInfo&&(d=a);if(d)return a=d.classInfo.instanceInfo.name,(d=a.namespaces[0].originalURI)?d+"::"+a.name:a.name}return notImplemented(a+
" ("+typeof a+")")}),getQualifiedSuperclassName:m(function(a){switch(typeof a){case "number":case "string":case "boolean":return"Object";case "function":return"Function";case "object":if(a instanceof Date)return"Object";var d;a.class?d=a.class:a.classInfo&&(d=a);return d&&d.baseClass?(a=d.baseClass.classInfo.instanceInfo.name,(d=a.namespaces[0].originalURI)?d+"::"+a.name:a.name):"Object"}return notImplemented(a+" (superOf "+typeof a+")")}),getDefinitionByName:m(function(a){a=String(a).replace("::",
".");return AVM2.currentDomain().getClass(a)}),describeTypeJSON:m(function(a,d){function b(a){return Multiname.getPublicQualifiedName(a)}function e(a){var d=a.name;return(a=a.namespaces[0])&&a.originalURI?a.originalURI+"::"+d:d}function f(a){var d={};d[D]=a.name;d[C]=a.value.map(function(a){return a});return d}var g=b("declaredBy"),l=b("metadata"),m=b("access"),p=b("uri"),D=b("name"),F=b("type"),E=b("returnType"),C=b("value");b("key");var K=b("parameters"),Q=b("optional"),R=a.classInfo?a:Object.getPrototypeOf(a).class;
!0;var T=R.classInfo,L={};L[D]=e(T.instanceInfo.name);L[b("isDynamic")]=R===a?!0:!(T.instanceInfo.flags&1);L[b("isStatic")]=R===a;L[b("isFinal")]=R===a?!0:!(T.instanceInfo.flags&2);if(d&256){var G=b("traits"),I=function(a){!0;for(var d=0;a&&d<a.length;d++){var b=a[d];if(J[b.kind]&&(b.name.getNamespace().isPublic()||b.name.uri)){var r=e(b.name);if(da[r]){var s=da[r];s[m]="readwrite";2===b.kind&&(s[F]=e(b.methodInfo.returnType))}else{s={};if(P&&b.metadata){var u=s[l]=[],C;for(C in b.metadata)u.push(f(b.metadata[C]))}else s[l]=
null;s[g]=ia;s[p]=void 0===b.name.uri?null:b.name.uri;s[D]=r;if(b.typeName||b.methodInfo&&b.methodInfo.returnType)switch(s[b.kind===TRAIT_Method?E:F]=e(0===b.kind?b.typeName:b.methodInfo.returnType),b.kind){case 0:s[m]="readwrite";W.push(s);break;case 1:r=s[K]=[];b=b.methodInfo.parameters;for(u=0;u<b.length;u++){var G=b[u],H={};H[F]=G.type?e(G.type):"*";H[Q]="value"in G;r.push(H)}ca.push(s);break;case 2:case 3:s[m]=2===b.kind?"read":"write",fa.push(s),da[r]=s}}}}},J=[d&8,d&32,d&16,d&16],H=d&2,P=d&
64,O={},U=O[b("bases")]=H?[]:null;if(d&4){var M=O[b("interfaces")]=[];if(d&512)for(var N in R.implementedInterfaces)M.push(e(R.implementedInterfaces[N].name))}else O[b("interfaces")]=null;var W=O[b("variables")]=d&8?[]:null,fa=O[b("accessors")]=d&16?[]:null,ca=O[b("methods")]=d&32?[]:null,da={};for(N=!1;R;){var ia=e(R.classInfo.instanceInfo.name);H&&N?U.push(ia):N=!0;d&512?I(R.classInfo.instanceInfo.traits):I(R.classInfo.traits);R=R.baseClass}L[G]=O}G=null;T.metadata&&(G=Object.keys(T.metadata).map(function(a){return f(T.metadata[a])}));
L[l]=G;return L}),original:jsGlobal["vm originals"]}}();function getNative(a){a=a.split(".");for(var b=natives,d=0,e=a.length;d<e;d++)b=b&&b[a[d]];!0;return b}var disassemblerOptions=systemOptions.register(new OptionSet("Disassembler Options")),filter=disassemblerOptions.register(new Option("f","filter","string","SpciMsmNtu","[S]ource, constant[p]ool, [c]lasses, [i]nstances, [M]etadata, [s]cripts, [m]ethods, multi[N]ames, S[t]atistics, [u]tf"));
function traceArray(a,b,d,e){0!==d.length&&(a.enter(b+" {"),d.forEach(function(d){d.trace(a,e)}),a.leave("}"))}
AbcFile.prototype.trace=function(a){0<=filter.value.indexOf("p")&&this.constantPool.trace(a);0<=filter.value.indexOf("N")&&this.constantPool.traceMultinamesOnly(a);0<=filter.value.indexOf("c")&&traceArray(a,"classes",this.classes);0<=filter.value.indexOf("i")&&traceArray(a,"instances",this.instances);0<=filter.value.indexOf("M")&&traceArray(a,"metadata",this.metadata);0<=filter.value.indexOf("s")&&traceArray(a,"scripts",this.scripts);0<=filter.value.indexOf("m")&&traceArray(a,"methods",this.methods,
this);0<=filter.value.indexOf("S")&&traceSource(a,this);0<=filter.value.indexOf("t")&&traceStatistics(a,this);0<=filter.value.indexOf("u")&&print(JSON.stringify({strings:this.constantPool.strings,positionAfterUTFStrings:this.constantPool.positionAfterUTFStrings},null,2))};
ConstantPool.prototype.trace=function(a){a.enter("constantPool {");for(var b in this)"namespaces"===b?(a.enter("namespaces {"),this.namespaces.forEach(function(d,b){a.writeLn((""+b).padRight(" ",3)+(d?d.toString():"*"))}),a.leave("}")):this[b]instanceof Array&&(a.enter(b+" "+this[b].length+" {"),a.writeArray(this[b]),a.leave("}"));a.leave("}")};ConstantPool.prototype.traceMultinamesOnly=function(a){a.writeArray(this.multinames,null,!0)};
ClassInfo.prototype.trace=function(a){a.enter("class "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};MetaDataInfo.prototype.trace=function(a){a.enter(this+" {");this.value.forEach(function(b){a.writeLn((b.key?b.key+": ":"")+'"'+b.value+'"')});a.leave("}")};InstanceInfo.prototype.trace=function(a){a.enter("instance "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};ScriptInfo.prototype.trace=function(a){a.enter("script "+this+" {");traceArray(a,"traits",this.traits);a.leave("}")};
Trait.prototype.trace=function(a){if(this.metadata)for(var b in this.metadata)this.metadata.hasOwnProperty(b)&&this.metadata[b].trace(a);a.writeLn(this)};function traceAbc(a,b){b.trace(a)}
function traceOperand(a,b,d){var e=0;switch(a.size){case "s08":e=d.readS8();break;case "u08":e=d.readU8();break;case "s16":e=d.readS16();break;case "s24":e=d.readS24();break;case "u30":e=d.readU30();break;case "u32":e=d.readU32();break;default:!0}d="";switch(a.type){case "":break;case "I":d=b.constantPool.ints[e];break;case "U":d=b.constantPool.uints[e];break;case "D":d=b.constantPool.doubles[e];break;case "S":d=b.constantPool.strings[e];break;case "N":d=b.constantPool.namespaces[e];break;case "CI":d=
b.classes[e];break;case "M":return b.constantPool.multinames[e];default:d="?"}return a.name+":"+e+(""===d?"":" ("+d+")")}function traceOperands(a,b,d,e){e=e||!1;var f=d.position,g="";null===a.operands?g="null":a.operands.forEach(function(e,f){g+=traceOperand(e,b,d);f<a.operands.length-1&&(g+=", ")});e&&d.seek(f);return g}
MethodInfo.prototype.trace=function(a){var b=this.abc;a.enter("method"+(this.name?" "+this.name:"")+" {");a.writeLn("flags: "+getFlags(this.flags,"NEED_ARGUMENTS NEED_ACTIVATION NEED_REST HAS_OPTIONAL  NATIVE SET_DXN HAS_PARAM_NAMES".split(" ")));a.writeLn("parameters: "+this.parameters.map(function(a){return(a.type?Multiname.getQualifiedName(a.type)+"::":"")+a.name}));if(this.code){var d=new AbcStream(this.code);traceArray(a,"traits",this.traits);for(a.enter("code {");0<d.remaining();){var e=d.readU8(),
f=opcodeTable[e],g;g=(""+d.position).padRight(" ",6);switch(e){case 27:g+=f.name+": defaultOffset: "+d.readS24();e=d.readU30();g+=", caseCount: "+e;for(f=0;f<e+1;f++)g+=" offset: "+d.readS24();a.writeLn(g);break;default:f?(g+=f.name.padRight(" ",20),f.operands?(0<f.operands.length&&(g+=traceOperands(f,b,d)),a.writeLn(g)):!0):!0}}a.leave("}")}a.leave("}")};
var SourceTracer=function(){function a(a){return void 0===a?"undefined":null===a?"null":"string"===typeof a?'"'+a+'"':String(a)}function b(d,b){return d.parameters.map(function(d){var e=d.name;b||(d.type&&(e+=":"+d.type.getName()),void 0!==d.value&&(e+=" = "+a(d.value)));return e}).join(", ")}function d(a){this.writer=a}d.prototype={traceTraits:function(d,f,g){var l=this.writer,m=this;d.forEach(function(d){var e;e=Multiname.getAccessModifier(d.name);var s=d.name.namespaces[0].originalURI;s&&("http://adobe.com/AS3/2006/builtin"===
s&&(s="AS3"),e="public"===e?g===s?"":s:e);f&&(e+=" static");if(d.isSlot()||d.isConst())m.traceMetadata(d.metadata),e=d.isConst()?e+" const":e+" var",e+=" "+d.name.getName(),d.typeName&&(e+=":"+d.typeName.getName()),d.value&&(e+=" = "+a(d.value)),l.writeLn(e+";");else if(d.isMethod()||d.isGetter()||d.isSetter()){m.traceMetadata(d.metadata);s=d.methodInfo;d.attributes&2&&(e+=" override");s.isNative()&&(e+=" native");e=e+" function"+(d.isGetter()?" get":d.isSetter()?" set":"");e+=" "+d.name.getName();
e+="("+b(s)+")";e+=s.returnType?":"+s.returnType.getName():"";var u;d.holder instanceof ClassInfo?(u=d.holder.instanceInfo.name,u.getName()):d.holder instanceof InstanceInfo&&(u=d.holder.name,u.getName());d.isGetter()||d.isSetter();s.isNative();s.isNative()?l.writeLn(e+";"):g?l.writeLn(e+";"):l.writeLn(e+' { notImplemented("'+d.name.getName()+'"); }')}else d.isClass()?(u=d.classInfo.instanceInfo.name,l.enter("package "+u.namespaces[0].originalURI+" {\n"),m.traceMetadata(d.metadata),m.traceClass(d.classInfo),
l.leave("\n}"),m.traceClassStub(d)):notImplemented()})},traceClassStub2:function(a){function d(a){var e=[];a.forEach(function(a){(a.isMethod()||a.isGetter()||a.isSetter())&&a.methodInfo.isNative()&&e.push(a)});e.forEach(function(a,d){var f=a.methodInfo,l=a.name.getName();g.writeLn("// "+l+" :: "+(f.parameters.length?b(f):"void")+" -> "+(f.returnType?f.returnType.getName():"any"));var m;m=a.isGetter()?'"get '+l+'"':a.isSetter()?'"set '+l+'"':l;g.enter(m+": function "+l+"("+b(f,!0)+") {");g.writeLn('  notImplemented("'+
p+"."+l+'");');g.leave("}"+(d===e.length-1?"":",\n"))})}var g=this.writer,l=a.classInfo,m=l.instanceInfo,p=m.name.getName();a=a.metadata?a.metadata.native:null;if(!a)return!1;g.writeLn("Cut and paste the following into `native.js' and edit accordingly");g.writeLn("8< --------------------------------------------------------------");g.enter("natives."+a.cls+" = function "+a.cls+"(runtime, scope, instanceConstructor, baseClass) {");g.writeLn('var c = new Class("'+p+'", instanceConstructor, ApplicationDomain.passthroughCallable(instanceConstructor));');
g.writeLn("c.extend(baseClass);\n");g.enter("c.nativeStatics = {");d(l.traits,!0);g.leave("};\n");g.enter("c.nativeMethods = {");d(m.traits);g.leave("};\n");g.writeLn("return c;");g.leave("};");g.writeLn("-------------------------------------------------------------- >8");return!0},traceClassStub:function(a){function d(a,e,f){function l(a,d){var e=a.methodInfo,p=a.name.getName(),r="// ("+(e.parameters.length?b(e):"void")+") -> "+(e.returnType?e.returnType.getName():"any"),s=p;a.isGetter()?s="get":
a.isSetter()&&(s="set");g.enter(s+": function "+p+"("+b(e,!0)+") { "+r);g.writeLn('notImplemented("'+m+"."+p+'");');f||(a.isGetter()?g.writeLn("return this._"+p+";"):a.isSetter()&&g.writeLn("this._"+p+" = "+e.parameters[0].name+";"));g.leave("}"+(d?",":""))}var p=a;a={properties:p.filter(function(a){return!e&&!(a.isMethod()||a.isGetter()||a.isSetter())}),methods:p.filter(function(a){return(a.isMethod()||a.isGetter()||a.isSetter())&&e===a.methodInfo.isNative()})};var A=[],v=createEmptyObject();a.methods.forEach(function(a){var d=
a.name.getName();a.isGetter()||a.isSetter()?(v[d]||(v[d]=[]),v[d].push(a)):A.push(a)});for(p=0;p<A.length;p++)l(A[p],p<A.length-1);for(var B=toKeyValueArray(v),y=0;y<B.length;y++){g.enter(B[y][0]+": {");for(var D=B[y][1],p=0;p<D.length;p++)l(D[p],p<D.length-1);g.leave("}"+(y<B.length-1?",":""))}a.properties.forEach(function(d,b){var e=d.name.getName(),f=b===a.properties.length-1;d.name.getNamespace().isPublic()&&g.writeLn(e+": "+("'public "+d.name.name+"'")+(f?"":","))})}var g=this.writer;a=a.classInfo;
var l=a.instanceInfo,m=l.name.getName();g.writeLn("Cut and paste the following glue and edit accordingly.");g.writeLn("Class "+l);g.writeLn("8< --------------------------------------------------------------");var p=l.name.namespaces[0].originalURI;g.enter("var "+m+"Definition = (function () {");g.enter("return {");g.writeLn("// ("+b(l.init,!1)+")");g.writeLn('__class__: "'+p+"."+m+'",');g.enter("initialize: function () {");g.leave("},");g.enter("__glue__: {");g.enter("native: {");g.enter("static: {");
d(a.traits,!0,!0);g.leave("},");g.enter("instance: {");d(l.traits,!0);g.leave("}");g.leave("},");g.enter("script: {");g.writeLn("instance: Glue.ALL");g.leave("}");g.leave("}");g.leave("};");g.leave("}).call(this);");g.writeLn("-------------------------------------------------------------- >8");return!0},traceClass:function(a){var d=this.writer,g=a.instanceInfo,l=g.name,m=Multiname.getAccessModifier(l);g.isFinal()&&(m+=" final");g.isSealed()||(m+=" dynamic");m+=g.isInterface()?" interface ":" class ";
m+=l.getName();g.superName&&"Object"!==g.superName.getName()&&(m+=" extends "+g.superName.getName());g.interfaces.length&&(m+=" implements "+g.interfaces.map(function(a){return a.getName()}).join(", "));d.enter(m+" {");g.isInterface()||d.writeLn("public function "+l.getName()+"("+b(g.init)+") {}");var p;g.isInterface()&&(p=l.namespaces[0].originalURI+":"+l.name);this.traceTraits(a.traits,!0,p);this.traceTraits(g.traits,!1,p);d.leave("}")},traceMetadata:function(a){var d=this.writer,b;for(b in a)a.hasOwnProperty(b)&&
0!==b.indexOf("__")&&d.writeLn("["+b+"("+a[b].value.map(function(a){return(a.key?a.key+"=":"")+'"'+a.value+'"'}).join(", ")+")]")}};return d}();function traceSource(a,b){var d=new SourceTracer(a);b.scripts.forEach(function(a){d.traceTraits(a.traits)})}
function traceStatistics(a,b){var d=new metrics.Counter(!0),e=new metrics.Counter(!0),f=new metrics.Counter(!0),g=new metrics.Counter(!0),l={},m={},p={};b.classes.forEach(function(a){l[a.instanceInfo.name.name]=!0});b.scripts.forEach(function(a){a.traits.forEach(function(a){if(a.isClass()){var d=a.classInfo.instanceInfo.superName?a.classInfo.instanceInfo.superName.name:"?";d in l||e.count(d);a.classInfo.traits.forEach(function(a){a.isMethod()?m[a.name.name]=!0:p[a.name.name]=!0});a.classInfo.instanceInfo.traits.forEach(function(a){a.isMethod()&&
!(a.attributes&2)?m[a.name.name]=!0:p[a.name.name]=!0})}})});var r=new metrics.Counter(!0);b.methods.forEach(function(a){function e(a){var d=0;switch(a.size){case "s08":d=w.readS8();break;case "u08":d=w.readU8();break;case "s16":d=w.readS16();break;case "s24":d=w.readS24();break;case "u30":d=w.readU30();break;case "u32":d=w.readU32();break;default:!0}var f="";switch(a.type){case "":break;case "I":f=b.constantPool.ints[d];break;case "U":f=b.constantPool.uints[d];break;case "D":f=b.constantPool.doubles[d];
break;case "S":f=b.constantPool.strings[d];break;case "N":f=b.constantPool.namespaces[d];break;case "CI":f=b.classes[d];break;case "M":f=b.constantPool.multinames[d];break;default:f="?"}return f}if(a.code)for(var w=new AbcStream(a.code);0<w.remaining();){a=w.readU8();var z=opcodeTable[a],A=null;if(z)switch(r.count(z.name),z.operands&&(A=z.operands.map(e)),a){case 65:case 67:continue;case 70:case 76:case 79:case 68:case 69:case 78:A[0]&&!(A[0].name in m)&&f.count(A[0].name);break;case 74:A[0]&&!(A[0].name in
l)&&d.count(A[0].name);break;case 102:case 97:A[0]&&!(A[0].name in p)&&g.count(A[0].name)}}});a.writeLn(JSON.stringify({definedClasses:l,definedMethods:m,definedProperties:p,libraryClasses:d.counts,librarySuperClasses:e.counts,libraryMethods:f.counts,libraryProperties:g.counts,operations:r.counts},null,2))}
var Interpreter=new (function(){function a(){}function b(a,b,f){f.flags=b.flags;f.name=b.isRuntimeName()?a.pop():b.name;f.namespaces=b.isRuntimeNamespace()?[a.pop()]:b.namespaces}a.prototype={interpretMethod:function(a,e,f,g){!0;Counter.count("Interpret Method");var l=e.abc,m=l.constantPool.ints,p=l.constantPool.uints,r=l.constantPool.doubles,s=l.constantPool.strings,u=l.methods,w=l.constantPool.multinames,z=l.applicationDomain,A=e.exceptions;a=[a];for(var v=[],B=new ScopeStack(f),y=e.parameters.length,
D=g.length,F,E=0;E<y;E++){var C=e.parameters[E];F=E<D?g[E]:C.value;C.type&&!C.type.isAnyName()&&(F=asCoerceByMultiname(z,C.type,F));a.push(F)}e.needsRest()?a.push(sliceArguments(g,y)):e.needsArguments()&&a.push(sliceArguments(g,0));g=e.analysis.bytecodes;var K,Q,R,T,L,G,y=[],D=Multiname.TEMPORARY,C=0,I=g.length;a:for(;C<I;)try{var J=g[C],H=J.op;switch(H|0){case 3:throw v.pop();case 4:b(v,w[J.index],D);v.push(v.pop().asGetSuper(f,D.namespaces,D.name,D.flags));break;case 5:F=v.pop();b(v,w[J.index],
D);v.pop().asSetSuper(f,D.namespaces,D.name,D.flags,F);break;case 8:a[J.index]=void 0;break;case 12:G=v.pop();L=v.pop();C=!(L<G)?J.offset:C+1;continue;case 24:G=v.pop();L=v.pop();C=L>=G?J.offset:C+1;continue;case 13:G=v.pop();L=v.pop();C=!(L<=G)?J.offset:C+1;continue;case 23:G=v.pop();L=v.pop();C=L>G?J.offset:C+1;continue;case 14:G=v.pop();L=v.pop();C=!(L>G)?J.offset:C+1;continue;case 22:G=v.pop();L=v.pop();C=L<=G?J.offset:C+1;continue;case 15:G=v.pop();L=v.pop();C=!(L>=G)?J.offset:C+1;continue;case 21:G=
v.pop();L=v.pop();C=L<G?J.offset:C+1;continue;case 16:C=J.offset;continue;case 17:C=v.pop()?J.offset:C+1;continue;case 18:C=!v.pop()?J.offset:C+1;continue;case 19:G=v.pop();L=v.pop();C=L==G?J.offset:C+1;continue;case 20:G=v.pop();L=v.pop();C=L!=G?J.offset:C+1;continue;case 25:G=v.pop();L=v.pop();C=L===G?J.offset:C+1;continue;case 26:G=v.pop();L=v.pop();C=L!==G?J.offset:C+1;continue;case 27:Q=v.pop();if(0>Q||Q>=J.offsets.length)Q=J.offsets.length-1;C=J.offsets[Q];continue;case 28:B.push(boxValue(v.pop()),
!0);break;case 29:B.pop();break;case 30:Q=v.pop();v[v.length-1]=boxValue(v[v.length-1]).asNextName(Q);break;case 35:Q=v.pop();v[v.length-1]=boxValue(v[v.length-1]).asNextValue(Q);break;case 50:T=asHasNext2(a[J.object],a[J.index]);a[J.object]=T.object;a[J.index]=T.index;v.push(!!T.index);break;case 32:v.push(null);break;case 33:v.push(void 0);break;case 36:case 37:v.push(J.value);break;case 44:v.push(s[J.index]);break;case 45:v.push(m[J.index]);break;case 46:v.push(p[J.index]);break;case 47:v.push(r[J.index]);
break;case 38:v.push(!0);break;case 39:v.push(!1);break;case 40:v.push(NaN);break;case 41:v.pop();break;case 42:v.push(v[v.length-1]);break;case 43:K=v[v.length-1];v[v.length-1]=v[v.length-2];v[v.length-2]=K;break;case 48:B.push(boxValue(v.pop()));break;case 64:v.push(createFunction(u[J.index],B.topScope(),!0));break;case 65:popManyInto(v,J.argCount,y);K=v.pop();v[v.length-1]=v[v.length-1].apply(K,y);break;case 66:popManyInto(v,J.argCount,y);v[v.length-1]=construct(v[v.length-1],y);break;case 71:return;
case 72:return e.returnType?asCoerceByMultiname(z,e.returnType,v.pop()):v.pop();case 73:popManyInto(v,J.argCount,y);K=v.pop();f.object.baseClass.instanceConstructorNoInitialize.apply(K,y);break;case 74:popManyInto(v,J.argCount,y);b(v,w[J.index],D);K=boxValue(v[v.length-1]);K=K.asConstructProperty(D.namespaces,D.name,D.flags,y);v[v.length-1]=K;break;case 75:notImplemented();break;case 76:case 70:case 79:popManyInto(v,J.argCount,y);b(v,w[J.index],D);T=boxValue(v.pop()).asCallProperty(D.namespaces,D.name,
D.flags,76===H,y);79!==H&&v.push(T);break;case 69:case 78:popManyInto(v,J.argCount,y);b(v,w[J.index],D);T=v.pop().asCallSuper(f,D.namespaces,D.name,D.flags,y);78!==H&&v.push(T);break;case 83:popManyInto(v,J.argCount,y);v[v.length-1]=applyType(z,v[v.length-1],y);break;case 85:K={};for(E=0;E<J.argCount;E++)F=v.pop(),K[Multiname.getPublicQualifiedName(v.pop())]=F;v.push(K);break;case 86:K=[];popManyInto(v,J.argCount,y);K.push.apply(K,y);v.push(K);break;case 87:!0;v.push(createActivation(e));break;case 88:v[v.length-
1]=createClass(l.classes[J.index],v[v.length-1],B.topScope());break;case 89:b(v,w[J.index],D);v.push(getDescendants(v.pop(),D));break;case 90:!0;v.push(A[J.index].scopeObject);break;case 94:case 93:b(v,w[J.index],D);v.push(B.topScope().findScopeProperty(D.namespaces,D.name,D.flags,z,93===H));break;case 96:R=w[J.index];K=B.topScope().findScopeProperty(R.namespaces,R.name,R.flags,z,!0);v.push(K.asGetProperty(R.namespaces,R.name,R.flags));break;case 104:case 97:F=v.pop();b(v,w[J.index],D);boxValue(v.pop()).asSetProperty(D.namespaces,
D.name,D.flags,F);break;case 98:v.push(a[J.index]);break;case 99:a[J.index]=v.pop();break;case 100:v.push(f.global.object);break;case 101:v.push(B.get(J.index));break;case 102:b(v,w[J.index],D);v[v.length-1]=boxValue(v[v.length-1]).asGetProperty(D.namespaces,D.name,D.flags);break;case 106:b(v,w[J.index],D);v[v.length-1]=boxValue(v[v.length-1]).asDeleteProperty(D.namespaces,D.name,D.flags);break;case 108:v[v.length-1]=asGetSlot(v[v.length-1],J.index);break;case 109:F=v.pop();K=v.pop();asSetSlot(K,
J.index,F);break;case 112:v[v.length-1]+="";break;case 131:case 115:v[v.length-1]|=0;break;case 136:case 116:v[v.length-1]>>>=0;break;case 132:case 117:v[v.length-1]=+v[v.length-1];break;case 129:case 118:v[v.length-1]=!!v[v.length-1];break;case 120:v[v.length-1]=checkFilter(v[v.length-1]);break;case 128:v[v.length-1]=asCoerce(z.getType(w[J.index]),v[v.length-1]);break;case 130:break;case 133:v[v.length-1]=asCoerceString(v[v.length-1]);break;case 135:v[v.length-2]=asAsType(v.pop(),v[v.length-1]);
break;case 137:K=v[v.length-1];v[v.length-1]=void 0==K?null:K;break;case 144:v[v.length-1]=-v[v.length-1];break;case 145:++v[v.length-1];break;case 146:++a[J.index];break;case 147:--v[v.length-1];break;case 148:--a[J.index];break;case 149:v[v.length-1]=asTypeOf(v[v.length-1]);break;case 150:v[v.length-1]=!v[v.length-1];break;case 151:v[v.length-1]=~v[v.length-1];break;case 160:v[v.length-2]=asAdd(v[v.length-2],v.pop());break;case 161:v[v.length-2]-=v.pop();break;case 162:v[v.length-2]*=v.pop();break;
case 163:v[v.length-2]/=v.pop();break;case 164:v[v.length-2]%=v.pop();break;case 165:v[v.length-2]<<=v.pop();break;case 166:v[v.length-2]>>=v.pop();break;case 167:v[v.length-2]>>>=v.pop();break;case 168:v[v.length-2]&=v.pop();break;case 169:v[v.length-2]|=v.pop();break;case 170:v[v.length-2]^=v.pop();break;case 171:v[v.length-2]=v[v.length-2]==v.pop();break;case 172:v[v.length-2]=v[v.length-2]===v.pop();break;case 173:v[v.length-2]=v[v.length-2]<v.pop();break;case 174:v[v.length-2]=v[v.length-2]<=
v.pop();break;case 175:v[v.length-2]=v[v.length-2]>v.pop();break;case 176:v[v.length-2]=v[v.length-2]>=v.pop();break;case 177:v[v.length-2]=asIsInstanceOf(v.pop(),v[v.length-1]);break;case 178:v[v.length-1]=asIsType(z.getType(w[J.index]),v[v.length-1]);break;case 179:v[v.length-2]=asIsType(v.pop(),v[v.length-1]);break;case 180:v[v.length-2]=boxValue(v.pop()).asHasProperty(null,v[v.length-1]);break;case 192:v[v.length-1]=(v[v.length-1]|0)+1;break;case 193:v[v.length-1]=(v[v.length-1]|0)-1;break;case 194:a[J.index]=
(a[J.index]|0)+1;break;case 195:a[J.index]=(a[J.index]|0)-1;break;case 196:v[v.length-1]=~v[v.length-1];break;case 197:v[v.length-2]=v[v.length-2]+v.pop()|0;break;case 198:v[v.length-2]=v[v.length-2]-v.pop()|0;break;case 199:v[v.length-2]=v[v.length-2]*v.pop()|0;break;case 208:case 209:case 210:case 211:v.push(a[H-208]);break;case 212:case 213:case 214:case 215:a[H-OP_setlocal0]=v.pop();break;case 239:case 240:case 241:break;default:notImplemented(opcodeName(H))}C++}catch(P){if(1>A.length)throw P;
for(var P=translateError(z,P),E=0,O=A.length;E<O;E++){var U=A[E];if(C>=U.start&&C<=U.end&&(!U.typeName||z.getType(U.typeName).isInstance(P))){v.length=0;v.push(P);B.clear();C=U.offset;continue a}}throw P;}}};return a}()),AVM2=function(){function a(a,d,e,f){this.systemDomain=new ApplicationDomain(this,null,a,!0);this.applicationDomain=new ApplicationDomain(this,this.systemDomain,d,!1);this.findDefiningAbc=e;this.loadAVM1=f;this.isAVM1Loaded=!1;this.exception={value:void 0}}a.currentAbc=function(){for(var a=
arguments.callee,d=null,e=0;20>e&&a;e++){var f=a.methodInfo;if(f){d=f.abc;break}a=a.caller}return d};a.currentDomain=function(){return this.currentAbc().applicationDomain};a.prototype={notifyConstruct:function(){}};return a}(),playerGlobalNames={},playerGlobalScripts={};
(function(){for(var a=[{name:"Object",offset:0,length:53432,defs:"Object Class Function Namespace Boolean Number int uint String Array AS3 bugzilla decodeURI decodeURIComponent encodeURI encodeURIComponent isNaN isFinite parseInt parseFloat escape unescape isXMLName NaN Infinity undefined __AS3__.vec:Vector __AS3__.vec:Vector$object __AS3__.vec:Vector$int __AS3__.vec:Vector$uint __AS3__.vec:Vector$double avmplus:describeTypeJSON avmplus:extendsXml avmplus:implementsXml avmplus:constructorXml avmplus:constantXml avmplus:variableXml avmplus:accessorXml avmplus:methodXml avmplus:parameterXml avmplus:metadataXml avmplus:argXml avmplus:typeXml avmplus:factoryXml avmplus:describeParams avmplus:describeMetadata avmplus:finish avmplus:describeTraits avmplus:HIDE_NSURI_METHODS avmplus:INCLUDE_BASES avmplus:INCLUDE_INTERFACES avmplus:INCLUDE_VARIABLES avmplus:INCLUDE_ACCESSORS avmplus:INCLUDE_METHODS avmplus:INCLUDE_METADATA avmplus:INCLUDE_CONSTRUCTOR avmplus:INCLUDE_TRAITS avmplus:USE_ITRAITS avmplus:HIDE_OBJECT avmplus:FLASH10_FLAGS avmplus:describeType avmplus:getQualifiedClassName avmplus:getQualifiedSuperclassName".split(" ")},{name:"flash/xml/XMLTag",
offset:53432,length:859,defs:["flash.xml:XMLTag"]},{name:"flash/net/NetStreamInfo",offset:54291,length:5307,defs:["flash.net:NetStreamInfo"]},{name:"flash/sampler/StackFrame",offset:59598,length:4475,defs:"flash.sampler:StackFrame flash.sampler:Sample flash.sampler:NewObjectSample flash.sampler:DeleteObjectSample flash.sampler:clearSamples flash.sampler:startSampling flash.sampler:stopSampling flash.sampler:pauseSampling flash.sampler:sampleInternalAllocs flash.sampler:setSamplerCallback flash.sampler:_setSamplerCallback flash.sampler:getSize flash.sampler:getMemberNames flash.sampler:getSamples flash.sampler:_getSamples flash.sampler:getSampleCount flash.sampler:getInvocationCount flash.sampler:getSetterInvocationCount flash.sampler:getGetterInvocationCount flash.sampler:_getInvocationCount flash.sampler:isGetterSetter flash.sampler:getLexicalScopes flash.sampler:getSavedThis flash.sampler:getMasterString flash.sampler:ClassFactory".split(" ")},
{name:"flash/display3D/Context3DBlendFactor",offset:64073,length:1101,defs:["flash.display3D:Context3DBlendFactor"]},{name:"flash/net/registerClassAlias",offset:65174,length:429,defs:["flash.net:registerClassAlias","flash.net:getClassByAlias"]},{name:"flash/display3D/Context3DStencilAction",offset:65603,length:896,defs:["flash.display3D:Context3DStencilAction"]},{name:"flash/text/engine/CFFHinting",offset:66499,length:504,defs:["flash.text.engine:CFFHinting"]},{name:"flash/display/IDrawCommand",offset:67003,
length:280,defs:["flash.display:IDrawCommand"]},{name:"flash/net/Responder",offset:67283,length:600,defs:["flash.net:Responder"]},{name:"flash/utils/IDataInput",offset:67883,length:2232,defs:["flash.utils:IDataInput"]},{name:"flash/utils/ObjectInput",offset:70115,length:1952,defs:["flash.utils:ObjectInput"]},{name:"flash/events/EventPhase",offset:72067,length:504,defs:["flash.events:EventPhase"]},{name:"flash/net/URLLoaderDataFormat",offset:72571,length:551,defs:["flash.net:URLLoaderDataFormat"]},
{name:"flash/net/IDynamicPropertyWriter",offset:73122,length:537,defs:["flash.net:IDynamicPropertyWriter"]},{name:"flash/geom/PerspectiveProjection",offset:73659,length:1312,defs:["flash.geom:PerspectiveProjection"]},{name:"flash/events/IEventDispatcher",offset:74971,length:1046,defs:["flash.events:IEventDispatcher"]},{name:"flash/events/EventDispatcher",offset:76017,length:3072,defs:["flash.events:EventDispatcher"]},{name:"flash/display/Stage3D",offset:79089,length:1225,defs:["flash.display:Stage3D"]},
{name:"flash/sensors/Geolocation",offset:80314,length:932,defs:["flash.sensors:Geolocation"]},{name:"Error",offset:81246,length:5961,defs:"Error DefinitionError EvalError RangeError ReferenceError SecurityError SyntaxError TypeError URIError VerifyError UninitializedError ArgumentError flash.errors:IOError flash.errors:EOFError flash.errors:MemoryError flash.errors:IllegalOperationError".split(" ")},{name:"flash/text/engine/ContentElement",offset:87207,length:1868,defs:["flash.text.engine:ContentElement"]},
{name:"flash/text/engine/TextElement",offset:89075,length:954,defs:["flash.text.engine:TextElement"]},{name:"flash/concurrent/Mutex",offset:90029,length:2484,defs:["flash.concurrent:Mutex","flash.concurrent:Condition","avm2.intrinsics.memory:mfence","avm2.intrinsics.memory:casi32"]},{name:"flash/display/NativeMenu",offset:92513,length:604,defs:["flash.display:NativeMenu"]},{name:"flash/ui/ContextMenu",offset:93117,length:2359,defs:["flash.ui:ContextMenu"]},{name:"flash/net/drm/DRMManagerSession",
offset:95476,length:20509,defs:"flash.net.drm:DRMManagerSession flash.net.drm:DRMAuthenticationContext flash.net.drm:DRMPlaybackTimeWindow flash.net.drm:DRMVoucher flash.net.drm:DRMVoucherDownloadContext flash.net.drm:DRMVoucherStoreContext flash.net.drm:DRMManager flash.net.drm:DRMModuleCycleProvider flash.net.drm:DRMURLDownloadContext".split(" ")},{name:"flash/display/IBitmapDrawable",offset:115985,length:281,defs:["flash.display:IBitmapDrawable"]},{name:"flash/display/DisplayObject",offset:116266,
length:5912,defs:["flash.display:DisplayObject"]},{name:"flash/display/Bitmap",offset:122178,length:1149,defs:["flash.display:Bitmap"]},{name:"flash/globalization/DateTimeFormatter",offset:123327,length:2422,defs:["flash.globalization:DateTimeFormatter"]},{name:"flash/media/VideoStatus",offset:125749,length:545,defs:["flash.media:VideoStatus"]},{name:"flash/system/fscommand",offset:126294,length:632,defs:["flash.system:fscommand","flash.system:FSCommand"]},{name:"adobe/utils/MMExecute",offset:126926,
length:436,defs:["adobe.utils:MMExecute","adobe.utils:MMEndCommand"]},{name:"flash/external/ExternalInterface",offset:127362,length:7206,defs:["flash.external:ExternalInterface"]},{name:"flash/security/CertificateStatus",offset:134568,length:939,defs:["flash.security:CertificateStatus"]},{name:"flash/system/Security",offset:135507,length:2365,defs:["flash.system:Security"]},{name:"flash/events/Event",offset:137872,length:4511,defs:["flash.events:Event"]},{name:"flash/events/KeyboardEvent",offset:142383,
length:2329,defs:["flash.events:KeyboardEvent"]},{name:"flash/net/navigateToURL",offset:144712,length:392,defs:["flash.net:navigateToURL","flash.net:sendToURL"]},{name:"flash/events/SoftKeyboardTrigger",offset:145104,length:562,defs:["flash.events:SoftKeyboardTrigger"]},{name:"flash/display3D/Context3DRenderMode",offset:145666,length:534,defs:["flash.display3D:Context3DRenderMode"]},{name:"flash/ui/GameInputControl",offset:146200,length:1234,defs:["flash.ui:GameInputControl"]},{name:"flash/geom/Matrix",
offset:147434,length:4980,defs:["flash.geom:Matrix"]},{name:"flash/events/ThrottleType",offset:152414,length:534,defs:["flash.events:ThrottleType"]},{name:"flash/text/TextInteractionMode",offset:152948,length:526,defs:["flash.text:TextInteractionMode"]},{name:"flash/filters/DisplacementMapFilterMode",offset:153474,length:636,defs:["flash.filters:DisplacementMapFilterMode"]},{name:"flash/geom/Rectangle",offset:154110,length:5057,defs:["flash.geom:Rectangle"]},{name:"flash/net/drm/AuthenticationMethod",
offset:159167,length:1246,defs:["flash.net.drm:AuthenticationMethod","flash.net.drm:LoadVoucherSetting","flash.net.drm:AddToDeviceGroupSetting"]},{name:"flash/utils/Timer",offset:160413,length:2134,defs:["flash.utils:Timer"]},{name:"flash/utils/SetIntervalTimer",offset:162547,length:1758,defs:["flash.utils:SetIntervalTimer","flash.utils:setInterval","flash.utils:setTimeout","flash.utils:clearInterval","flash.utils:clearTimeout"]},{name:"flash/text/engine/TextJustifier",offset:164305,length:1512,defs:["flash.text.engine:TextJustifier"]},
{name:"flash/media/Microphone",offset:165817,length:3070,defs:["flash.media:Microphone"]},{name:"flash/sensors/Accelerometer",offset:168887,length:958,defs:["flash.sensors:Accelerometer"]},{name:"flash/display3D/textures/TextureBase",offset:169845,length:622,defs:["flash.display3D.textures:TextureBase"]},{name:"flash/display3D/textures/Texture",offset:170467,length:1061,defs:["flash.display3D.textures:Texture"]},{name:"flash/net/drm/DRMDeviceGroup",offset:171528,length:1200,defs:["flash.net.drm:DRMDeviceGroup"]},
{name:"flash/display/InteractiveObject",offset:172728,length:4152,defs:["flash.display:InteractiveObject"]},{name:"flash/display/DisplayObjectContainer",offset:176880,length:2730,defs:["flash.display:DisplayObjectContainer"]},{name:"flash/display/FocusDirection",offset:179610,length:11058,defs:["flash.display:FocusDirection","flash.display:Stage"]},{name:"flash/events/UncaughtErrorEvents",offset:190668,length:573,defs:["flash.events:UncaughtErrorEvents"]},{name:"flash/display/IGraphicsData",offset:191241,
length:289,defs:["flash.display:IGraphicsData"]},{name:"flash/display/IGraphicsFill",offset:191530,length:289,defs:["flash.display:IGraphicsFill"]},{name:"flash/display/GraphicsEndFill",offset:191819,length:485,defs:["flash.display:GraphicsEndFill"]},{name:"flash/accessibility/Accessibility",offset:192304,length:842,defs:["flash.accessibility:Accessibility"]},{name:"flash/text/GridFitType",offset:193146,length:503,defs:["flash.text:GridFitType"]},{name:"flash/globalization/CollatorMode",offset:193649,
length:517,defs:["flash.globalization:CollatorMode"]},{name:"adobe/utils/CustomActions",offset:194166,length:799,defs:["adobe.utils:CustomActions"]},{name:"flash/errors/StackOverflowError",offset:194965,length:1011,defs:["flash.errors:StackOverflowError","flash.errors:ScriptTimeoutError","flash.errors:InvalidSWFError"]},{name:"flash/media/VideoCodec",offset:195976,length:510,defs:["flash.media:VideoCodec"]},{name:"flash/geom/Point",offset:196486,length:2138,defs:["flash.geom:Point"]},{name:"flash/ui/Mouse",
offset:198624,length:996,defs:["flash.ui:Mouse"]},{name:"flash/xml/XMLParser",offset:199620,length:619,defs:["flash.xml:XMLParser"]},{name:"flash/net/NetGroupInfo",offset:200239,length:2622,defs:["flash.net:NetGroupInfo"]},{name:"flash/display/ShaderJob",offset:202861,length:1486,defs:["flash.display:ShaderJob"]},{name:"flash/text/FontStyle",offset:204347,length:547,defs:["flash.text:FontStyle"]},{name:"flash/accessibility/ISearchableText",offset:204894,length:479,defs:["flash.accessibility:ISearchableText"]},
{name:"flash/display/GraphicsShaderFill",offset:205373,length:648,defs:["flash.display:GraphicsShaderFill"]},{name:"flash/net/NetStream",offset:206021,length:12820,defs:["flash.net:NetStream"]},{name:"flash/printing/PrintJobOptions",offset:218841,length:520,defs:["flash.printing:PrintJobOptions"]},{name:"flash/net/FileReference",offset:219361,length:3031,defs:["flash.net:FileReference"]},{name:"flash/display/StageQuality",offset:222392,length:777,defs:["flash.display:StageQuality"]},{name:"flash/geom/Transform",
offset:223169,length:1655,defs:["flash.geom:Transform"]},{name:"flash/accessibility/AccessibilityProperties",offset:224824,length:783,defs:["flash.accessibility:AccessibilityProperties"]},{name:"flash/filters/BitmapFilter",offset:225607,length:554,defs:["flash.filters:BitmapFilter"]},{name:"flash/filters/DropShadowFilter",offset:226161,length:2578,defs:["flash.filters:DropShadowFilter"]},{name:"flash/system/ApplicationInstaller",offset:228739,length:1092,defs:["flash.system:ApplicationInstaller"]},
{name:"flash/display3D/Context3DVertexBufferFormat",offset:229831,length:725,defs:["flash.display3D:Context3DVertexBufferFormat"]},{name:"flash/globalization/DateTimeNameContext",offset:230556,length:561,defs:["flash.globalization:DateTimeNameContext"]},{name:"flash/display/GraphicsSolidFill",offset:231117,length:635,defs:["flash.display:GraphicsSolidFill"]},{name:"flash/display/ShaderParameterType",offset:231752,length:1144,defs:["flash.display:ShaderParameterType"]},{name:"flash/filters/GradientGlowFilter",
offset:232896,length:2661,defs:["flash.filters:GradientGlowFilter"]},{name:"JSON",offset:235557,length:2655,defs:["JSON","Walker"]},{name:"flash/system/SecurityDomain",offset:238212,length:813,defs:["flash.system:SecurityDomain"]},{name:"flash/net/IDynamicPropertyOutput",offset:239025,length:507,defs:["flash.net:IDynamicPropertyOutput"]},{name:"flash/net/DynamicPropertyOutput",offset:239532,length:695,defs:["flash.net:DynamicPropertyOutput"]},{name:"flash/media/SoundTransform",offset:240227,length:1599,
defs:["flash.media:SoundTransform"]},{name:"flash/text/engine/FontLookup",offset:241826,length:501,defs:["flash.text.engine:FontLookup"]},{name:"flash/display/MorphShape",offset:242327,length:526,defs:["flash.display:MorphShape"]},{name:"flash/net/LocalConnection",offset:242853,length:1613,defs:["flash.net:LocalConnection"]},{name:"flash/display3D/Program3D",offset:244466,length:707,defs:["flash.display3D:Program3D"]},{name:"flash/ui/MouseCursor",offset:245173,length:596,defs:["flash.ui:MouseCursor"]},
{name:"flash/events/TextEvent",offset:245769,length:1293,defs:["flash.events:TextEvent"]},{name:"flash/net/URLRequestHeader",offset:247062,length:542,defs:["flash.net:URLRequestHeader"]},{name:"flash/display/TriangleCulling",offset:247604,length:561,defs:["flash.display:TriangleCulling"]},{name:"flash/display/JPEGEncoderOptions",offset:248165,length:624,defs:["flash.display:JPEGEncoderOptions"]},{name:"flash/net/URLLoader",offset:248789,length:2592,defs:["flash.net:URLLoader"]},{name:"flash/accessibility/ISimpleTextSelection",
offset:251381,length:685,defs:["flash.accessibility:ISimpleTextSelection"]},{name:"flash/display/Sprite",offset:252066,length:1976,defs:["flash.display:Sprite"]},{name:"_3fa260287b70f9c2758634de100a49d54c3f5d3f6359cd77d07fc7f4a8ccecbd_flash_display_Sprite",offset:254042,length:1433,defs:["_3fa260287b70f9c2758634de100a49d54c3f5d3f6359cd77d07fc7f4a8ccecbd_flash_display_Sprite"]},{name:"flash/utils/IDataOutput",offset:255475,length:1976,defs:["flash.utils:IDataOutput"]},{name:"flash/net/Socket",offset:257451,
length:4914,defs:["flash.net:Socket"]},{name:"flash/net/SecureSocket",offset:262365,length:3247,defs:["flash.net:SecureSocket"]},{name:"flash/text/engine/TypographicCase",offset:265612,length:793,defs:["flash.text.engine:TypographicCase"]},{name:"flash/display/IGraphicsPath",offset:266405,length:289,defs:["flash.display:IGraphicsPath"]},{name:"flash/display/GraphicsTrianglePath",offset:266694,length:1240,defs:["flash.display:GraphicsTrianglePath"]},{name:"flash/display/PixelSnapping",offset:267934,
length:521,defs:["flash.display:PixelSnapping"]},{name:"flash/display3D/Context3DProgramType",offset:268455,length:543,defs:["flash.display3D:Context3DProgramType"]},{name:"flash/display/Shape",offset:268998,length:590,defs:["flash.display:Shape"]},{name:"flash/media/SoundMixer",offset:269588,length:1436,defs:["flash.media:SoundMixer"]},{name:"flash/filters/ConvolutionFilter",offset:271024,length:2284,defs:["flash.filters:ConvolutionFilter"]},{name:"flash/net/NetGroupReceiveMode",offset:273308,length:523,
defs:["flash.net:NetGroupReceiveMode"]},{name:"flash/events/DRMDeviceGroupEvent",offset:273831,length:1334,defs:["flash.events:DRMDeviceGroupEvent"]},{name:"flash/text/engine/TextLineCreationResult",offset:275165,length:689,defs:["flash.text.engine:TextLineCreationResult"]},{name:"flash/events/StatusEvent",offset:275854,length:1267,defs:["flash.events:StatusEvent"]},{name:"flash/display/ShaderData",offset:277121,length:672,defs:["flash.display:ShaderData"]},{name:"flash/system/WorkerState",offset:277793,
length:2870,defs:["flash.system:WorkerState","flash.system:Worker"]},{name:"flash/system/LoaderContext",offset:280663,length:1320,defs:["flash.system:LoaderContext"]},{name:"flash/system/JPEGLoaderContext",offset:281983,length:735,defs:["flash.system:JPEGLoaderContext"]},{name:"flash/debugger/enterDebugger",offset:282718,length:279,defs:["flash.debugger:enterDebugger"]},{name:"flash/ui/Multitouch",offset:282997,length:1121,defs:["flash.ui:Multitouch"]},{name:"Date",offset:284118,length:10379,defs:["Date"]},
{name:"flash/display/SWFVersion",offset:294497,length:864,defs:["flash.display:SWFVersion"]},{name:"flash/events/ProgressEvent",offset:295361,length:1435,defs:["flash.events:ProgressEvent"]},{name:"flash/media/scanHardware",offset:296796,length:2968,defs:["flash.media:scanHardware","flash.media:Camera"]},{name:"flash/text/engine/TextBaseline",offset:299764,length:832,defs:["flash.text.engine:TextBaseline"]},{name:"flash/text/AntiAliasType",offset:300596,length:474,defs:["flash.text:AntiAliasType"]},
{name:"flash/net/NetGroup",offset:301070,length:5049,defs:["flash.net:NetGroup"]},{name:"flash/events/ErrorEvent",offset:306119,length:1052,defs:["flash.events:ErrorEvent"]},{name:"flash/events/IOErrorEvent",offset:307171,length:1204,defs:["flash.events:IOErrorEvent"]},{name:"flash/utils/describeType",offset:308375,length:1393,defs:"flash.utils:describeType flash.utils:getAliasName flash.utils:getQualifiedClassName flash.utils:getDefinitionByName flash.utils:getQualifiedSuperclassName flash.utils:getTimer flash.utils:escapeMultiByte flash.utils:unescapeMultiByte trace watson".split(" ")},
{name:"flash/display/ColorCorrectionSupport",offset:309768,length:621,defs:["flash.display:ColorCorrectionSupport"]},{name:"flash/ui/MultitouchInputMode",offset:310389,length:573,defs:["flash.ui:MultitouchInputMode"]},{name:"flash/text/TextFormatAlign",offset:310962,length:658,defs:["flash.text:TextFormatAlign"]},{name:"flash/text/engine/Kerning",offset:311620,length:500,defs:["flash.text.engine:Kerning"]},{name:"flash/net/NetStreamAppendBytesAction",offset:312120,length:639,defs:["flash.net:NetStreamAppendBytesAction"]},
{name:"flash/display/IGraphicsStroke",offset:312759,length:297,defs:["flash.display:IGraphicsStroke"]},{name:"flash/net/NetGroupSendResult",offset:313056,length:560,defs:["flash.net:NetGroupSendResult"]},{name:"flash/display/LineScaleMode",offset:313616,length:582,defs:["flash.display:LineScaleMode"]},{name:"flash/events/AsyncErrorEvent",offset:314198,length:1076,defs:["flash.events:AsyncErrorEvent"]},{name:"flash/display/StageScaleMode",offset:315274,length:595,defs:["flash.display:StageScaleMode"]},
{name:"flash/ui/GameInput",offset:315869,length:835,defs:["flash.ui:GameInput"]},{name:"flash/filters/BitmapFilterQuality",offset:316704,length:535,defs:["flash.filters:BitmapFilterQuality"]},{name:"flash/profiler/profile",offset:317239,length:454,defs:["flash.profiler:profile","flash.profiler:showRedrawRegions"]},{name:"flash/display/BitmapData",offset:317693,length:4790,defs:["flash.display:BitmapData"]},{name:"flash/events/ShaderEvent",offset:322483,length:1669,defs:["flash.events:ShaderEvent"]},
{name:"flash/events/TimerEvent",offset:324152,length:1048,defs:["flash.events:TimerEvent"]},{name:"XML",offset:325200,length:12638,defs:["XML","XMLList","QName"]},{name:"flash/ui/GameInputHand",offset:337838,length:523,defs:["flash.ui:GameInputHand"]},{name:"Math",offset:338361,length:1672,defs:["Math"]},{name:"flash/events/DRMAuthenticateEvent",offset:340033,length:2108,defs:["flash.events:DRMAuthenticateEvent"]},{name:"flash/media/H264Level",offset:342141,length:1104,defs:["flash.media:H264Level"]},
{name:"flash/text/FontType",offset:343245,length:504,defs:["flash.text:FontType"]},{name:"flash/display/NativeMenuItem",offset:343749,length:787,defs:["flash.display:NativeMenuItem"]},{name:"flash/net/FileFilter",offset:344536,length:937,defs:["flash.net:FileFilter"]},{name:"flash/text/Font",offset:345473,length:845,defs:["flash.text:Font"]},{name:"flash/events/SampleDataEvent",offset:346318,length:1415,defs:["flash.events:SampleDataEvent"]},{name:"flash/utils/Endian",offset:347733,length:454,defs:["flash.utils:Endian"]},
{name:"flash/filters/BevelFilter",offset:348187,length:2674,defs:["flash.filters:BevelFilter"]},{name:"flash/net/SharedObject",offset:350861,length:3383,defs:["flash.net:SharedObject"]},{name:"flash/media/SoundLoaderContext",offset:354244,length:596,defs:["flash.media:SoundLoaderContext"]},{name:"flash/events/AccelerometerEvent",offset:354840,length:1946,defs:["flash.events:AccelerometerEvent"]},{name:"flash/display/ShaderParameter",offset:356786,length:845,defs:["flash.display:ShaderParameter"]},
{name:"flash/ui/ContextMenuClipboardItems",offset:357631,length:1879,defs:["flash.ui:ContextMenuClipboardItems"]},{name:"flash/media/SoundCodec",offset:359510,length:563,defs:["flash.media:SoundCodec"]},{name:"flash/events/DRMCustomProperties",offset:360073,length:2540,defs:["flash.events:DRMCustomProperties","flash.events:DRMStatusEvent"]},{name:"flash/automation/ActionGenerator",offset:362613,length:801,defs:["flash.automation:ActionGenerator"]},{name:"flash/text/TextFormat",offset:363414,length:3332,
defs:["flash.text:TextFormat"]},{name:"flash/events/NetStatusEvent",offset:366746,length:1085,defs:["flash.events:NetStatusEvent"]},{name:"flash/display/GraphicsBitmapFill",offset:367831,length:760,defs:["flash.display:GraphicsBitmapFill"]},{name:"flash/system/DomainMemoryWithStage3D",offset:368591,length:1743,defs:["flash.system:DomainMemoryWithStage3D"]},{name:"flash/system/MessageChannelState",offset:370334,length:2210,defs:["flash.system:MessageChannelState","flash.system:MessageChannel"]},{name:"RegExp",
offset:372544,length:1471,defs:["RegExp"]},{name:"flash/display/LoaderInfo",offset:374015,length:3881,defs:["flash.display:LoaderInfo"]},{name:"flash/text/TextDisplayMode",offset:377896,length:518,defs:["flash.text:TextDisplayMode"]},{name:"flash/net/URLRequestMethod",offset:378414,length:624,defs:["flash.net:URLRequestMethod"]},{name:"flash/display/Shader",offset:379038,length:961,defs:["flash.display:Shader"]},{name:"flash/events/NetDataEvent",offset:379999,length:1149,defs:["flash.events:NetDataEvent"]},
{name:"flash/system/ImageDecodingPolicy",offset:381148,length:539,defs:["flash.system:ImageDecodingPolicy"]},{name:"flash/display/GraphicsGradientFill",offset:381687,length:2224,defs:["flash.display:GraphicsGradientFill"]},{name:"flash/text/engine/TextLineMirrorRegion",offset:383911,length:1170,defs:["flash.text.engine:TextLineMirrorRegion"]},{name:"flash/display3D/IndexBuffer3D",offset:385081,length:921,defs:["flash.display3D:IndexBuffer3D"]},{name:"flash/events/IMEEvent",offset:386002,length:1303,
defs:["flash.events:IMEEvent"]},{name:"flash/text/engine/TextLine",offset:387305,length:5029,defs:["flash.text.engine:TextLine"]},{name:"flash/display3D/VertexBuffer3D",offset:392334,length:940,defs:["flash.display3D:VertexBuffer3D"]},{name:"flash/utils/CompressionAlgorithm",offset:393274,length:5295,defs:["flash.utils:CompressionAlgorithm","flash.utils:IDataInput2","flash.utils:IDataOutput2","flash.utils:ByteArray"]},{name:"flash/display/FrameLabel",offset:398569,length:871,defs:["flash.display:FrameLabel"]},
{name:"adobe/utils/ProductManager",offset:399440,length:2071,defs:["adobe.utils:ProductManager"]},{name:"flash/events/GameInputEvent",offset:401511,length:849,defs:["flash.events:GameInputEvent"]},{name:"flash/net/ObjectEncoding",offset:402360,length:794,defs:["flash.net:ObjectEncoding"]},{name:"flash/geom/Matrix3D",offset:403154,length:3313,defs:["flash.geom:Matrix3D"]},{name:"flash/media/H264Profile",offset:406467,length:474,defs:["flash.media:H264Profile"]},{name:"flash/display/Scene",offset:406941,
length:802,defs:["flash.display:Scene"]},{name:"flash/display3D/Context3DClearMask",offset:407743,length:611,defs:["flash.display3D:Context3DClearMask"]},{name:"flash/net/NetStreamMulticastInfo",offset:408354,length:5325,defs:["flash.net:NetStreamMulticastInfo"]},{name:"flash/globalization/LastOperationStatus",offset:413679,length:1671,defs:["flash.globalization:LastOperationStatus"]},{name:"flash/events/ActivityEvent",offset:415350,length:1099,defs:["flash.events:ActivityEvent"]},{name:"flash/net/NetConnection",
offset:416449,length:3692,defs:["flash.net:NetConnection"]},{name:"flash/events/VideoEvent",offset:420141,length:968,defs:["flash.events:VideoEvent"]},{name:"flash/filters/BitmapFilterType",offset:421109,length:535,defs:["flash.filters:BitmapFilterType"]},{name:"flash/display/SpreadMethod",offset:421644,length:519,defs:["flash.display:SpreadMethod"]},{name:"flash/text/TextField",offset:422163,length:10471,defs:["flash.text:TextField"]},{name:"flash/events/GestureEvent",offset:432634,length:2768,defs:["flash.events:GestureEvent"]},
{name:"flash/events/PressAndTapGestureEvent",offset:435402,length:2208,defs:["flash.events:PressAndTapGestureEvent"]},{name:"flash/media/SoundChannel",offset:437610,length:1031,defs:["flash.media:SoundChannel"]},{name:"flash/text/engine/EastAsianJustifier",offset:438641,length:1350,defs:["flash.text.engine:EastAsianJustifier"]},{name:"flash/accessibility/AccessibilityImplementation",offset:439991,length:2663,defs:["flash.accessibility:AccessibilityImplementation"]},{name:"flash/text/CSMSettings",
offset:442654,length:648,defs:["flash.text:CSMSettings"]},{name:"flash/net/drm/DRMContentData",offset:443302,length:2300,defs:["flash.net.drm:DRMContentData"]},{name:"flash/events/StageVideoAvailabilityEvent",offset:445602,length:890,defs:["flash.events:StageVideoAvailabilityEvent"]},{name:"flash/net/NetGroupSendMode",offset:446492,length:538,defs:["flash.net:NetGroupSendMode"]},{name:"flash/text/TextRun",offset:447030,length:569,defs:["flash.text:TextRun"]},{name:"flash/net/XMLSocket",offset:447599,
length:2766,defs:["flash.net:XMLSocket"]},{name:"flash/utils/Dictionary",offset:450365,length:722,defs:["flash.utils:Dictionary"]},{name:"flash/display3D/Context3DCompareMode",offset:451087,length:827,defs:["flash.display3D:Context3DCompareMode"]},{name:"flash/text/TextFieldAutoSize",offset:451914,length:578,defs:["flash.text:TextFieldAutoSize"]},{name:"flash/text/engine/GroupElement",offset:452492,length:1911,defs:["flash.text.engine:GroupElement"]},{name:"flash/automation/AutomationAction",offset:454403,
length:669,defs:["flash.automation:AutomationAction"]},{name:"flash/automation/KeyboardAutomationAction",offset:455072,length:992,defs:["flash.automation:KeyboardAutomationAction"]},{name:"flash/net/NetStreamPlayOptions",offset:456064,length:891,defs:["flash.net:NetStreamPlayOptions"]},{name:"flash/text/engine/ElementFormat",offset:456955,length:4281,defs:["flash.text.engine:ElementFormat"]},{name:"flash/filters/DisplacementMapFilter",offset:461236,length:2454,defs:["flash.filters:DisplacementMapFilter"]},
{name:"flash/globalization/CurrencyParseResult",offset:463690,length:936,defs:["flash.globalization:CurrencyParseResult"]},{name:"flash/display3D/Context3D",offset:464626,length:5441,defs:["flash.display3D:Context3D"]},{name:"flash/printing/PrintJob",offset:470067,length:2693,defs:["flash.printing:PrintJob"]},{name:"flash/xml/XMLNodeType",offset:472760,length:746,defs:["flash.xml:XMLNodeType"]},{name:"flash/events/TransformGestureEvent",offset:473506,length:2762,defs:["flash.events:TransformGestureEvent"]},
{name:"flash/net/GroupSpecifier",offset:476268,length:9817,defs:["flash.net:GroupSpecifier"]},{name:"flash/system/SecurityPanel",offset:486085,length:760,defs:["flash.system:SecurityPanel"]},{name:"flash/globalization/Collator",offset:486845,length:2251,defs:["flash.globalization:Collator"]},{name:"flash/display/Graphics",offset:489096,length:5565,defs:["flash.display:Graphics"]},{name:"flash/ui/ContextMenuItem",offset:494661,length:1400,defs:["flash.ui:ContextMenuItem"]},{name:"flash/net/FileReferenceList",
offset:496061,length:805,defs:["flash.net:FileReferenceList"]},{name:"flash/events/DataEvent",offset:496866,length:1126,defs:["flash.events:DataEvent"]},{name:"flash/ui/GameInputFinger",offset:497992,length:584,defs:["flash.ui:GameInputFinger"]},{name:"flash/geom/Utils3D",offset:498576,length:768,defs:["flash.geom:Utils3D"]},{name:"flash/text/TextColorType",offset:499344,length:476,defs:["flash.text:TextColorType"]},{name:"flash/ui/KeyLocation",offset:499820,length:574,defs:["flash.ui:KeyLocation"]},
{name:"flash/display/BitmapDataChannel",offset:500394,length:566,defs:["flash.display:BitmapDataChannel"]},{name:"flash/text/StaticText",offset:500960,length:616,defs:["flash.text:StaticText"]},{name:"flash/events/FocusEvent",offset:501576,length:2097,defs:["flash.events:FocusEvent"]},{name:"flash/display/BlendMode",offset:503673,length:1090,defs:["flash.display:BlendMode"]},{name:"flash/net/SharedObjectFlushStatus",offset:504763,length:531,defs:["flash.net:SharedObjectFlushStatus"]},{name:"flash/display/GraphicsPath",
offset:505294,length:2513,defs:["flash.display:GraphicsPath"]},{name:"flash/events/HTTPStatusEvent",offset:507807,length:1677,defs:["flash.events:HTTPStatusEvent"]},{name:"flash/geom/Orientation3D",offset:509484,length:560,defs:["flash.geom:Orientation3D"]},{name:"flash/text/engine/TextBlock",offset:510044,length:5617,defs:["flash.text.engine:TextBlock"]},{name:"flash/system/System",offset:515661,length:1753,defs:["flash.system:System"]},{name:"flash/filters/BlurFilter",offset:517414,length:1123,
defs:["flash.filters:BlurFilter"]},{name:"flash/media/StageVideoAvailability",offset:518537,length:556,defs:["flash.media:StageVideoAvailability"]},{name:"flash/system/Capabilities",offset:519093,length:3483,defs:["flash.system:Capabilities"]},{name:"flash/system/ApplicationDomain",offset:522576,length:1494,defs:["flash.system:ApplicationDomain"]},{name:"flash/display/StageAlign",offset:524070,length:716,defs:["flash.display:StageAlign"]},{name:"flash/text/TextFieldType",offset:524786,length:470,
defs:["flash.text:TextFieldType"]},{name:"flash/display/GraphicsStroke",offset:525256,length:2213,defs:["flash.display:GraphicsStroke"]},{name:"flash/utils/flash_proxy",offset:527469,length:1800,defs:["flash.utils:flash_proxy","flash.utils:Proxy"]},{name:"flash/globalization/DateTimeStyle",offset:529269,length:647,defs:["flash.globalization:DateTimeStyle"]},{name:"flash/events/DRMAuthenticationErrorEvent",offset:529916,length:1895,defs:["flash.events:DRMAuthenticationErrorEvent"]},{name:"flash/net/NetGroupReplicationStrategy",
offset:531811,length:591,defs:["flash.net:NetGroupReplicationStrategy"]},{name:"flash/events/NetFilterEvent",offset:532402,length:950,defs:["flash.events:NetFilterEvent"]},{name:"flash/geom/Vector3D",offset:533352,length:3920,defs:["flash.geom:Vector3D"]},{name:"flash/events/ThrottleEvent",offset:537272,length:1278,defs:["flash.events:ThrottleEvent"]},{name:"flash/globalization/LocaleID",offset:538550,length:1487,defs:["flash.globalization:LocaleID"]},{name:"flash/events/GesturePhase",offset:540037,
length:570,defs:["flash.events:GesturePhase"]},{name:"flash/globalization/DateTimeNameStyle",offset:540607,length:627,defs:["flash.globalization:DateTimeNameStyle"]},{name:"flash/automation/MouseAutomationAction",offset:541234,length:1829,defs:["flash.automation:MouseAutomationAction"]},{name:"flash/ui/GameInputControlType",offset:543063,length:738,defs:["flash.ui:GameInputControlType"]},{name:"flash/display3D/Context3DTextureFormat",offset:543801,length:631,defs:["flash.display3D:Context3DTextureFormat"]},
{name:"flash/ui/MouseCursorData",offset:544432,length:1004,defs:["flash.ui:MouseCursorData"]},{name:"flash/display/StageDisplayState",offset:545436,length:592,defs:["flash.display:StageDisplayState"]},{name:"flash/net/NetMonitor",offset:546028,length:655,defs:["flash.net:NetMonitor"]},{name:"flash/events/SyncEvent",offset:546683,length:1055,defs:["flash.events:SyncEvent"]},{name:"flash/globalization/NumberFormatter",offset:547738,length:3379,defs:["flash.globalization:NumberFormatter"]},{name:"flash/media/MicrophoneEnhancedOptions",
offset:551117,length:2019,defs:["flash.media:MicrophoneEnhancedOptions"]},{name:"flash/xml/XMLNode",offset:553136,length:4338,defs:["flash.xml:XMLNode"]},{name:"flash/trace/Trace",offset:557474,length:1014,defs:["flash.trace:Trace"]},{name:"flash/system/IMEConversionMode",offset:558488,length:793,defs:["flash.system:IMEConversionMode"]},{name:"flash/text/TextFormatDisplay",offset:559281,length:508,defs:["flash.text:TextFormatDisplay"]},{name:"flash/events/DRMErrorEvent",offset:559789,length:2017,
defs:["flash.events:DRMErrorEvent"]},{name:"flash/filters/ColorMatrixFilter",offset:561806,length:895,defs:["flash.filters:ColorMatrixFilter"]},{name:"flash/system/SystemUpdater",offset:562701,length:2410,defs:["flash.system:SystemUpdater","flash.system:SystemUpdaterType"]},{name:"flash/display/ActionScriptVersion",offset:565111,length:515,defs:["flash.display:ActionScriptVersion"]},{name:"flash/media/Video",offset:565626,length:1376,defs:["flash.media:Video"]},{name:"flash/desktop/ClipboardFormats",
offset:567002,length:8298,defs:["flash.desktop:ClipboardFormats","flash.desktop:ClipboardTransferMode","flash.desktop:Clipboard"]},{name:"flash/display/AVM1Movie",offset:575300,length:1865,defs:["flash.display:AVM1Movie"]},{name:"flash/filters/GradientBevelFilter",offset:577165,length:2694,defs:["flash.filters:GradientBevelFilter"]},{name:"flash/ui/ContextMenuBuiltInItems",offset:579859,length:2547,defs:["flash.ui:ContextMenuBuiltInItems"]},{name:"flash/text/engine/BreakOpportunity",offset:582406,
length:601,defs:["flash.text.engine:BreakOpportunity"]},{name:"flash/display/PNGEncoderOptions",offset:583007,length:627,defs:["flash.display:PNGEncoderOptions"]},{name:"flash/globalization/NationalDigitsType",offset:583634,length:1896,defs:["flash.globalization:NationalDigitsType"]},{name:"flash/text/TextExtent",offset:585530,length:695,defs:["flash.text:TextExtent"]},{name:"flash/text/engine/GraphicElement",offset:586225,length:1341,defs:["flash.text.engine:GraphicElement"]},{name:"flash/system/IME",
offset:587566,length:1381,defs:["flash.system:IME"]},{name:"flash/text/engine/FontMetrics",offset:588947,length:1075,defs:["flash.text.engine:FontMetrics"]},{name:"flash/security/X509Certificate",offset:590022,length:1735,defs:["flash.security:X509Certificate"]},{name:"flash/events/TouchEvent",offset:591757,length:5240,defs:["flash.events:TouchEvent"]},{name:"flash/text/engine/TextRotation",offset:596997,length:661,defs:["flash.text.engine:TextRotation"]},{name:"flash/display3D/Context3DProfile",
offset:597658,length:547,defs:["flash.display3D:Context3DProfile"]},{name:"flash/text/ime/IIMEClient",offset:598205,length:1802,defs:["flash.text.ime:IIMEClient"]},{name:"flash/display3D/Context3DTriangleFace",offset:600007,length:641,defs:["flash.display3D:Context3DTriangleFace"]},{name:"flash/events/MouseEvent",offset:600648,length:4905,defs:["flash.events:MouseEvent"]},{name:"flash/xml/XMLDocument",offset:605553,length:3522,defs:["flash.xml:XMLDocument"]},{name:"flash/text/engine/RenderingMode",
offset:609075,length:502,defs:["flash.text.engine:RenderingMode"]},{name:"flash/net/URLRequest",offset:609577,length:2169,defs:["flash.net:URLRequest"]},{name:"flash/automation/StageCapture",offset:611746,length:1555,defs:["flash.automation:StageCapture"]},{name:"flash/media/StageVideo",offset:613301,length:1641,defs:["flash.media:StageVideo"]},{name:"flash/events/DRMDeviceGroupErrorEvent",offset:614942,length:2201,defs:["flash.events:DRMDeviceGroupErrorEvent"]},{name:"flash/events/SoftKeyboardEvent",
offset:617143,length:1653,defs:["flash.events:SoftKeyboardEvent"]},{name:"flash/errors/DRMManagerError",offset:618796,length:874,defs:["flash.errors:DRMManagerError"]},{name:"flash/text/engine/FontPosture",offset:619670,length:494,defs:["flash.text.engine:FontPosture"]},{name:"flash/display/JointStyle",offset:620164,length:502,defs:["flash.display:JointStyle"]},{name:"flash/display/ShaderPrecision",offset:620666,length:502,defs:["flash.display:ShaderPrecision"]},{name:"flash/text/engine/LineJustification",
offset:621168,length:710,defs:["flash.text.engine:LineJustification"]},{name:"flash/globalization/StringTools",offset:621878,length:1250,defs:["flash.globalization:StringTools"]},{name:"flash/text/StyleSheet",offset:623128,length:3305,defs:["flash.text:StyleSheet"]},{name:"flash/display/ShaderInput",offset:626433,length:1038,defs:["flash.display:ShaderInput"]},{name:"flash/net/NetStreamPlayTransitions",offset:627471,length:848,defs:["flash.net:NetStreamPlayTransitions"]},{name:"flash/display/BitmapEncodingColorSpace",
offset:628319,length:688,defs:["flash.display:BitmapEncodingColorSpace"]},{name:"flash/display/InterpolationMethod",offset:629007,length:518,defs:["flash.display:InterpolationMethod"]},{name:"flash/media/ID3Info",offset:629525,length:541,defs:["flash.media:ID3Info"]},{name:"flash/system/TouchscreenType",offset:630066,length:549,defs:["flash.system:TouchscreenType"]},{name:"flash/events/DRMAuthenticationCompleteEvent",offset:630615,length:1774,defs:["flash.events:DRMAuthenticationCompleteEvent"]},
{name:"flash/events/SecurityErrorEvent",offset:632389,length:1045,defs:["flash.events:SecurityErrorEvent"]},{name:"flash/system/AuthorizedFeatures",offset:633434,length:1104,defs:["flash.system:AuthorizedFeatures"]},{name:"flash/media/Sound",offset:634538,length:2359,defs:["flash.media:Sound"]},{name:"flash/system/WorkerDomain",offset:636897,length:996,defs:["flash.system:WorkerDomain"]},{name:"flash/net/URLStream",offset:637893,length:2721,defs:["flash.net:URLStream"]},{name:"flash/events/OutputProgressEvent",
offset:640614,length:1459,defs:["flash.events:OutputProgressEvent"]},{name:"flash/display/SimpleButton",offset:642073,length:2124,defs:["flash.display:SimpleButton"]},{name:"flash/display/JPEGXREncoderOptions",offset:644197,length:760,defs:["flash.display:JPEGXREncoderOptions"]},{name:"flash/display/GradientType",offset:644957,length:472,defs:["flash.display:GradientType"]},{name:"flash/net/URLVariables",offset:645429,length:1584,defs:["flash.net:URLVariables"]},{name:"flash/globalization/CurrencyFormatter",
offset:647013,length:4010,defs:["flash.globalization:CurrencyFormatter"]},{name:"flash/printing/PrintJobOrientation",offset:651023,length:529,defs:["flash.printing:PrintJobOrientation"]},{name:"flash/crypto/generateRandomBytes",offset:651552,length:347,defs:["flash.crypto:generateRandomBytes"]},{name:"flash/events/NetMonitorEvent",offset:651899,length:1060,defs:["flash.events:NetMonitorEvent"]},{name:"flash/text/engine/TextLineValidity",offset:652959,length:638,defs:["flash.text.engine:TextLineValidity"]},
{name:"flash/text/TextSnapshot",offset:653597,length:1344,defs:["flash.text:TextSnapshot"]},{name:"flash/display/Loader",offset:654941,length:4198,defs:["flash.display:Loader"]},{name:"flash/events/FullScreenEvent",offset:659139,length:1328,defs:["flash.events:FullScreenEvent"]},{name:"flash/utils/ObjectOutput",offset:660467,length:1784,defs:["flash.utils:ObjectOutput"]},{name:"flash/utils/IExternalizable",offset:662251,length:577,defs:["flash.utils:IExternalizable"]},{name:"flash/text/engine/FontDescription",
offset:662828,length:2196,defs:["flash.text.engine:FontDescription"]},{name:"flash/globalization/NumberParseResult",offset:665024,length:1E3,defs:["flash.globalization:NumberParseResult"]},{name:"flash/automation/StageCaptureEvent",offset:666024,length:1310,defs:["flash.automation:StageCaptureEvent"]},{name:"flash/security/X500DistinguishedName",offset:667334,length:1215,defs:["flash.security:X500DistinguishedName"]},{name:"adobe/utils/XMLUI",offset:668549,length:662,defs:["adobe.utils:XMLUI"]},{name:"flash/display/ColorCorrection",
offset:669211,length:542,defs:["flash.display:ColorCorrection"]},{name:"flash/text/engine/LigatureLevel",offset:669753,length:652,defs:["flash.text.engine:LigatureLevel"]},{name:"flash/media/VideoStreamSettings",offset:670405,length:2164,defs:["flash.media:VideoStreamSettings"]},{name:"flash/media/H264VideoStreamSettings",offset:672569,length:1813,defs:["flash.media:H264VideoStreamSettings"]},{name:"flash/automation/Configuration",offset:674382,length:786,defs:["flash.automation:Configuration"]},
{name:"flash/text/engine/JustificationStyle",offset:675168,length:652,defs:["flash.text.engine:JustificationStyle"]},{name:"flash/ui/KeyboardType",offset:675820,length:532,defs:["flash.ui:KeyboardType"]},{name:"flash/display/CapsStyle",offset:676352,length:497,defs:["flash.display:CapsStyle"]},{name:"flash/text/ime/CompositionAttributeRange",offset:676849,length:753,defs:["flash.text.ime:CompositionAttributeRange"]},{name:"flash/text/engine/TabStop",offset:677602,length:1048,defs:["flash.text.engine:TabStop"]},
{name:"flash/text/engine/FontWeight",offset:678650,length:485,defs:["flash.text.engine:FontWeight"]},{name:"flash/ui/GameInputDevice",offset:679135,length:1552,defs:["flash.ui:GameInputDevice"]},{name:"flash/media/AudioDecoder",offset:680687,length:768,defs:["flash.media:AudioDecoder"]},{name:"flash/text/TextRenderer",offset:681455,length:1074,defs:["flash.text:TextRenderer"]},{name:"flash/events/StageVideoEvent",offset:682529,length:1341,defs:["flash.events:StageVideoEvent"]},{name:"flash/text/engine/DigitWidth",
offset:683870,length:553,defs:["flash.text.engine:DigitWidth"]},{name:"flash/geom/ColorTransform",offset:684423,length:1790,defs:["flash.geom:ColorTransform"]},{name:"flash/system/AuthorizedFeaturesLoader",offset:686213,length:969,defs:["flash.system:AuthorizedFeaturesLoader"]},{name:"flash/display/GraphicsPathWinding",offset:687182,length:539,defs:["flash.display:GraphicsPathWinding"]},{name:"flash/display/GraphicsPathCommand",offset:687721,length:744,defs:["flash.display:GraphicsPathCommand"]},
{name:"flash/text/engine/TabAlignment",offset:688465,length:588,defs:["flash.text.engine:TabAlignment"]},{name:"flash/profiler/Telemetry",offset:689053,length:1062,defs:["flash.profiler:Telemetry"]},{name:"flash/events/UncaughtErrorEvent",offset:690115,length:1159,defs:["flash.events:UncaughtErrorEvent"]},{name:"flash/text/engine/DigitCase",offset:691274,length:538,defs:["flash.text.engine:DigitCase"]},{name:"flash/filters/ShaderFilter",offset:691812,length:1919,defs:["flash.filters:ShaderFilter"]},
{name:"flash/events/GeolocationEvent",offset:693731,length:2920,defs:["flash.events:GeolocationEvent"]},{name:"flash/ui/Keyboard",offset:696651,length:17797,defs:["flash.ui:Keyboard"]},{name:"flash/media/MicrophoneEnhancedMode",offset:714448,length:708,defs:["flash.media:MicrophoneEnhancedMode"]},{name:"flash/filters/GlowFilter",offset:715156,length:1920,defs:["flash.filters:GlowFilter"]},{name:"flash/display/MovieClip",offset:717076,length:2591,defs:["flash.display:MovieClip"]},{name:"flash/text/engine/SpaceJustifier",
offset:719667,length:1661,defs:["flash.text.engine:SpaceJustifier"]},{name:"flash/net/drm/VoucherAccessInfo",offset:721328,length:1113,defs:["flash.net.drm:VoucherAccessInfo"]},{name:"flash/events/ContextMenuEvent",offset:722441,length:1822,defs:["flash.events:ContextMenuEvent"]},{name:"flash/display3D/textures/CubeTexture",offset:724263,length:1114,defs:["flash.display3D.textures:CubeTexture"]},{name:"flash/text/TextLineMetrics",offset:725377,length:732,defs:["flash.text:TextLineMetrics"]}],b=0;b<
a.length;b++){var d=a[b];playerGlobalScripts[d.name]=d;if("string"===typeof d.defs)playerGlobalNames[d.defs]=d.name;else for(var e=0;e<d.defs.length;e++)playerGlobalNames[d.defs[e]]=d.name}})();enableVerifier.value=!0;
var release=enableC4.value=!0,avm2Root=SHUMWAY_ROOT+"avm2/",builtinPath=avm2Root+"generated/builtin/builtin.abc",avm1Path=avm2Root+"generated/avm1lib/avm1lib.abc",playerGlobalPath=SHUMWAY_ROOT+"flash/playerglobal.abc",BinaryFileReader=function(){function a(a,d){this.url=a;this.responseType=d||"arraybuffer"}a.prototype={readAll:function(a,d){var e=this.url,f=new XMLHttpRequest;f.open("GET",this.url,!0);f.responseType=this.responseType;a&&(f.onprogress=function(d){a(f.response,d.loaded,d.total)});f.onreadystatechange=
function(){4===f.readyState&&(200!==f.status&&0!==f.status?(unexpected("Path: "+e+" not found."),d(null,f.statusText)):d(f.response))};f.send(null)},readAsync:function(a,d,e,f,g){var l=new XMLHttpRequest({mozSystem:!0}),m=this.url;l.open(this.method||"GET",m,!0);var p;try{l.responseType="moz-chunked-arraybuffer",p="moz-chunked-arraybuffer"!==l.responseType}catch(r){p=!0}p&&(l.responseType="arraybuffer");l.onprogress=function(d){p||a(new Uint8Array(l.response),{loaded:d.loaded,total:d.total})};l.onreadystatechange=
function(){2===l.readyState&&g&&g(m,l.status,l.getAllResponseHeaders());if(4===l.readyState){200!==l.status&&0!==l.status&&d(l.statusText);if(p){var r=l.response;a(new Uint8Array(r),{loaded:r.byteLength,total:r.byteLength})}f&&f()}else 2===l.readyState&&e&&e()};l.send(null)}};return a}(),libraryAbcs;function grabAbc(a){var b=libraryScripts[a];return b?new AbcFile(new Uint8Array(libraryAbcs,b.offset,b.length),a):null}
function findDefiningAbc(a){if(!avm2.builtinsLoaded)return null;for(var b,d=0;d<a.namespaces.length&&!(b=a.namespaces[d].originalURI+":"+a.name,b=playerGlobalNames[b]);d++);return b?grabAbc(b):null}var avm2,libraryScripts=playerGlobalScripts,libraryNames=playerGlobalNames;
function createAVM2(a,b,d,e,f,g){avm2=new AVM2(e,f,findDefiningAbc,function(a){(new BinaryFileReader(d)).readAll(null,function(d){m=new AbcFile(new Uint8Array(d),"avm1.abc");avm2.systemDomain.executeAbc(m);a()})});var l,m;(new BinaryFileReader(b)).readAll(null,function(d){libraryAbcs=d;(new BinaryFileReader(a)).readAll(null,function(a){l=new AbcFile(new Uint8Array(a),"builtin.abc");avm2.builtinsLoaded=!1;avm2.systemDomain.onMessage.register("classCreated",Stubs.onClassCreated);avm2.systemDomain.executeAbc(l);
avm2.builtinsLoaded=!0;console.info(JSON.stringify(Counter.toJSON()));console.timeEnd("Load AVM2");g(avm2)})})}
var MAX_SNAP_DRAW_SCALE_TO_CACHE=8,CACHE_SNAP_DRAW_AFTER=3,BitmapDefinition=function(){function a(a){this._bitmapData&&(this._bitmapData._changeNotificationTarget=null);if(this._bitmapData=a)this._bitmapData._changeNotificationTarget=this;a?(a=a._drawable,this._bbox={xMin:0,yMin:0,xMax:20*a.width,yMax:20*a.height}):this._bbox={xMin:0,yMin:0,xMax:0,yMax:0};this._drawableChanged();this._invalidateBounds();this._invalidateTransform()}return{__class__:"flash.display.Bitmap",draw:function(a,d,e){if(this._bitmapData){var f;
a.save();if("auto"===this._pixelSnapping||"always"===this._pixelSnapping){d=this._getConcatenatedTransform(null,!0);var g=Math.abs(Math.round(d.a)),l=Math.abs(Math.round(d.d));1<=g&&8>=g&&1<=l&&8>=l&&0.001>=Math.abs(Math.abs(d.a)/g-1)&&0.001>=Math.abs(Math.abs(d.d)/l-1)&&0.001>=Math.abs(d.b)&&0.001>=Math.abs(d.c)?1===g&&1===l?g=!0:(f=g+"x"+l,this._snapImageCache.size!==f&&(this._snapImageCache.size=f,this._snapImageCache.hits=0,this._snapImageCache.image=null),3===++this._snapImageCache.hits&&this._cacheSnapImage(f,
g,l),f=this._snapImageCache.image,g=!!f):g=!1;g&&a.setTransform(0>d.a?-1:1,0,0,0>d.d?-1:1,d.tx/20|0,d.ty/20|0)}e.setAlpha(a,!0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=this._smoothing;a.drawImage(f||this._bitmapData._getDrawable(),0,0);a.imageSmoothingEnabled=a.mozImageSmoothingEnabled=!1;a.restore();traceRenderer.value&&frameWriter.writeLn("Bitmap.draw() snapping: "+this._pixelSnapping+", dimensions: "+this._bitmapData._drawable.width+" x "+this._bitmapData._drawable.height)}},_drawableChanged:function(){this._invalidate();
this._snapImageCache.image=null;this._snapImageCache.hints=0},_cacheSnapImage:function(a,d,e){Counter.count("Cache scaled image");var f=this._bitmapData._getDrawable(),g=document.createElement("canvas");g.width=d*f.width;g.height=e*f.height;d=g.getContext("2d");d.imageSmoothingEnabled=d.mozImageSmoothingEnabled=this._smoothing;d.drawImage(f,0,0,f.width,f.height,0,0,g.width,g.height);var l=this._snapImageCache,m=document.createElement("img");l._tmp=[g,m];"toBlob"in g?g.toBlob(function(d){l.size===
a&&(m.onload=function(){URL.revokeObjectURL(d);l.size===a&&(l.image=m)},m.src=URL.createObjectURL(d))}):(m.onload=function(){l.size===a&&(l.image=m)},m.src=g.toDataURL())},initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(b,d,e){this._pixelSnapping="never"===d||"always"===d?d:"auto";this._smoothing=!!e;this._snapImageCache={hits:0,size:"",image:null};!b&&this.symbol&&(d=this.symbol,b=new flash.display.BitmapData(d.width,d.height,!0,0),b._ctx.imageSmoothingEnabled=this._smoothing,
b._ctx.mozImageSmoothingEnabled=this._smoothing,b._ctx.drawImage(d.img,0,0),b._ctx.imageSmoothingEnabled=!1,b._ctx.mozImageSmoothingEnabled=!1);a.call(this,b||null)},pixelSnapping:{get:function(){return this._pixelSnapping},set:function(a){this._pixelSnapping=a}},smoothing:{get:function(){return this._smoothing},set:function(a){this._smoothing=a}},bitmapData:{get:function(){return this._bitmapData},set:a}}}}}}.call(this),CACHE_DRAWABLE_AFTER=10,BitmapDataDefinition=function(){function a(a,d,b,l,m,
p){255>p&&a.clearRect(d,b,l,m);0<p&&a.fillRect(d,b,l,m)}var b={__class__:"flash.display.BitmapData",initialize:function(){this._changeNotificationTarget=null;this._locked=!1;this._requested=0;this._cache=null;this.symbol&&(this._img=this.symbol.img,this._skipCopyToCanvas=this.symbol.skipCopyToCanvas)},_checkCanvas:function(){if(null===this._drawable)throw ArgumentError();},ctor:function(a,d,b,l){this._img?(a=this._img.naturalWidth||this._img.width,d=this._img.naturalHeight||this._img.height):(isNaN(a+
d)||0>=a||0>=d)&&throwError("ArgumentError",Errors.ArgumentError);this._transparent=void 0===b?!0:!!b;this._backgroundColor=void 0===l?4294967295:l;this._transparent||(this._backgroundColor|=4278190080);this._skipCopyToCanvas?this._drawable=this._img:(b=document.createElement("canvas"),this._ctx=b.getContext("2d"),b.width=a|0,b.height=d|0,this._drawable=b,(!this._transparent||!this._img&&this._backgroundColor)&&this.fillRect(new flash.geom.Rectangle(0,0,a|0,d|0),this._backgroundColor),this._img&&
this._ctx.drawImage(this._img,0,0))},dispose:function(){this._ctx=null;this._drawable.width=0;this._drawable.height=0;this._drawable=null},draw:function(a,d,b,l,m,p){this._checkCanvas();b=this._ctx;b.save();b.beginPath();m&&(0<m.width&&0<m.height)&&(b.rect(m.x,m.y,m.width,m.height),b.clip());d&&b.transform(d.a,d.b,d.c,d.d,d.tx,d.ty);b.globalCompositeOperation=getBlendModeName(l);b.imageSmoothingEnabled=b.mozImageSmoothingEnabled=!!p;flash.display.BitmapData.class.isInstanceOf(a)?b.drawImage(a._drawable,
0,0):(new RenderVisitor(a,b,null,!0)).startFragment(d);b.imageSmoothingEnabled=b.mozImageSmoothingEnabled=!1;b.restore();this._invalidate()},fillRect:function(d,b){this._checkCanvas();this._transparent||(b|=4278190080);var g=this._ctx;g.fillStyle=argbUintToStr(b);a(g,d.x,d.y,d.width,d.height,b>>>24&255);this._invalidate()},getPixel:function(a,d){this._checkCanvas();var b=this._ctx.getImageData(a,d,1,1).data;return dataToRGB(b)},getPixel32:function(a,d){this._checkCanvas();var b=this._ctx.getImageData(a,
d,1,1).data;return dataToARGB(b)},_invalidate:function(a){a&&somewhatImplemented("BitmapData._invalidate(changeRect)");this._locked||(this._changeNotificationTarget&&this._changeNotificationTarget._drawableChanged(),this._requested=0,this._cache=null)},_getDrawable:function(){if(this._img===this._drawable)return this._drawable;this._requested++;if(10<=this._requested){if(!this._cache){Counter.count("Cache drawable");var a=document.createElement("img");"toBlob"in this._drawable?this._drawable.toBlob(function(d){a.src=
URL.createObjectURL(d);a.onload=function(){URL.revokeObjectURL(d)}}):a.src=this._drawable.toDataURL();this._cache=a}if(0<this._cache.width)return this._cache}return this._drawable},setPixel:function(a,d,b){this.fillRect({x:a,y:d,width:1,height:1},b|4278190080);this._invalidate()},setPixel32:function(a,d,b){this.fillRect({x:a,y:d,width:1,height:1},b);this._invalidate()},copyPixels:function(a,d,b,l,m,p){l&&notImplemented("BitmapData.copyPixels w/ alpha");l=d.width;m=d.height;var r=d.x;d=d.y;var s=b.x;
b=b.y;p||this._ctx.clearRect(s,b,l,m);this._ctx.drawImage(a._drawable,r,d,l,m,s,b,l,m);this._invalidate()},lock:function(){this._locked=!0},unlock:function(a){this._locked=!1;this._invalidate(a)},clone:function(){this._checkCanvas();var a=new flash.display.BitmapData(this._drawable.width,this._drawable.height,!0,0);a._ctx.drawImage(this._drawable,0,0);return a},scroll:function(d,b){this._checkCanvas();this._ctx.draw(this._drawable,d,b);this._ctx.save();var g=this._img?0:this._backgroundColor;this._transparent||
(g|=4278190080);var l=g>>>24&255;this._ctx.fillStyle=argbUintToStr(g);var g=this._drawable.width,m=this._drawable.height;0<d?a(this._ctx,0,0,d,m,l):0>d&&a(this._ctx,g+d,0,-d,m,l);0<b?a(this._ctx,0,0,g,b,l):0>b&&a(this._ctx,m+b,g,-b,l);this._ctx.restore();this._invalidate()},get width(){return this._drawable.width},get height(){return this._drawable.height}},d=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{ctor:b.ctor,fillRect:b.fillRect,dispose:b.dispose,getPixel:b.getPixel,getPixel32:b.getPixel32,
setPixel:b.setPixel,setPixel32:b.setPixel32,copyPixels:b.copyPixels,lock:b.lock,unlock:b.unlock,draw:b.draw,clone:b.clone,scroll:b.scroll,width:d(b,"width"),height:d(b,"height")}}};return b}.call(this);function dataToRGB(a){return a[0]<<16|a[1]<<8|a[2]}function dataToARGB(a){return a[3]<<24|dataToRGB(a)}
var DisplayObjectDefinition=function(){var a,b=1,d={advanceFrame:!1,enterFrame:!0,constructChildren:!1,frameConstructed:!0,executeFrame:!1,exitFrame:!0,render:!0},e={x:0,y:0},f={__class__:"flash.display.DisplayObject",initialize:function(){var d=flash.display.BlendMode.class;this._alpha=1;this._animated=!1;this._bitmap=this._bbox=null;this._blendMode=d.NORMAL;this._bounds={xMin:0,xMax:0,yMin:0,yMax:0,invalid:!0};this._cacheAsBitmap=!1;this._children=[];this._clipDepth=null;this._currentTransform=
{a:1,b:0,c:0,d:1,tx:0,ty:0};this._concatenatedTransform={a:1,b:0,c:0,d:1,tx:0,ty:0,invalid:!0};this._graphics=this._cxform=this._current3DTransform=null;this._filters=[];this._loader=null;this._mouseChildren=!0;this._mouseOver=!1;this._mouseY=this._mouseX=0;this._opaqueBackground=this._name=null;this._owned=!1;this._parent=null;this._rotation=0;this._rotationCos=1;this._rotationSin=0;this._scale9Grid=null;this._scaleY=this._scaleX=1;this._stage=null;this._visible=!0;this._destroyed=this._wasCachedAsBitmap=
this._hidden=!1;this._scrollRect=this._maskedObject=null;this._invalid=!1;this._region=null;this._depth=this._index=this._level=-1;this._invisible=this._isContainer=!1;this._zindex=0;a=[d.NORMAL,d.NORMAL,d.LAYER,d.MULTIPLY,d.SCREEN,d.LIGHTEN,d.DARKEN,d.DIFFERENCE,d.ADD,d.SUBTRACT,d.INVERT,d.ALPHA,d.ERASE,d.OVERLAY,d.HARDLIGHT,d.SHADER];if(d=this.symbol){this._animated=d.animated||!1;this._bbox=d.bbox||null;this._blendMode=this._resolveBlendMode(d.blendMode);this._children=d.children||[];this._clipDepth=
d.clipDepth||null;this._cxform=d.cxform||null;this._loader=d.loader||null;this._name=d.name||null;this._owned=d.owned||!1;this._parent=d.parent||null;this._level=isNaN(d.level)?-1:d.level;this._index=isNaN(d.index)?-1:d.index;this._depth=isNaN(d.depth)?-1:d.depth;this._root=d.root||null;this._stage=d.stage||null;var b=d.scale9Grid;b&&(this._scale9Grid=new flash.geom.Rectangle(b.left,b.top,b.right-b.left,b.bottom-b.top));(d=d.currentTransform)&&this._setTransformMatrix(d,!1)}this._accessibilityProperties=
null;var e=this;this._onBroadcastMessage=function(a){e._listeners[a]&&e._dispatchEvent(a)}},_addEventListener:function(a,b,e,f){!1===d[a]?avm2.systemDomain.onMessage.register(a,b):(a in d&&!this._listeners[a]&&avm2.systemDomain.onMessage.register(a,this._onBroadcastMessage),this._addEventListenerImpl(a,b,e,f))},_removeEventListener:function(a,b,e){!1===d[a]?avm2.systemDomain.onMessage.unregister(a,b):(this._removeEventListenerImpl(a,b,e),a in d&&!this._listeners[a]&&avm2.systemDomain.onMessage.unregister(a,
this._onBroadcastMessage))},_resolveBlendMode:function(d){return a[d]||flash.display.BlendMode.class.NORMAL},_getConcatenatedTransform:function(a,d){var b=this._stage;if(this===this._stage)return d?this._concatenatedTransform:this._currentTransform;if(a===this._parent)return this._currentTransform;var e=null,f,g;for(f=this;f!==b;)f._concatenatedTransform.invalid&&(e=f),f===a&&(g=f._concatenatedTransform),f=f._parent;if(e)if(this._parent===b)e=this._concatenatedTransform,f=this._currentTransform,e.a=
f.a,e.b=f.b,e.c=f.c,e.d=f.d,e.tx=f.tx,e.ty=f.ty;else{var w=[];for(f=this;f!==e;)w.push(f),f=f._parent;var z=e;do{var A=z._parent,e=z._concatenatedTransform;f=z._currentTransform;A?A!==b&&(A=A._concatenatedTransform,e.a=f.a*A.a+f.b*A.c,e.b=f.a*A.b+f.b*A.d,e.c=f.c*A.a+f.d*A.c,e.d=f.d*A.d+f.c*A.b,e.tx=f.tx*A.a+A.tx+f.ty*A.c,e.ty=f.ty*A.d+A.ty+f.tx*A.b):(e.a=f.a,e.b=f.b,e.c=f.c,e.d=f.d,e.tx=f.tx,e.ty=f.ty);e.invalid=!1;f=w.pop();z=z._children;for(A=0;A<z.length;A++){var v=z[A];v!==f&&(v._concatenatedTransform.invalid=
!0)}z=f}while(z)}else e=this._concatenatedTransform;return a&&a!==this._stage?(f=g||a._getConcatenatedTransform(),b=1,w=g=0,z=1,v=A=0,f.b||f.c?(z=1/(f.a*f.d-f.b*f.c),b=f.d*z,g=-f.b*z,w=-f.c*z,z*=f.a,A=-(b*f.tx+w*f.ty),v=-(g*f.tx+z*f.ty)):(b=1/f.a,z=1/f.d,A=f.tx*-b,v=f.ty*-z),{a:b*e.a+w*e.b,b:g*e.a+z*e.b,c:b*e.c+w*e.d,d:g*e.c+z*e.d,tx:b*e.tx+w*e.ty+A,ty:g*e.tx+z*e.ty+v}):d&&b?(f=b._concatenatedTransform,{a:e.a*f.a,b:e.b*f.d,c:e.c*f.a,d:e.d*f.d,tx:e.tx*f.a+f.tx,ty:e.ty*f.d+f.ty}):e},_applyCurrentTransform:function(a){var d=
this._getConcatenatedTransform(),b=a.x,e=a.y;a.x=d.a*b+d.c*e+d.tx|0;a.y=d.d*e+d.b*b+d.ty|0},_applyConcatenatedInverseTransform:function(a){var d=this._getConcatenatedTransform(),b=1/(d.a*d.d-d.b*d.c),e=a.x-d.tx,f=a.y-d.ty;a.x=(d.d*e-d.c*f)*b|0;a.y=(d.a*f-d.b*e)*b|0},_hitTest:function(a,d,b,f,g){if(a){e.x=d;e.y=b;this._applyConcatenatedInverseTransform(e);g=this._getContentBounds();if(!(e.x>=g.xMin&&e.x<g.xMax&&e.y>=g.yMin&&e.y<g.yMax))return!1;if(!f||!this._graphics)return!0;if(this._graphics){a=
this._graphics._paths;f=0;for(g=a.length;f<g;f++){var u=a[f];if(u.isPointInPath(e.x,e.y))return!0;if(u.strokeStyle){var w=u._strokePath;w||(w=u.strokePath(u.drawingStyles),u._strokePath=w);if(w.isPointInPath(e.x,e.y))return!0}}}a=this._children;f=0;for(g=a.length;f<g;f++)if(u=a[f],u._hitTest&&u._hitTest(!0,d,b,!0))return!0;return!1}f=this.getBounds(this._stage);g=g.getBounds(g._stage);d=Math.max(f.xMin,g.xMin);b=Math.max(f.yMin,g.yMin);d=Math.min(f.xMax,g.xMax)-d;b=Math.min(f.yMax,g.yMax)-b;return 0<
d&&0<b},_invalidate:function(){this._invalid=!0},_invalidateBounds:function(){for(var a=this;a&&!a._bounds.invalid;)a._bounds.invalid=!0,a=a._parent},_invalidateTransform:function(){this._concatenatedTransform.invalid=!0;this._parent&&this._parent._invalidateBounds()},_setTransformMatrix:function(a,d){var b=a.a,e=a.b,f=a.c,g=a.d,w,z;d?(w=20*a.tx|0,z=20*a.ty|0):(w=a.tx,z=a.ty);var A=0!==b?Math.atan(e/b):0<e?Math.PI/2:-Math.PI/2;this._rotation=180*A/Math.PI;this._rotationCos=Math.cos(A);this._rotationSin=
Math.sin(A);A=Math.sqrt(b*b+e*e);this._scaleX=0<b?A:-A;A=Math.sqrt(g*g+f*f);this._scaleY=0<g?A:-A;A=this._currentTransform;A.a=b;A.b=e;A.c=f;A.d=g;A.tx=w;A.ty=z;this._invalidateTransform()},get accessibilityProperties(){return this._accessibilityProperties},set accessibilityProperties(a){this._accessibilityProperties=a},get alpha(){return this._alpha},set alpha(a){a!==this._alpha&&(this._invalidate(),this._alpha=a,this._animated=!1)},get blendMode(){return this._blendMode},set blendMode(d){0<=a.indexOf(d)?
this._blendMode=d:throwError("ArgumentError",Errors.InvalidEnumError,"blendMode");this._animated=!1},get cacheAsBitmap(){return this._cacheAsBitmap},set cacheAsBitmap(a){this._cacheAsBitmap=this._filters.length?!0:a;this._animated=!1},get filters(){return this._filters},set filters(a){a.length?(this._filters.length||(this._wasCachedAsBitmap=this._cacheAsBitmap),this._cacheAsBitmap=!0):this._cacheAsBitmap=this._wasCachedAsBitmap;this._filters=a;this._animated=!1},get height(){var a=this._getContentBounds(),
d=this._currentTransform;return Math.abs(d.b)*(a.xMax-a.xMin)+Math.abs(d.d)*(a.yMax-a.yMin)|0},set height(a){if(!(0>a)){var d=Math.abs(this._rotationCos),b=Math.abs(this._rotationSin),e=this._getContentBounds(),f=b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin);f&&(this.scaleX=this.width/(d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin)),this.scaleY=a/f)}},get loaderInfo(){return this._loader&&this._loader._contentLoaderInfo||this._parent.loaderInfo},get mask(){return this._mask},set mask(a){if(this._mask!==a){this._invalidate();
a&&a._maskedObject&&(a._maskedObject.mask=null);if(this._mask=a)a._maskedObject=this;this._animated=!1}},get name(){return this._name||(this._name="instance"+b++)},set name(a){this._name=a},get mouseX(){if(!this._stage)return 0;e.x=this._stage._mouseX;e.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(e);return e.x},get mouseY(){if(!this._stage)return 0;e.x=this._stage._mouseX;e.y=this._stage._mouseY;this._applyConcatenatedInverseTransform(e);return e.y},get opaqueBackground(){return this._opaqueBackground},
set opaqueBackground(a){this._opaqueBackground=a;this._animated=!1},get parent(){return-1<this._index?this._parent:null},get root(){return this._stage&&this._stage._root},get rotation(){return this._rotation},set rotation(a){a%=360;180<a&&(a-=360);if(a!==this._rotation){this._invalidate();this._invalidateTransform();this._rotation=a;var d;switch(a){case 0:case 360:a=1;d=0;break;case 90:case -270:a=0;d=1;break;case 180:case -180:a=-1;d=0;break;case 270:case -90:a=0;d=-1;break;default:d=this._rotation/
180*Math.PI,a=Math.cos(d),d=Math.sin(d)}this._rotationCos=a;this._rotationSin=d;var b=this._currentTransform;b.a=a*this._scaleX;b.b=d*this._scaleX;b.c=-d*this._scaleY;b.d=a*this._scaleY;this._animated=!1}},get rotationX(){return 0},set rotationX(a){somewhatImplemented("DisplayObject.rotationX")},get rotationY(){return 0},set rotationY(a){somewhatImplemented("DisplayObject.rotationY")},get rotationZ(){return this.rotation},set rotationZ(a){this.rotation=a;somewhatImplemented("DisplayObject.rotationZ")},
get stage(){return this._stage},get scaleX(){return this._scaleX},set scaleX(a){if(a!==this._scaleX){this._invalidate();this._invalidateTransform();this._scaleX=a;var d=this._currentTransform;d.a=this._rotationCos*a;d.b=this._rotationSin*a;this._animated=!1}},get scaleY(){return this._scaleY},set scaleY(a){if(a!==this._scaleY){this._invalidate();this._invalidateTransform();this._scaleY=a;var d=this._currentTransform;d.c=-this._rotationSin*a;d.d=this._rotationCos*a;this._animated=!1}},get scaleZ(){return 1},
set scaleZ(a){somewhatImplemented("DisplayObject.scaleZ")},get scale9Grid(){return this._scale9Grid},set scale9Grid(a){somewhatImplemented("DisplayObject.scale9Grid");this._scale9Grid=a;this._animated=!1},get scrollRect(){return this._scrollRect},set scrollRect(a){somewhatImplemented("DisplayObject.scrollRect");this._scrollRect=a},get transform(){return new flash.geom.Transform(this)},set transform(a){var d=this.transform;d.colorTransform=a.colorTransform;a.matrix3D?d.matrix3D=a.matrix3D:d.matrix=
a.matrix},get visible(){return this._visible},set visible(a){a!==this._visible&&(this._invalidate(),this._visible=a,this._animated=!1)},get width(){var a=this._getContentBounds(),d=this._currentTransform;return Math.abs(d.a)*(a.xMax-a.xMin)+Math.abs(d.c)*(a.yMax-a.yMin)|0},set width(a){if(!(0>a)){var d=Math.abs(this._rotationCos),b=Math.abs(this._rotationSin),e=this._getContentBounds(),f=d*(e.xMax-e.xMin)+b*(e.yMax-e.yMin);f&&(this.scaleY=this.height/(b*(e.xMax-e.xMin)+d*(e.yMax-e.yMin)),this.scaleX=
a/f)}},get x(){return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.tx=a,this._animated=!1)},get y(){return this._currentTransform.ty},set y(a){a!==this._currentTransform.ty&&(this._invalidate(),this._invalidateTransform(),this._currentTransform.ty=a,this._animated=!1)},get z(){return 0},set z(a){somewhatImplemented("DisplayObject.z")},_getContentBounds:function(){var a=this._bounds;if(a.invalid){var d=this._bbox,
b=Number.MAX_VALUE,e=Number.MIN_VALUE,f=Number.MAX_VALUE,g=Number.MIN_VALUE;if(d)b=d.xMin,e=d.xMax,f=d.yMin,g=d.yMax;else{for(var d=this._children,w=d.length,z=0;z<w;z++)var A=d[z].getBounds(this),v=A.xMin,B=A.yMin,y=A.xMax,A=A.yMax,b=Math.min(b,v,y),e=Math.max(e,v,y),f=Math.min(f,B,A),g=Math.max(g,B,A);this._graphics&&(A=this._graphics._getBounds(!0),A.xMin!==A.xMax&&A.yMin!==A.yMax&&(v=A.xMin,B=A.yMin,y=A.xMax,A=A.yMax,b=Math.min(b,v,y),e=Math.max(e,v,y),f=Math.min(f,B,A),g=Math.max(g,B,A)))}b===
Number.MAX_VALUE&&(b=e=f=g=0);a.xMin=b;a.xMax=e;a.yMin=f;a.yMax=g;a.invalid=!1}return a},_getRegion:function(a){var d,b=this._filters;if(b.length){var e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MAX_VALUE,w=Number.MIN_VALUE;if(this._graphics&&(d=this._graphics._getBounds(!0)))e=d.xMin,f=d.xMax,g=d.yMin,w=d.yMax;for(var z=this._children,A=0;A<z.length;A++)d=z[A]._getRegion(this),d.xMin<e&&(e=d.xMin),d.xMax>f&&(f=d.xMax),d.yMin<g&&(g=d.yMin),d.yMax>w&&(w=d.yMax);if(e===Number.MAX_VALUE)return{xMin:0,
xMax:0,yMin:0,yMax:0};d={xMin:e,xMax:f,yMin:g,yMax:w};for(A=0;A<b.length;A++)b[A]._updateFilterBounds(d)}else d=this._graphics?this._graphics._getBounds(!0):this._getContentBounds();return this._getTransformedRect(d,a)},getBounds:function(a){return this._getTransformedRect(this._getContentBounds(),a)},_getTransformedRect:function(a,d){if(!d||d===this)return a;var b=a.xMin,e=a.xMax,f=a.yMin,g=a.yMax;if(0===e-b||0===g-f)return{xMin:0,yMin:0,xMax:0,yMax:0};var w=d&&!flash.display.DisplayObject.class.isInstanceOf(d)?
d:this._getConcatenatedTransform(d),z=w.a*b+w.c*f+w.tx|0,A=w.b*b+w.d*f+w.ty|0,v=w.a*e+w.c*f+w.tx|0,f=w.b*e+w.d*f+w.ty|0,B=w.a*e+w.c*g+w.tx|0,e=w.b*e+w.d*g+w.ty|0,y=w.a*b+w.c*g+w.tx|0,b=w.b*b+w.d*g+w.ty|0,g=0;z>v&&(g=z,z=v,v=g);B>y&&(g=B,B=y,y=g);A>f&&(g=A,A=f,f=g);e>b&&(g=e,e=b,b=g);return{xMin:z<B?z:B,yMin:A<e?A:e,xMax:v>y?v:y,yMax:f>b?f:b}},hitTestObject:function(a){return this._hitTest(!1,0,0,!1,a)},hitTestPoint:function(a,d,b){return this._hitTest(!0,a,d,b,null)},destroy:function(){this._destroyed||
(this._destroyed=!0,this.cleanupBroadcastListeners())},cleanupBroadcastListeners:function(){var a=this._listeners,d;for(d in a)avm2.systemDomain.onMessage.unregister(d,this._onBroadcastMessage)}},g=Object.getOwnPropertyDescriptor;f.__glue__={"native":{instance:{root:g(f,"root"),stage:g(f,"stage"),name:g(f,"name"),parent:g(f,"parent"),mask:g(f,"mask"),visible:g(f,"visible"),x:{get:function(){return this.x/20},set:function(a){this.x=20*a|0}},y:{get:function(){return this.y/20},set:function(a){this.y=
20*a|0}},z:{get:function(){return this.z/20},set:function(a){this.z=20*a|0}},scaleX:g(f,"scaleX"),scaleY:g(f,"scaleY"),scaleZ:g(f,"scaleZ"),mouseX:{get:function(){return this.mouseX/20},set:function(a){this.mouseX=20*a|0}},mouseY:{get:function(){return this.mouseY/20},set:function(a){this.mouseY=20*a|0}},rotation:g(f,"rotation"),rotationX:g(f,"rotationX"),rotationY:g(f,"rotationY"),rotationZ:g(f,"rotationZ"),alpha:g(f,"alpha"),width:{get:function(){return this.width/20},set:function(a){this.width=
20*a|0}},height:{get:function(){return this.height/20},set:function(a){this.height=20*a|0}},_hitTest:function(a,d,b,e,f){return this._hitTest(a,20*d|0,20*b|0,e,f)},cacheAsBitmap:g(f,"cacheAsBitmap"),opaqueBackground:g(f,"opaqueBackground"),scrollRect:g(f,"scrollRect"),filters:g(f,"filters"),blendMode:g(f,"blendMode"),transform:g(f,"transform"),scale9Grid:g(f,"scale9Grid"),loaderInfo:g(f,"loaderInfo"),accessibilityProperties:g(f,"accessibilityProperties"),globalToLocal:function(a){e.x=20*a.x|0;e.y=
20*a.y|0;this._applyConcatenatedInverseTransform(e);return new flash.geom.Point(e.x/20,e.y/20)},localToGlobal:function(a){e.x=20*a.x|0;e.y=20*a.y|0;this._applyCurrentTransform(e);return new flash.geom.Point(e.x/20,e.y/20)},getBounds:function(a){a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/20,(a.xMax-a.xMin)/20,(a.yMax-a.yMin)/20)},getRect:function(a){somewhatImplemented("DisplayObject.getRect");a=this.getBounds(a);return new flash.geom.Rectangle(a.xMin/20,a.yMin/20,(a.xMax-
a.xMin)/20,(a.yMax-a.yMin)/20)}}}};return f}.call(this),DisplayObjectContainerDefinition=function(){var a={get mouseChildren(){return this._mouseChildren},set mouseChildren(a){this._mouseChildren=a},get numChildren(){return this._children.length},get tabChildren(){return this._tabChildren},set tabChildren(a){this._tabChildren=a},get textSnapshot(){notImplemented()},addChild:function(a){return this.addChildAt(a,this._children.length)},addChildAt:function(d,b){d===this&&throwError("ArgumentError",Errors.CantAddSelfError);
if(d._parent===this)return this.setChildIndex(d,b);var f=this._children;(0>b||b>f.length)&&throwError("RangeError",Errors.ParamRangeError);-1<d._index&&(avm2.systemDomain.getClass("flash.display.Loader").isInstanceOf(d._parent)?a.removeChild.call(d._parent,d):d._parent.removeChild(d));if(!this._sparse)for(var g=f.length;g&&g>b;g--)f[g-1]._index++;f.splice(b,0,d);d._invalidateTransform();d._owned=!1;d._parent=this;d._stage=this._stage;d._index=b;d._dispatchEvent("added",void 0,!0);this._stage&&this._stage._addToStage(d);
return d},areInaccessibleObjectsUnderPoint:function(){notImplemented()},contains:function(a){return a._parent===this},getChildAt:function(a){var b=this._children;(0>a||a>b.length)&&throwError("RangeError",Errors.ParamRangeError);a=b[a];return!flash.display.DisplayObject.class.isInstanceOf(a)?null:a},getChildByName:function(a){for(var b=this._children,f=0,g=b.length;f<g;f++)if(b[f].name===a)return this.getChildAt(f);return null},getChildIndex:function(a){a._parent!==this&&throwError("ArgumentError",
Errors.NotAChildError);return this._sparse?this._children.indexOf(a):a._index},getObjectsUnderPoint:function(){notImplemented()},removeChild:function(a){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);return this.removeChildAt(this.getChildIndex(a))},removeChildAt:function(a){var b=this._children;(0>a||a>=b.length)&&throwError("RangeError",Errors.ParamRangeError);var f=b[a];f._dispatchEvent("removed",void 0,!0);this._stage&&this._stage._removeFromStage(f);if(!this._sparse)for(var g=
b.length;g&&g>a;g--)b[g-1]._index--;b.splice(a,1);f._invalidateTransform();f._owned=!1;f._parent=null;f._index=-1;return f},setChildIndex:function(a,b){a._parent!==this&&throwError("ArgumentError",Errors.NotAChildError);var f=this.getChildIndex(a);if(f!==b){var g=this._children;(0>b||b>g.length)&&throwError("RangeError",Errors.ParamRangeError);g.splice(f,1);g.splice(b,0,a);if(!this._sparse)for(f=f<b?f:b;f<g.length;)g[f]._index=f++;a._owned=!1;a._invalidate();return a}},removeChildren:function(a,b){a=
1>arguments.length?0:a|0;b=2>arguments.length?2147483647:b|0;var f=this._children.length;(0>a||0>b||b<a)&&throwError("RangeError",Errors.ParamRangeError);if(0!==f){b>f-1&&(b=f-1);for(f=b-a+1;f--;)this.removeChildAt(a)}},swapChildren:function(a,b){(a._parent!==this||b._parent!==this)&&throwError("ArgumentError",Errors.NotAChildError);this.swapChildrenAt(this.getChildIndex(a),this.getChildIndex(b))},swapChildrenAt:function(a,b){var f=this._children,g=f.length;(0>a||a>g||0>b||b>g)&&throwError("RangeError",
Errors.ParamRangeError);var g=f[a],l=f[b];f[a]=l;f[b]=g;g._index=b;l._index=a;g._owned=!1;l._owned=!1;g._invalidate();l._invalidate()},destroy:function(){this._destroyed||(this._destroyed=!0,this._children.forEach(function(a){a.destroy&&a.destroy()}),this.cleanupBroadcastListeners())}},b=Object.getOwnPropertyDescriptor;a.initialize=function(){this._tabChildren=this._mouseChildren=!0;this._sparse=!1;this._isContainer=!0};a.__glue__={"native":{instance:{numChildren:b(a,"numChildren"),tabChildren:b(a,
"tabChildren"),mouseChildren:b(a,"mouseChildren"),textSnapshot:b(a,"textSnapshot"),addChild:a.addChild,addChildAt:a.addChildAt,removeChild:a.removeChild,removeChildAt:a.removeChildAt,getChildIndex:a.getChildIndex,setChildIndex:a.setChildIndex,getChildAt:a.getChildAt,getChildByName:a.getChildByName,contains:a.contains,swapChildrenAt:a.swapChildrenAt,swapChildren:a.swapChildren,removeChildren:a.removeChildren}}};return a}.call(this),FrameLabelDefinition=function(){return{__class__:"flash.display.FrameLabel",
initialize:function(){},__glue__:{"native":{"static":{},instance:{ctor:function(a,b){this._name=a;this._frame=b},name:{get:function(){return this._name}},frame:{get:function(){return this._frame}}}}}}}.call(this),GraphicsDefinition=function(){var a={__class__:"flash.display.Graphics",initialize:function(){this._paths=[];this.beginPath();this._bitmap=null;this._parent=0;this.strokeBbox=this.bbox=null},_invalidate:function(){this.strokeBbox=this.bbox=null;this._parent._invalidate();this._parent._invalidateBounds()},
beginPath:function(){var a=this._currentPath;if(!a||!(0===a.commands.length||1===a.commands.length&&1===a.commands[0])){var d=this._currentPath=new ShapePath(null,null);this._paths.push(d);a&&(d.fillStyle=a.fillStyle,d.lineStyle=a.lineStyle,d.fillRule=a.fillRule)}},_drawPathObject:function(a){"flash.display.GraphicsPath"===a.__class__?this.drawPath(a.commands,a.data,a.winding):"flash.display.GraphicsTrianglePath"===a.__class__&&this.drawTriangles(a.vertices,a.indices,a.uvtData,a.culling)},draw:function(a,
d,e,f){for(var g=this._paths,l=0;l<g.length;l++)g[l].draw(a,d,e,f)},beginFill:function(a,d){void 0===d&&(d=1);this.beginPath();this._currentPath.fillStyle=d?{style:rgbIntAlphaToStr(a,d)}:null},beginGradientFill:function(a,d,e,f,g,l,m,p){a=createGradientStyle(a,d,e,f,g,l,m,p);this.beginPath();this._currentPath.fillStyle=a},beginBitmapFill:function(a,d,e,f){this.beginPath();this._currentPath.fillStyle=createPatternStyle(a,d,!1!==e,!!f)},clear:function(){this._invalidate();this._paths=[];this._currentPath=
null;this.beginPath()},copyFrom:function(){notImplemented("Graphics#copyFrom")},cubicCurveTo:function(a,d,e,f,g,l){this._invalidate();this._currentPath.cubicCurveTo(20*a|0,20*d|0,20*e|0,20*f|0,20*g|0,20*l|0)},curveTo:function(a,d,e,f){this._invalidate();this._currentPath.curveTo(20*a|0,20*d|0,20*e|0,20*f|0)},drawCircle:function(a,d,e){this._invalidate();this._currentPath.circle(20*a|0,20*d|0,20*e|0)},drawEllipse:function(a,d,e,f){this._invalidate();e=20*(e/2)|0;f=20*(f/2)|0;this._currentPath.ellipse(20*
a|0+e,20*d|0+f,e,f)},drawPath:function(a,d,e){this._invalidate();this.beginPath();this._currentPath.fillRule=e||"evenOdd";this._currentPath.commands=a;this._currentPath.data=d},drawRect:function(a,d,e,f){isNaN(e+f)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();this._currentPath.rect(20*a|0,20*d|0,20*e|0,20*f|0)},drawRoundRect:function(a,d,e,f,g,l){(isNaN(e+f+g)||void 0!==l&&isNaN(l))&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();void 0===l&&(l=
g);a=20*a|0;d=20*d|0;e=20*e|0;f=20*f|0;if(!l||!g)this._currentPath.rect(a,d,e,f);else{g=20*(g/2)|0;l=20*(l/2)|0;var m=e/2|0,p=f/2|0;g>m&&(g=m);l>p&&(l=p);m===g&&p===l?g===l?this._currentPath.circle(a+g,d+l,g):this._currentPath.ellipse(a+g,d+l,g,l):(e=a+e,f=d+f,m=a+g,g=e-g,p=d+l,l=f-l,this._currentPath.moveTo(e,l),this._currentPath.curveTo(e,f,g,f),this._currentPath.lineTo(m,f),this._currentPath.curveTo(a,f,a,l),this._currentPath.lineTo(a,p),this._currentPath.curveTo(a,d,m,d),this._currentPath.lineTo(g,
d),this._currentPath.curveTo(e,d,e,p),this._currentPath.lineTo(e,l))}},drawRoundRectComplex:function(a,d,e,f,g,l,m,p){isNaN(e+f+g+l+m+p)&&throwError("ArgumentError",Errors.InvalidParamError);this._invalidate();a=20*a|0;d=20*d|0;e=20*e|0;f=20*f|0;if(!g&&!l&&!m&&!p)this._currentPath.rect(a,d,e,f);else{g=20*g|0;l=20*l|0;m=20*m|0;p=20*p|0;e=a+e;f=d+f;var r=a+g;this._currentPath.moveTo(e,f-p);this._currentPath.curveTo(e,f,e-p,f);this._currentPath.lineTo(a+m,f);this._currentPath.curveTo(a,f,a,f-m);this._currentPath.lineTo(a,
d+g);this._currentPath.curveTo(a,d,r,d);this._currentPath.lineTo(e-l,d);this._currentPath.curveTo(e,d,e,d+l);this._currentPath.lineTo(e,f-p)}},drawTriangles:function(){notImplemented("Graphics#drawTriangles")},endFill:function(){this.beginPath();this._currentPath.fillStyle=null},lineBitmapStyle:function(a,d,e,f){this.beginPath();this._currentPath.lineStyle=createPatternStyle(a,d,e,f)},lineGradientStyle:function(a,d,e,f,g,l,m,p){a=createGradientStyle(a,d,e,f,g,l,m,p);this.beginPath();this._currentPath.lineStyle=
a},lineStyle:function(a,d,e,f,g,l,m,p){this.beginPath();a?(void 0===e&&(e=1),void 0===p&&(p=3),this._currentPath.lineStyle={style:rgbIntAlphaToStr(d,e),lineCap:l||"round",lineJoin:l||"round",width:20*a|0,miterLimit:2*p}):this._currentPath.lineStyle=null},lineTo:function(a,d){this._invalidate();this._currentPath.lineTo(20*a|0,20*d|0)},moveTo:function(a,d){this._currentPath.moveTo(20*a|0,20*d|0)},_getBounds:function(a){var d=a?this.strokeBbox:this.bbox;if(d)return d;for(var d=this._paths,e=[],f=[],
g=[],l=[],m=0,p=d.length;m<p;m++){var r=d[m];if(r.commands.length&&(r=r.getBounds(a)))e.push(r.xMin),f.push(r.yMin),g.push(r.xMax),l.push(r.yMax)}d=0===e.length?{xMin:0,yMin:0,xMax:0,yMax:0}:{xMin:Math.min.apply(Math,e),yMin:Math.min.apply(Math,f),xMax:Math.max.apply(Math,g),yMax:Math.max.apply(Math,l)};a?this.strokeBbox=d:this.bbox=d;return d}};a.__glue__={"native":{instance:{beginFill:a.beginFill,beginGradientFill:a.beginGradientFill,beginBitmapFill:a.beginBitmapFill,beginFillObject:a.beginFillObject,
beginStrokeObject:a.beginStrokeObject,clear:a.clear,copyFrom:a.copyFrom,cubicCurveTo:a.cubicCurveTo,curveTo:a.curveTo,drawCircle:a.drawCircle,drawEllipse:a.drawEllipse,drawPath:a.drawPath,drawRect:a.drawRect,drawRoundRect:a.drawRoundRect,drawRoundRectComplex:a.drawRoundRectComplex,drawTriangles:a.drawTriangles,endFill:a.endFill,lineBitmapStyle:a.lineBitmapStyle,lineGradientStyle:a.lineGradientStyle,lineStyle:a.lineStyle,moveTo:a.moveTo,lineTo:a.lineTo}}};return a}.call(this);
function createPatternStyle(a,b,d,e){return{style:factoryCtx.createPattern(a._drawable,!1===d?"no-repeat":"repeat"),transform:b?{a:b.a,b:b.b,c:b.c,d:b.d,e:b.tx,f:b.ty}:{a:1,b:0,c:0,d:1,e:0,f:0},smooth:e}}
function createGradientStyle(a,b,d,e,f,g,l,m){null===a||void 0===a&&throwError("TypeError",Errors.NullPointerError,"type");null===b||void 0===a&&throwError("TypeError",Errors.NullPointerError,"colors");"linear"===a||"radial"===a||throwError("ArgumentError",Errors.InvalidEnumError,"type");g=[];l=0;for(var p=b.length;l<p;l++)g.push({ratio:e[l]/255,color:rgbIntAlphaToStr(b[l],d[l])});return{style:"linear"===a?buildLinearGradientFactory(g):buildRadialGradientFactory(m||0,g),transform:f?{a:819.2*f.a,b:819.2*
f.b,c:819.2*f.c,d:819.2*f.d,e:f.tx,f:f.ty}:{a:819.2,b:0,c:0,d:819.2,e:0,f:0}}}
var InteractiveObjectDefinition=function(){var a={initialize:function(){this._contextMenu=null;this._doubleClickEnabled=!1;this._focusRect=null;this._mouseEnabled=!0;this._tabEnabled=!1},get accessibilityImplementation(){return null},set accessibilityImplementation(a){somewhatImplemented("accessibilityImplementation")},get contextMenu(){somewhatImplemented("contextMenu");return this._contextMenu},set contextMenu(a){somewhatImplemented("contextMenu");this._contextMenu=a},get doubleClickEnabled(){return this._doubleClickEnabled},
set doubleClickEnabled(a){this._doubleClickEnabled=a},get focusRect(){return this._focusRect},set focusRect(a){this._focusRect=a},get mouseEnabled(){return this._mouseEnabled},set mouseEnabled(a){this._mouseEnabled=a},get needsSoftKeyboard(){return!1},set needsSoftKeyboard(a){notImplemented()},get softKeyboardInputAreaOfInterest(){return null},set softKeyboardInputAreaOfInterest(a){notImplemented()},get tabEnabled(){return this._tabEnabled},set tabEnabled(a){var b=this._tabEnabled;this._tabEnabled=
a;b!==a&&this._dispatchEvent(new flash.events.Event("tabEnabledChange",!1,!1))},requestSoftKeyboard:function(){notImplemented()}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{tabEnabled:b(a,"tabEnabled"),tabIndex:{get:function(){return this._tabIndex},set:function(a){this._tabIndex=a}},focusRect:b(a,"focusRect"),mouseEnabled:b(a,"mouseEnabled"),doubleClickEnabled:b(a,"doubleClickEnabled"),accessibilityImplementation:b(a,"accessibilityImplementation"),softKeyboardInputAreaOfInterest:b(a,
"softKeyboardInputAreaOfInterest"),needsSoftKeyboard:b(a,"needsSoftKeyboard"),contextMenu:b(a,"contextMenu"),requestSoftKeyboard:a.requestSoftKeyboard}}};return a}.call(this),$RELEASE=!1,LoaderDefinition=function(){var a=document.head;a.insertBefore(document.createElement("style"),a.firstChild);var b=document.styleSheets[0],a={__class__:"flash.display.Loader",initialize:function(){this._contentLoaderInfo=new flash.display.LoaderInfo;this._contentLoaderInfo._loader=this;this._dictionary={};this._dictionaryResolved=
{};this._displayList=null;this._timeline=[];this._worker=this._uncaughtErrorEvents=this._lastPromise=null;var a=AVM2.currentAbc();a&&(this._contentLoaderInfo._loaderURL=a.env.loader._contentLoaderInfo._url)},_commitData:function(a){switch(a.command){case "init":this._init(a.result);break;case "progress":this._updateProgress(a.result);break;case "complete":var b=new Promise(function(a){avm2.systemDomain.onMessage.register("frameConstructed",function l(d){"frameConstructed"===d&&(a(),avm2.systemDomain.onMessage.unregister("frameConstructed",
l))})});Promise.all([b,this._lastPromise]).then(function(){this._content._complete=!0;this._contentLoaderInfo._dispatchEvent("complete")}.bind(this));(a=a.stats)&&TelemetryService.reportTelemetry(a);this._worker&&this._worker.terminate();break;case "empty":this._lastPromise=Promise.resolve();break;case "error":this._contentLoaderInfo._dispatchEvent("ioError",flash.events.IOErrorEvent);break;default:if(0===a.id)break;a.isSymbol?this._commitSymbol(a):"frame"===a.type?this._commitFrame(a):"image"===
a.type&&this._commitImage(a)}},_updateProgress:function(a){var b=this._contentLoaderInfo;b._bytesLoaded=a.bytesLoaded||0;b._bytesTotal=a.bytesTotal||0;a=new flash.events.ProgressEvent("progress",!1,!1,b._bytesLoaded,b._bytesTotal);b._dispatchEvent(a)},_buildFrame:function(a,b,f,g){var l=this._dictionary,m=this._dictionaryResolved,p={},r=[],s=g.depths;if(a)for(var u=a.depths,w=0;w<u.length;w++){var z=u[w];null!==s[z]&&(p[z]=a[z],r.push(z))}for(z in s)if(u=s[z]){if(u.move){var w=u,u=cloneObject(a[z]),
A;for(A in w){var v=w[A];v&&(u[A]=v)}}u.symbolId&&((w=l[u.symbolId])&&!m[u.symbolId]&&f.push(w),u=cloneObject(u),Object.defineProperty(u,"symbolInfo",{get:function(a,d){return function(){return a[d]}}(m,u.symbolId)}));p[z]||r.push(z);p[z]=u}r.sort(sortNumeric);p.depths=r;for(w=g.repeat;w--;)b.push(p);return p},_commitFrame:function(a){var b=a.abcBlocks,f=a.actionBlocks,g=a.initActionBlocks,l=a.exports,m=a.symbolClasses,p=a.sceneData,r=this,s=r._dictionary,u=r._contentLoaderInfo,w=r._timeline,z=w.length+
1,A,v=new Promise(function(a){A=a}),B=a.labelName,y=this._lastPromise;this._lastPromise=v;v=[y];this._displayList=this._buildFrame(this._displayList,w,v,a,z);var D=w.length;a.bgcolor?u._backgroundColor=a.bgcolor:isNullOrUndefined(u._backgroundColor)&&(u._backgroundColor={red:255,green:255,blue:255,alpha:255});Promise.all(v).then(function(){if(b&&r._isAvm2Enabled)for(var a=avm2.applicationDomain,d=0,f=b.length;d<f;d++){var g=new AbcFile(b[d].data,"abc_block_"+d);g.env.loader=r;b[d].flags?a.loadAbc(g):
a.executeAbc(g)}if(m&&r._isAvm2Enabled){for(var p=[],d=0,f=m.length;d<f;d++)if(a=m[d],g=s[a.symbolId])g.then(function(a){return function(d){d.className=a;avm2.applicationDomain.getClass(a).setSymbol(d.props)}}(a.className)),p.push(g);return Promise.all(p)}if(l&&!r._isAvm2Enabled){p=[];d=0;for(f=l.length;d<f;d++)if(a=l[d],g=s[a.symbolId])g.then(function(a){return function(d){r._avm1Context.addAsset(a,d.props)}}(a.className)),p.push(g);return Promise.all(p)}}).then(function(){var b=r._content,e;if(b){if(b._framesLoaded=
D,B&&b._labelMap&&void 0===b._labelMap[B]){b._labelMap[B]=z;for(var l=0,m=b.symbol.scenes.length;l<m;l++)if(H=b.symbol.scenes[l],z>=H._startFrame&&z<=H._endFrame){H.labels.push(new flash.display.FrameLabel(B,z-H._startFrame));break}}}else{l=r._parent;!0;b=r._dictionaryResolved[0];m=avm2.applicationDomain.getClass(b.className);b=m.createAsSymbol({framesLoaded:D,loader:r,parent:l||r,index:l?0:-1,level:l?0:-1,timeline:w,totalFrames:b.props.totalFrames,stage:r._stage,complete:a.complete});if(!r._isAvm2Enabled){var s=
r._avm1Context,v=b;if(l&&l!==r._stage){for(v=l.loaderInfo._loader;v._parent&&v._parent!==r._stage;)v=v._parent.loaderInfo._loader;if(v._isAvm2Enabled){somewhatImplemented("AVM1Movie");this._worker&&this._worker.terminate();return}v=v._content}v=v._getAS2Object();s.globals.asSetPublicProperty("_root",v);s.globals.asSetPublicProperty("_level0",v);s.globals.asSetPublicProperty("_level1",v);var y=r.loaderInfo._parameters;for(e in y)e in v||(v[e]=y[e])}l&&l==r._stage&&0===r._stage._children.length?(l._frameRate=
u._frameRate,l._stageHeight=u._height,l._stageWidth=u._width,l._root=b,l._setup()):r._children.push(b);e=b.symbol.labelMap=createEmptyObject();if(p){for(var v=[],L=b.symbol.totalFrames-1,G=p.scenes,I=p.labels,l=G.length;l--;){for(var J=G[l],y=J.offset,H=[],P=I.length;P--;){var O=I[P];O.frame>=y&&O.frame<=L&&(e[O.name]=O.frame+1,H.unshift(new flash.display.FrameLabel(O.name,O.frame-y+1)))}var H=new flash.display.Scene(J.name,H,L-y+1);H._startFrame=y+1;H._endFrame=L+1;v.unshift(H);L=y-1}b.symbol.scenes=
v}else H=[],B&&(e[B]=z,H.push(new flash.display.FrameLabel(B,z))),H=new flash.display.Scene("Scene 1",H,b.symbol.totalFrames),H._startFrame=1,H._endFrame=b.symbol.totalFrames,b.symbol.scenes=[H];r._stage&&(r._stage._children[0]=b);m.instanceConstructor.call(b);r._content=b}a.startSounds&&b._registerStartSounds(z,a.startSounds);a.soundStream&&b._initSoundStream(a.soundStream);a.soundStreamBlock&&b._addSoundStreamBlock(z,a.soundStreamBlock);if(!r._isAvm2Enabled){s=r._avm1Context;if(g)for(l=0;l<g.length;l++)b.addFrameScript(z-
1,function(a,d,b){if(!b.executed)return b.executed=!0,executeActions(a,s,this._getAS2Object())}.bind(b,g[l].actionsData,g[l].spriteId,{executed:!1}));if(f)for(l=0;l<f.length;l++)b.addFrameScript(z-1,function(a){return function(){return executeActions(a,s,this._getAS2Object())}}(f[l]))}1===z&&u._dispatchEvent(new flash.events.Event("init",!1,!1));A(a)})},_commitImage:function(a){var b=this,f;this._lastPromise=new Promise(function(a){f=a});var g=new Image;a.props.img=g;g.onload=function(){var g=avm2.systemDomain.getClass("flash.display.Bitmap"),
m=avm2.systemDomain.getClass("flash.display.BitmapData"),p=a.props;p.parent=b._parent;p.stage=b._stage;p.skipCopyToCanvas=!0;p=m.createAsSymbol(p);m.instanceConstructor.call(p,0,0,!0,4294967295);m=g.createAsSymbol(p);g.instanceConstructor.call(m,p);m._parent=b;b._children.push(m);b._invalidateBounds();b._content=m;f(a);g=b._contentLoaderInfo;g._width=m.width;g._height=m.height;g._dispatchEvent("init")};g.src=URL.createObjectURL(a.data);delete a.data},_commitSymbol:function(a){var e=this._dictionary,
f=this._dictionaryResolved;if("updates"in a)e[a.id].then(function(b){for(var e in a.updates)b.props[e]=a.updates[e]});else{var g="flash.display.DisplayObject",l=a.require,m=[],p={symbolId:a.id,loader:this},r,s=new Promise(function(a){r=a});if(l&&l.length)for(var u=0,w=l.length;u<w;u++){var z=l[u],A=e[z];A&&!f[z]&&m.push(A)}switch(a.type){case "button":var w={},v;for(v in a.states){for(var z=[],l={},A=a.states[v],B=Object.keys(A),u=0;u<B.length;u++){var y=B[u],D=A[y],F=e[D.symbolId];F&&!f[D.symbolId]&&
m.push(F);z.push(F);l[y]=Object.create(D,{symbolInfo:{get:function(a,d){return function(){return a[d]}}(f,D.symbolId)}})}B.sort(sortNumeric);l.depths=B;w[v]={className:"flash.display.Sprite",props:{loader:this,timeline:[l]}}}g="flash.display.SimpleButton";p.states=w;p.buttonActions=a.buttonActions;break;case "font":if(fromCharCode.apply(null,a.codes)&&(b.insertRule('@font-face{font-family:"'+a.uniqueName+'";src:url(data:font/opentype;base64,'+btoa(a.data)+")}",b.cssRules.length),!/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.test(window.navigator.userAgent))){var E=
document.createElement("div");E.setAttribute("style",'position: absolute; top: 0; right: 0;visibility: hidden; z-index: -500;font-family:"'+a.uniqueName+'";');E.textContent="font test";document.body.appendChild(E);u=new Promise(function(a){setTimeout(function(){a();document.body.removeChild(E)},200)});m.push(u)}g="flash.text.Font";p.name=a.name;p.uniqueName=a.uniqueName;p.charset=a.charset;p.bold=a.bold;p.italic=a.italic;p.metrics=a.metrics;this._registerFont(g,p);break;case "image":var C=new Image,
K,u=new Promise(function(a){K=a});C.onload=function(){if(a.mask){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;var e=b.getContext("2d");e.drawImage(C,0,0);for(var f=e.getImageData(0,0,a.width,a.height),g=f.data,l=a.mask,m=f.width*f.height,r=0,s=3;r<m;r++,s+=4)g[s]=l[r];e.putImageData(f,0,0);p.img=b}K()};C.src=URL.createObjectURL(a.data);m.push(u);g="flash.display.Bitmap";p.img=C;p.width=a.width;p.height=a.height;break;case "label":u=new Function("c,r,ct",a.data);g="flash.text.StaticText";
p.bbox=a.bbox;p.draw=u;break;case "text":p.bbox=a.bbox;p.html=a.html;"label"===a.type?g="flash.text.StaticText":(g="flash.text.TextField",p.tag=a.tag,p.variableName=a.variableName);break;case "shape":g=a.morph?"flash.display.MorphShape":"flash.display.Shape";p.bbox=a.bbox;p.strokeBbox=a.strokeBbox;p.paths=a.paths;p.dictionaryResolved=f;break;case "sound":if(!a.pcm&&!PLAY_USING_AUDIO_TAG){var Q,u=new Promise(function(a){Q=a});MP3DecoderSession.processAll(a.packaged.data,function(a,d,b,e){a.pcm=d||
new Uint8Array(0);Q();e&&console.error("ERROR: "+e)}.bind(null,p));m.push(u)}g="flash.media.Sound";p.sampleRate=a.sampleRate;p.channels=a.channels;p.pcm=a.pcm;p.packaged=a.packaged;break;case "binary":p.data=a.data;break;case "sprite":l=null;v=a.frameCount;z={};A=1;D=a.frames;B=[];y=[];u=0;for(w=D.length;u<w;u++){F=D[u];A=B.length+1;F.labelName&&(z[F.labelName]=A);if(F.startSounds){y[A]=F.startSounds;for(var R=0;R<F.startSounds.length;R++){var T=F.startSounds[R].soundId,L=e[T];L&&!f[T]&&m.push(L)}}l=
this._buildFrame(l,B,m,F,A)}l={};if(!this._isAvm2Enabled&&a.frameScripts){w=a.frameScripts;for(u=0;u<w.length;u+=2)A=w[u]+1,D=function(a,d){return function(){return executeActions(a,d._avm1Context,this._getAS2Object())}}(w[u+1],this),l[A]?l[A].push(D):l[A]=[D]}g="flash.display.MovieClip";p.timeline=B;p.framesLoaded=v;p.labelMap=z;p.frameScripts=l;p.totalFrames=v;p.startSoundRegistrations=y}e[a.id]=s;Promise.all(m).then(function(){var b={className:g,props:p};f[a.id]=b;r(b)})}},_registerFont:function(a,
b){this._vmPromise.then(function(){var f=avm2.applicationDomain.getClass(a),g=f.createAsSymbol(b);f.instanceConstructor.call(g)})},_init:function(a){var b=this,f=b._contentLoaderInfo;f._swfVersion=a.swfVersion;var g=a.bbox;f._width=g.xMax-g.xMin;f._height=g.yMax-g.yMin;f._frameRate=a.frameRate;var l,m,p=new Promise(function(a,d){l=a;m=d});p.resolve=l;p.reject=m;f=new Promise(function(f){p.then(function(){var g={className:"flash.display.MovieClip",props:{totalFrames:a.frameCount}};b._dictionaryResolved[0]=
g;f(g)})});b._dictionary[0]=f;b._lastPromise=f;b._vmPromise=p;b._isAvm2Enabled=a.fileAttributes.doAbc;this._setup()},_load:function(a){flash.net.URLRequest.class.isInstanceOf(a)&&(this._contentLoaderInfo._url=a._url);var b;b=new Worker(SHUMWAY_ROOT+"shumway-worker.js");var f=this;f._worker=b;b.onmessage=function(a){f._commitData(a.data)};if(flash.net.URLRequest.class.isInstanceOf(a)){var g=FileLoadingService.createSession();g.onprogress=function(a,d){b.postMessage({data:a,progress:d})};g.onerror=
function(a){f._commitData({command:"error",error:a})};g.onopen=function(){b.postMessage("pipe:")};g.onclose=function(){b.postMessage({data:null})};g.open(a._toFileRequest())}else b.postMessage(a)},_setup:function(){var a=this,b=a._stage;if(a._isAvm2Enabled)avm2.systemDomain.getClass("flash.ui.Mouse")._stage=b,a._vmPromise.resolve();else if(avm2.loadAVM1){var f=function(){var f=new AS2Context(a._contentLoaderInfo._swfVersion);f.stage=b;a._avm1Context=f;avm1lib.AS2Key.class.$bind(b);avm1lib.AS2Mouse.class.$bind(b);
b._addEventListener("frameConstructed",f.flushPendingScripts.bind(f),!1,Number.MAX_VALUE);a._vmPromise.resolve()};avm2.isAVM1Loaded?f():(avm2.isAVM1Loaded=!0,avm2.loadAVM1(f))}else a._vmPromise.reject("AVM1 loader is not found")},get contentLoaderInfo(){return this._contentLoaderInfo},get content(){somewhatImplemented("Loader.content");return this._content}};a.__glue__={"native":{instance:{content:Object.getOwnPropertyDescriptor(a,"content"),contentLoaderInfo:Object.getOwnPropertyDescriptor(a,"contentLoaderInfo"),
_getJPEGLoaderContextdeblockingfilter:function(){return 0},_load:a._load,_loadBytes:function(a,b,f,g){this._load(a.a,b,f,g)},_unload:function(){somewhatImplemented("Loader._unload, do we even need to do anything here?")},_close:function(){somewhatImplemented("Loader._close")},_getUncaughtErrorEvents:function(){somewhatImplemented("Loader._getUncaughtErrorEvents");return this._uncaughtErrorEvents},_setUncaughtErrorEvents:function(a){somewhatImplemented("Loader._setUncaughtErrorEvents");this._uncaughtErrorEvents=
a}}}};return a}.call(this),LoaderInfoDefinition=function(){return{__class__:"flash.display.LoaderInfo",initialize:function(){this._bytes=this._backgroundColor=this._actionScriptVersion=null;this._bytesTotal=this._bytesLoaded=0;this._width=this._url=this._swfVersion=this._loaderURL=this._loader=this._height=this._frameRate=this._contentType=this._content=null},__glue__:{"native":{"static":{getLoaderInfoByDefinition:function(){notImplemented("LoaderInfo.getLoaderInfoByDefinition")}},instance:{_getArgs:function(){var a=
this._parameters,b={},d;for(d in a)b[Multiname.getPublicQualifiedName(d)]=a[d];return b},_getUncaughtErrorEvents:function(){notImplemented("LoaderInfo._getUncaughtErrorEvents")},_setUncaughtErrorEvents:function(){notImplemented("LoaderInfo._setUncaughtErrorEvents")},loaderURL:{get:function(){return this._loaderURL}},url:{get:function(){return this._url}},isURLInaccessible:{get:function(){return this._isURLInaccessible}},bytesLoaded:{get:function(){return this._bytesLoaded}},bytesTotal:{get:function(){return this._bytesTotal}},
applicationDomain:{get:function(){return new flash.system.ApplicationDomain(avm2.applicationDomain)}},swfVersion:{get:function(){return this._swfVersion}},actionScriptVersion:{get:function(){return this._actionScriptVersion}},frameRate:{get:function(){return this._frameRate}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},contentType:{get:function(){return this._contentType}},sharedEvents:{get:function(){return this._sharedEvents}},parentSandboxBridge:{get:function(){return this._parentSandboxBridge},
set:function(a){this._parentSandboxBridge=a}},childSandboxBridge:{get:function(){return this._childSandboxBridge},set:function(a){this._childSandboxBridge=a}},sameDomain:{get:function(){return this._sameDomain}},childAllowsParent:{get:function(){return this._childAllowsParent}},parentAllowsChild:{get:function(){return this._parentAllowsChild}},loader:{get:function(){return this._loader}},content:{get:function(){return this._loader._content}},bytes:{get:function(){return this._bytes}}}},script:{instance:scriptProperties("public",
["swfVersion","bytesTotal","bytesLoaded","parameters","uncaughtErrorEvent"])}}}}.call(this),MorphShapeDefinition=function(){return{__class__:"flash.display.MorphShape",initialize:function(){var a=this._graphics=new flash.display.Graphics,b=this.symbol;b&&b.paths&&(a._paths=b.paths,a.bbox=b.bbox,a.strokeBbox=b.strokeBbox,this._stage&&("low"===this._stage._quality&&!a._bitmap)&&a._cacheAsBitmap(this._bbox))},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),
MovieClipDefinition=function(){var a={__class__:"flash.display.MovieClip",initialize:function(){this._currentFrame=this._playHead=1;this._currentLabel=this._currentFrameLabel=null;this._currentScene=0;this._enabled=!0;this._frameScripts={};this._framesLoaded=1;this._isPlaying=!1;this._labelMap={};this._sceneFrameMap={};this._sceneMap={};this._timeline=this._scenes=null;this._totalFrames=1;this._startSoundRegistrations=[];this._complete=this._allowFrameNavigation=!0;var a=this.symbol;if(a){this._timeline=
a.timeline||null;this._framesLoaded=a.framesLoaded||1;this._labelMap=Object.create(a.labelMap||null);this._frameScripts=Object.create(a.frameScripts||null);this._totalFrames=a.totalFrames||1;this._startSoundRegistrations=a.startSoundRegistrations||[];this._scenes=a.scenes||null;this._complete=!1===a.complete?!1:!0;var a=this._labelMap,b;for(b in a)1==a[b]&&(this._currentFrameLabel=this._currentLabel=b)}this._enterFrame(1);var f=this;this._onExecuteFrame=function l(){f._removeEventListener("executeFrame",
l);f._allowFrameNavigation=!1;f._callFrame(f._currentFrame);f._allowFrameNavigation=!0;f._playHead!==f._currentFrame&&f._gotoFrame(f._playHead,!0);f._postConstructChildren()};this._addEventListener("executeFrame",this._onExecuteFrame);if(this._complete&&1>=this._totalFrames)return this;this._onAdvanceFrame=function(){var a=f._playHead+1;if(f._complete&&a>f._totalFrames)a=1;else if(a>f._framesLoaded)return;f._updateDisplayList(a);f._sparse&&f._addEventListener("constructChildren",f._onConstructChildren);
f._startSounds(a);f._enterFrame(a);a in f._frameScripts&&f._addEventListener("executeFrame",f._onExecuteFrame)};this._onConstructChildren=function m(){f._removeEventListener("constructChildren",m);f._constructChildren()};this.play()},_updateDisplayList:function(a){this._destructChildren(a);this._declareChildren(a)},_declareChildren:function(a){var b=this._currentFrame;if(a!==b){var f=this._timeline;a=f[a-1];if(a!==f[b-1])for(var b=null,f=this._currentDisplayList,g=a.depths,l=this._children.length,
m=g.length;m--;){for(var p=g[m],r=p|0;f&&f.depth>r;)b=f,f=f.next;var s=null;f&&f.depth===r&&(s=f.obj)&&s._owned&&(l=this.getChildIndex(s));r=f&&f.depth===r?f.cmd:null;if((p=a[p])&&p!==r)r&&s&&p.symbolId===r.symbolId&&p.ratio===r.ratio?(s._animated&&(s._invalidate(),p.hasMatrix&&s._setTransformMatrix(p.matrix,!1),p.hasCxform&&(s._cxform=p.cxform),p.clip&&(s._clipDepth=p.clipDepth),p.hasName&&(s.name=p.name),p.blend&&(s.blendMode=this._resolveBlendMode(p.blendMode))),f.cmd=p):(s=this._addTimelineChild(p,
l),s.next=f,b?b.next=s:this._currentDisplayList=s,b=s)}}},_destructChildren:function(a){var b=this._currentFrame;if(a!==b){var f=this._timeline;a=f[a-1];if(a!==f[b-1]){for(var f=null,g=this._currentDisplayList,b=null;g;){var l=g.cmd,m=a[g.depth];!m||m.symbolId!==l.symbolId||m.ratio!==l.ratio?(l=g.next,f?f.next=l:this._currentDisplayList=l,g.next=b,b=g,g=l):(f=g,g=g.next)}for(;b;){if((a=b.obj)&&a._owned)this._sparse=!0,this.removeChild(a),a.destroy(),a._isPlaying&&a.stop();b=b.next}}}},_gotoFrame:function(a,
b){var f=a!==this._currentFrame;this._allowFrameNavigation||!this._loader._isAvm2Enabled?(f&&(this._updateDisplayList(a),this._enterFrame(a)),this._constructChildren(),this._loader._isAvm2Enabled&&10<=this.loaderInfo._swfVersion?(f&&this._addEventListener("executeFrame",this._onExecuteFrame),f=avm2.systemDomain,f.broadcastMessage("frameConstructed"),f.broadcastMessage("executeFrame"),f.broadcastMessage("exitFrame")):(f&&(b||!this._loader._isAvm2Enabled)&&this._callFrame(a),this._postConstructChildren())):
f&&(this._playHead=a)},_enterFrame:function(a){if(a!==this._currentFrame){this._currentFrameLabel=null;1===a&&(this._currentLabel=null);var b=this._labelMap,f;for(f in b)if(b[f]===a){this._currentFrameLabel=this._currentLabel=f;break}if(this._scenes){b=this._scenes;f=0;for(var g=b.length;f<g;f++){var l=b[f];if(a>=l._startFrame&&a<=l._endFrame){this._currentScene=f;break}}}this._playHead=this._currentFrame=a}},_callFrame:function(a){if(isNaN(a)&&(a=this._labelMap[a],void 0===a))return;if(a in this._frameScripts){a=
this._frameScripts[a];try{for(var b=0,f=a.length;b<f;b++)a[b].call(this)}catch(g){throw TelemetryService.reportTelemetry({topic:"error",error:2}),this.stop(),g;}}},_gotoButtonState:function(a){this._enabled&&this.gotoLabel("_"+a)},_getAbsFrameNum:function(a,b){1>a&&(a=1);if(b&&this._scenes&&1<this._scenes.length)for(var f=this._scenes,g=0;g<f.length;g++){var l=f[g];if(l.name===b){a+=l._startFrame-1;a>l._endFrame&&(a=l._endFrame);break}}return a>this._framesLoaded?this._framesLoaded:a},_registerStartSounds:function(a,
b){this._startSoundRegistrations[a]=b},_initSoundStream:function(a){var b=this._soundStream={data:{sampleRate:a.sampleRate,channels:a.channels},seekIndex:[],position:0},f="mp3"===a.format;if(f&&PLAY_USING_AUDIO_TAG){var g=document.createElement("audio");if(g.canPlayType("audio/mpeg")){b.element=g;b.rawFrames=[];return}}b.data.pcm=new Float32Array(a.samplesCount*a.channels);f&&(b.decoderPosition=0,b.decoderSession=new MP3DecoderSession,b.decoderSession.onframedata=function(a){var d=b.decoderPosition;
b.data.pcm.set(a,d);b.decoderPosition=d+a.length}.bind(this),b.decoderSession.onerror=function(a){console.error("ERROR: MP3DecoderSession: "+a)})},_addSoundStreamBlock:function(a,b){var f=this._soundStream,g=f.position;f.seekIndex[a]=g+b.seek*f.data.channels;f.position=g+b.samplesCount*f.data.channels;if(f.rawFrames)f.rawFrames.push(b.data);else{var l=f.decoderSession;l?l.pushAsync(b.data):f.data.pcm.set(b.pcm,g)}},_startSounds:function(a){var b=this._startSoundRegistrations[a];if(b)for(var f=this._sounds||
(this._sounds={}),g=this.loaderInfo._loader,l=0;l<b.length;l++){var m=b[l],p=m.soundId,r=m.soundInfo,s=f[p];if(!s){s=g._dictionaryResolved[p];if(!s)continue;m=avm2.systemDomain.findClass(s.className)?avm2.systemDomain.getClass(s.className):avm2.applicationDomain.getClass(s.className);s=m.createAsSymbol(s.props);m.instanceConstructor.call(s);f[p]=s={object:s}}s.channel&&(s.channel.stop(),delete s.channel);r.stop||(s.channel=s.object.play(0,r.hasLoops?r.loopCount:0))}if(this._soundStream&&!isNaN(this._soundStream.seekIndex[a]))if(b=
this._soundStream,f=b.element)if(m=b.data,a=b.seekIndex[a]/m.sampleRate/m.channels,this._complete&&!b.channel)a=new Blob(b.rawFrames),f.preload="metadata",f.loop=!1,f.src=URL.createObjectURL(a),m=flash.media.SoundChannel.class,a=m.createAsSymbol({element:f}),m.instanceConstructor.call(a),b.channel=a;else if(!isNaN(f.duration)&&f.currentTime>a+2&&f.currentTime<a+4)f.pause();else{if(!isNaN(f.duration)&&(f.paused||4<Math.abs(f.currentTime-a)))2<Math.abs(f.currentTime-a)&&(f.pause(),f.currentTime=a),
f.play()}else b.sound||(m=flash.media.Sound.class,s=m.createAsSymbol(this._soundStream.data),m.instanceConstructor.call(s),a=s.play(),b.sound=s,b.channel=a)},_getAS2Object:function(){if(!this.$as2Object)if(this._avm1SymbolClass){var a=this,b=this._avm1SymbolClass,f=function(){this.init(a);b.call(this)};f.prototype=Object.create(b.prototype);f.instanceConstructor=f;f.debugName="avm1 <symbol constructor wrapper>";construct(f)}else new avm1lib.AS2MovieClip(this);return this.$as2Object},get currentFrame(){var a=
this._currentFrame;return this._scenes?a-this.currentScene._startFrame+1:a},get currentFrameLabel(){return this._currentFrameLabel},get currentLabel(){return this._currentLabel},get currentLabels(){if(this._scenes)return this._scenes[this._currentScene].labels;var a=[],b=this._labelMap,f;for(f in b)a.push(new flash.display.FrameLabel(f,b[f]));return a},get currentScene(){return this._scenes?this._scenes[this._currentScene]:new flash.display.Scene("",this.currentLabels,this._framesLoaded)},get enabled(){return this._enabled},
set enabled(a){this._enabled=a},get framesLoaded(){return this._framesLoaded},get totalFrames(){return this._totalFrames},get scenes(){return this._scenes||[new flash.display.Scene("",this.currentLabels,this._framesLoaded)]},get trackAsMenu(){return!1},set trackAsMenu(a){notImplemented()},addFrameScript:function(){for(var a=this._frameScripts,b=0,f=arguments.length;b<f;b+=2){var g=arguments[b]+1,l=arguments[b+1];if(l){var m=a[g];m?m.push(l):a[g]=[l];g===this._currentFrame&&this._addEventListener("executeFrame",
this._onExecuteFrame)}}},gotoAndPlay:function(a,b){this.play();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoAndStop:function(a,b){this.stop();isNaN(a)?this.gotoLabel(a):this._gotoFrame(this._getAbsFrameNum(a,b))},gotoLabel:function(a){a=this._labelMap[a];void 0!==a&&this._gotoFrame(a)},isPlaying:function(){return this._isPlaying},nextFrame:function(){this.stop();this._currentFrame<this._framesLoaded&&this._gotoFrame(this._currentFrame+1)},nextScene:function(){this._scenes&&
this._currentScene<this._scenes.length-1&&this._gotoFrame(this._scenes[this._currentScene+1]._startFrame)},play:function(){this._isPlaying||this._complete&&1>=this._totalFrames||(this._isPlaying=!0,this._addEventListener("advanceFrame",this._onAdvanceFrame))},prevFrame:function(){this.stop();1<this._currentFrame&&this._gotoFrame(this._currentFrame-1)},prevScene:function(){this._scenes&&0<this._currentScene&&this._gotoFrame(this._scenes[this._currentScene-1]._startFrame)},stop:function(){this._isPlaying&&
!(this._complete&&1>=this._totalFrames)&&(this._isPlaying=!1,this._removeEventListener("advanceFrame",this._onAdvanceFrame))}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{currentFrame:b(a,"currentFrame"),framesLoaded:b(a,"framesLoaded"),totalFrames:b(a,"totalFrames"),trackAsMenu:b(a,"trackAsMenu"),scenes:b(a,"scenes"),currentScene:b(a,"currentScene"),currentLabel:b(a,"currentLabel"),currentFrameLabel:b(a,"currentFrameLabel"),enabled:b(a,"enabled"),isPlaying:b(a,"isPlaying"),
play:a.play,stop:a.stop,nextFrame:a.nextFrame,prevFrame:a.prevFrame,gotoAndPlay:a.gotoAndPlay,gotoAndStop:a.gotoAndStop,addFrameScript:a.addFrameScript,prevScene:a.prevScene,nextScene:a.nextScene}}};return a}.call(this),NativeMenuDefinition=function(){return{__class__:"flash.display.NativeMenu",initialize:function(){},__glue__:{"native":{"static":{},instance:{}}}}}.call(this),NativeMenuItemDefinition=function(){return{__class__:"flash.display.NativeMenuItem",initialize:function(){},__glue__:{"native":{"static":{},
instance:{enabled:{get:function(){somewhatImplemented("NativeMenuItem.enabled");return this._enabled},set:function(a){somewhatImplemented("NativeMenuItem.enabled");this._enabled=a}}}}}}}.call(this),SceneDefinition=function(){return{__class__:"flash.display.Scene",initialize:function(){this._endFrame=this._startFrame=1},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{name:{get:function(){notImplemented("Scene.name");return this._name}},labels:{get:function(){notImplemented("Scene.labels");
return this._labels}},numFrames:{get:function(){notImplemented("Scene.numFrames");return this._numFrames}}}}}}}.call(this),ShaderDefinition=function(){return{__class__:"flash.display.Shader",initialize:function(){this._data=null},__glue__:{"native":{"static":{},instance:{data:{get:function(){return this._data},set:function(a){this._data=a}},precisionHint:{get:function(){return this._precisionHint},set:function(a){this._precisionHint=a}}}},script:{instance:Glue.ALL}}}}.call(this),ShaderDataDefinition=
function(){return{__class__:"flash.display.ShaderData",initialize:function(){this._byteCode=null},__glue__:{"native":{"static":{},instance:{_setByteCode:function(a){this._byteCode=a}}},script:{instance:Glue.ALL}}}}.call(this),ShapeDefinition=function(){return{__class__:"flash.display.Shape",initialize:function(){var a=this._graphics=new flash.display.Graphics;a._parent=this;var b=this.symbol;if(b&&b.paths){a._paths=b.paths;for(var d=0;d<b.paths.length;d++)b.paths[d]=finishShapePath(b.paths[d],b.dictionaryResolved);
a.bbox=b.bbox;a.strokeBbox=b.strokeBbox;this._stage&&("low"===this._stage._quality&&!a._bitmap)&&a._cacheAsBitmap(this._bbox);this.ratio=b.ratio||0}},__glue__:{"native":{instance:{graphics:{get:function(){return this._graphics}}}}}}}.call(this),SimpleButtonDefinition=function(){var a=[0,37,39,36,35,45,46,0,8,0,0,0,0,13,38,40,33,34,9,27],b=[0,0,1,128,64,0,0,32,2,0,0,4,256,16,8,0];return{__class__:"flash.display.SimpleButton",initialize:function(){this._enabled=this._useHandCursor=!0;this._trackAsMenu=
!1;this._hitTestState=this._downState=this._overState=this._upState=null;this._currentButtonState="up";this._mouseChildren=!1;this._buttonMode=!0;this._avm1StateCode=this._prevAvm1StateCode=0;this._avm1MouseEvents=null;this._isContainer=!0;var a=this.symbol;if(a){var b=a.states;b.down&&(this._downState=this._constructState(b.down,this));b.hitTest&&(this._hitTestState=this._constructState(b.hitTest,this));b.over&&(this._overState=this._constructState(b.over,this));b.up&&(this._upState=this._constructState(b.up,
this))}this._loader&&(!this._loader._isAvm2Enabled&&a&&a.buttonActions)&&this._addEventListener("addedToStage",function(){this._initAvm1Events(a.buttonActions)}.bind(this),!1)},_constructState:function(a){var b=avm2.systemDomain.findClass(a.className)?avm2.systemDomain.getClass(a.className):avm2.applicationDomain.getClass(a.className);a=b.createAsSymbol(a.props);b.instanceConstructor.call(a);1===a._children.length&&(a=a._children[0],a._parent=null,a._index=-1);return a},_updateButton:function(){var a=
null;switch(this._currentButtonState){case "up":a=this._upState;break;case "over":a=this._overState;break;case "down":a=this._downState}if(a){var b=this._children[0];if(b){if(b===a)return;this._stage&&this._stage._removeFromStage(b);b._invalidateTransform()}a?(this._children[0]=a,a._parent=this,a._invalidateTransform(),this._stage&&this._stage._addToStage(a)):this._children.shift()}},_gotoButtonState:function(a){this._invalidateBounds();this._currentButtonState=a;this._updateButton();this._avm1MouseEvents&&
this._processAvm1MouseEvents(this._avm1MouseEvents)},_getRegion:function(a){if(!this._hitTestState)return{xMin:0,yMin:0,xMax:0,yMax:0};var b=this._hitTestState.getBounds(null);return this._getTransformedRect(b,a)},_getAS2Object:function(){this.$as2Object||new avm1lib.AS2Button(this);return this.$as2Object},_initAvm1Events:function(d){for(var b=this._loader._avm1Context,f=null,g=0;g<d.length;g++){var l=d[g],m=function(a){return executeActions(a,b,this._getAS2Object())}.bind(this.parent,l.actionsData),
p=l.mouseEventFlags;p&&(this._avm1MouseEvents||(this._avm1MouseEvents=[])).push({flags:p,listener:m});if(l=l.keyPress)f=f||(f=[]),f.push({keyCode:a[l]||0,charCode:l,listener:m})}if(f){var r=function(a){for(var d=0;d<f.length;d++){var b=f[d];(b.keyCode?b.keyCode===a.keyCode:b.charCode===a.charCode)&&b.listener()}},s=flash.events.KeyboardEvent;this.stage._addEventListener(s.class.KEY_DOWN,r,!1);this._addEventListener("removedFromStage",function(a){a._removeEventListener(s.class.KEY_DOWN,r,!1)}.bind(this,
this.stage),!1)}},_processAvm1MouseEvents:function(a){var e=this._avm1StateCode,f=("down"===this._currentButtonState?1:0)|("up"!==this._currentButtonState?2:0);if(e!==f){this._prevAvm1StateCode=e;this._avm1StateCode=f;e=b[e<<2|f];for(f=0;f<a.length;f++){var g=a[f];0!==(g.flags&e)&&g.listener()}}},__glue__:{"native":{instance:{_updateButton:function(){this._updateButton()},useHandCursor:{get:function(){return this._useHandCursor},set:function(a){this._useHandCursor=a}},enabled:{get:function(){return this._enabled},
set:function(a){this._enabled=a}},trackAsMenu:{get:function(){notImplemented("SimpleButton.trackAsMenu");return this._trackAsMenu},set:function(a){notImplemented("SimpleButton.trackAsMenu");this._trackAsMenu=a}},upState:{get:function(){return this._upState},set:function(a){this._upState=a;this._updateButton()}},overState:{get:function(){return this._overState},set:function(a){this._overState=a;this._updateButton()}},downState:{get:function(){return this._downState},set:function(a){this._downState=
a;this._updateButton()}},hitTestState:{get:function(){return this._hitTestState},set:function(a){a!==this._hitTestState&&(this._invalidate(),this._hitTestState=a)}},soundTransform:{get:function(){notImplemented("SimpleButton.soundTransform");return this._soundTransform},set:function(a){notImplemented("SimpleButton.soundTransform");this._soundTransform=a}}}}}}}.call(this),SpriteDefinition=function(){var a={__class__:"flash.display.Sprite",initialize:function(){this._buttonMode=!1;this._hitArea=null;
this._useHandCursor=!0;this._currentDisplayList=this._hitTarget=null;var a=this.symbol;if(a){if(this._graphics=a.graphics||new flash.display.Graphics,a.timeline&&(a=a.timeline[0]))for(var b=a.depths,f=0;f<b.length;f++){var g=a[b[f]];g&&(g=this._addTimelineChild(g),g.next=this._currentDisplayList,this._currentDisplayList=g)}}else this._graphics=new flash.display.Graphics;this._graphics._parent=this},_addTimelineChild:function(a,b){var f=a.symbolInfo,g=Object.create(f.props);g.symbolId=a.symbolId;g.depth=
a.depth;a.clip&&(g.clipDepth=a.clipDepth);a.hasCxform&&(g.cxform=a.cxform);a.hasMatrix&&(g.currentTransform=a.matrix);a.hasName&&(g.name=a.name);a.hasRatio&&(g.ratio=a.ratio/65535);a.blend&&(g.blendMode=a.blendMode);f={cmd:a,depth:a.depth,className:f.className,props:g,events:a.events,obj:null};void 0!==b?this._children.splice(b,0,f):this._children.push(f);this._sparse=!0;return f},_constructChildren:function(){if(this._sparse){for(var a=this._loader,b=this._children,f=0;f<b.length;f++){var g=b[f];
Counter.count("constructChild");if(flash.display.DisplayObject.class.isInstanceOf(g))g._index=f;else{var l=avm2.systemDomain.findClass(g.className)?avm2.systemDomain.getClass(g.className):avm2.applicationDomain.getClass(g.className),m=Object.create(g.props),p=m.name;m.animated=!0;m.owned=!0;m.parent=this;m.stage=this._stage;-1<this._level&&(m.level=this._level+1);m.index=f;var r=l.createAsSymbol(m);p&&(this[Multiname.getPublicQualifiedName(p)]=r);l.instanceConstructor.call(r);flash.display.BitmapData.class.isInstanceOf(r)&&
(l=r,r=flash.display.Bitmap.class.createAsSymbol(m),flash.display.Bitmap.class.instanceConstructor.call(r,l));a._isAvm2Enabled?r._dispatchEvent("load"):(this._initAvm1Bindings(r,p,g.events),r._dispatchEvent("init"),r._dispatchEvent("construct"),r._needLoadEvent=!0);r._dispatchEvent("added",void 0,!0);this._stage&&this._stage._addToStage(r);b[f]=r;g.obj=r}}this._sparse=!1}},_postConstructChildren:function(){var a=this._loader;if(a&&!a._isAvm2Enabled)for(var a=this._children,b=0;b<a.length;b++){var f=
a[b];f._needLoadEvent&&(delete f._needLoadEvent,f._dispatchEvent("load"))}},_duplicate:function(a,b){var f=this._loader,g=this._parent,l=g._children,m=this.class,p=this.symbol,r=Object.create(p);r.name=a;r.parent=g;r.depth=b;r=m.createAsSymbol(r);a&&(f&&!f._isAvm2Enabled&&!g.asHasProperty(void 0,a,0,!1))&&g.asSetPublicProperty(a,r);m.instanceConstructor.call(r);r._index=l.length;l.push(r);f._isAvm2Enabled||(g._initAvm1Bindings(r,a,p&&p.events),r._dispatchEvent("init"),r._dispatchEvent("construct"));
r._dispatchEvent("load");r._dispatchEvent("added");this._stage&&r._invalidate();return r},_insertChildAtDepth:function(a){this.addChild(a);var b=a._name,f=this._loader;b&&(f&&!f._isAvm2Enabled&&!this._getAS2Object().asHasProperty(void 0,b,0,!0))&&this._getAS2Object().asSetPublicProperty(b,a._getAS2Object())},_initAvm1Bindings:function(a,b,f){var g=this._loader._avm1Context,l=a.symbol;l&&l.variableName&&a._getAS2Object().asSetPublicProperty("variable",l.variableName);if(f){for(var l=[],m=0;m<f.length;m++){var p=
f[m];if(p.eoe)break;var r=function(a){return executeActions(a,g,this._getAS2Object())}.bind(a,p.actionsData),s;for(s in p)if(0===s.indexOf("on")&&p[s]){var u=s[2].toLowerCase()+s.substring(3);"enterFrame"===u&&(u="frameConstructed");var w=a;if("mouseDown"===u||"mouseUp"===u||"mouseMove"===u)w=this._stage;w._addEventListener(u,r,!1);l.push({name:u,fn:r,target:w})}}0<l.length&&a._addEventListener("removed",function(a){for(var d=0;d<a.length;d++)a[d].target._removeEventListener(a[d].name,a[d].fn,!1)}.bind(a,
l),!1)}b&&(this._getAS2Object&&a._getAS2Object)&&this._getAS2Object().asSetPublicProperty(b,a._getAS2Object())},_gotoButtonState:function(){},get buttonMode(){return this._buttonMode},set buttonMode(a){this._buttonMode=a},get graphics(){return this._graphics},get hitArea(){return this._hitArea},set hitArea(a){if(this._hitArea!==a&&(a&&a._hitTarget&&(a._hitTarget.hitArea=null),this._hitArea=a))a._hitTarget=this},get soundTransform(){notImplemented()},set soundTransform(a){notImplemented()},get useHandCursor(){return this._useHandCursor},
set useHandCursor(a){this._useHandCursor=a;this._stage&&(this._stage._mouseMoved=!0)},startDrag:function(){notImplemented()},startTouchDrag:function(){notImplemented()},stopDrag:function(){notImplemented()},stopTouchDrag:function(){notImplemented()}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{graphics:b(a,"graphics"),buttonMode:b(a,"buttonMode"),dropTarget:b(a,"dropTarget"),startDrag:a.startDrag,stopDrag:a.stopDrag,startTouchDrag:a.startTouchDrag,stopTouchDrag:a.stopTouchDrag,
constructChildren:a._constructChildren,hitArea:b(a,"hitArea"),useHandCursor:b(a,"useHandCursor"),soundTransform:b(a,"soundTransform")}}};return a}.call(this),StageDefinition=function(){return{__class__:"flash.display.Stage",initialize:function(){this._frameRate=24;this._scaleMode="showAll";this._align="";this._stageHeight=this._stageWidth=0;this._quality="high";this._color=4294967295;this._stage=this;this._deferRenderEvent=!1;this._focus=null;this._showDefaultContextMenu=!0;this._displayState="normal";
this._colorCorrection="default";this._stageFocusRect=!0;this._fullScreenSourceRect=null;this._wmodeGPU=!1;this._qtree=this._root=null;this._invalidRegions=new RegionCluster;this._mouseMoved=!1;this._mouseTarget=this;this._mouseEvents=[];this._cursor="auto";this._stageVideos=[];this._concatenatedTransform.invalid=!1},_setup:function(){this._qtree=new QuadTree(0,0,this._stageWidth,this._stageHeight,0);this._invalid=!0},_addToStage:function(a){a._stage=this;a._level=a._parent._level+1;a._invalid=!0;
for(var b=a._children,d=0;d<b.length;d++){var e=b[d];null===e._stage&&this._addToStage(e)}a._dispatchEvent("addedToStage")},_removeFromStage:function(a){for(var b=a._children,d=0;d<b.length;d++)b[d]._stage&&this._removeFromStage(b[d]);a._dispatchEvent("removedFromStage");a._stage=null;a._level=-1;a._region&&(this._qtree.remove(a._region),this._invalidRegions.insert(a._region),a._region=null)},_processInvalidations:function(a){for(var b=this._qtree,d=this._invalidRegions,e=[],f=0,g=this._children,
l=g.length;l--;){var m=g[l];a&&(m._invalid=!0);m._invisible=!m._visible;e.push(m)}for(;e.length;){for(var p=e.pop(),r=p._concatenatedTransform,g=p._children,l=g.length;l--;)m=g[l],flash.display.DisplayObject.class.isInstanceOf(m)&&(p._invalid&&(m._invalid=!0),r.invalid&&(m._concatenatedTransform.invalid=!0),m._invisible=p._invisible||!m._visible,e.push(m));p._level&&r.invalid&&(l=p._currentTransform,g=p._parent._concatenatedTransform,r.a=l.a*g.a+l.b*g.c,r.b=l.a*g.b+l.b*g.d,r.c=l.c*g.a+l.d*g.c,r.d=
l.d*g.d+l.c*g.b,r.tx=l.tx*g.a+g.tx+l.ty*g.c,r.ty=l.ty*g.d+g.ty+l.tx*g.b,r.invalid=!1);l=p._region;r=p._getRegion(r);g=p._invisible||!r||0===r.xMax-r.xMin||0===r.yMax-r.yMin||0>=r.xMax||r.xMin>=this._stageWidth||0>=r.yMax||r.yMin>=this._stageHeight;p._invalid&&(l&&d.insert(l),!g&&(!l||r.xMin!==l.xMin||r.yMin!==l.yMin||r.xMax!==l.xMax||r.yMax!==l.yMax)&&d.insert(r));g?l&&(b.remove(l),p._region=null):l?(l.xMin=r.xMin,l.xMax=r.xMax,l.yMin=r.yMin,l.yMax=r.yMax,b.update(l)):(r.obj=p,b.insert(r),p._region=
r);p._zindex=f++}e=new ShapePath;if(a)return e.rect(0,0,this._stageWidth,this._stageHeight),d.reset(),e;a=d.retrieve();for(l=0;l<a.length;l++){for(var g=a[l],f=g.xMin-g.xMin%20-40,p=g.yMin-g.yMin%20-40,r=g.xMax-g.xMax%20+80,g=g.yMax-g.yMax%20+80,m=b.retrieve(f,r,p,g),s=0;s<m.length;s++)m[s].obj._invalid=!0;e.rect(f,p,r-f,g-p)}d.reset();return e},_handleMouseButtons:function(){if(0!==this._mouseEvents.length)switch(this._mouseEvents.shift()){case "mousedown":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("down");
this._mouseTarget._dispatchEvent("mouseDown");break;case "mouseup":this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("over"),this._mouseTarget._dispatchEvent("mouseUp")}},_handleMouse:function(){for(var a=this._mouseX,b=this._mouseY,d=this._qtree.retrieve(a,a,b,b),e=[],f=0;f<d.length;f++){var g=d[f].obj,l=!1;if(flash.display.SimpleButton.class.isInstanceOf(g)){if(!g._enabled)continue;var m=g._hitTestState;m._parent=g;l=m._hitTest(!0,a,b,!0);m._parent=null}else l=g._hitTest(!0,a,b,
!0);if(l){l=null;flash.display.InteractiveObject.class.isInstanceOf(g)||(l=g,g=g._parent);do g._mouseEnabled?null===l&&(l=g):l=null,g=g._parent;while(g);e.push(l)}}var p;if(e.length){e.sort(sortByZindex);for(f=e.length;f--;){p=null;g=e[f];if(!flash.display.InteractiveObject.class.isInstanceOf(g))for(a=f;a--;)e[a]._parent===g._parent&&flash.display.InteractiveObject.class.isInstanceOf(e[a])&&(g=e[a],f=a);do{if(flash.display.InteractiveObject.class.isInstanceOf(g)&&(!p||!g._mouseChildren)&&!g._hitArea)p=
g;g=g._parent}while(g);if(!(p!==e[f]&&flash.display.SimpleButton.class.isInstanceOf(p)))break}}p?p._hitTarget&&(p=p._hitTarget):p=this;if(p===this._mouseTarget)p._dispatchEvent("mouseMove");else{this._mouseTarget._buttonMode&&this._mouseTarget._gotoButtonState("up");this._mouseTarget._dispatchEvent("mouseOut");e=this._mouseTarget;f=e._parent;a=p;b=a._parent;for(d="auto";0<=e._level&&e!==b;)e._hasEventListener("rollOut")&&e._dispatchEvent("rollOut"),e=e._parent;for(;0<=a._level&&a!==f;)a._hasEventListener("rollOver")&&
a._dispatchEvent("rollOver"),a._buttonMode&&a._useHandCursor&&(d="pointer"),a=a._parent;p._buttonMode&&p._gotoButtonState("over");p._dispatchEvent("mouseOver");this._mouseTarget=p;this._cursor=d}},_as2SetLevel:function(a,b){somewhatImplemented("Stage._as2SetLevel");this.addChild(b)},__glue__:{"native":{instance:{invalidate:function(){this._deferRenderEvent=this._invalid=!0},isFocusInaccessible:function(){notImplemented("Stage.isFocusInaccessible")},set_displayState:function(a){somewhatImplemented("Stage.set_displayState");
this._displayState=a},get_simulatedFullScreenWidth:function(){notImplemented("Stage.get_simulatedFullScreenWidth")},get_simulatedFullScreenHeight:function(){notImplemented("Stage.get_simulatedFullScreenHeight")},removeChildAt:function(){notImplemented("Stage.removeChildAt")},swapChildrenAt:function(){notImplemented("Stage.swapChildrenAt")},requireOwnerPermissions:function(){somewhatImplemented("Stage.requireOwnerPermissions")},frameRate:{get:function(){return this._frameRate},set:function(a){this._frameRate=
a}},scaleMode:{get:function(){return this._scaleMode},set:function(a){this._scaleMode=a;this._invalid=!0}},align:{get:function(){return this._align},set:function(a){this._align=a;this._invalid=!0}},stageWidth:{get:function(){return this._stageWidth/20},set:function(a){notImplemented("Stage.stageWidth");this._stageWidth=20*a|0}},stageHeight:{get:function(){return this._stageHeight/20},set:function(a){notImplemented("Stage.stageHeight");this._stageHeight=20*a|0}},showDefaultContextMenu:{get:function(){return this._showDefaultContextMenu},
set:function(a){somewhatImplemented("Stage.showDefaultContextMenu");this._showDefaultContextMenu=a}},focus:{get:function(){return this._focus},set:function(a){somewhatImplemented("Stage.focus");this._focus=a}},colorCorrection:{get:function(){return this._colorCorrection},set:function(a){notImplemented("Stage.colorCorrection");this._colorCorrection=a}},colorCorrectionSupport:{get:function(){return!1}},stageFocusRect:{get:function(){return this._stageFocusRect},set:function(a){somewhatImplemented("Stage.stageFocusRect");
this._stageFocusRect=a}},quality:{get:function(){return this._quality},set:function(a){somewhatImplemented("Stage.stageFocusRect");this._quality=a}},displayState:{get:function(){return this._displayState}},simulatedDisplayState:{get:function(){notImplemented("Stage.simulatedDisplayState");return this._simulatedDisplayState},set:function(a){notImplemented("Stage.simulatedDisplayState");this._simulatedDisplayState=a}},fullScreenSourceRect:{get:function(){return this._fullScreenSourceRect},set:function(a){notImplemented("Stage.fullScreenSourceRect");
this._fullScreenSourceRect=a}},simulatedFullScreenSourceRect:{get:function(){notImplemented("Stage.simulatedFullScreenSourceRect");return this._simulatedFullScreenSourceRect},set:function(a){notImplemented("Stage.simulatedFullScreenSourceRect");this._simulatedFullScreenSourceRect=a}},stageVideos:{get:function(){somewhatImplemented("Stage.stageVideos");return this._stageVideos}},stage3Ds:{get:function(){notImplemented("Stage.stage3Ds");return this._stage3Ds}},color:{get:function(){return this._color},
set:function(a){this._color=a;this._invalid=!0}},fullScreenWidth:{get:function(){notImplemented("Stage.fullScreenWidth");return this._fullScreenWidth}},fullScreenHeight:{get:function(){notImplemented("Stage.fullScreenHeight");return this._fullScreenHeight}},wmodeGPU:{get:function(){somewhatImplemented("Stage.wmodeGPU");return this._wmodeGPU}},softKeyboardRect:{get:function(){notImplemented("Stage.softKeyboardRect");return this._softKeyboardRect}},allowsFullScreen:{get:function(){return!1}},displayContextInfo:{get:function(){notImplemented("Stage.displayContextInfo");
return this._displayContextInfo}}}}}}}.call(this),EventDefinition=function(){return{__class__:"flash.events.Event",initialize:function(){this._isDefaultPrevented=this._stopImmediatePropagation=this._stopPropagation=!1;this._currentTarget=this._target=null;this._eventPhase=2},__glue__:{"native":{instance:{ctor:function(a,b,d){Counter.count("Event: "+a);this._type=a;this._bubbles=b;this._cancelable=d},stopPropagation:function(){this._stopPropagation=!0},stopImmediatePropagation:function(){this._stopImmediatePropagation=
this._stopPropagation=!0},preventDefault:function(){this._cancelable&&(this._isDefaultPrevented=!0)},isDefaultPrevented:function(){return this._isDefaultPrevented},type:{get:function(){return this._type}},bubbles:{get:function(){return this._bubbles}},cancelable:{get:function(){return this._cancelable}},target:{get:function(){return this._target}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this._eventPhase}}}},script:{"static":Glue.ALL,instance:{clone:"open public clone"}}}}}.call(this),
EventDispatcherDefinition=function(){function a(a,f,g,l){var m=a._target,p=f._type||f;a=a._listeners[p];if(l||"string"===typeof f&&d[f]||f._bubbles){for(var r=[],s=m._parent;s;)s._hasEventListener(p)&&r.push(s),s=s._parent;if(!a&&!r.length)return!0;for(var u=!0,s=r.length;s--&&u;)var u=r[s],w=u._captureListeners[p],u=b(w,f,g,l,m,u,1);a&&u&&(u=b(a,f,g,l,m));for(s=0;s<r.length&&u;s++)u=r[s],w=u._listeners[p],u=b(w,f,g,l,m,u,3)}else a&&b(a,f,g,l,m);return!f._isDefaultPrevented}function b(a,b,g,l,m,p,
r){if(a){a=a.slice();l=!0;for(var s=0;s<a.length;s++){var u=a[s],w=u.handleEvent.methodInfo;if(w&&w.parameters.length&&!w.parameters[0].isUsed)u.handleEvent();else if(l&&("string"===typeof b?g?b=new g(b):b in d?(b=new flash.events.MouseEvent(b,d[b]),m._stage&&(b._localX=m.mouseX,b._localY=m.mouseY)):b=new flash.events.Event(b):b._target&&(b=b.clone()),b._target=m,b._currentTarget=p||m,b._eventPhase=r||2,l=!1),u.handleEvent(b),b._stopImmediatePropagation)break}}return!b._stopPropagation}var d={click:!0,
contextMenu:!0,doubleClick:!0,middleClick:!0,middleMouseDown:!0,middleMouseUp:!0,mouseDown:!0,mouseMove:!0,mouseOut:!0,mouseOver:!0,mouseUp:!0,mouseWheel:!0,releaseOutside:!0,rightClick:!0,rightMouseDown:!0,rightMouseUp:!0,rollOut:!1,rollOver:!1};return{__class__:"flash.events.EventDispatcher",initialize:function(){this._target=this;this._listeners={};this._captureListeners={}},_addEventListenerImpl:function(a,d,b,l){"function"!==typeof d&&throwError("TypeError",Errors.CheckTypeFailedError,d,"Function");
var m=b?this._captureListeners:this._listeners;b=m[a];var p={handleEvent:d,priority:l||0};if(b){for(m=a=b.length;m--;){var r=b[m];if(r.handleEvent===d)return;l>r.priority&&(a=m)}b.splice(a,0,p)}else m[a]=[p]},_addEventListener:function(a,d,b,l){this._addEventListenerImpl(a,d,b,l)},_removeEventListenerImpl:function(a,d,b){"function"!==typeof d&&throwError("TypeError",Errors.CheckTypeFailedError,d,"Function");b=b?this._captureListeners:this._listeners;var l=b[a];if(l)for(var m=0;m<l.length;m++)if(l[m].handleEvent===
d){l.splice(m,1);l.length||delete b[a];break}},_removeEventListener:function(a,d,b){this._removeEventListenerImpl(a,d,b)},_hasEventListener:function(a){return a in this._listeners||a in this._captureListeners},_dispatchEvent:function(d,b,g){a(this,d,b,g)},__glue__:{"native":{instance:{ctor:function(a){this._target=a||this},addEventListener:function(a,d,b,l){this._addEventListener(a,d,b,l)},removeEventListener:function(a,d,b){this._removeEventListener(a,d,b)},hasEventListener:function(a){return this._hasEventListener(a)},
willTrigger:function(a){var d=this._target;do if(d._hasEventListener(a))return!0;while(d=d._parent);return!1},dispatchEventFunction:function(d){a(this,d)}}}}}}.call(this),KeyboardEventDefinition=function(){return{__class__:"flash.events.KeyboardEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("KeyboardEvent.updateAfterEvent")},charCode:{get:function(){return this._charCode},set:function(a){this._charCode=a}},ctrlKey:{get:function(){return this._ctrlKey},set:function(a){this._ctrlKey=
a}},altKey:{get:function(){return this._altKey},set:function(a){this._altKey=a}},shiftKey:{get:function(){return this._shiftKey},set:function(a){this._shiftKey=a}}}},script:{"static":Glue.ALL,instance:{keyCode:"public keyCode"}}}}}.call(this),MouseEventDefinition=function(){return{__class__:"flash.events.MouseEvent",initialize:function(){this._localY=this._localX=NaN},__glue__:{"native":{instance:{updateAfterEvent:function(){},getStageX:function(){if(this._target){var a=this._target._getConcatenatedTransform();
return(a.a*this._localX+a.c*this._localY+a.tx)/20}return this._localX/20},getStageY:function(){if(this._target){var a=this._target._getConcatenatedTransform();return(a.d*this._localY+a.b*this._localX+a.ty)/20}return this._localY/20},localX:{get:function(){return this._localX/20},set:function(a){this._localX=20*a|0}},localY:{get:function(){return this._localY/20},set:function(a){this._localY=20*a|0}}}},script:{"static":Glue.ALL}}}}.call(this),TextEventDefinition=function(){return{__class__:"flash.events.TextEvent",
__glue__:{"native":{instance:{copyNativeData:function(){notImplemented("TextEvent.copyNativeData")}}}}}}.call(this),TimerEventDefinition=function(){return{__class__:"flash.events.TimerEvent",__glue__:{"native":{instance:{updateAfterEvent:function(){notImplemented("TimerEvent.updateAfterEvent")}}}}}}.call(this),ExternalInterfaceDefinition=function(){function a(a,b){if(d.hasOwnProperty(a))return d[a](a,b)}var b=!1,d={};return{__class__:"flash.external.ExternalInterface",initialize:function(){},__glue__:{"native":{"static":{_initJS:function(){b||
(TelemetryService.reportTelemetry({topic:"feature",feature:1}),b=!0,FirefoxCom.initJS(a))},_getPropNames:function(a){var d=[];forEachPublicProperty(a,function(a){d.push(a)});return d},_addCallback:function(a,b,g){FirefoxCom.request("externalCom",{action:"register",functionName:a,remove:g});g?delete d[a]:d[a]=b},_evalJS:function(a){return FirefoxCom.requestSync("externalCom",{action:"eval",expression:a})},_callOut:function(a){return FirefoxCom.requestSync("externalCom",{action:"call",request:a})},
available:{get:function(){return!0}},objectID:{get:function(){return FirefoxCom.requestSync("externalCom",{action:"getId"})}},activeX:{get:function(){return!1}}},instance:{}}}}}.call(this),BevelFilterDefinition=function(){return{__class__:"flash.filters.BevelFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),BitmapFilterDefinition=function(){return{__class__:"flash.filters.BitmapFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),
BlurFilterDefinition=function(){return{__class__:"flash.filters.BlurFilter",initialize:function(){},_updateFilterBounds:function(a){var b=20*this._blurX*this._quality,d=20*this._blurY*this._quality;a.xMin-=b;a.xMax+=b;a.yMin-=d;a.yMax+=d},__glue__:{"native":{"static":{},instance:{blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=
a}}}}}}}.call(this),ColorMatrixFilterDefinition=function(){return{__class__:"flash.filters.ColorMatrixFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{"native":{instance:{matrix:{get:function(){return this._matrix},set:function(a){this._matrix=a}}}}}}}.call(this),ConvolutionFilterDefinition=function(){return{__class__:"flash.filters.ConvolutionFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),DisplacementMapFilterDefinition=function(){return{__class__:"flash.filters.DisplacementMapFilter",
initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),DropShadowFilterDefinition=function(){return{__class__:"flash.filters.DropShadowFilter",initialize:function(){},_updateFilterBounds:function(a){var b=this._angle*Math.PI/180,d=Math.sin(b)*this._distance,b=Math.cos(b)*this._distance,e=20*this._blurX*this._quality,f=20*this._blurY*this._quality;a.xMin-=e-(0<b?0:b);a.xMax+=e+Math.abs(b);a.yMin-=f-(0<d?0:d);a.yMax+=f+Math.abs(d)},__glue__:{"native":{instance:{distance:{get:function(){return this._distance},
set:function(a){this._distance=a}},angle:{get:function(){return this._angle},set:function(a){this._angle=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},hideObject:{get:function(){return this._hideObject},set:function(a){this._hideObject=a}},inner:{get:function(){return this._inner},
set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GlowFilterDefinition=function(){return{__class__:"flash.filters.GlowFilter",initialize:function(){},_updateFilterBounds:function(a){var b=20*this._blurX*this._quality,d=20*this._blurY*this._quality;a.xMin-=b;
a.xMax+=b;a.yMin-=d;a.yMax+=d},__glue__:{"native":{"static":{},instance:{color:{get:function(){return this._color},set:function(a){this._color=a}},alpha:{get:function(){return this._alpha},set:function(a){this._alpha=a}},blurX:{get:function(){return this._blurX},set:function(a){this._blurX=a}},blurY:{get:function(){return this._blurY},set:function(a){this._blurY=a}},inner:{get:function(){return this._inner},set:function(a){this._inner=a}},knockout:{get:function(){return this._knockout},set:function(a){this._knockout=
a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a}},strength:{get:function(){return this._strength},set:function(a){this._strength=a}}}}}}}.call(this),GradientBevelFilterDefinition=function(){return{__class__:"flash.filters.GradientBevelFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),GradientGlowFilterDefinition=function(){return{__class__:"flash.filters.GradientGlowFilter",initialize:function(){},_updateFilterBounds:function(){},
__glue__:{}}}.call(this),ShaderFilterDefinition=function(){return{__class__:"flash.filters.ShaderFilter",initialize:function(){},_updateFilterBounds:function(){},__glue__:{}}}.call(this),ColorTransformDefinition=function(){return{__class__:"flash.geom.ColorTransform",__glue__:{script:{instance:Glue.ALL}}}}.call(this),MatrixDefinition=function(){return{__class__:"flash.geom.Matrix",__glue__:{script:{instance:Glue.ALL}}}}.call(this),Matrix3DDefinition=function(){function a(a,b,f,g,l,m,p){var r=b*b,
s=f*f,u=g*g,w=r+s+u,z=Math.sqrt(w);b/=z;f/=z;g/=z;r/=w;s/=w;u/=w;w=Math.cos(a);a=Math.sin(a);return new flash.geom.Matrix3D([r+(s+u)*w,b*f*(1-w)+g*a,b*g*(1-w)-f*a,0,b*f*(1-w)-g*a,s+(r+u)*w,f*g*(1-w)+b*a,0,b*g*(1-w)+f*a,f*g*(1-w)-b*a,u+(r+s)*w,0,(l*(s+u)-b*(m*f+p*g))*(1-w)+(m*g-p*f)*a,(m*(r+u)-f*(l*b+p*g))*(1-w)+(p*b-l*g)*a,(p*(r+s)-g*(l*b+m*f))*(1-w)+(l*f-m*b)*a,1])}var b=new Uint32Array([0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15]);return{__class__:"flash.geom.Matrix3D",initialize:function(){},__glue__:{"native":{"static":{interpolate:function(){notImplemented("Matrix3D.interpolate")}},
instance:{ctor:function(a){this._matrix=new Float32Array(16);a&&16<=a.length?this.copyRawDataFrom(a,0,!1):this.identity()},clone:function(){return new flash.geom.Matrix3D(this._matrix)},copyToMatrix3D:function(a){a._matrix.set(this._matrix)},append:function(a){var b=a._matrix,f=this._matrix;a=this._matrix;var g=b[0],l=b[4],m=b[8],p=b[12],r=b[1],s=b[5],u=b[9],w=b[13],z=b[2],A=b[6],v=b[10],B=b[14],y=b[3],D=b[7],F=b[11],b=b[15],E=f[0],C=f[4],K=f[8],Q=f[12],R=f[1],T=f[5],L=f[9],G=f[13],I=f[2],J=f[6],
H=f[10],P=f[14],O=f[3],U=f[7],M=f[11],f=f[15];a[0]=g*E+l*R+m*I+p*O;a[1]=r*E+s*R+u*I+w*O;a[2]=z*E+A*R+v*I+B*O;a[3]=y*E+D*R+F*I+b*O;a[4]=g*C+l*T+m*J+p*U;a[5]=r*C+s*T+u*J+w*U;a[6]=z*C+A*T+v*J+B*U;a[7]=y*C+D*T+F*J+b*U;a[8]=g*K+l*L+m*H+p*M;a[9]=r*K+s*L+u*H+w*M;a[10]=z*K+A*L+v*H+B*M;a[11]=y*K+D*L+F*H+b*M;a[12]=g*Q+l*G+m*P+p*f;a[13]=r*Q+s*G+u*P+w*f;a[14]=z*Q+A*G+v*P+B*f;a[15]=y*Q+D*G+F*P+b*f},prepend:function(a){var b=this._matrix,f=a._matrix;a=this._matrix;var g=b[0],l=b[4],m=b[8],p=b[12],r=b[1],s=b[5],
u=b[9],w=b[13],z=b[2],A=b[6],v=b[10],B=b[14],y=b[3],D=b[7],F=b[11],b=b[15],E=f[0],C=f[4],K=f[8],Q=f[12],R=f[1],T=f[5],L=f[9],G=f[13],I=f[2],J=f[6],H=f[10],P=f[14],O=f[3],U=f[7],M=f[11],f=f[15];a[0]=g*E+l*R+m*I+p*O;a[1]=r*E+s*R+u*I+w*O;a[2]=z*E+A*R+v*I+B*O;a[3]=y*E+D*R+F*I+b*O;a[4]=g*C+l*T+m*J+p*U;a[5]=r*C+s*T+u*J+w*U;a[6]=z*C+A*T+v*J+B*U;a[7]=y*C+D*T+F*J+b*U;a[8]=g*K+l*L+m*H+p*M;a[9]=r*K+s*L+u*H+w*M;a[10]=z*K+A*L+v*H+B*M;a[11]=y*K+D*L+F*H+b*M;a[12]=g*Q+l*G+m*P+p*f;a[13]=r*Q+s*G+u*P+w*f;a[14]=z*Q+
A*G+v*P+B*f;a[15]=y*Q+D*G+F*P+b*f},invert:function(){var a=this.determinant;if(1E-7>Math.abs(a))return!1;var a=1/a,b=this._matrix,f=b[0],g=b[1],l=b[2],m=b[3],p=b[4],r=b[5],s=b[6],u=b[7],w=b[8],z=b[9],A=b[10],v=b[11],B=b[12],y=b[13],D=b[14],F=b[15];b[0]=a*(r*(A*F-D*v)-z*(s*F-D*u)+y*(s*v-A*u));b[1]=-a*(g*(A*F-D*v)-z*(l*F-D*m)+y*(l*v-A*m));b[2]=a*(g*(s*F-D*u)-r*(l*F-D*m)+y*(l*u-s*m));b[3]=-a*(g*(s*v-A*u)-r*(l*v-A*m)+z*(l*u-s*m));b[4]=-a*(p*(A*F-D*v)-w*(s*F-D*u)+B*(s*v-A*u));b[5]=a*(f*(A*F-D*v)-w*(l*
F-D*m)+B*(l*v-A*m));b[6]=-a*(f*(s*F-D*u)-p*(l*F-D*m)+B*(l*u-s*m));b[7]=a*(f*(s*v-A*u)-p*(l*v-A*m)+w*(l*u-s*m));b[8]=a*(p*(z*F-y*v)-w*(r*F-y*u)+B*(r*v-z*u));b[9]=-a*(f*(z*F-y*v)-w*(g*F-y*m)+B*(g*v-z*m));b[10]=a*(f*(r*F-y*u)-p*(g*F-y*m)+B*(g*u-r*m));b[11]=-a*(f*(r*v-z*u)-p*(g*v-z*m)+w*(g*u-r*m));b[12]=-a*(p*(z*D-y*A)-w*(r*D-y*s)+B*(r*A-z*s));b[13]=a*(f*(z*D-y*A)-w*(g*D-y*l)+B*(g*A-z*l));b[14]=-a*(f*(r*D-y*s)-p*(g*D-y*l)+B*(g*s-r*l));b[15]=a*(f*(r*A-z*s)-p*(g*A-z*l)+w*(g*s-r*l));return!0},identity:function(){var a=
this._matrix;a[0]=a[5]=a[10]=a[15]=1;a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=a[12]=a[13]=a[14]=0},decompose:function(){notImplemented("Matrix3D.decompose")},recompose:function(){notImplemented("Matrix3D.recompose")},appendTranslation:function(a,b,f){var g=this._matrix,l=g[3],m=g[7],p=g[11],r=g[15];g[0]+=a*l;g[1]+=b*l;g[2]+=f*l;g[4]+=a*m;g[5]+=b*m;g[6]+=f*m;g[8]+=a*p;g[9]+=b*p;g[10]+=f*p;g[12]+=a*r;g[13]+=b*r;g[14]+=f*r},appendRotation:function(b,e,f){this.append(a(b/180*Math.PI,e.x,e.y,e.z,
f?f.x:0,f?f.y:0,f?f.z:0))},appendScale:function(a,b,f){var g=this._matrix;g[0]*=a;g[1]*=b;g[2]*=f;g[4]*=a;g[5]*=b;g[6]*=f;g[8]*=a;g[9]*=b;g[10]*=f;g[12]*=a;g[13]*=b;g[14]*=f},prependTranslation:function(a,b,f){var g=this._matrix,l=g[1],m=g[5],p=g[9],r=g[2],s=g[6],u=g[10],w=g[3],z=g[7],A=g[11];g[12]+=g[0]*a+g[4]*b+g[8]*f;g[13]+=l*a+m*b+p*f;g[14]+=r*a+s*b+u*f;g[15]+=w*a+z*b+A*f},prependRotation:function(b,e,f){this.prepend(a(b/180*Math.PI,e.x,e.y,e.z,f?f.x:0,f?f.y:0,f?f.z:0))},prependScale:function(a,
b,f){var g=this._matrix;g[0]*=a;g[1]*=a;g[2]*=a;g[3]*=a;g[4]*=b;g[5]*=b;g[6]*=b;g[7]*=b;g[8]*=f;g[9]*=f;g[10]*=f;g[11]*=f},transformVector:function(a){var b=this._matrix,f=a.x,g=a.y;a=a.z;return new flash.geom.Vector3D(b[0]*f+b[4]*g+b[8]*a+b[12],b[1]*f+b[5]*g+b[9]*a+b[13],b[2]*f+b[6]*g+b[10]*a+b[14])},deltaTransformVector:function(a){var b=this._matrix,f=a.x,g=a.y;a=a.z;return new flash.geom.Vector3D(b[0]*f+b[4]*g+b[8]*a,b[1]*f+b[5]*g+b[9]*a,b[2]*f+b[6]*g+b[10]*a)},transformVectors:function(a,b){for(var f=
this._matrix,g=f[0],l=f[4],m=f[8],p=f[12],r=f[1],s=f[5],u=f[9],w=f[13],z=f[2],A=f[6],v=f[10],f=f[14],B=0;B<a.length-2;B+=3){var y=a.asGetNumericProperty(B),D=a.asGetNumericProperty(B+1),F=a.asGetNumericProperty(B+2);b.push(g*y+l*D+m*F+p);b.push(r*y+s*D+u*F+w);b.push(z*y+A*D+v*F+f)}},transpose:function(){var a=this._matrix,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[5]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b},pointAt:function(){notImplemented("Matrix3D.pointAt")},
interpolateTo:function(){notImplemented("Matrix3D.interpolateTo")},copyFrom:function(a){this._matrix.set(a._matrix)},copyRawDataTo:function(a,e,f){var g=this._matrix;if(f){f=0;for(e|=0;16>f;f++,e++)a.asSetNumericProperty(e,g[b[f]])}else{f=0;for(e|=0;16>f;f++,e++)a.asSetNumericProperty(e,g[f])}},copyRawDataFrom:function(a,e,f){var g=this._matrix;if(f){f=0;for(e|=0;16>f;f++,e++)g[b[f]]=a.asGetNumericProperty(e)||0}else{f=0;for(e|=0;16>f;f++,e++)g[f]=a.asGetNumericProperty(e)||0}},copyRowTo:function(a,
b){var f=a|0,g=this._matrix;b.x=g[f];b.y=g[f+4];b.z=g[f+8];b.w=g[f+12]},copyColumnTo:function(a,b){var f=a<<2,g=this._matrix;b.x=g[f];b.y=g[f+1];b.z=g[f+2];b.w=g[f+3]},copyRowFrom:function(a,b){var f=a|0,g=this._matrix;g[f]=b.x;g[f+4]=b.y;g[f+8]=b.z;g[f+12]=b.w},copyColumnFrom:function(a,b){var f=a<<2,g=this._matrix;g[f]=b.x;g[f+1]=b.y;g[f+2]=b.z;g[f+3]=b.w},rawData:{get:function(){var a=new Float64Vector;this.copyRawDataTo(a,0,!1);return a},set:function(a){this.copyRawDataFrom(a,0,!1)}},position:{get:function(){var a=
this._matrix;return new flash.geom.Vector3D(a[12],a[13],a[14])},set:function(a){var b=this._matrix;b[12]=a.x;b[13]=a.y;b[14]=a.z}},determinant:{get:function(){var a=this._matrix,b=a[4],f=a[8],g=a[12],l=a[5],m=a[9],p=a[13],r=a[6],s=a[10],u=a[14],w=a[7],z=a[11],A=a[15];return a[0]*(l*(s*A-z*u)-r*(m*A-z*p)+w*(m*u-s*p))-a[1]*(b*(s*A-z*u)-r*(f*A-z*g)+w*(f*u-s*g))+a[2]*(b*(m*A-z*p)-l*(f*A-z*g)+w*(f*p-m*g))-a[3]*(b*(m*u-s*p)-l*(f*u-s*g)+r*(f*p-m*g))}}}},script:{instance:Glue.ALL}}}}.call(this),PointDefinition=
function(){return{__class__:"flash.geom.Point",__glue__:{script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),RectangleDefinition=function(){return{__class__:"flash.geom.Rectangle",__glue__:{script:{instance:Glue.ALL}}}}.call(this),TransformDefinition=function(){var a={__class__:"flash.geom.Transform",get colorTransform(){var a=this._target._cxform;return a?new flash.geom.ColorTransform(a.redMultiplier/256,a.greenMultiplier/256,a.blueMultiplier/256,a.alphaMultiplier/256,a.redOffset,a.greenOffset,
a.blueOffset,a.alphaOffset):new flash.geom.ColorTransform},set colorTransform(a){avm2.systemDomain.getClass("flash.geom.ColorTransform").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.ColorTransform");this._target._cxform={redMultiplier:256*a.redMultiplier,greenMultiplier:256*a.greenMultiplier,blueMultiplier:256*a.blueMultiplier,alphaMultiplier:256*a.alphaMultiplier,redOffset:a.redOffset,greenOffset:a.greenOffset,blueOffset:a.blueOffset,alphaOffset:a.alphaOffset};
this._target._invalidate()},get concatenatedColorTransform(){var a=this.colorTransform;a.concat(this._target.parent.transform.concatenatedColorTransform);return a},get concatenatedMatrix(){if(this._target._current3DTransform)return null;var a=this._target._getConcatenatedTransform();return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/20)},get matrix(){if(this._target._current3DTransform)return null;var a=this._target._currentTransform;return new flash.geom.Matrix(a.a,a.b,a.c,a.d,a.tx/20,a.ty/
20)},set matrix(a){flash.geom.Matrix.class.isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix");var b=this._target;b._invalidate();b._setTransformMatrix(a,!0);b._current3DTransform=null;b._animated=!1},get matrix3D(){var a=this._target._current3DTransform;return a&&a.clone()},set matrix3D(a){avm2.systemDomain.getClass("flash.geom.Matrix3D").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.geom.Matrix3D");var b=a.rawData;this.matrix=
new flash.geom.Matrix(b.asGetPublicProperty(0),b.asGetPublicProperty(1),b.asGetPublicProperty(4),b.asGetPublicProperty(5),b.asGetPublicProperty(12),b.asGetPublicProperty(13));this._target._current3DTransform=a},ctor:function(a){this._target=a}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{colorTransform:b(a,"colorTransform"),concatenatedColorTransform:b(a,"concatenatedColorTransform"),concatenatedMatrix:b(a,"concatenatedMatrix"),matrix:b(a,"matrix"),matrix3D:b(a,"matrix3D"),ctor:a.ctor}}};
return a}.call(this),Vector3DDefinition=function(){return{__class__:"flash.geom.Vector3D",initialize:function(){},__glue__:{script:{instance:Glue.ALL}}}}.call(this),ID3InfoDefinition=function(){return{__glue__:{script:{instance:{songName:"public songName",genre:"public genre",artist:"public artist",track:"public track",album:"public album",year:"public year",comment:"public comment"}}}}}.call(this),MicrophoneDefinition=function(){return{__class__:"flash.media.Microphone",initialize:function(){},__glue__:{"native":{"static":{getMicrophone:function(){notImplemented("Microphone.getMicrophone")},
getEnhancedMicrophone:function(){notImplemented("Microphone.getEnhancedMicrophone")},names:{get:function(){notImplemented("Microphone.names")}},isSupported:{get:function(){notImplemented("Microphone.isSupported")}}},instance:{setSilenceLevel:function(){notImplemented("Microphone.setSilenceLevel")},setUseEchoSuppression:function(){notImplemented("Microphone.setUseEchoSuppression")},setLoopBack:function(){notImplemented("Microphone.setLoopBack")},gain:{set:function(a){notImplemented("Microphone.gain");
this._gain=a},get:function(){notImplemented("Microphone.gain");return this._gain}},rate:{set:function(a){notImplemented("Microphone.rate");this._rate=a},get:function(){notImplemented("Microphone.rate");return this._rate}},codec:{set:function(a){notImplemented("Microphone.codec");this._codec=a},get:function(){notImplemented("Microphone.codec");return this._codec}},framesPerPacket:{get:function(){notImplemented("Microphone.framesPerPacket");return this._framesPerPacket},set:function(a){notImplemented("Microphone.framesPerPacket");
this._framesPerPacket=a}},encodeQuality:{get:function(){notImplemented("Microphone.encodeQuality");return this._encodeQuality},set:function(a){notImplemented("Microphone.encodeQuality");this._encodeQuality=a}},noiseSuppressionLevel:{get:function(){notImplemented("Microphone.noiseSuppressionLevel");return this._noiseSuppressionLevel},set:function(a){notImplemented("Microphone.noiseSuppressionLevel");this._noiseSuppressionLevel=a}},enableVAD:{get:function(){notImplemented("Microphone.enableVAD");return this._enableVAD},
set:function(a){notImplemented("Microphone.enableVAD");this._enableVAD=a}},activityLevel:{get:function(){notImplemented("Microphone.activityLevel");return this._activityLevel}},index:{get:function(){notImplemented("Microphone.index");return this._index}},muted:{get:function(){notImplemented("Microphone.muted");return this._muted}},name:{get:function(){notImplemented("Microphone.name");return this._name}},silenceLevel:{get:function(){notImplemented("Microphone.silenceLevel");return this._silenceLevel}},
silenceTimeout:{get:function(){notImplemented("Microphone.silenceTimeout");return this._silenceTimeout}},useEchoSuppression:{get:function(){notImplemented("Microphone.useEchoSuppression");return this._useEchoSuppression}},soundTransform:{get:function(){notImplemented("Microphone.soundTransform");return this._soundTransform},set:function(a){notImplemented("Microphone.soundTransform");this._soundTransform=a}},enhancedOptions:{get:function(){notImplemented("Microphone.enhancedOptions");return this._enhancedOptions},
set:function(a){notImplemented("Microphone.enhancedOptions");this._enhancedOptions=a}}}},script:{instance:Glue.ALL}}}}.call(this),PLAY_USING_AUDIO_TAG=!0,SoundDefinition=function(){function a(a,b){var d=document.createElement("audio");if(d.canPlayType(a.mimeType)){d.preload="metadata";var l=new Blob([a.data],{type:a.mimeType});d.src=URL.createObjectURL(l);d.load();d.addEventListener("loadedmetadata",function(){b({duration:1E3*this.duration})})}else b({duration:0})}var b={initialize:function(){this._playQueue=
[];this._url=null;this._bytesLoaded=this._bytesTotal=this._length=0;this._id3=new flash.media.ID3Info;var b=this.symbol;if(b){var d={};b.pcm&&(d.sampleRate=b.sampleRate,d.channels=b.channels,d.pcm=b.pcm,d.end=b.pcm.length);d.completed=!0;b.packaged&&(d.data=b.packaged.data.buffer,d.mimeType=b.packaged.mimeType);var g=this;a(d,function(a){g._length=a.duration});this._soundData=d}TelemetryService.reportTelemetry({topic:"feature",feature:5})},close:function(){somewhatImplemented("Sound.close")},extract:function(){notImplemented("Sound.extract")},
_load:function(b){if(b){var d=this,g=this._stream=new flash.net.URLStream,l=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance(),m=0,p={completed:!1};g._addEventListener("progress",function(a){d._bytesLoaded=a[Multiname.getPublicQualifiedName("bytesLoaded")];d._bytesTotal=a[Multiname.getPublicQualifiedName("bytesTotal")];var b=g.bytesAvailable;g.readBytes(l,m,b);m+=b;d._dispatchEvent(a)});g._addEventListener("complete",function(b){d._dispatchEvent(b);p.data=l.a;p.mimeType="audio/mpeg";
p.completed=!0;d._soundData=p;a(p,function(a){d._length=a.duration});d._playQueue.forEach(function(a){a.channel._playSoundDataViaAudio(p,a.startTime)})});g.load(b)}},loadCompressedDataFromByteArray:function(){notImplemented("Sound#loadCompressedDataFromByteArray")},loadPCMFromByteArray:function(){notImplemented("Sound#loadPCMFromByteArray")},play:function(a,b,d){a=a||0;b=b||0;var l=new flash.media.SoundChannel;l._sound=this;l._soundTransform=isNullOrUndefined(d)?new flash.media.SoundTransform:d;this._playQueue.push({channel:l,
startTime:a});this._soundData&&l._playSoundDataViaAudio(this._soundData,a,b);return l},get bytesLoaded(){return this._bytesLoaded},get bytesTotal(){return this._bytesTotal},get id3(){return this._id3},get isBuffering(){notImplemented("Sound#isBuffering")},get isURLInaccessible(){notImplemented("Sound#isURLInaccessible")},get length(){return this._length},get url(){return this._url}},d=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{close:b.close,extract:b.extract,_load:b._load,loadCompressedDataFromByteArray:b.loadCompressedDataFromByteArray,
loadPCMFromByteArray:b.loadPCMFromByteArray,play:b.play,bytesLoaded:d(b,"bytesLoaded"),bytesTotal:d(b,"bytesTotal"),id3:d(b,"id3"),isBuffering:d(b,"isBuffering"),isURLInaccessible:d(b,"isURLInaccessible"),length:d(b,"length"),url:d(b,"url")}}};return b}.call(this),SoundChannelDefinition=function(){return{initialize:function(){this._element=null;this._rightPeak=this._leftPeak=this._position=0;this._pcmData=null;this._soundTransform=new flash.media.SoundTransform;this._soundMixerClass=avm2.systemDomain.getClass("flash.media.SoundMixer");
var a=this.symbol;a&&(this._element=a.element||null);this._element&&this._registerWithSoundMixer()},_registerWithSoundMixer:function(){this._soundMixerClass.native.static._registerChannel(this)},_unregisterWithSoundMixer:function(){this._soundMixerClass.native.static._unregisterChannel(this)},_applySoundTransform:function(){var a=this._soundTransform._volume;this._soundMixerClass._soundTransform&&(a*=this._soundMixerClass._soundTransform._volume);a*=this._soundMixerClass.native.static._getMasterVolume();
this._element&&(this._element.volume=clamp(a,0,1))},_playSoundDataViaChannel:function(a,b,d){this._registerWithSoundMixer();var e=this,f=Math.round(b/1E3*a.sampleRate)*a.channels,g=f;this._position=b;this._audioChannel=createAudioChannel(a.sampleRate,a.channels);this._audioChannel.ondatarequested=function(b){var m=a.end;if(g>=m&&a.completed)e._unregisterWithSoundMixer(),e._audioChannel.stop(),e._dispatchEvent(new flash.events.Event("soundComplete",!1,!1));else{var p=b.count;b=b.data;var r=a.pcm;do{for(var s=
Math.min(m-g,p),u=0;u<s;u++)b[u]=r[g++];p-=s;if(g>=m){if(!d)break;d--;g=f}}while(0<p);e._position=1E3*(g/a.sampleRate/a.channels)}};this._audioChannel.start();this._applySoundTransform()},_playSoundDataViaAudio:function(a,b,d){if(a.mimeType){this._registerWithSoundMixer();this._position=b;var e=this,f=0,g=document.createElement("audio");g.canPlayType(a.mimeType)?(g.preload="metadata",g.loop=0<d,a=new Blob([a.data],{type:a.mimeType}),g.src=URL.createObjectURL(a),g.addEventListener("loadeddata",function(){g.currentTime=
b/1E3;g.play()}),g.addEventListener("timeupdate",function(){var a=g.currentTime;d&&f>a&&(--d,d||(g.loop=!1),a<b/1E3&&(g.currentTime=b/1E3));e._position=1E3*(f=a)}),g.addEventListener("ended",function(){e._unregisterWithSoundMixer();e._dispatchEvent(new flash.events.Event("soundComplete",!1,!1));e._element=null}),this._element=g,this._applySoundTransform()):console.error('ERROR: "'+a.mimeType+'" type playback is not supported by the browser')}},__glue__:{"native":{"static":{},instance:{stop:function(){this._element&&
(this._unregisterWithSoundMixer(),this._element.pause());this._audioChannel&&(this._unregisterWithSoundMixer(),this._audioChannel.stop())},position:{get:function(){return this._position}},leftPeak:{get:function(){return this._leftPeak}},rightPeak:{get:function(){return this.rightPeak}},soundTransform:{get:function(){somewhatImplemented("SoundChannel.soundTransform");return new flash.media.SoundTransform(this._soundTransform._volume,this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundChannel.soundTransform");
this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;this._applySoundTransform()}}}},script:{instance:scriptProperties("public",["stop"])}}}}.call(this);function createAudioChannel(a,b){if(WebAudioChannel.isSupported)return new WebAudioChannel(a,b);error("PCM data playback is not supported by the browser")}function AudioResampler(a,b){this.sourceRate=a;this.targetRate=b;this.tail=[];this.sourceOffset=0}
AudioResampler.prototype={ondatarequested:function(){},getData:function(a,b){for(var d=this.sourceRate/this.targetRate,e=this.sourceOffset,f=Math.ceil((b-1)*d+e)+1,g=[],l=0;l<a.length;l++)g.push(new Float32Array(f));this.ondatarequested({data:g,count:f});for(l=0;l<a.length;l++){for(var m=a[l],p=g[l],r=0;r<b;r++){var s=r*d+e,u=s|0,w=Math.ceil(s)|0,z=0>u?this.tail[l]:p[u];u===w?m[r]=z:(s-=u,m[r]=z*(1-s)+p[w]*s)}this.tail[l]=p[f-1]}this.sourceOffset=(b-1)*d+e-(f-1)}};
function WebAudioChannel(a,b){var d=WebAudioChannel.context;d||(d="undefined"!==typeof AudioContext?new AudioContext:new webkitAudioContext,WebAudioChannel.context=d);this.context=d;this.contextSampleRate=d.sampleRate||44100;this.channels=b;this.sampleRate=a;this.contextSampleRate!=a&&(this.resampler=new AudioResampler(a,this.contextSampleRate),this.resampler.ondatarequested=function(a){this.requestData(a.data,a.count)}.bind(this))}
WebAudioChannel.prototype={start:function(){var a=this.context.createScriptProcessor?this.context.createScriptProcessor(2048,0,this.channels):this.context.createJavaScriptNode(2048,0,this.channels),b=this;a.onaudioprocess=function(a){for(var e=[],f=0;f<b.channels;f++)e.push(a.outputBuffer.getChannelData(f));a=e[0].length;b.resampler?b.resampler.getData(e,a):b.requestData(e,a)};a.connect(this.context.destination);this.source=a},stop:function(){this.source.disconnect(this.context.destination)},requestData:function(a,
b){var d=this.channels,e=new Float32Array(b*d);this.ondatarequested({data:e,count:e.length});for(var f=0,g=0;f<b;f++)for(var l=0;l<d;l++)a[l][f]=e[g++]}};WebAudioChannel.isSupported=function(){return"undefined"!==typeof AudioContext||"undefined"!=typeof webkitAudioContext}();
var SoundMixerDefinition=function(){var a=1,b=[];return{__class__:"flash.media.SoundMixer",initialize:function(){},__glue__:{"native":{"static":{_registerChannel:function(a){b.push(a)},_unregisterChannel:function(a){a=b.indexOf(a);0<=a&&b.splice(a,1)},_getMasterVolume:function(){return a},_setMasterVolume:function(d){a=d;b.forEach(function(a){a._applySoundTransform()})},stopAll:function(){b.forEach(function(a){a.stop()});b=[]},computeSpectrum:function(a){somewhatImplemented("SoundMixer.computeSpectrum");
for(var b=new Float32Array(1024),f=0;1024>f;f++)b[f]=Math.random();a.writeRawBytes(b);a.position=0},areSoundsInaccessible:function(){notImplemented("SoundMixer.areSoundsInaccessible")},bufferTime:{get:function(){notImplemented("SoundMixer.bufferTime")},set:function(){notImplemented("SoundMixer.bufferTime")}},soundTransform:{get:function(){somewhatImplemented("SoundMixer.soundTransform");return isNullOrUndefined(this._soundTransform)?new flash.media.SoundTransform:new flash.media.SoundTransform(this._soundTransform._volume,
this._soundTransform.pan)},set:function(a){somewhatImplemented("SoundMixer.soundTransform");this._soundTransform=isNullOrUndefined(a)?new flash.media.SoundTransform:a;b.forEach(function(a){a._applySoundTransform()})}},audioPlaybackMode:{get:function(){notImplemented("SoundMixer.audioPlaybackMode")},set:function(){notImplemented("SoundMixer.audioPlaybackMode")}},useSpeakerphoneForVoice:{get:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")},set:function(){notImplemented("SoundMixer.useSpeakerphoneForVoice")}}},
instance:{}}}}}.call(this),SoundTransformDefinition=function(){return{__class__:"flash.media.SoundTransform",initialize:function(){},_updateTransform:function(){somewhatImplemented("SoundTransform._updateTransform")},__glue__:{"native":{"static":{},instance:{volume:{get:function(){return this._volume},set:function(a){this._volume=a;this._updateTransform()}},leftToLeft:{get:function(){return this._leftToLeft},set:function(a){this._leftToLeft=a;this._updateTransform()}},leftToRight:{get:function(){return this._leftToRight},
set:function(a){this._leftToRight=a;this._updateTransform()}},rightToRight:{get:function(){return this._rightToRight},set:function(a){this._rightToRight=a;this._updateTransform()}},rightToLeft:{get:function(){return this._rightToLeft},set:function(a){this._rightToLeft=a;this._updateTransform()}}}},script:{instance:{pan:"public pan"}}}}}.call(this),StageVideoDefinition=function(){return{__class__:"flash.media.StageVideo",initialize:function(){},__glue__:{"native":{"static":{},instance:{attachNetStream:function(){notImplemented("StageVideo.attachNetStream")},
attachCamera:function(){notImplemented("StageVideo.attachCamera")},viewPort:{get:function(){notImplemented("StageVideo.viewPort");return this._viewPort},set:function(a){notImplemented("StageVideo.viewPort");this._viewPort=a}},pan:{set:function(a){notImplemented("StageVideo.pan");this._pan=a},get:function(){notImplemented("StageVideo.pan");return this._pan}},zoom:{set:function(a){notImplemented("StageVideo.zoom");this._zoom=a},get:function(){notImplemented("StageVideo.zoom");return this._zoom}},depth:{set:function(a){notImplemented("StageVideo.depth");
this._depth=a},get:function(){notImplemented("StageVideo.depth");return this._depth}},videoWidth:{get:function(){notImplemented("StageVideo.videoWidth");return this._videoWidth}},videoHeight:{get:function(){notImplemented("StageVideo.videoHeight");return this._videoHeight}},colorSpaces:{get:function(){notImplemented("StageVideo.colorSpaces");return this._colorSpaces}}}}}}}.call(this),VideoDefinition=function(){var a={initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:4})},
attachNetStream:function(a){this._netStream!==a&&(this._netStream&&this._netStream._videoReady.then(function(a){this._element=null;this._added&&(a.remove(),this._added=!1)}.bind(this)),(this._netStream=a)&&a._videoReady.then(function(d){this._element=d;a._videoMetadataReady.then(function(){this._element.width=this._videoWidth=this._element.videoWidth;this._element.height=this._videoHeight=this._element.videoHeight;this.stage&&(this.stage._invalid=!0)}.bind(this))}.bind(this)))},ctor:function(a,d){if(!a||
0>a)a=320;if(!d||0>d)d=240;this._bbox={xMin:0,yMin:0,xMax:20*a,yMax:20*d};this._initialWidth=this._videoWidth=a;this._initialHeight=this._videoHeight=d;this._element=this._netStream=null;this._added=!1},draw:function(a,d,e,f){if(this._element){!this._added&&this._stage&&(this._stage._domContainer.appendChild(this._element),this._added=!0);var g=this._initialWidth,l=this._initialHeight;d=this._getConcatenatedTransform(null,!0);e=this.stage&&this.stage._contentsScaleFactor||1;var m=d.a/e,p=d.b/e,r=
d.c/e,s=d.d/e,u=d.tx/20/e,w=d.ty/20/e;0<g&&0<l&&(a.save(),a.beginPath(),a.rect(0,0,g,l),a.clip(),a.clearRect(0,0,g,l),a.restore(),f.forEach(function(a){a.save();a.setTransform(m,p,r,s,u,w);a.save();a.beginPath();a.rect(0,0,g,l);a.clip();a.clearRect(0,0,g,l);a.restore();a.restore()}));a=g/this._videoWidth;f=l/this._videoHeight;a="transform: matrix("+a*m+","+a*p+","+f*r+","+f*s+","+u+","+w+");";this._currentCssTransform!==a&&(this._currentCssTransform=a,this._element.setAttribute("style","position: absolute; top:0; left:0; z-index: -100;transform-origin: 0px 0px 0;"+
a+"-webkit-transform-origin: 0px 0px 0; -webkit-"+a))}}};a.__glue__={"native":{instance:{attachNetStream:a.attachNetStream,ctor:a.ctor,smoothing:{get:function(){return this._smoothing},set:function(a){somewhatImplemented("Video.smoothing");this._smoothing=a}},videoHeight:{get:function(){return this._videoHeight}},videoWidth:{get:function(){return this._videoWidth}}}}};return a}.call(this),FileFilterDefinition=function(){return{__class__:"flash.net.FileFilter",initialize:function(){this._macType=this._extension=
this._description=null},__glue__:{"native":{"static":{},instance:{description:{get:function(){return this._description},set:function(a){this._description=a}},extension:{get:function(){return this._extension},set:function(a){this._extension=a}},macType:{get:function(){return this._macType},set:function(a){this._macType=a}}}}}}}.call(this),LocalConnectionDefinition=function(){return{__class__:"flash.net.LocalConnection",initialize:function(){},__glue__:{"native":{"static":{},instance:{close:function(){notImplemented("LocalConnection.close")},
connect:function(){notImplemented("LocalConnection.connect")},send:function(){notImplemented("LocalConnection.send")},allowDomain:function(){notImplemented("LocalConnection.allowDomain")},allowInsecureDomain:function(){notImplemented("LocalConnection.allowInsecureDomain")},domain:{get:function(){somewhatImplemented("LocalConnection.domain");var a=FileLoadingService.resolveUrl("/");return(a=/:\/\/(.+?)[:?#\/]/.exec(a))&&a[1]}},client:{get:function(){notImplemented("LocalConnection.client");return this._client},
set:function(a){notImplemented("LocalConnection.client");this._client=a}},isPerUser:{get:function(){notImplemented("LocalConnection.isPerUser");return this._isPerUser},set:function(a){notImplemented("LocalConnection.isPerUser");this._isPerUser=a}}}}}}}.call(this),NetConnectionDefinition=function(){return{__class__:"flash.net.NetConnection",initialize:function(){TelemetryService.reportTelemetry({topic:"feature",feature:6})},_invoke:function(a){var b=!1;switch(a){case 2:b=!0}(b?somewhatImplemented:
notImplemented)("NetConnection._invoke ("+a+")")},__glue__:{"native":{"static":{defaultObjectEncoding:{get:function b(){return b},set:function d(){somewhatImplemented("NetConnection.defaultObjectEncoding");return d}}},instance:{ctor:function(){this._uri=null;this._connected=!1;this._client=null;this._proxyType="none";this._objectEncoding=3},connect:function(d){var e=flash.events.NetStatusEvent;somewhatImplemented("NetConnection.connect");(this._uri=d)?this._dispatchEvent(new e(e.class.NET_STATUS,
!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Failed"}))):(this._connected=!0,this._dispatchEvent(new e(e.class.NET_STATUS,!1,!1,wrapJSObject({level:"status",code:"NetConnection.Connect.Success"}))))},call:function(){notImplemented("NetConnection.call")},connected:{get:function(){return this._connected}},uri:{get:function(){return this._uri}},client:{get:function(){return this._client},set:function(d){this._client=d}},objectEncoding:{get:function(){return this._objectEncoding},set:function(d){somewhatImplemented("NetConnection.objectEncoding");
this._objectEncoding=d}},proxyType:{get:function(){return this._proxyType},set:function(d){notImplemented("NetConnection.proxyType");this._proxyType=d}},connectedProxyType:{get:function(){notImplemented("NetConnection.connectedProxyType");return this._connectedProxyType}},usingTLS:{get:function(){somewhatImplemented("NetConnection.usingTLS");return!1}},protocol:{get:function(){notImplemented("NetConnection.protocol");return this._protocol}},maxPeerConnections:{get:function(){notImplemented("NetConnection.maxPeerConnections");
return this._maxPeerConnections},set:function(d){notImplemented("NetConnection.maxPeerConnections");this._maxPeerConnections=d}},nearID:{get:function(){notImplemented("NetConnection.nearID");return this._nearID}},farID:{get:function(){notImplemented("NetConnection.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetConnection.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetConnection.farNonce");return this._farNonce}},unconnectedPeerStreams:{get:function(){notImplemented("NetConnection.unconnectedPeerStreams");
return this._unconnectedPeerStreams}},invoke:function(d){return this._invoke(d,Array.prototype.slice.call(arguments,1))},invokeWithArgsArray:function(d,e){return this._invoke.call(this,d,e)}}}}}}.call(this),USE_MEDIASOURCE_API=!1,NetStreamDefinition=function(){return{__class__:"flash.net.NetStream",initialize:function(){},_invoke:function(a,b){var d=!1,e,f=this._videoElement;switch(a){case 4:this._videoState.bufferTime=b[0];d=!0;break;case 202:switch(b[1]){case "pause":d=!0,f&&(!1!==b[3]&&!f.paused?
f.pause():!0!==b[3]&&f.paused&&f.play(),f.currentTime=b[4]/1E3)}break;case 300:e=f?f.currentTime:0;d=!0;break;case 302:e=this._videoState.bufferTime;d=!0;break;case 303:e=f?f.duration:0;d=!0;break;case 305:e="full"===this._videoState.buffer?100:"progress"===this._videoState.buffer?50:0;d=!0;break;case 306:e=100,d=!0}(d?somewhatImplemented:notImplemented)("NetStream._invoke ("+a+")");return e},_createVideoElement:function(a){var b=flash.events.NetStatusEvent,d=this;/\.mp4$/i.test(a)&&/Intel Mac OS X.*?Firefox\/\d+/.test(window.navigator.userAgent)&&
(a="http://videos-cdn.mozilla.net/brand/Mozilla_2011_Story.webm");var e=document.createElement("video");e.preload="metadata";e.src=a;e.addEventListener("play",function(){d._videoState.started||(d._videoState.started=!0,d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Start",level:"status"}))))});e.addEventListener("ended",function(){d._videoState.started=!1;d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Play.Stop",level:"status"})))});
e.addEventListener("loadeddata",function(){d._videoState.buffer="full";d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Full",level:"status"})))});e.addEventListener("progress",function(){d._videoState.buffer="progress"});e.addEventListener("waiting",function(){d._videoState.buffer="empty";d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:"NetStream.Buffer.Empty",level:"status"})))});e.addEventListener("loadedmetadata",function(){d._videoMetadataReady.resolve({videoWidth:e.videoWidth,
videoHeight:e.videoHeight});if(d._client){var a={};a.asSetPublicProperty("width",e.videoWidth);a.asSetPublicProperty("height",e.videoHeight);a.asSetPublicProperty("duration",e.duration);d._client.asCallPublicProperty("onMetaData",[a])}});e.addEventListener("error",function(a){d._dispatchEvent(new b(b.class.NET_STATUS,!1,!1,wrapJSObject({code:4===a.target.error.code?"NetStream.Play.NoSupportedTrackFound":3===a.target.error.code?"NetStream.Play.FileStructureInvalid":"NetStream.Play.StreamNotFound",
level:"error"})))});e.play();this._videoElement=e;this._videoReady.resolve(e)},__glue__:{script:{instance:scriptProperties("public",["appendBytes","appendBytesAction"])},"native":{"static":{},instance:{ctor:function(){somewhatImplemented("NetStream.ctor");this._mediaSource=this._contentTypeHint=null;this._checkPolicyFile=!0;this._videoElement=null;var a,b;this._videoReady=new Promise(function(d,e){a=d;b=e});this._videoReady.resolve=a;this._videoReady.reject=b;var d,e;this._videoMetadataReady=new Promise(function(a,
b){d=a;e=b});this._videoMetadataReady.resolve=d;this._videoMetadataReady.reject=e;this._videoState={started:!1,buffer:"empty",bufferTime:0.1}},onResult:function(){notImplemented("NetStream.onResult")},dispose:function(){notImplemented("NetStream.dispose")},play:function(a){var b=!1;b&&"undefined"===typeof MediaSource&&(console.warn("MediaSource API is not enabled, falling back to regular playback"),b=!1);if(b){var d=new MediaSource;d.addEventListener("sourceopen",function(){this._mediaSource=d}.bind(this));
d.addEventListener("sourceend",function(){this._mediaSource=null}.bind(this));this._createVideoElement(window.URL.createObjectURL(d));if(a){a=new flash.net.URLRequest(a);a._checkPolicyFile=this._checkPolicyFile;var e=new flash.net.URLStream;e._addEventListener("httpStatus",function(a){if((a=a.asGetPublicProperty("responseHeaders").filter(function(a){return"Content-Type"===a.asGetPublicProperty("name")})[0])&&"application/octet-stream"!==a.asGetPublicProperty("value"))this._contentTypeHint=a.asGetPublicProperty("value")}.bind(this));
e._addEventListener("progress",function(){var a=e.bytesAvailable,b=avm2.systemDomain.getClass("flash.utils.ByteArray").createInstance();e.readBytes(b,0,a);this.appendBytes(b)}.bind(this));e._addEventListener("complete",function(){this.appendBytesAction("endSequence")}.bind(this));e.load(a)}}else somewhatImplemented("NetStream.play"),this._createVideoElement(FileLoadingService.resolveUrl(a))},play2:function(){notImplemented("NetStream.play2")},invoke:function(a){return this._invoke(a,Array.prototype.slice.call(arguments,
1))},invokeWithArgsArray:function(a,b){return this._invoke.call(this,a,b)},appendBytes:function(a){this._mediaSource&&(this._mediaSourceBuffer||(this._mediaSourceBuffer=this._mediaSource.addSourceBuffer(this._contentTypeHint)),this._mediaSourceBuffer.appendBuffer(new Uint8Array(a.a,0,a.length)));somewhatImplemented("NetStream.appendBytes")},appendBytesAction:function(a){"endSequence"===a&&this._mediaSource&&this._mediaSource.endOfStream();somewhatImplemented("NetStream.appendBytesAction")},info:{get:function(){notImplemented("NetStream.info");
return this._info}},multicastInfo:{get:function(){notImplemented("NetStream.multicastInfo");return this._multicastInfo}},soundTransform:{get:function(){return this._soundTransform},set:function(a){somewhatImplemented("NetStream.soundTransform");this._soundTransform=a}},checkPolicyFile:{get:function(){return this._checkPolicyFile},set:function(a){this._checkPolicyFile=a}},client:{get:function(){somewhatImplemented("NetStream.client");return this._client},set:function(a){somewhatImplemented("NetStream.client");
this._client=a}},objectEncoding:{get:function(){notImplemented("NetStream.objectEncoding");return this._objectEncoding}},multicastPushNeighborLimit:{get:function(){notImplemented("NetStream.multicastPushNeighborLimit");return this._multicastPushNeighborLimit},set:function(a){notImplemented("NetStream.multicastPushNeighborLimit");this._multicastPushNeighborLimit=a}},multicastWindowDuration:{get:function(){notImplemented("NetStream.multicastWindowDuration");return this._multicastWindowDuration},set:function(a){notImplemented("NetStream.multicastWindowDuration");
this._multicastWindowDuration=a}},multicastRelayMarginDuration:{get:function(){notImplemented("NetStream.multicastRelayMarginDuration");return this._multicastRelayMarginDuration},set:function(a){notImplemented("NetStream.multicastRelayMarginDuration");this._multicastRelayMarginDuration=a}},multicastAvailabilityUpdatePeriod:{get:function(){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");return this._multicastAvailabilityUpdatePeriod},set:function(a){notImplemented("NetStream.multicastAvailabilityUpdatePeriod");
this._multicastAvailabilityUpdatePeriod=a}},multicastFetchPeriod:{get:function(){notImplemented("NetStream.multicastFetchPeriod");return this._multicastFetchPeriod},set:function(a){notImplemented("NetStream.multicastFetchPeriod");this._multicastFetchPeriod=a}},multicastAvailabilitySendToAll:{get:function(){notImplemented("NetStream.multicastAvailabilitySendToAll");return this._multicastAvailabilitySendToAll},set:function(a){notImplemented("NetStream.multicastAvailabilitySendToAll");this._multicastAvailabilitySendToAll=
a}},farID:{get:function(){notImplemented("NetStream.farID");return this._farID}},nearNonce:{get:function(){notImplemented("NetStream.nearNonce");return this._nearNonce}},farNonce:{get:function(){notImplemented("NetStream.farNonce");return this._farNonce}},peerStreams:{get:function(){notImplemented("NetStream.peerStreams");return this._peerStreams}},audioReliable:{get:function(){notImplemented("NetStream.audioReliable");return this._audioReliable},set:function(a){notImplemented("NetStream.audioReliable");
this._audioReliable=a}},videoReliable:{get:function(){notImplemented("NetStream.videoReliable");return this._videoReliable},set:function(a){notImplemented("NetStream.videoReliable");this._videoReliable=a}},dataReliable:{get:function(){notImplemented("NetStream.dataReliable");return this._dataReliable},set:function(a){notImplemented("NetStream.dataReliable");this._dataReliable=a}},audioSampleAccess:{get:function(){notImplemented("NetStream.audioSampleAccess");return this._audioSampleAccess},set:function(a){notImplemented("NetStream.audioSampleAccess");
this._audioSampleAccess=a}},videoSampleAccess:{get:function(){notImplemented("NetStream.videoSampleAccess");return this._videoSampleAccess},set:function(a){notImplemented("NetStream.videoSampleAccess");this._videoSampleAccess=a}},useHardwareDecoder:{get:function(){notImplemented("NetStream.useHardwareDecoder");return this._useHardwareDecoder},set:function(a){notImplemented("NetStream.useHardwareDecoder");this._useHardwareDecoder=a}},useJitterBuffer:{get:function(){notImplemented("NetStream.useJitterBuffer");
return this._useJitterBuffer},set:function(a){notImplemented("NetStream.useJitterBuffer");this._useJitterBuffer=a}},videoStreamSettings:{get:function(){notImplemented("NetStream.videoStreamSettings");return this._videoStreamSettings},set:function(a){notImplemented("NetStream.videoStreamSettings");this._videoStreamSettings=a}}}}}}}.call(this),ObjectEncodingDefinition=function(){return{__class__:"flash.net.ObjectEncoding",initialize:function(){},__glue__:{"native":{"static":{dynamicPropertyWriter:{get:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")},
set:function(){notImplemented("ObjectEncoding.dynamicPropertyWriter")}}},instance:{}}}}}.call(this),ResponderDefinition=function(){var a={ctor:function(){}};a.__glue__={"native":{instance:{ctor:a.ctor}}};return a}.call(this),SharedObjectDefinition=function(){var a=3,b=createEmptyObject();return{__class__:"flash.net.SharedObject",initialize:function(){this._data=this._path=null;this._objectEncoding=a;TelemetryService.reportTelemetry({topic:"feature",feature:3})},__glue__:{"native":{"static":{deleteAll:function(){notImplemented("SharedObject.deleteAll")},
getDiskUsage:function(){notImplemented("SharedObject.getDiskUsage")},getLocal:function(a,e){var f=(e||"")+"/"+a;if(b[f])return b[f];var g=new flash.net.SharedObject;g._path=f;f=sessionStorage.getItem(f);g._data=f?JSON.parse(f):{};return g},getRemote:function(){notImplemented("SharedObject.getRemote")},defaultObjectEncoding:{get:function(){return a},set:function(b){a=b}}},instance:{setDirty:function(){somewhatImplemented("SharedObject.setDirty")},invoke:function(a){var b=a;Array.prototype.slice.call(arguments,
1);var f=!1,g;switch(b){case 4:g=JSON.stringify(this._data).length-2;f=!0;break;case 6:this._data={};sessionStorage.removeItem(this._path);f=!0;break;case 2:sessionStorage.setItem(this._path,JSON.stringify(this._data));g=f=!0;break;case 3:f=!0}(f?somewhatImplemented:notImplemented)("SharedObject.invoke ("+b+")");return g},invokeWithArgsArray:function e(a,b){return e.call(this,a,b)},data:{get:function(){return this._data}},objectEncoding:{get:function(){return this._objectEncoding},set:function(a){this._objectEncoding=
a}},client:{get:function(){notImplemented("SharedObject.client");return this._client},set:function(a){notImplemented("SharedObject.client");this._client=a}}}}}}}.call(this),SocketDefinition=function(){return{__class__:"flash.net.Socket",initialize:function(){this._connected=!1},__glue__:{"native":{"static":{},instance:{internalGetSecurityErrorMessage:function(){somewhatImplemented("Socket.internalGetSecurityErrorMessage");return"SecurityErrorEvent"},internalConnect:function(a,b){somewhatImplemented("Socket.internalConnect");
throwError("SecurityError",Errors.SocketConnectError,a,b)},didFailureOccur:function(){somewhatImplemented("Socket.didFailureOccur");return!0},readBytes:function(){notImplemented("Socket.readBytes")},writeBytes:function(){notImplemented("Socket.writeBytes")},writeBoolean:function(){notImplemented("Socket.writeBoolean")},writeByte:function(){notImplemented("Socket.writeByte")},writeShort:function(){notImplemented("Socket.writeShort")},writeInt:function(){notImplemented("Socket.writeInt")},writeUnsignedInt:function(){notImplemented("Socket.writeUnsignedInt")},
writeFloat:function(){notImplemented("Socket.writeFloat")},writeDouble:function(){notImplemented("Socket.writeDouble")},writeMultiByte:function(){notImplemented("Socket.writeMultiByte")},writeUTF:function(){notImplemented("Socket.writeUTF")},writeUTFBytes:function(){notImplemented("Socket.writeUTFBytes")},readBoolean:function(){notImplemented("Socket.readBoolean")},readByte:function(){notImplemented("Socket.readByte")},readUnsignedByte:function(){notImplemented("Socket.readUnsignedByte")},readShort:function(){notImplemented("Socket.readShort")},
readUnsignedShort:function(){notImplemented("Socket.readUnsignedShort")},readInt:function(){notImplemented("Socket.readInt")},readUnsignedInt:function(){notImplemented("Socket.readUnsignedInt")},readFloat:function(){notImplemented("Socket.readFloat")},readDouble:function(){notImplemented("Socket.readDouble")},readMultiByte:function(){notImplemented("Socket.readMultiByte")},readUTF:function(){notImplemented("Socket.readUTF")},readUTFBytes:function(){notImplemented("Socket.readUTFBytes")},internalClose:function(){notImplemented("Socket.internalClose")},
flush:function(){notImplemented("Socket.flush")},writeObject:function(){notImplemented("Socket.writeObject")},readObject:function(){notImplemented("Socket.readObject")},bytesAvailable:{get:function(){notImplemented("Socket.bytesAvailable");return this._bytesAvailable}},connected:{get:function(){somewhatImplemented("Socket.connected");return this._connected}},objectEncoding:{get:function(){notImplemented("Socket.objectEncoding");return this._objectEncoding},set:function(a){notImplemented("Socket.objectEncoding");
this._objectEncoding=a}},endian:{get:function(){notImplemented("Socket.endian");return this._endian},set:function(a){notImplemented("Socket.endian");this._endian=a}},bytesPending:{get:function(){notImplemented("Socket.bytesPending");return this._bytesPending}}}},script:{instance:Glue.ALL}}}}.call(this),URLLoaderDefinition=function(){return{initialize:function(){},__glue__:{"native":{"static":{},instance:{}},script:{"static":{},instance:{data:"public data",dataFormat:"public dataFormat",bytesTotal:"public bytesTotal",
bytesLoaded:"public bytesLoaded",load:"public load"}}}}}.call(this),URLRequestDefinition=function(){function a(){var a={};a.url=this._url;a.method=this._method;a.checkPolicyFile=this._checkPolicyFile;if(this._data)if(a.mimeType=this._contentType,avm2.systemDomain.getClass("flash.utils.ByteArray").isInstanceOf(this._data))a.data=new Uint8Array(this._data.a,0,this._data.length);else{var b=this._data.asGetPublicProperty("toString").call(this._data);if("GET"===this._method){var d=a.url.lastIndexOf("?");
a.url=(0>d?a.url:a.url.substring(0,d))+"?"+b}else a.data=b}return a}var b={initialize:function(){this._url=null;this._method="GET";this._digest=this._data=null;this._contentType="application/x-www-form-urlencoded";this._requestHeaders=null;this._checkPolicyFile=!0;this._toFileRequest=a},setMethod:function(a){this._method=a},setRequestHeaders:function(a){this._requestHeaders=a},get contentType(){return this._contentType},set contentType(a){this._contentType=a},get data(){return this._data},set data(a){this._data=
a},get digest(){return this._digest},set digest(a){this._digest=a},get method(){return this._method},set method(a){this._method=a},get requestHeaders(){return this._requestHeaders},set requestHeaders(a){this._requestHeaders=a},get url(){return this._url},set url(a){this._url=a}},d=Object.getOwnPropertyDescriptor;b.__glue__={"native":{instance:{setMethod:b.setMethod,setRequestHeaders:b.setRequestHeaders,contentType:d(b,"contentType"),data:d(b,"data"),digest:d(b,"digest"),method:d(b,"method"),requestHeaders:d(b,
"requestHeaders"),url:d(b,"url")}}};return b}.call(this),URLStreamDefinition=function(){var a={initialize:function(){this._stream=null;this._littleEndian=this._connected=!1},close:function(){this._session.close()},load:function(a){var b=FileLoadingService.createSession(),f=this,g=!0;b.onprogress=function(a,b){if(g){g=!1;var d=Math.max(b.bytesTotal,a.length),e=new ArrayBuffer(d);f._stream=new Stream(e,0,0,d)}else f._stream.end+a.length>f._stream.bytes.length&&(d=f._stream.end+a.length,e=new ArrayBuffer(d),
d=new Stream(e,0,0,d),d.push(f._stream.bytes.subarray(0,f._stream.end)),f._stream=d);f._stream.push(a);d=avm2.systemDomain.getClass("flash.events.ProgressEvent");f._dispatchEvent(d.createInstance(["progress",!1,!1,b.bytesLoaded,b.bytesTotal]))};b.onerror=function(a){f._connected=!1;f._stream||(f._stream=new Stream(new ArrayBuffer(0),0,0,0));f._dispatchEvent(new flash.events.IOErrorEvent(flash.events.IOErrorEvent.class.IO_ERROR,!1,!1,a))};b.onopen=function(){f._connected=!0;f._dispatchEvent(new flash.events.Event("open",
!1,!1))};b.onhttpstatus=function(a,b,d){var e=avm2.systemDomain.getClass("flash.events.HTTPStatusEvent"),g=avm2.systemDomain.getClass("flash.net.URLRequestHeader");b=e.createInstance(["httpStatus",!1,!1,b]);var u=[];d.split(/(?:\n|\r?\n)/g).forEach(function(b){if(b=/^([^:]+): (.*)$/.exec(b))u.push(g.createInstance([b[1],b[2]])),"Location"===b[1]&&(a=b[2])});b.asSetPublicProperty("responseHeaders",u);b.asSetPublicProperty("responseURL",a);f._dispatchEvent(b)};b.onclose=function(){f._connected=!1;f._stream||
(f._stream=new Stream(new ArrayBuffer(0),0,0,0));f._dispatchEvent(new flash.events.Event("complete",!1,!1))};b.open(a._toFileRequest());this._session=b},readBoolean:function(){notImplemented("URLStream.readBoolean")},readByte:function(){var a=this._stream;a.ensure(1);return a.bytes[a.pos++]},readBytes:function(a,b,f){if(0>f)throw"Invalid length argument";var g=this._stream;f?g.ensure(f):f=g.remaining();a.writeRawBytes(g.bytes.subarray(g.pos,g.pos+f),b,f);g.pos+=f},readDouble:function(){notImplemented("URLStream.readDouble")},
readFloat:function(){notImplemented("URLStream.readFloat")},readInt:function(){notImplemented("URLStream.readInt")},readMultiByte:function(){notImplemented("URLStream.readMultiByte")},readObject:function(){notImplemented("URLStream.readObject")},readShort:function(){notImplemented("URLStream.readShort")},readUTF:function(){return this.readUTFBytes(this.readUnsignedShort())},readUTFBytes:function(a){if(0>a)throw"Invalid length argument";var b=this._stream;b.ensure(a);var f=utf8encode(b.bytes.subarray(b.pos,
b.pos+a));b.pos+=a;return f},readUnsignedByte:function(){notImplemented("URLStream.readUnsignedByte")},readUnsignedInt:function(){notImplemented("URLStream.readUnsignedInt")},readUnsignedShort:function(){var a=this._stream;a.ensure(2);var b=a.getUint16(a.pos,this._littleEndian);a.pos+=2;return b},get bytesAvailable(){return this._stream.remaining()},get connected(){return this._connected},get endian(){return this._littleEndian?"littleEndian":"bigEndian"},set endian(a){this._littleEndian="littleEndian"==
a},get objectEncoding(){notImplemented("URLStream.objectEncoding")},set objectEncoding(a){notImplemented("URLStream.objectEncoding")}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{close:a.close,load:a.load,readBoolean:a.readBoolean,readByte:a.readByte,readBytes:a.readBytes,readDouble:a.readDouble,readFloat:a.readFloat,readInt:a.readInt,readMultiByte:a.readMultiByte,readObject:a.readObject,readShort:a.readShort,readUTF:a.readUTF,readUTFBytes:a.readUTFBytes,readUnsignedByte:a.readUnsignedByte,
readUnsignedInt:a.readUnsignedInt,readUnsignedShort:a.readUnsignedShort,bytesAvailable:b(a,"bytesAvailable"),connected:b(a,"connected"),endian:b(a,"endian"),objectEncoding:b(a,"objectEncoding")}}};return a}.call(this),ApplicationDomainDefinition=function(){return{__class__:"flash.system.ApplicationDomain",initialize:function(){},__glue__:{"native":{"static":{currentDomain:{get:function(){return new flash.system.ApplicationDomain(AVM2.currentDomain())}},MIN_DOMAIN_MEMORY_LENGTH:{get:function(){notImplemented("ApplicationDomain.MIN_DOMAIN_MEMORY_LENGTH")}}},
instance:{ctor:function(a){a instanceof ApplicationDomain?this.nativeObject=a:(a=a?a.nativeObject:AVM2.currentDomain().system,this.nativeObject=new ApplicationDomain(a.vm,a))},getDefinition:function(a){a=a.replace("::",".");return this.nativeObject.getProperty(Multiname.fromSimpleName(a),!0,!0)},hasDefinition:function(a){if(void 0===a)return!1;a=a.replace("::",".");return!!this.nativeObject.findDomainProperty(Multiname.fromSimpleName(a),!1,!1)},getQualifiedDefinitionNames:function(){notImplemented("ApplicationDomain.getQualifiedDefinitionNames")},
parentDomain:{get:function(){var a=this.nativeObject.base;return!a?void 0:new flash.system.ApplicationDomain(a)}},domainMemory:{get:function(){notImplemented("ApplicationDomain.domainMemory");return this._domainMemory},set:function(a){notImplemented("ApplicationDomain.domainMemory");this._domainMemory=a}}}},script:{"static":Glue.ALL,instance:Glue.ALL}}}}.call(this),CapabilitiesDefinition=function(){var a={},b,d=window.navigator.userAgent;0<d.indexOf("Macintosh")?b="Mac OS 10.5.2":0<d.indexOf("Windows")?
b="Windows XP":0<d.indexOf("Linux")?b="Linux":/(iPad|iPhone|iPod|Android)/.test(d)?b="iPhone3,1":notImplemented();a.__glue__={"native":{"static":{version:{get:function(){return"SHUMWAY 10,0,0,0"},enumerable:!0},os:{get:function(){return b},enumerable:!0},serverString:{get:function(){var a=toKeyValueArray({OS:b}).map(function(a){return a[0]+"="+encodeURIComponent(a[1])}).join("&");somewhatImplemented("Capabilities.serverString: "+a);return a}},hasAccessibility:{get:function(){somewhatImplemented("Capabilities.hasAccessibility");
return!1}},isDebugger:{get:function(){return!1}},screenResolutionX:{get:function(){return window.screen.width}},screenResolutionY:{get:function(){return window.screen.height}},manufacturer:{get:function(){somewhatImplemented("Capabilities.manufacturer");return"Mozilla Research"}},language:{get:function(){somewhatImplemented("Capabilities.language");return"en"}},playerType:{get:function(){somewhatImplemented("Capabilities.playerType");return"PlugIn"}}}},script:{"static":scriptProperties("public",["version",
"os"])}};return a}.call(this),FSCommandDefinition=function(){return{__glue__:{"native":{"static":{_fscommand:function(a,b){console.log("FSCommand: "+a+"; "+b);switch(a.toLowerCase()){case "quit":renderingTerminated=!0;break;case "debugger":debugger}}}}}}}.call(this),SecurityDefinition=function(){var a;return{__class__:"flash.system.Security",initialize:function(){},__glue__:{"native":{"static":{allowDomain:function(){somewhatImplemented('Security.allowDomain ["'+Array.prototype.join.call(arguments,
'", "')+'"]')},allowInsecureDomain:function(){somewhatImplemented("Security.allowInsecureDomain")},loadPolicyFile:function(){somewhatImplemented("Security.loadPolicyFile")},duplicateSandboxBridgeInputArguments:function(){notImplemented("Security.duplicateSandboxBridgeInputArguments")},duplicateSandboxBridgeOutputArgument:function(){notImplemented("Security.duplicateSandboxBridgeOutputArgument")},showSettings:function(){notImplemented("Security.showSettings")},exactSettings:{get:function(){return a},
set:function(b){a=b}},disableAVM1Loading:{get:function(){notImplemented("Security.disableAVM1Loading")},set:function(){notImplemented("Security.disableAVM1Loading")}},sandboxType:{get:function(){somewhatImplemented("Security.sandboxType");return"remote"}},pageDomain:{get:function(){somewhatImplemented("Security.pageDomain");var a=FileLoadingService.resolveUrl("/").split("/");a.pop();return a.pop()}}}}}}}.call(this),SecurityDomainDefinition=function(){return{__class__:"flash.system.SecurityDomain",
initialize:function(){},_currentDomain:null,__glue__:{"native":{"static":{currentDomain:{get:function(){return this._currentDomain}}},instance:{ctor_impl:function(){notImplemented("SecurityDomain.ctor_impl")},domainID:{get:function(){notImplemented("SecurityDomain.domainID");return this._domainID}}}}}}}.call(this),SystemDefinition=function(){return{__class__:"flash.system.System",initialize:function(){},__glue__:{"native":{"static":{setClipboard:function(a){FirefoxCom.request("setClipboard",a);TelemetryService.reportTelemetry({topic:"feature",
feature:2})},pause:function(){somewhatImplemented("System.pause")},resume:function(){somewhatImplemented("System.resume")},exit:function(){somewhatImplemented("System.exit");renderingTerminated=!0},gc:function(){somewhatImplemented("System.gc")},pauseForGCIfCollectionImminent:function(){notImplemented("System.pauseForGCIfCollectionImminent")},disposeXML:function(){notImplemented("System.disposeXML")},ime:{get:function(){notImplemented("System.ime")}},totalMemoryNumber:{get:function(){return performance.memory?
performance.memory.usedJSHeapSize:0}},freeMemory:{get:function(){notImplemented("System.freeMemory")}},privateMemory:{get:function(){return 0}},processCPUUsage:{get:function(){notImplemented("System.processCPUUsage")}},useCodePage:{get:function(){somewhatImplemented("System.useCodePage");return!1},set:function(){notImplemented("System.useCodePage")}},vmVersion:{get:function(){somewhatImplemented("System.vmVersion");return"1.0 shumway"}},swfVersion:{get:function(){return 19}},apiVersion:{get:function(){return 26}},
getArgv:function(){return[]},getRunmode:function(){return"mixed"}},instance:{}}}}}.call(this),FontDefinition=function(){function a(){if(f)return f;var a=window.navigator.userAgent;return f=-1<a.indexOf("Windows")?DEVICE_FONT_METRICS_WIN:/(Macintosh|iPad|iPhone|iPod|Android)/.test(a)?DEVICE_FONT_METRICS_MAC:DEVICE_FONT_METRICS_LINUX}var b=[],d=Object.create(null),e=Object.create(null),f,g={__class__:"flash.text.Font",initialize:function(){var a=this.symbol;a&&(this._fontName=a.name||null,this._uniqueName=
a.uniqueName,this._fontStyle=a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",a=a.metrics,a.height=a.ascent+a.descent+a.leading,this._metrics=a,this._fontType="embedded",b.push(this),d[this._uniqueName]=this,a=this._fontName.toLowerCase()+"_"+this._fontStyle+"_embedded",e[a]=this)},get fontName(){return this._fontName},get fontStyle(){return this._fontStyle},get fontType(){return this._fontType},hasGlyphs:function(){return!0},getFont:function(b,d,f){f=b.toLowerCase()+"_"+d+(f?"_embedded":
"_device");var g=e[f];if(g)return g;g=new flash.text.Font;g._fontName=g._uniqueName=b;g._fontStyle=d;g._fontType="device";b=a()[b];b||(b=a().serif,g._fontName=g._uniqueName="serif");g._metrics={ascent:b[0],descent:b[1],leading:b[2]};g._metrics.height=b[0]+b[1]+b[2];return e[f]=g},getFontByUniqueName:function(a){return d[a]}},l=Object.getOwnPropertyDescriptor;g.__glue__={"native":{instance:{fontName:l(g,"fontName"),fontStyle:l(g,"fontStyle"),fontType:l(g,"fontType"),hasGlyphs:g.hasGlyphs},"static":{enumerateFonts:function(){return b.slice()},
registerFont:function(){somewhatImplemented("Font.registerFont")}}}};return g}.call(this),DEVICE_FONT_METRICS_WIN={serif:[1,0.25,0],"sans-serif":[1,0.25,0],monospace:[1,0.25,0],"birch std":[0.9167,0.25,0],"blackoak std":[1,0.3333,0],"chaparral pro":[0.8333,0.3333,0],"chaparral pro light":[0.8333,0.3333,0],"charlemagne std":[0.9167,0.25,0],"cooper std black":[0.9167,0.25,0],"giddyup std":[0.8333,0.3333,0],"hobo std":[1.0833,0.3333,0],"kozuka gothic pro b":[1,0.4167,0],"kozuka gothic pro el":[1.0833,
0.25,0],"kozuka gothic pro h":[1,0.4167,0],"kozuka gothic pro l":[1,0.3333,0],"kozuka gothic pro m":[1.0833,0.3333,0],"kozuka gothic pro r":[1,0.3333,0],"kozuka mincho pro b":[1.0833,0.25,0],"kozuka mincho pro el":[1.0833,0.25,0],"kozuka mincho pro h":[1.1667,0.25,0],"kozuka mincho pro l":[1.0833,0.25,0],"kozuka mincho pro m":[1.0833,0.25,0],"kozuka mincho pro r":[1.0833,0.25,0],"mesquite std":[0.9167,0.25,0],"minion pro cond":[1,0.3333,0],"minion pro med":[1,0.3333,0],"minion pro smbd":[1,0.3333,
0],"myriad arabic":[1,0.4167,0],"nueva std":[0.75,0.25,0],"nueva std cond":[0.75,0.25,0],"ocr a std":[0.8333,0.25,0],"orator std":[1.0833,0.25,0],"poplar std":[0.9167,0.25,0],"prestige elite std":[0.9167,0.25,0],"rosewood std regular":[0.8333,0.3333,0],"stencil std":[1,0.3333,0],"trajan pro":[1,0.25,0],"kozuka gothic pr6n b":[1.4167,0.4167,0],"kozuka gothic pr6n el":[1.4167,0.3333,0],"kozuka gothic pr6n h":[1.4167,0.4167,0],"kozuka gothic pr6n l":[1.4167,0.3333,0],"kozuka gothic pr6n m":[1.5,0.3333,
0],"kozuka gothic pr6n r":[1.4167,0.3333,0],"kozuka mincho pr6n b":[1.3333,0.3333,0],"kozuka mincho pr6n el":[1.3333,0.3333,0],"kozuka mincho pr6n h":[1.4167,0.3333,0],"kozuka mincho pr6n l":[1.3333,0.3333,0],"kozuka mincho pr6n m":[1.3333,0.3333,0],"kozuka mincho pr6n r":[1.3333,0.3333,0],"letter gothic std":[1,0.25,0],"minion pro":[1,0.3333,0],"myriad hebrew":[0.8333,0.3333,0],"myriad pro":[0.9167,0.25,0],"myriad pro cond":[0.9167,0.25,0],"myriad pro light":[1,0.25,0],marlett:[1,0,0],arial:[1,0.25,
0],"arabic transparent":[1,0.25,0],"arial baltic":[1,0.25,0],"arial ce":[1,0.25,0],"arial cyr":[1,0.25,0],"arial greek":[1,0.25,0],"arial tur":[1,0.25,0],batang:[0.8333,0.1667,0],batangche:[0.8333,0.1667,0],gungsuh:[0.8333,0.1667,0],gungsuhche:[0.8333,0.1667,0],"courier new":[1,0.25,0],"courier new baltic":[1,0.25,0],"courier new ce":[1,0.25,0],"courier new cyr":[1,0.25,0],"courier new greek":[1,0.25,0],"courier new tur":[1,0.25,0],daunpenh:[0.6667,0.6667,0],dokchampa:[1.4167,0.5833,0],"estrangelo edessa":[0.75,
0.3333,0],euphemia:[1.0833,0.3333,0],gautami:[1.1667,0.8333,0],vani:[1.0833,0.75,0],gulim:[0.8333,0.1667,0],gulimche:[0.8333,0.1667,0],dotum:[0.8333,0.1667,0],dotumche:[0.8333,0.1667,0],impact:[1.0833,0.25,0],"iskoola pota":[1,0.3333,0],kalinga:[1.0833,0.5,0],kartika:[1,0.4167,0],"khmer ui":[1.0833,0.3333,0],"lao ui":[1,0.25,0],latha:[1.0833,0.4167,0],"lucida console":[0.75,0.25,0],"malgun gothic":[1,0.25,0],mangal:[1.0833,0.3333,0],meiryo:[1.0833,0.4167,0],"meiryo ui":[1,0.25,0],"microsoft himalaya":[0.5833,
0.4167,0],"microsoft jhenghei":[1,0.3333,0],"microsoft yahei":[1.0833,0.3333,0],mingliu:[0.8333,0.1667,0],pmingliu:[0.8333,0.1667,0],mingliu_hkscs:[0.8333,0.1667,0],"mingliu-extb":[0.8333,0.1667,0],"pmingliu-extb":[0.8333,0.1667,0],"mingliu_hkscs-extb":[0.8333,0.1667,0],"mongolian baiti":[0.8333,0.25,0],"ms gothic":[0.8333,0.1667,0],"ms pgothic":[0.8333,0.1667,0],"ms ui gothic":[0.8333,0.1667,0],"ms mincho":[0.8333,0.1667,0],"ms pmincho":[0.8333,0.1667,0],"mv boli":[1.1667,0.25,0],"microsoft new tai lue":[1,
0.4167,0],nyala:[0.9167,0.3333,0],"microsoft phagspa":[1.0833,0.25,0],"plantagenet cherokee":[1,0.4167,0],raavi:[1.0833,0.6667,0],"segoe script":[1.0833,0.5,0],"segoe ui":[1,0.25,0],"segoe ui semibold":[1,0.25,0],"segoe ui light":[1,0.25,0],"segoe ui symbol":[1,0.25,0],shruti:[1.0833,0.5,0],simsun:[0.8333,0.1667,0],nsimsun:[0.8333,0.1667,0],"simsun-extb":[0.8333,0.1667,0],sylfaen:[1,0.3333,0],"microsoft tai le":[1,0.3333,0],"times new roman":[1,0.25,0],"times new roman baltic":[1,0.25,0],"times new roman ce":[1,
0.25,0],"times new roman cyr":[1,0.25,0],"times new roman greek":[1,0.25,0],"times new roman tur":[1,0.25,0],tunga:[1.0833,0.75,0],vrinda:[1,0.4167,0],"shonar bangla":[0.8333,0.5,0],"microsoft yi baiti":[0.8333,0.1667,0],tahoma:[1,0.1667,0],"microsoft sans serif":[1.0833,0.1667,0],"angsana new":[0.9167,0.4167,0],aparajita:[0.75,0.4167,0],"cordia new":[0.9167,0.5,0],ebrima:[1.0833,0.5,0],gisha:[0.9167,0.25,0],kokila:[0.8333,0.3333,0],leelawadee:[0.9167,0.25,0],"microsoft uighur":[1.0833,0.5,0],moolboran:[0.6667,
0.6667,0],symbol:[1,0.25,0],utsaah:[0.8333,0.4167,0],vijaya:[1.0833,0.25,0],wingdings:[0.9167,0.25,0],andalus:[1.3333,0.4167,0],"arabic typesetting":[0.8333,0.5,0],"simplified arabic":[1.3333,0.5,0],"simplified arabic fixed":[1,0.4167,0],"sakkal majalla":[0.9167,0.5,0],"traditional arabic":[1.3333,0.5,0],aharoni:[0.75,0.25,0],david:[0.75,0.25,0],frankruehl:[0.75,0.25,0],fangsong:[0.8333,0.1667,0],simhei:[0.8333,0.1667,0],kaiti:[0.8333,0.1667,0],"browallia new":[0.8333,0.4167,0],"lucida sans unicode":[1.0833,
0.25,0],"arial black":[1.0833,0.3333,0],calibri:[0.9167,0.25,0],cambria:[0.9167,0.25,0],"cambria math":[3.0833,2.5,0],candara:[0.9167,0.25,0],"comic sans ms":[1.0833,0.3333,0],consolas:[0.9167,0.25,0],constantia:[0.9167,0.25,0],corbel:[0.9167,0.25,0],"franklin gothic medium":[1,0.3333,0],gabriola:[1.1667,0.6667,0],georgia:[1,0.25,0],"palatino linotype":[1.0833,0.3333,0],"segoe print":[1.25,0.5,0],"trebuchet ms":[1.0833,0.4167,0],verdana:[1,0.1667,0],webdings:[1.0833,0.5,0],"lucida bright":[0.9167,
0.25,0],"lucida sans":[0.9167,0.25,0],"lucida sans typewriter":[0.9167,0.25,0],"gentium basic":[0.8333,0.25,0],"dejavu serif condensed":[0.9167,0.25,0],arimo:[1,0.25,0],"dejavu sans condensed":[0.9167,0.25,0],"dejavu sans":[0.9167,0.25,0],"dejavu sans light":[0.9167,0.25,0],opensymbol:[0.8333,0.1667,0],"gentium book basic":[0.8333,0.25,0],"dejavu sans mono":[0.9167,0.25,0],"dejavu serif":[0.9167,0.25,0],"calibri light":[0.9167,0.25,0]},DEVICE_FONT_METRICS_MAC={"al bayan plain":[1,0.5,0],"al bayan bold":[1,
0.5833,0],"american typewriter":[0.9167,0.25,0],"american typewriter bold":[0.9167,0.25,0],"american typewriter condensed":[0.9167,0.25,0],"american typewriter condensed bold":[0.9167,0.25,0],"american typewriter condensed light":[0.8333,0.25,0],"american typewriter light":[0.9167,0.25,0],"andale mono":[0.9167,0.25,0],"apple symbols":[0.6667,0.25,0],"arial bold italic":[0.9167,0.25,0],"arial bold":[0.9167,0.25,0],"arial italic":[0.9167,0.25,0],"arial hebrew":[0.75,0.3333,0],"arial hebrew bold":[0.75,
0.3333,0],arial:[0.9167,0.25,0],"arial narrow":[0.9167,0.25,0],"arial narrow bold":[0.9167,0.25,0],"arial narrow bold italic":[0.9167,0.25,0],"arial narrow italic":[0.9167,0.25,0],"arial rounded mt bold":[0.9167,0.25,0],"arial unicode ms":[1.0833,0.25,0],"avenir black":[1,0.3333,0],"avenir black oblique":[1,0.3333,0],"avenir book":[1,0.3333,0],"avenir book oblique":[1,0.3333,0],"avenir heavy":[1,0.3333,0],"avenir heavy oblique":[1,0.3333,0],"avenir light":[1,0.3333,0],"avenir light oblique":[1,0.3333,
0],"avenir medium":[1,0.3333,0],"avenir medium oblique":[1,0.3333,0],"avenir oblique":[1,0.3333,0],"avenir roman":[1,0.3333,0],"avenir next bold":[1,0.3333,0],"avenir next bold italic":[1,0.3333,0],"avenir next demi bold":[1,0.3333,0],"avenir next demi bold italic":[1,0.3333,0],"avenir next heavy":[1,0.3333,0],"avenir next heavy italic":[1,0.3333,0],"avenir next italic":[1,0.3333,0],"avenir next medium":[1,0.3333,0],"avenir next medium italic":[1,0.3333,0],"avenir next regular":[1,0.3333,0],"avenir next ultra light":[1,
0.3333,0],"avenir next ultra light italic":[1,0.3333,0],"avenir next condensed bold":[1,0.3333,0],"avenir next condensed bold italic":[1,0.3333,0],"avenir next condensed demi bold":[1,0.3333,0],"avenir next condensed demi bold italic":[1,0.3333,0],"avenir next condensed heavy":[1,0.3333,0],"avenir next condensed heavy italic":[1,0.3333,0],"avenir next condensed italic":[1,0.3333,0],"avenir next condensed medium":[1,0.3333,0],"avenir next condensed medium italic":[1,0.3333,0],"avenir next condensed regular":[1,
0.3333,0],"avenir next condensed ultra light":[1,0.3333,0],"avenir next condensed ultra light italic":[1,0.3333,0],ayuthaya:[1.0833,0.3333,0],baghdad:[0.9167,0.4167,0],"bangla mn":[0.9167,0.6667,0],"bangla mn bold":[0.9167,0.6667,0],"bangla sangam mn":[0.9167,0.4167,0],"bangla sangam mn bold":[0.9167,0.4167,0],baskerville:[0.9167,0.25,0],"baskerville bold":[0.9167,0.25,0],"baskerville bold italic":[0.9167,0.25,0],"baskerville italic":[0.9167,0.25,0],"baskerville semibold":[0.9167,0.25,0],"baskerville semibold italic":[0.9167,
0.25,0],"big caslon medium":[0.9167,0.25,0],"brush script mt italic":[0.9167,0.3333,0],chalkboard:[1,0.25,0],"chalkboard bold":[1,0.25,0],"chalkboard se bold":[1.1667,0.25,0],"chalkboard se light":[1.1667,0.25,0],"chalkboard se regular":[1.1667,0.25,0],chalkduster:[1,0.25,0],"charcoal cy":[1,0.25,0],cochin:[0.9167,0.25,0],"cochin bold":[0.9167,0.25,0],"cochin bold italic":[0.9167,0.25,0],"cochin italic":[0.9167,0.25,0],"comic sans ms":[1.0833,0.25,0],"comic sans ms bold":[1.0833,0.25,0],copperplate:[0.75,
0.25,0],"copperplate bold":[0.75,0.25,0],"copperplate light":[0.75,0.25,0],"corsiva hebrew":[0.6667,0.3333,0],"corsiva hebrew bold":[0.6667,0.3333,0],courier:[0.75,0.25,0],"courier bold":[0.75,0.25,0],"courier bold oblique":[0.75,0.25,0],"courier oblique":[0.75,0.25,0],"courier new bold italic":[0.8333,0.3333,0],"courier new bold":[0.8333,0.3333,0],"courier new italic":[0.8333,0.3333,0],"courier new":[0.8333,0.3333,0],biaukai:[0.8333,0.1667,0],damascus:[0.5833,0.4167,0],"damascus bold":[0.5833,0.4167,
0],"decotype naskh":[1.1667,0.6667,0],"devanagari mt":[0.9167,0.6667,0],"devanagari mt bold":[0.9167,0.6667,0],"devanagari sangam mn":[0.9167,0.4167,0],"devanagari sangam mn bold":[0.9167,0.4167,0],didot:[0.9167,0.3333,0],"didot bold":[1,0.3333,0],"didot italic":[0.9167,0.25,0],"euphemia ucas":[1.0833,0.25,0],"euphemia ucas bold":[1.0833,0.25,0],"euphemia ucas italic":[1.0833,0.25,0],"futura condensed extrabold":[1,0.25,0],"futura condensed medium":[1,0.25,0],"futura medium":[1,0.25,0],"futura medium italic":[1,
0.25,0],"gb18030 bitmap":[1,0.6667,0],"geeza pro":[0.9167,0.3333,0],"geeza pro bold":[0.9167,0.3333,0],geneva:[1,0.25,0],"geneva cy":[1,0.25,0],georgia:[0.9167,0.25,0],"georgia bold":[0.9167,0.25,0],"georgia bold italic":[0.9167,0.25,0],"georgia italic":[0.9167,0.25,0],"gill sans":[0.9167,0.25,0],"gill sans bold":[0.9167,0.25,0],"gill sans bold italic":[0.9167,0.25,0],"gill sans italic":[0.9167,0.25,0],"gill sans light":[0.9167,0.25,0],"gill sans light italic":[0.9167,0.25,0],"gujarati mt":[0.9167,
0.6667,0],"gujarati mt bold":[0.9167,0.6667,0],"gujarati sangam mn":[0.8333,0.4167,0],"gujarati sangam mn bold":[0.8333,0.4167,0],"gurmukhi mn":[0.9167,0.25,0],"gurmukhi mn bold":[0.9167,0.25,0],"gurmukhi sangam mn":[0.9167,0.3333,0],"gurmukhi sangam mn bold":[0.9167,0.3333,0],helvetica:[0.75,0.25,0],"helvetica bold":[0.75,0.25,0],"helvetica bold oblique":[0.75,0.25,0],"helvetica light":[0.75,0.25,0],"helvetica light oblique":[0.75,0.25,0],"helvetica oblique":[0.75,0.25,0],"helvetica neue":[0.9167,
0.25,0],"helvetica neue bold":[1,0.25,0],"helvetica neue bold italic":[1,0.25,0],"helvetica neue condensed black":[1,0.25,0],"helvetica neue condensed bold":[1,0.25,0],"helvetica neue italic":[0.9167,0.25,0],"helvetica neue light":[1,0.25,0],"helvetica neue light italic":[0.9167,0.25,0],"helvetica neue medium":[1,0.25,0],"helvetica neue ultralight":[0.9167,0.25,0],"helvetica neue ultralight italic":[0.9167,0.25,0],herculanum:[0.8333,0.1667,0],"hiragino kaku gothic pro w3":[0.9167,0.0833,0],"hiragino kaku gothic pro w6":[0.9167,
0.0833,0],"hiragino kaku gothic pron w3":[0.9167,0.0833,0],"hiragino kaku gothic pron w6":[0.9167,0.0833,0],"hiragino kaku gothic std w8":[0.9167,0.0833,0],"hiragino kaku gothic stdn w8":[0.9167,0.0833,0],"hiragino maru gothic pro w4":[0.9167,0.0833,0],"hiragino maru gothic pron w4":[0.9167,0.0833,0],"hiragino mincho pro w3":[0.9167,0.0833,0],"hiragino mincho pro w6":[0.9167,0.0833,0],"hiragino mincho pron w3":[0.9167,0.0833,0],"hiragino mincho pron w6":[0.9167,0.0833,0],"hiragino sans gb w3":[0.9167,
0.0833,0],"hiragino sans gb w6":[0.9167,0.0833,0],"hoefler text black":[0.75,0.25,0],"hoefler text black italic":[0.75,0.25,0],"hoefler text italic":[0.75,0.25,0],"hoefler text ornaments":[0.8333,0.1667,0],"hoefler text":[0.75,0.25,0],impact:[1,0.25,0],inaimathi:[0.8333,0.4167,0],"headlinea regular":[0.8333,0.1667,0],"pilgi regular":[0.8333,0.25,0],"gungseo regular":[0.8333,0.25,0],"pcmyungjo regular":[0.8333,0.25,0],"kailasa regular":[1.0833,0.5833,0],"kannada mn":[0.9167,0.25,0],"kannada mn bold":[0.9167,
0.25,0],"kannada sangam mn":[1,0.5833,0],"kannada sangam mn bold":[1,0.5833,0],"kefa bold":[0.9167,0.25,0],"kefa regular":[0.9167,0.25,0],"khmer mn":[1,0.6667,0],"khmer mn bold":[1,0.6667,0],"khmer sangam mn":[1.0833,0.6667,0],"kokonor regular":[1.0833,0.5833,0],krungthep:[1,0.25,0],kufistandardgk:[0.9167,0.5,0],"lao mn":[0.9167,0.4167,0],"lao mn bold":[0.9167,0.4167,0],"lao sangam mn":[1,0.3333,0],"apple ligothic medium":[0.8333,0.1667,0],"lihei pro":[0.8333,0.1667,0],"lisong pro":[0.8333,0.1667,
0],"lucida grande":[1,0.25,0],"lucida grande bold":[1,0.25,0],"malayalam mn":[1,0.4167,0],"malayalam mn bold":[1,0.4167,0],"malayalam sangam mn":[0.8333,0.4167,0],"malayalam sangam mn bold":[0.8333,0.4167,0],"marion bold":[0.6667,0.3333,0],"marion italic":[0.6667,0.3333,0],"marion regular":[0.6667,0.3333,0],"marker felt thin":[0.8333,0.25,0],"marker felt wide":[0.9167,0.25,0],"menlo bold":[0.9167,0.25,0],"menlo bold italic":[0.9167,0.25,0],"menlo italic":[0.9167,0.25,0],"menlo regular":[0.9167,0.25,
0],"microsoft sans serif":[0.9167,0.25,0],monaco:[1,0.25,0],"gurmukhi mt":[0.8333,0.4167,0],mshtakan:[0.9167,0.25,0],"mshtakan bold":[0.9167,0.25,0],"mshtakan boldoblique":[0.9167,0.25,0],"mshtakan oblique":[0.9167,0.25,0],"myanmar mn":[1,0.4167,0],"myanmar mn bold":[1,0.4167,0],"myanmar sangam mn":[0.9167,0.4167,0],nadeem:[0.9167,0.4167,0],"nanum brush script":[0.9167,0.25,0],nanumgothic:[0.9167,0.25,0],"nanumgothic bold":[0.9167,0.25,0],"nanumgothic extrabold":[0.9167,0.25,0],nanummyeongjo:[0.9167,
0.25,0],"nanummyeongjo bold":[0.9167,0.25,0],"nanummyeongjo extrabold":[0.9167,0.25,0],"nanum pen script":[0.9167,0.25,0],"optima bold":[0.9167,0.25,0],"optima bold italic":[0.9167,0.25,0],"optima extrablack":[1,0.25,0],"optima italic":[0.9167,0.25,0],"optima regular":[0.9167,0.25,0],"oriya mn":[0.9167,0.25,0],"oriya mn bold":[0.9167,0.25,0],"oriya sangam mn":[0.8333,0.4167,0],"oriya sangam mn bold":[0.8333,0.4167,0],osaka:[1,0.25,0],"osaka-mono":[0.8333,0.1667,0],"palatino bold":[0.8333,0.25,0],
"palatino bold italic":[0.8333,0.25,0],"palatino italic":[0.8333,0.25,0],palatino:[0.8333,0.25,0],papyrus:[0.9167,0.5833,0],"papyrus condensed":[0.9167,0.5833,0],"plantagenet cherokee":[0.6667,0.25,0],raanana:[0.75,0.25,0],"raanana bold":[0.75,0.25,0],"hei regular":[0.8333,0.1667,0],"kai regular":[0.8333,0.1667,0],stfangsong:[0.8333,0.1667,0],stheiti:[0.8333,0.1667,0],"heiti sc light":[0.8333,0.1667,0],"heiti sc medium":[0.8333,0.1667,0],"heiti tc light":[0.8333,0.1667,0],"heiti tc medium":[0.8333,
0.1667,0],stkaiti:[0.8333,0.1667,0],"kaiti sc black":[1.0833,0.3333,0],"kaiti sc bold":[1.0833,0.3333,0],"kaiti sc regular":[1.0833,0.3333,0],stsong:[0.8333,0.1667,0],"songti sc black":[1.0833,0.3333,0],"songti sc bold":[1.0833,0.3333,0],"songti sc light":[1.0833,0.3333,0],"songti sc regular":[1.0833,0.3333,0],stxihei:[0.8333,0.1667,0],sathu:[0.9167,0.3333,0],silom:[1,0.3333,0],"sinhala mn":[0.9167,0.25,0],"sinhala mn bold":[0.9167,0.25,0],"sinhala sangam mn":[1.1667,0.3333,0],"sinhala sangam mn bold":[1.1667,
0.3333,0],"skia regular":[0.75,0.25,0],symbol:[0.6667,0.3333,0],"tahoma negreta":[1,0.1667,0],"tamil mn":[0.9167,0.25,0],"tamil mn bold":[0.9167,0.25,0],"tamil sangam mn":[0.75,0.25,0],"tamil sangam mn bold":[0.75,0.25,0],"telugu mn":[0.9167,0.25,0],"telugu mn bold":[0.9167,0.25,0],"telugu sangam mn":[1,0.5833,0],"telugu sangam mn bold":[1,0.5833,0],thonburi:[1.0833,0.25,0],"thonburi bold":[1.0833,0.25,0],"times bold":[0.75,0.25,0],"times bold italic":[0.75,0.25,0],"times italic":[0.75,0.25,0],"times roman":[0.75,
0.25,0],"times new roman bold italic":[0.9167,0.25,0],"times new roman bold":[0.9167,0.25,0],"times new roman italic":[0.9167,0.25,0],"times new roman":[0.9167,0.25,0],"trebuchet ms bold italic":[0.9167,0.25,0],"trebuchet ms":[0.9167,0.25,0],"trebuchet ms bold":[0.9167,0.25,0],"trebuchet ms italic":[0.9167,0.25,0],verdana:[1,0.25,0],"verdana bold":[1,0.25,0],"verdana bold italic":[1,0.25,0],"verdana italic":[1,0.25,0],webdings:[0.8333,0.1667,0],"wingdings 2":[0.8333,0.25,0],"wingdings 3":[0.9167,
0.25,0],"yuppy sc regular":[1.0833,0.3333,0],"yuppy tc regular":[1.0833,0.3333,0],"zapf dingbats":[0.8333,0.1667,0],zapfino:[1.9167,1.5,0]},DEVICE_FONT_METRICS_LINUX={kacstfarsi:[1.0831,0.5215,0],meera:[0.682,0.4413,0],freemono:[0.8023,0.2006,0],undotum:[1.0029,0.2808,0],loma:[1.1634,0.4814,0],"century schoolbook l":[1.0029,0.3209,0],kacsttitlel:[1.0831,0.5215,0],undinaru:[1.0029,0.2407,0],ungungseo:[1.0029,0.2808,0],garuda:[1.3238,0.6017,0],rekha:[1.1232,0.2808,0],purisa:[1.1232,0.5215,0],"dejavu sans mono":[0.9628,
0.2407,0],vemana2000:[0.8825,0.8424,0],kacstoffice:[1.0831,0.5215,0],umpush:[1.2837,0.682,0],opensymbol:[0.8023,0.2006,0],sawasdee:[1.1232,0.4413,0],"urw palladio l":[1.0029,0.3209,0],freeserif:[0.9227,0.3209,0],kacstdigital:[1.0831,0.5215,0],"ubuntu condensed":[0.9628,0.2006,0],unpilgi:[1.0029,0.4413,0],mry_kacstqurn:[1.4442,0.7221,0],"urw gothic l":[1.0029,0.2407,0],dingbats:[0.8424,0.1605,0],"urw chancery l":[1.0029,0.3209,0],"phetsarath ot":[1.0831,0.5215,0],"tlwg typist":[0.8825,0.4012,0],kacstletter:[1.0831,
0.5215,0],utkal:[1.2035,0.6418,0],"dejavu sans light":[0.9628,0.2407,0],norasi:[1.2436,0.5215,0],"dejavu serif condensed":[0.9628,0.2407,0],kacstone:[1.2436,0.6418,0],"liberation sans narrow":[0.9628,0.2407,0],symbol:[1.043,0.3209,0],nanummyeongjo:[0.9227,0.2407,0],untitled1:[0.682,0.5616,0],"lohit gujarati":[0.9628,0.4012,0],"liberation mono":[0.8424,0.3209,0],kacstart:[1.0831,0.5215,0],mallige:[1.0029,0.682,0],"bitstream charter":[1.0029,0.2407,0],nanumgothic:[0.9227,0.2407,0],"liberation serif":[0.9227,
0.2407,0],"dejavu sans condensed":[0.9628,0.2407,0],ubuntu:[0.9628,0.2006,0],"courier 10 pitch":[0.8825,0.3209,0],"nimbus sans l":[0.9628,0.3209,0],takaopgothic:[0.8825,0.2006,0],"wenquanyi micro hei mono":[0.9628,0.2407,0],"dejavu sans":[0.9628,0.2407,0],kedage:[1.0029,0.682,0],kinnari:[1.3238,0.5215,0],tlwgmono:[0.8825,0.4012,0],"standard symbols l":[1.043,0.3209,0],"lohit punjabi":[1.2035,0.682,0],"nimbus mono l":[0.8424,0.2808,0],rachana:[0.682,0.5616,0],waree:[1.2436,0.4413,0],kacstposter:[1.0831,
0.5215,0],"khmer os":[1.2837,0.7622,0],freesans:[1.0029,0.3209,0],gargi:[0.9628,0.2808,0],"nimbus roman no9 l":[0.9628,0.3209,0],"dejavu serif":[0.9628,0.2407,0],"wenquanyi micro hei":[0.9628,0.2407,0],"ubuntu light":[0.9628,0.2006,0],tlwgtypewriter:[0.9227,0.4012,0],kacstpen:[1.0831,0.5215,0],"tlwg typo":[0.8825,0.4012,0],"mukti narrow":[1.2837,0.4413,0],"ubuntu mono":[0.8424,0.2006,0],"lohit bengali":[1.0029,0.4413,0],"liberation sans":[0.9227,0.2407,0],unbatang:[1.0029,0.2808,0],kacstdecorative:[1.1232,
0.5215,0],"khmer os system":[1.2436,0.6017,0],saab:[1.0029,0.682,0],kacsttitle:[1.0831,0.5215,0],"mukti narrow bold":[1.2837,0.4413,0],"lohit hindi":[1.0029,0.5215,0],kacstqurn:[1.0831,0.5215,0],"urw bookman l":[0.9628,0.2808,0],kacstnaskh:[1.0831,0.5215,0],kacstscreen:[1.0831,0.5215,0],pothana2000:[0.8825,0.8424,0],ungraphic:[1.0029,0.2808,0],"lohit tamil":[0.8825,0.361,0],kacstbook:[1.0831,0.5215,0]};DEVICE_FONT_METRICS_MAC.__proto__=DEVICE_FONT_METRICS_WIN;DEVICE_FONT_METRICS_LINUX.__proto__=DEVICE_FONT_METRICS_MAC;
var StaticTextDefinition=function(){var a={__class__:"flash.text.StaticText",initialize:function(){var a=this.symbol;a&&(this.draw=a.draw)},get text(){return this._text},set text(a){this._text=a}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{text:b(a,"text")}}};return a}.call(this),StyleSheetDefinition=function(){return{__class__:"flash.text.StyleSheet",initialize:function(){},__glue__:{"native":{"static":{},instance:{_update:function(){somewhatImplemented("StyleSheet._update")},
_parseCSSInternal:function(){somewhatImplemented("StyleSheet._parseCSSInternal");return null},_parseCSSFontFamily:function(){notImplemented("StyleSheet._parseCSSFontFamily")},_parseColor:function(){notImplemented("StyleSheet._parseColor")},_styles:{get:function(){return this.__styles},set:function(a){somewhatImplemented("StyleSheet._styles");this.__styles=a}}}}}}}.call(this),TextFieldDefinition=function(){function a(a){this.width=this.x=0;this.y=a;this.leading=this.height=0;this.runs=[];this.largestFormat=
null}function b(a){var b={type:"SPAN",format:{ALIGN:a.align},children:[]};b.children[0]={type:"FONT",format:{FACE:a.face,LETTERSPACING:a.letterSpacing,KERNING:a.kerning,LEADING:a.leading,COLOR:a.color},children:[]};return b}function d(a,b,d,g){if((1===a.nodeType||3===a.nodeType)&&!a.prefix){var l;3===a.nodeType?(a=a.textContent,l={type:"text",text:a,format:null,children:null},d.text+=a,b.push(l)):(l=a.localName.toUpperCase(),!A[l]||!1===g&&("P"===l||"BR"===l)?("SBR"===l&&b.push({type:"BR",text:null,
format:null,children:null}),e(a.childNodes,b,d,g)):(l={type:l,text:null,format:f(a),children:[]},e(a.childNodes,l.children,d,g),b.push(l)))}}function e(a,b,e,f){for(var g=a.length,l=0;l<g;l++)d(a[l],b,e,f)}function f(a){a=a.attributes;for(var b={},d=0;d<a.length;d++){var e=a[d];e.prefix||(b[e.localName.toUpperCase()]=e.value)}return b}function g(a,b){var d=!1,e=!1;switch(a.type){case "plain-text":for(var e=a.lines,f=0;f<e.length;f++)l(b,e[f]),f<e.length-1&&p(b,!0);return;case "text":l(b,a.text);return;
case "BR":p(b,!0);return;case "LI":case "P":p(b,!1);r(b,a);e=!0;break;case "B":case "I":case "FONT":case "TEXTFORMAT":r(b,a),d=!0}for(f=0;f<a.children.length;f++)g(a.children[f],b);d&&(b.formats.pop(),f=b.currentFormat=b.formats[b.formats.length-1],b.runs.push({type:"f",format:f}),b.ctx.font=b.str);e&&p(b,!0)}function l(a,b){if(b)if(a.wordWrap)for(;b.length;){var d=a.ctx.measureText(b).width,e=a.w-a.line.width;0>=e&&(p(a,!1),e=a.w-a.line.width);if(d<=e){m(a,b,d);break}else{for(d=b.length/d*e|0;a.ctx.measureText(b.substr(0,
d)).width<e&&d<b.length;)d++;for(var f=d;-1<f;){if(v[b[f]]){f++;break}f--}if(-1===f){if(0<a.line.width){p(a,!1);continue}for(;a.ctx.measureText(b.substr(0,d)).width>e;)d--;0===d&&(d=1);f=d}e=b.substr(0,f);d=a.ctx.measureText(e).width;m(a,e,d);a.wordWrap&&p(a,!1);b=b.substr(f)}}else m(a,b,a.ctx.measureText(b).width)}function m(a,b,d){if(0!==b.length){var e=a.line,f=a.currentFormat,g=f.size;b={type:"t",text:b,x:e.width};a.runs.push(b);a.line.runs.push(b);e.width+=d|0;0===e.leading&&f.leading>e.leading&&
(e.leading=f.leading);if(!e.largestFormat||g>e.largestFormat.size)e.largestFormat=f}}function p(b,d){var e=b.line;if(0===e.runs.length){if(d){var f=b.currentFormat;b.line.y+=f.font._metrics.height*f.size+f.leading|0}}else{for(var g=e.runs,f=e.largestFormat,l=e.y+f.font._metrics.ascent*f.size,m=g.length;m--;)g[m].y=l;m=(b.currentFormat.align||"").toLowerCase();null===b.combinedAlign?b.combinedAlign=m:b.combinedAlign!==m&&(b.combinedAlign="mixed");if("center"===m||"right"===m){l=Math.max(b.w-e.width,
0);"center"===m&&(l>>=1);for(m=g.length;m--;)g[m].x+=l}e.height=f.font._metrics.height*f.size+e.leading|0;b.maxLineWidth=Math.max(b.maxLineWidth,e.width);b.lines.push(e);b.line=new a(e.y+e.height)}}function r(a,b){var d=b.format,e=Object.create(a.formats[a.formats.length-1]),f=!1;switch(b.type){case "P":if(d.ALIGN===e.align)return;e.align=d.ALIGN;break;case "B":f=e.bold=!0;break;case "I":f=e.italic=!0;break;case "FONT":void 0!==d.COLOR&&(e.color=d.COLOR),void 0!==d.FACE&&(e.face=d.FACE,f=!0),void 0!==
d.SIZE&&(e.size=parseFloat(d.SIZE)),void 0!==d.LETTERSPACING&&(e.letterspacing=parseFloat(d.LETTERSPACING)),void 0!==d.KERNING&&(e.kerning=d.KERNING&&!0);case "TEXTFORMAT":void 0!==d.LEADING&&(e.leading=parseFloat(d.LEADING));void 0!==d.INDENT&&(a.line.x=d.INDENT,a.line.width+=d.INDENT|0);break;default:warning("Unknown format node encountered: "+b.type);return}null!==a.textColor&&(e.color=rgbIntAlphaToStr(a.textColor,1));f&&u(e,a.embedFonts);e.str=s(e);a.formats.push(e);a.runs.push({type:"f",format:e});
a.currentFormat=e;a.ctx.font=e.str}function s(a){var b="";a.italic&&(b+="italic");a.bold&&(b+=" bold");return b+" "+a.size+"px "+(a.font._uniqueName||a.font._fontName)}function u(a,b){var d=a.face.toLowerCase();"_sans"===d?d="sans-serif":"_serif"===d?d="serif":"_typewriter"===d&&(d="monospace");d=FontDefinition.getFont(d,a.bold?a.italic?"boldItalic":"bold":a.italic?"italic":"regular",b);a.font=d}var w=document.createElement("p"),z=document.createElement("canvas").getContext("2d"),A={BR:!0,LI:!0,P:!0,
B:!0,I:!0,FONT:!0,TEXTFORMAT:!0,U:!0,A:!0,IMG:!0,SPAN:!0},v={" ":!0,".":!0,"-":!0,"\t":!0},B={__class__:"flash.text.TextField",initialize:function(){var a=this._defaultTextFormat={align:"LEFT",face:"serif",size:12,letterspacing:0,kerning:0,color:0,leading:0};this._type="dynamic";this._selectable=!0;this._textHeight=this._textWidth=0;this._bottomScrollV=this._maxScrollV=this._scrollV=1;this._lines=[];this._embedFonts=!1;this._autoSize="none";this._border=this._background=this._condenseWhite=this._multiline=
this._wordWrap=!1;this._backgroundColor=16777215;this._backgroundColorStr="#ffffff";this._borderColor=0;this._borderColorStr="#000000";this._textColor=null;this._drawingOffsetH=0;this._bbox={xMin:0,yMin:0,xMax:2E3,yMax:2E3};var b=this.symbol;if(b){var b=b.tag,d=b.bbox;this._currentTransform.tx+=d.xMin;this._currentTransform.ty+=d.yMin;this._bbox.xMax=d.xMax-d.xMin;this._bbox.yMax=d.yMax-d.yMin;b.hasLayout&&(a.size=b.fontHeight/20,"number"===typeof a.leading&&(a.leading=b.leading/20));b.hasColor&&
(a.color=rgbaObjToStr(b.color));b.hasFont&&(d=FontDefinition.getFontByUniqueName(b.font),a.font=d,a.face=d._fontName,a.bold=d.symbol.bold,a.italic=d.symbol.italic,a.str=s(a));this._embedFonts=!!b.useOutlines;switch(b.align){case 1:a.align="right";break;case 2:a.align="center";break;case 3:a.align="justified"}this._selectable=!b.noSelect;this._multiline=!!b.multiline;this._wordWrap=!!b.wordWrap;this._border=!!b.border;b.initialText?b.html?this.htmlText=b.initialText:this.text=b.initialText:this.text=
""}else this._currentTransform.tx-=40,this._currentTransform.ty-=40,u(a,!1),this.text=""},_getAS2Object:function(){this.$as2Object||new avm1lib.AS2TextField(this);return this.$as2Object},replaceText:function(a,b,d){var e=this._content.text;this.text=e.substring(0,a)+d+e.substring(b)},draw:function(a,b,d){this.ensureDimensions();var e=this._bbox;b=e.xMax/20;e=e.yMax/20;if(!(0>=b||0>=e)){a.save();a.beginPath();a.rect(0,0,b+1,e+1);a.clip();this._background&&(d.setFillStyle(a,this._backgroundColorStr),
a.fill());this._border&&(d.setStrokeStyle(a,this._borderColorStr),a.lineCap="square",a.lineWidth=1,a.strokeRect(0.5,0.5,b|0,e|0));a.closePath();if(0!==this._lines.length){a.translate(2,2);a.save();d.setAlpha(a);b=this._content.textruns;for(var e=this._lines[this._scrollV-1].y,f=0;f<b.length;f++){var g=b[f];"f"===g.type?(a.restore(),a.font=g.format.str,d.setFillStyle(a,g.format.color),a.save(),d.setAlpha(a)):g.y<e||a.fillText(g.text,g.x-this._drawingOffsetH,g.y-e)}a.restore()}a.restore()}},invalidateDimensions:function(){this._invalidate();
this._invalidateBounds();this._dimensionsValid=!1},ensureDimensions:function(){if(!this._dimensionsValid){var b=this._bbox,d=this._defaultTextFormat;u(d,this._embedFonts);var e={type:"f",format:d},f=Math.max(b.xMax/20-4,1),l=Math.max(b.yMax/20-4,1),d={ctx:z,w:f,h:l,maxLineWidth:0,formats:[d],currentFormat:d,line:new a(0),lines:[],runs:[e],wordWrap:this._wordWrap,combinedAlign:null,textColor:this._textColor,embedFonts:this._embedFonts};g(this._content.tree,d);p(d,!1);this._textWidth=d.maxLineWidth|
0;this._textHeight=d.line.y|0;this._lines=d.lines;this._content.textruns=d.runs;this._bottomScrollV=this._maxScrollV=this._scrollV=1;e=this._autoSize;if("none"===e){if(b=(b.yMax-80)/20,this._textHeight>b)for(f=0;f<d.lines.length;f++){var m=d.lines[f];if(m.y+m.height>b){this._maxScrollV=f+1;this._bottomScrollV=0===f?1:f;break}}}else{var l=this._textWidth,d=d.combinedAlign,r=0;if("mixed"!==d){switch(e){case "center":r=f-l>>1;break;case "right":r=f-l}if("left"===d)this._drawingOffsetH=0;else{switch(e){case "left":m=
f-l;break;case "center":m=r<<1;break;case "right":m=r}"center"===d&&(m>>=1);this._drawingOffsetH=m}this._invalidateTransform();this._currentTransform.tx+=20*r|0;b.xMax=(20*l|0)+80}b.yMax=(20*this._textHeight|0)+80;this._invalidateBounds()}this._dimensionsValid=!0}},get text(){return this._content.text},set text(a){a=String(a);if(!(this._content&&this._content.text===a)){for(var d=[],e=0,f=0;f<a.length;){var g=a[f];if("\r"===g||"\n"===g)d.push(a.substring(e,f)),e=f,"\r"===g&&"\n"===a[f+1]&&f++;f++}d.push(a.substring(e,
f));this._content={tree:b(this._defaultTextFormat),text:a,htmlText:a};this._content.tree.children[0].children[0]={type:"plain-text",lines:d};this.invalidateDimensions()}},get htmlText(){return this._content.htmlText},set htmlText(a){if(this._htmlText!==a){this._defaultTextFormat.bold=!1;this._defaultTextFormat.italic=!1;var g=this._defaultTextFormat,l=this._multiline;w.innerHTML=a;var m=1!==w.childNodes.length?w:w.childNodes[0];a={text:"",htmlText:a,tree:b(g)};if(3===m.nodeType)d(m,a.tree.children[0].children,
a,l);else{var g=[m],p,r;if(1==g.length&&"P"==m.localName.toUpperCase()){g=f(m);p=a.tree.format;for(r in g)p[r]=g[r];g=m.childNodes;m=m.childNodes[0]}if(1==g.length&&"FONT"==m.localName.toUpperCase()){g=f(m);p=a.tree.children[0].format;for(r in g)p[r]=g[r];g=m.childNodes}e(g,a.tree.children[0].children,a,l)}this._content=a;this.invalidateDimensions()}},get defaultTextFormat(){return(new flash.text.TextFormat).fromObject(this._defaultTextFormat)},set defaultTextFormat(a){this._defaultTextFormat=a.toObject();
this.invalidateDimensions()},getTextFormat:function(){return this.defaultTextFormat},setTextFormat:function(a){this.defaultTextFormat=a;this._content&&this._content.text===this._content.htmlText&&(a=this.text,this._content=null,this.text=a);this.invalidateDimensions()},get x(){this.ensureDimensions();return this._currentTransform.tx},set x(a){a!==this._currentTransform.tx&&(this._invalidate(),this._invalidateBounds(),this._invalidateTransform(),this._currentTransform.tx=a)},get width(){this.ensureDimensions();
return this._bbox.xMax},set width(a){0>a||(this._bbox.xMax=a,this.invalidateDimensions())},get height(){this.ensureDimensions();return this._bbox.yMax},set height(a){0>a||(this._bbox.yMax=a,this._invalidate())},_getContentBounds:function(){this.ensureDimensions();return this._bbox},_getRegion:function(a){return this._getTransformedRect(this._getContentBounds(),a)},getLineMetrics:function(a){this.ensureDimensions();(0>a||a>=this._lines.length)&&throwError("RangeError",Errors.ParamRangeError);a=this._lines[a];
var b=a.largestFormat,d=b.font._metrics,b=b.size;return new flash.text.TextLineMetrics(a.x+2,a.width,a.height,d.ascent*b+0.49999|0,d.descent*b+0.49999|0,d.leading*b+0.49999+a.leading|0)},getCharBoundaries:function(){somewhatImplemented("TextField.getCharBoundaries");return new flash.geom.Rectangle(0,0,0,0)}},y=Object.getOwnPropertyDescriptor;B.__glue__={"native":{instance:{text:y(B,"text"),defaultTextFormat:y(B,"defaultTextFormat"),draw:B.draw,htmlText:y(B,"htmlText"),replaceText:B.replaceText,getTextFormat:B.getTextFormat,
setTextFormat:B.setTextFormat,getCharBoundaries:B.getCharBoundaries,autoSize:{get:function(){return this._autoSize},set:function(a){this._autoSize!==a&&(this._autoSize=a,this.invalidateDimensions())}},multiline:{get:function(){return this._multiline},set:function(a){this._multiline!==a&&(this._multiline=a,this.invalidateDimensions())}},textColor:{get:function(){return this._textColor},set:function(a){this._textColor!==a&&(this._textColor=a,this._invalidate())}},selectable:{get:function(){return this._selectable},
set:function(a){somewhatImplemented("TextField.selectable");this._selectable=a}},wordWrap:{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.invalidateDimensions())}},textHeight:{get:function(){this.ensureDimensions();return this._textHeight}},textWidth:{get:function(){this.ensureDimensions();return this._textWidth}},length:{get:function(){return this._content.text.length}},numLines:{get:function(){this.ensureDimensions();return this._lines.length}},
getLineMetrics:function(a){return this.getLineMetrics(a)},setSelection:function(){somewhatImplemented("TextField.setSelection")},scrollV:{get:function(){return this._scrollV},set:function(a){this.ensureDimensions();this._scrollV=a=Math.max(1,Math.min(this._maxScrollV,a))}},bottomScrollV:{get:function(){this.ensureDimensions();if(1===this._scrollV)return this._bottomScrollV;for(var a=(this._bbox.yMax-80)/20,b=this._lines[this._scrollV-1].y,d=this._bottomScrollV;d<this._lines.length;d++){var e=this._lines[d];
if(e.y+e.height+b>a)return d+1}}},maxScrollV:{get:function(){this.ensureDimensions();return this._maxScrollV}},maxScrollH:{get:function(){this.ensureDimensions();return Math.max(this._textWidth-this._bbox.xMax/20+4,0)}},background:{get:function(){return this._background},set:function(a){this._background!==a&&(this._background=a,this._invalidate())}},backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor!==a&&(this._backgroundColor=a,this._backgroundColorStr=
rgbIntAlphaToStr(a,1),this._background&&this._invalidate())}},border:{get:function(){return this._border},set:function(a){this._border!==a&&(this._border=a,this._invalidate())}},borderColor:{get:function(){return this._borderColor},set:function(a){this._borderColor!==a&&(this._borderColor=a,this._borderColorStr=rgbIntAlphaToStr(a,1),this._border&&this._invalidate())}},type:{get:function(){return this._type},set:function(a){somewhatImplemented("TextField.type");this._type=a}},embedFonts:{get:function(){return this._embedFonts},
set:function(a){this.invalidateDimensions();this._embedFonts=a}},condenseWhite:{get:function(){return this._condenseWhite},set:function(a){somewhatImplemented("TextField.condenseWhite");this._condenseWhite=a}},sharpness:{get:function(){return this._sharpness},set:function(a){somewhatImplemented("TextField.sharpness");this._sharpness=a}}}}};return B}.call(this),TextFormatDefinition=function(){var a;return{__class__:"flash.text.TextFormat",initialize:function(){},fromObject:function(a){this._font=a.face||
null;this._size="number"===typeof a.size?a.size:null;this._color="number"===typeof a.color?a.color:null;this._bold="boolean"===typeof a.bold?a.bold:null;this._italic="boolean"===typeof a.italic?a.italic:null;this._underline="boolean"===typeof a.underline?a.underline:null;this._url=a.url||null;this._target=a.target||null;this._align=a.align||null;this._leftMargin="number"===typeof a.leftMargin?a.leftMargin:null;this._rightMargin="number"===typeof a.rightMargin?a.rightMargin:null;this._indent="number"===
typeof a.indent?a.indent:null;this._leading="number"===typeof a.leading?a.leading:null;return this},toObject:function(){return{face:this._font||"serif",size:this._size||12,color:this._color||0,bold:this._bold||!1,italic:this._italic||!1,underline:this._underline||!1,url:this._url,target:this._target,align:this._align||"left",leftMargin:this._leftMargin||0,rightMargin:this._rightMargin||0,indent:this._indent||0,leading:this._leading||0}},as2GetTextExtent:function(b,d){a||(a=new flash.text.TextField,
a._multiline=!0);!isNaN(d)&&0<d?(a.width=d+4,a._wordWrap=!0):a._wordWrap=!1;a.defaultTextFormat=this;a.text=b;a.ensureDimensions();var e={},f=a._textWidth,g=a._textHeight;e.asSetPublicProperty("width",f);e.asSetPublicProperty("height",g);e.asSetPublicProperty("textFieldWidth",f+4);e.asSetPublicProperty("textFieldHeight",g+4);f=a.getLineMetrics(0);e.asSetPublicProperty("ascent",f.asGetPublicProperty("ascent"));e.asSetPublicProperty("descent",f.asGetPublicProperty("descent"));return e},__glue__:{"native":{"static":{},
instance:{align:{get:function(){return this._align},set:function(a){this._align=a}},blockIndent:{get:function(){return this._blockIndent},set:function(a){this._blockIndent=a}},bold:{get:function(){return this._bold},set:function(a){this._bold=a}},bullet:{get:function(){return this._bullet},set:function(a){this._bullet=a}},color:{get:function(){return this._color},set:function(a){this._color=a}},display:{get:function(){return this._display},set:function(a){this._display=a}},font:{get:function(){return this._font},
set:function(a){this._font=a}},indent:{get:function(){return this._indent},set:function(a){this._indent=a}},italic:{get:function(){return this._italic},set:function(a){this._italic=a}},kerning:{get:function(){return this._kerning},set:function(a){this._kerning=a}},leading:{get:function(){return this._leading},set:function(a){this._leading=a}},leftMargin:{get:function(){return this._leftMargin},set:function(a){this._leftMargin=a}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing=
a}},rightMargin:{get:function(){return this._rightMargin},set:function(a){this._rightMargin=a}},size:{get:function(){return this._size},set:function(a){this._size=a}},tabStops:{get:function(){return this._tabStops},set:function(a){this._tabStops=a}},target:{get:function(){return this._target},set:function(a){this._target=a}},underline:{get:function(){return this._underline},set:function(a){this._underline=a}},url:{get:function(){return this._url},set:function(a){this._url=a}}}}}}}.call(this),ContentElementDefinition=
function(){return{__class__:"flash.text.engine.ContentElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{textBlock:{get:function(){notImplemented("ContentElement.textBlock");return this._textBlock}},textBlockBeginIndex:{get:function(){notImplemented("ContentElement.textBlockBeginIndex");return this._textBlockBeginIndex}},elementFormat:{get:function(){return this._elementFormat},set:function(a){somewhatImplemented("ContentElement.elementFormat");this._elementFormat=a}},eventMirror:{get:function(){return this._eventMirror},
set:function(a){somewhatImplemented("ContentElement.eventMirror");this._eventMirror=a}},groupElement:{get:function(){notImplemented("ContentElement.groupElement");return this._groupElement}},rawText:{get:function(){notImplemented("ContentElement.rawText");return this._rawText}},text:{get:function(){notImplemented("ContentElement.text");return this._text}},textRotation:{get:function(){return this._textRotation},set:function(a){somewhatImplemented("ContentElement.textRotation");this._textRotation=a}}}}}}}.call(this),
ElementFormatDefinition=function(){return{__class__:"flash.text.engine.ElementFormat",initialize:function(){},__glue__:{"native":{"static":{},instance:{getFontMetrics:function(){notImplemented("ElementFormat.getFontMetrics")},alignmentBaseline:{get:function(){return this._alignmentBaseline},set:function(a){somewhatImplemented("ElementFormat.alignmentBaseline");this._alignmentBaseline=a}},alpha:{get:function(){return this._alpha},set:function(a){somewhatImplemented("ElementFormat.alpha");this._alpha=
a}},baselineShift:{get:function(){return this._baselineShift},set:function(a){somewhatImplemented("ElementFormat.baselineShift");this._baselineShift=a}},breakOpportunity:{get:function(){return this._breakOpportunity},set:function(a){somewhatImplemented("ElementFormat.breakOpportunity");this._breakOpportunity=a}},color:{get:function(){return this._color},set:function(a){somewhatImplemented("ElementFormat.color");this._color=a}},dominantBaseline:{get:function(){return this._dominantBaseline},set:function(a){somewhatImplemented("ElementFormat.dominantBaseline");
this._dominantBaseline=a}},fontDescription:{get:function(){return this._fontDescription},set:function(a){somewhatImplemented("ElementFormat.fontDescription");this._fontDescription=a}},digitCase:{get:function(){return this._digitCase},set:function(a){somewhatImplemented("ElementFormat.digitCase");this._digitCase=a}},digitWidth:{get:function(){return this._digitWidth},set:function(a){somewhatImplemented("ElementFormat.digitWidth");this._digitWidth=a}},ligatureLevel:{get:function(){return this._ligatureLevel},
set:function(a){somewhatImplemented("ElementFormat.ligatureLevel");this._ligatureLevel=a}},fontSize:{get:function(){return this._fontSize},set:function(a){somewhatImplemented("ElementFormat.fontSize");this._fontSize=a}},kerning:{get:function(){return this._kerning},set:function(a){somewhatImplemented("ElementFormat.kerning");this._kerning=a}},locale:{get:function(){return this._locale},set:function(a){somewhatImplemented("ElementFormat.locale");this._locale=a}},textRotation:{get:function(){return this._textRotation},
set:function(a){somewhatImplemented("ElementFormat.textRotation");this._textRotation=a}},trackingRight:{get:function(){return this._trackingRight},set:function(a){somewhatImplemented("ElementFormat.trackingRight");this._trackingRight=a}},trackingLeft:{get:function(){return this._trackingLeft},set:function(a){somewhatImplemented("ElementFormat.trackingLeft");this._trackingLeft=a}},typographicCase:{get:function(){return this._typographicCase},set:function(a){somewhatImplemented("ElementFormat.typographicCase");
this._typographicCase=a}},locked:{get:function(){notImplemented("ElementFormat.locked");return this._locked},set:function(a){notImplemented("ElementFormat.locked");this._locked=a}}}}}}}.call(this),FontDescriptionDefinition=function(){return{__class__:"flash.text.engine.FontDescription",initialize:function(){},__glue__:{"native":{"static":{isFontCompatible:function(){notImplemented("FontDescription.isFontCompatible")},isDeviceFontCompatible:function(){notImplemented("FontDescription.isDeviceFontCompatible")}},
instance:{renderingMode:{get:function(){return this._renderingMode},set:function(a){somewhatImplemented("FontDescription.renderingMode");this._renderingMode=a}},fontLookup:{get:function(){return this._fontLookup},set:function(a){somewhatImplemented("FontDescription.fontLookup");this._fontLookup=a}},fontName:{get:function(){return this._fontName},set:function(a){somewhatImplemented("FontDescription.fontName");this._fontName=a}},fontPosture:{get:function(){return this._fontPosture},set:function(a){somewhatImplemented("FontDescription.fontPosture");
this._fontPosture=a}},fontWeight:{get:function(){return this._fontWeight},set:function(a){somewhatImplemented("FontDescription.fontWeight");this._fontWeight=a}},cffHinting:{get:function(){return this._cffHinting},set:function(a){somewhatImplemented("FontDescription.cffHinting");this._cffHinting=a}},locked:{get:function(){notImplemented("FontDescription.locked");return this._locked},set:function(a){notImplemented("FontDescription.locked");this._locked=a}}}},script:{"static":{},instance:{}}}}}.call(this),
GroupElementDefinition=function(){return{__class__:"flash.text.engine.GroupElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{getElementAt:function(){notImplemented("GroupElement.getElementAt")},setElements:function(a){somewhatImplemented("GroupElement.setElements");this._elements=a},groupElements:function(){notImplemented("GroupElement.groupElements")},ungroupElements:function(){notImplemented("GroupElement.ungroupElements")},mergeTextElements:function(){notImplemented("GroupElement.mergeTextElements")},
splitTextElement:function(){notImplemented("GroupElement.splitTextElement")},replaceElements:function(){notImplemented("GroupElement.replaceElements")},getElementAtCharIndex:function(){notImplemented("GroupElement.getElementAtCharIndex")},elementCount:{get:function(){notImplemented("GroupElement.elementCount");return this._elementCount}}}}}}}.call(this),SpaceJustifierDefinition=function(){return{__class__:"flash.text.engine.SpaceJustifier",initialize:function(){this._letterSpacing=!1;this._optimumSpacing=
1;this._minimumSpacing=0.5;this._maximumSpacing=1.5},__glue__:{"native":{"static":{},instance:{cloneSpacing:function(a){somewhatImplemented("SpaceJustifier.cloneSpacing");a._optimumSpacing=this._optimumSpacing;a._minimumSpacing=this._minimumSpacing;a._maximumSpacing=this._maximumSpacing},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){somewhatImplemented("SpaceJustifier.letterSpacing");this._letterSpacing=a}},minimumSpacing:{get:function(){return this._minimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.minimumSpacing");
this._minimumSpacing=a}},optimumSpacing:{get:function(){return this._optimumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.optimumSpacing");this._optimumSpacing=a}},maximumSpacing:{get:function(){return this._maximumSpacing},set:function(a){somewhatImplemented("SpaceJustifier.maximumSpacing");this._maximumSpacing=a}}}}}}}.call(this),TextBlockDefinition=function(){return{__class__:"flash.text.engine.TextBlock",initialize:function(){this._lastLine=this._firstLine=null},__glue__:{"native":{"static":{},
instance:{getTextJustifier:function(){return this._textJustifier},setTextJustifier:function(a){somewhatImplemented("TextBlock.setTextJustifier");this._textJustifier=a},getTabStops:function(){return this._tabStops},setTabStops:function(a){somewhatImplemented("TextBlock.setTabStops");this._tabStops=a},findNextAtomBoundary:function(){notImplemented("TextBlock.findNextAtomBoundary")},findPreviousAtomBoundary:function(){notImplemented("TextBlock.findPreviousAtomBoundary")},findNextWordBoundary:function(){notImplemented("TextBlock.findNextWordBoundary")},
findPreviousWordBoundary:function(){notImplemented("TextBlock.findPreviousWordBoundary")},getTextLineAtCharIndex:function(){notImplemented("TextBlock.getTextLineAtCharIndex")},DoCreateTextLine:function(a,b){somewhatImplemented("TextBlock.DoCreateTextLine");if(a)return null;var d=new flash.text.engine.TextLine;d._textBlock=this;d._specifiedWidth=b;d._rawTextLength=0;d._textWidth=0;d._textHeight=0;d._ascent=0;d._descent=0;d._unjustifiedTextWidth=0;d._validity="valid";d._previousLine=null;d._nextLine=
null;return this._lastLine=this._firstLine=d},releaseLineCreationData:function(){notImplemented("TextBlock.releaseLineCreationData")},releaseLines:function(){notImplemented("TextBlock.releaseLines")},dump:function(){notImplemented("TextBlock.dump")},applyNonLinearFontScaling:{get:function(){return this._applyNonLinearFontScaling},set:function(a){somewhatImplemented("TextBlock.applyNonLinearFontScaling");this._applyNonLinearFontScaling=a}},baselineFontDescription:{get:function(){return this._baselineFontDescription},
set:function(a){somewhatImplemented("TextBlock.baselineFontDescription");this._baselineFontDescription=a}},baselineFontSize:{get:function(){return this._baselineFontSize},set:function(a){somewhatImplemented("TextBlock.baselineFontSize");this._baselineFontSize=a}},baselineZero:{get:function(){return this._baselineZero},set:function(a){somewhatImplemented("TextBlock.baselineZero");this._baselineZero=a}},content:{get:function(){return this._content},set:function(a){somewhatImplemented("TextBlock.content");
this._content=a}},bidiLevel:{get:function(){return this._bidiLevel},set:function(a){somewhatImplemented("TextBlock.bidiLevel");this._bidiLevel=a}},firstInvalidLine:{get:function(){notImplemented("TextBlock.firstInvalidLine");return this._firstInvalidLine}},firstLine:{get:function(){somewhatImplemented("TextBlock.firstLine");return this._firstLine}},lastLine:{get:function(){somewhatImplemented("TextBlock.lastLine");return this._lastLine}},textLineCreationResult:{get:function(){notImplemented("TextBlock.textLineCreationResult");
return this._textLineCreationResult}},lineRotation:{get:function(){return this._lineRotation},set:function(a){somewhatImplemented("TextBlock.lineRotation");this._lineRotation=a}}}}}}}.call(this),TextElementDefinition=function(){return{__class__:"flash.text.engine.TextElement",initialize:function(){},__glue__:{"native":{"static":{},instance:{replaceText:function(a,b,d){somewhatImplemented("TextElement.replaceText");var e=this._text||"";this._text=e.slice(0,a)+d+e.slice(b)},text:{set:function(a){somewhatImplemented("TextElement.text");
this._text=a}}}}}}}.call(this),TextJustifierDefinition=function(){return{__class__:"flash.text.engine.TextJustifier",initialize:function(){this._lineJustification=this._locale=null},__glue__:{"native":{"static":{},instance:{setLocale:function(a){somewhatImplemented("TextJustifier.setLocale");this._locale=a},locale:{get:function(){return this._locale}},lineJustification:{get:function(){return this._lineJustification},set:function(a){somewhatImplemented("TextJustifier.lineJustification");this._lineJustification=
a}}}}}}}.call(this),TextLineDefinition=function(){return{__class__:"flash.text.engine.TextLine",initialize:function(){},__glue__:{"native":{"static":{},instance:{getAtomIndexAtPoint:function(){notImplemented("TextLine.getAtomIndexAtPoint")},getAtomIndexAtCharIndex:function(){notImplemented("TextLine.getAtomIndexAtCharIndex")},getAtomBounds:function(){notImplemented("TextLine.getAtomBounds")},getAtomBidiLevel:function(){notImplemented("TextLine.getAtomBidiLevel")},getAtomTextRotation:function(){notImplemented("TextLine.getAtomTextRotation")},
getAtomTextBlockBeginIndex:function(){notImplemented("TextLine.getAtomTextBlockBeginIndex")},getAtomTextBlockEndIndex:function(){notImplemented("TextLine.getAtomTextBlockEndIndex")},getAtomCenter:function(){notImplemented("TextLine.getAtomCenter")},getAtomWordBoundaryOnLeft:function(){notImplemented("TextLine.getAtomWordBoundaryOnLeft")},getAtomGraphic:function(){notImplemented("TextLine.getAtomGraphic")},getBaselinePosition:function(){notImplemented("TextLine.getBaselinePosition")},dump:function(){notImplemented("TextLine.dump")},
textBlock:{get:function(){notImplemented("TextLine.textBlock");return this._textBlock}},hasGraphicElement:{get:function(){notImplemented("TextLine.hasGraphicElement");return this._hasGraphicElement}},hasTabs:{get:function(){notImplemented("TextLine.hasTabs");return this._hasTabs}},nextLine:{get:function(){somewhatImplemented("TextLine.nextLine");return this._nextLine}},previousLine:{get:function(){somewhatImplemented("TextLine.previousLine");return this._previousLine}},ascent:{get:function(){somewhatImplemented("TextLine.ascent");
return this._ascent}},descent:{get:function(){somewhatImplemented("TextLine.descent");return this._descent}},textHeight:{get:function(){somewhatImplemented("TextLine.textHeight");return this._textHeight}},textWidth:{get:function(){somewhatImplemented("TextLine.textWidth");return this._textWidth}},totalAscent:{get:function(){notImplemented("TextLine.totalAscent");return this._totalAscent}},totalDescent:{get:function(){notImplemented("TextLine.totalDescent");return this._totalDescent}},totalHeight:{get:function(){notImplemented("TextLine.totalHeight");
return this._totalHeight}},textBlockBeginIndex:{get:function(){notImplemented("TextLine.textBlockBeginIndex");return this._textBlockBeginIndex}},rawTextLength:{get:function(){somewhatImplemented("TextLine.rawTextLength");return this._rawTextLength}},specifiedWidth:{get:function(){somewhatImplemented("TextLine.specifiedWidth");return this._specifiedWidth}},unjustifiedTextWidth:{get:function(){somewhatImplemented("TextLine.unjustifiedTextWidth");return this._unjustifiedTextWidth}},validity:{get:function(){return this._validity},
set:function(a){somewhatImplemented("TextLine.validity");this._validity=a}},atomCount:{get:function(){notImplemented("TextLine.atomCount");return this._atomCount}},mirrorRegions:{get:function(){notImplemented("TextLine.mirrorRegions");return this._mirrorRegions}}}}}}}.call(this),ContextMenuDefinition=function(){return{__class__:"flash.ui.ContextMenu",initialize:function(){},__glue__:{"native":{"static":{_checkSupported:function(){notImplemented("ContextMenu._checkSupported")}},instance:{cloneLinkAndClipboardProperties:function(){notImplemented("ContextMenu.cloneLinkAndClipboardProperties")},
builtInItems:{get:function(){somewhatImplemented("ContextMenu.builtInItems");return this._builtInItems},set:function(a){somewhatImplemented("ContextMenu.builtInItems");this._builtInItems=a}},customItems:{get:function(){somewhatImplemented("ContextMenu.customItems");return this._customItems},set:function(a){somewhatImplemented("ContextMenu.customItems");this._customItems=a}},link:{get:function(){notImplemented("ContextMenu.link");return this._link},set:function(a){notImplemented("ContextMenu.link");
this._link=a}},clipboardMenu:{get:function(){notImplemented("ContextMenu.clipboardMenu");return this._clipboardMenu},set:function(a){notImplemented("ContextMenu.clipboardMenu");this._clipboardMenu=a}},clipboardItems:{get:function(){notImplemented("ContextMenu.clipboardItems");return this._clipboardItems},set:function(a){notImplemented("ContextMenu.clipboardItems");this._clipboardItems=a}}}}}}}.call(this),ContextMenuItemDefinition=function(){return{__class__:"flash.ui.ContextMenuItem",initialize:function(){},
__glue__:{"native":{"static":{},instance:{caption:{get:function(){somewhatImplemented("ContextMenuItem.caption");return this._caption},set:function(a){somewhatImplemented("ContextMenuItem.caption");this._caption=a}},separatorBefore:{get:function(){somewhatImplemented("ContextMenuItem.separatorBefore");return this._separatorBefore},set:function(a){somewhatImplemented("ContextMenuItem.separatorBefore");this._separatorBefore=a}},visible:{get:function(){somewhatImplemented("ContextMenuItem.visible");
return this._visible},set:function(a){somewhatImplemented("ContextMenuItem.visible");this._visible=a}}}}}}}.call(this),ShumwayKeyboardListener={_lastKeyCode:0,_captureKeyPress:!1,_charCodeMap:[],focus:null,handleEvent:function(a){var b=a.keyCode;if("keydown"===a.type){this._lastKeyCode=b;if(this._captureKeyPress=8===b||9===b||13===b||32===b||48<=b&&90>=b||145<b)return;this._charCodeMap[b]=0}else if("keypress"===a.type)if(this._captureKeyPress)b=this._lastKeyCode,this._charCodeMap[b]=a.charCode;else return;
this.focus&&this.focus._dispatchEvent(new flash.events.KeyboardEvent("keyup"===a.type?"keyUp":"keyDown",!0,!1,"keyup"===a.type?this._charCodeMap[b]:a.charCode,"keyup"===a.type?a.keyCode:this._lastKeyCode,a.keyLocation,a.ctrlKey,a.altKey,a.shiftKey))}};window.addEventListener("keydown",ShumwayKeyboardListener);window.addEventListener("keypress",ShumwayKeyboardListener);window.addEventListener("keyup",ShumwayKeyboardListener);
var KeyboardDefinition=function(){var a={get capsLock(){return!1},get hasVirtualKeyboard(){return!1},get numLock(){return!1},get physicalKeyboardType(){return"alphanumeric"},get isAccessible(){return!0}},b=Object.getOwnPropertyDescriptor;a.__glue__={script:{"static":scriptProperties("public","A ALTERNATE AUDIO B BACK BACKQUOTE BACKSLASH BACKSPACE BLUE C CAPS_LOCK CHANNEL_DOWN CHANNEL_UP COMMA COMMAND CONTROL D DELETE DOWN DVR E END ENTER EQUAL ESCAPE EXIT F F1 F10 F11 F12 F13 F14 F15 F2 F3 F4 F5 F6 F7 F8 F9 FAST_FORWARD G GREEN GUIDE H HELP HOME I INFO INPUT INSERT J K KEYNAME_BEGIN KEYNAME_BREAK KEYNAME_CLEARDISPLAY KEYNAME_CLEARLINE KEYNAME_DELETE KEYNAME_DELETECHAR KEYNAME_DELETELINE KEYNAME_DOWNARROW KEYNAME_END KEYNAME_EXECUTE KEYNAME_F1 KEYNAME_F10 KEYNAME_F11 KEYNAME_F12 KEYNAME_F13 KEYNAME_F14 KEYNAME_F15 KEYNAME_F16 KEYNAME_F17 KEYNAME_F18 KEYNAME_F19 KEYNAME_F2 KEYNAME_F20 KEYNAME_F21 KEYNAME_F22 KEYNAME_F23 KEYNAME_F24 KEYNAME_F25 KEYNAME_F26 KEYNAME_F27 KEYNAME_F28 KEYNAME_F29 KEYNAME_F3 KEYNAME_F30 KEYNAME_F31 KEYNAME_F32 KEYNAME_F33 KEYNAME_F34 KEYNAME_F35 KEYNAME_F4 KEYNAME_F5 KEYNAME_F6 KEYNAME_F7 KEYNAME_F8 KEYNAME_F9 KEYNAME_FIND KEYNAME_HELP KEYNAME_HOME KEYNAME_INSERT KEYNAME_INSERTCHAR KEYNAME_INSERTLINE KEYNAME_LEFTARROW KEYNAME_MENU KEYNAME_MODESWITCH KEYNAME_NEXT KEYNAME_PAGEDOWN KEYNAME_PAGEUP KEYNAME_PAUSE KEYNAME_PREV KEYNAME_PRINT KEYNAME_PRINTSCREEN KEYNAME_REDO KEYNAME_RESET KEYNAME_RIGHTARROW KEYNAME_SCROLLLOCK KEYNAME_SELECT KEYNAME_STOP KEYNAME_SYSREQ KEYNAME_SYSTEM KEYNAME_UNDO KEYNAME_UPARROW KEYNAME_USER L LAST LEFT LEFTBRACKET LIVE M MASTER_SHELL MENU MINUS N NEXT NUMBER_0 NUMBER_1 NUMBER_2 NUMBER_3 NUMBER_4 NUMBER_5 NUMBER_6 NUMBER_7 NUMBER_8 NUMBER_9 NUMPAD NUMPAD_0 NUMPAD_1 NUMPAD_2 NUMPAD_3 NUMPAD_4 NUMPAD_5 NUMPAD_6 NUMPAD_7 NUMPAD_8 NUMPAD_9 NUMPAD_ADD NUMPAD_DECIMAL NUMPAD_DIVIDE NUMPAD_ENTER NUMPAD_MULTIPLY NUMPAD_SUBTRACT O P PAGE_DOWN PAGE_UP PAUSE PERIOD PLAY PREVIOUS Q QUOTE R RECORD RED REWIND RIGHT RIGHTBRACKET S SEARCH SEMICOLON SETUP SHIFT SKIP_BACKWARD SKIP_FORWARD SLASH SPACE STOP STRING_BEGIN STRING_BREAK STRING_CLEARDISPLAY STRING_CLEARLINE STRING_DELETE STRING_DELETECHAR STRING_DELETELINE STRING_DOWNARROW STRING_END STRING_EXECUTE STRING_F1 STRING_F10 STRING_F11 STRING_F12 STRING_F13 STRING_F14 STRING_F15 STRING_F16 STRING_F17 STRING_F18 STRING_F19 STRING_F2 STRING_F20 STRING_F21 STRING_F22 STRING_F23 STRING_F24 STRING_F25 STRING_F26 STRING_F27 STRING_F28 STRING_F29 STRING_F3 STRING_F30 STRING_F31 STRING_F32 STRING_F33 STRING_F34 STRING_F35 STRING_F4 STRING_F5 STRING_F6 STRING_F7 STRING_F8 STRING_F9 STRING_FIND STRING_HELP STRING_HOME STRING_INSERT STRING_INSERTCHAR STRING_INSERTLINE STRING_LEFTARROW STRING_MENU STRING_MODESWITCH STRING_NEXT STRING_PAGEDOWN STRING_PAGEUP STRING_PAUSE STRING_PREV STRING_PRINT STRING_PRINTSCREEN STRING_REDO STRING_RESET STRING_RIGHTARROW STRING_SCROLLLOCK STRING_SELECT STRING_STOP STRING_SYSREQ STRING_SYSTEM STRING_UNDO STRING_UPARROW STRING_USER SUBTITLE T TAB U UP V VOD W X Y YELLOW Z CharCodeStrings".split(" "))},
"native":{instance:{capsLock:b(a,"capsLock"),hasVirtualKeyboard:b(a,"hasVirtualKeyboard"),numLock:b(a,"numLock"),physicalKeyboardType:b(a,"physicalKeyboardType"),isAccessible:b(a,"isAccessible")}}};return a}.call(this),MouseDefinition=function(){return{__class__:"flash.ui.Mouse",__glue__:{"native":{"static":{cursor:{get:function(){return"auto"},set:function(){notImplemented()}},supportsCursor:{get:function(){return!0}},supportsNativeCursor:{get:function(){return!0}},hide:function(){},show:function(){},
registerCursor:function(){notImplemented()},unregisterCursor:function(){notImplemented()}}}}}}.call(this),MouseCursorDataDefinition=function(){return{__class__:"flash.ui.MouseCursorData",initialize:function(){},__glue__:{"native":{"static":{},instance:{data:{get:function(){notImplemented("MouseCursorData.data");return this._data},set:function(a){notImplemented("MouseCursorData.data");this._data=a}},hotSpot:{get:function(){notImplemented("MouseCursorData.hotSpot");return this._hotSpot},set:function(a){notImplemented("MouseCursorData.hotSpot");
this._hotSpot=a}},frameRate:{get:function(){notImplemented("MouseCursorData.frameRate");return this._frameRate},set:function(a){notImplemented("MouseCursorData.frameRate");this._frameRate=a}}}}}}}.call(this),DictionaryDefinition=function(){return{__class__:"flash.utils.Dictionary",initialize:function(){},__glue__:{"native":{"static":{},instance:{init:function(){notImplemented("Dictionary.init")}}}}}}.call(this),TimerDefinition=function(){return{__class__:"flash.utils.Timer",initialize:function(){this._running=
!1},__glue__:{"native":{instance:{running:{get:function(){return this._running}},_start:function(a,b){this._running=!0;this.interval=setInterval(b,a)},stop:function(){this._running=!1;clearInterval(this.interval)},_timerDispatch:function(){this._running&&this._dispatchEvent(new flash.events.TimerEvent("timer",!0,!1))}}}}}}.call(this),AccessibilityDefinition=function(){return{__class__:"flash.accessibility.Accessibility",initialize:function(){},__glue__:{"native":{"static":{sendEvent:function(){notImplemented("Accessibility.sendEvent")},
updateProperties:function(){notImplemented("Accessibility.updateProperties")},active:{get:function(){somewhatImplemented("Accessibility.active");return!1}}},instance:{}}}}}.call(this),AS2ButtonDefinition=function(){var a={__class__:"avm1lib.AS2Button",initialize:function(){}};a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a});a.$as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};
return a}.call(this),AS2GlobalsDefinition=function(){var a={__class__:"avm1lib.AS2Globals",initialize:function(){flash.text.TextFormat.prototype.asDefinePublicProperty("getTextExtent",{value:TextFormatDefinition.as2GetTextExtent,writable:!1,enumerable:!1,configurable:!1})}};a.__glue__={"native":{instance:{ASSetPropFlags:function(){},_addToPendingScripts:function(a,d,e){AS2Context.instance.addToPendingScripts(function(){d.apply(a,e)})},_setLevel:function(a,d){AS2Context.instance.stage._as2SetLevel(a,
d)},trace:function(a){avm2.applicationDomain.getProperty(Multiname.fromSimpleName("trace"),!0,!0)(a)}},"static":{_addInternalClasses:function(a){a.asSetPublicProperty("Object",Stubs.Object);a.asSetPublicProperty("Function",Stubs.Function);a.asSetPublicProperty("Array",Stubs.Array);a.asSetPublicProperty("Number",Stubs.Number);a.asSetPublicProperty("Math",avm2.systemDomain.getClass("Math"));a.asSetPublicProperty("Boolean",Stubs.Boolean);a.asSetPublicProperty("Date",Stubs.Date);a.asSetPublicProperty("RegExp",
Stubs.RegExp);a.asSetPublicProperty("String",Stubs.String)}}},script:{instance:Glue.ALL}};return a}.call(this),AS2MovieClipDefinition=function(){var a={__class__:"avm1lib.AS2MovieClip",initialize:function(){},_insertChildAtDepth:function(a,d){return this.$nativeObject._insertChildAtDepth(a,d)},_duplicate:function(a,d,e){return this.$nativeObject._duplicate(a,d,e)},_constructSymbol:function(a){var d=AS2Context.instance.classes&&AS2Context.instance.classes[a],e=flash.display.MovieClip.class;a=e.createAsSymbol(AS2Context.instance.assets[a]);
a._avm1SymbolClass=d;e.instanceConstructor.call(a);this.$nativeObject.addChild(a);return a},_gotoLabel:function(a){this.$nativeObject.gotoLabel(a)},_callFrame:function(a){this.$nativeObject._callFrame(a)},init:function(a){a&&(Object.defineProperty(this,"$nativeObject",{value:a}),a.$as2Object=this,initDefaultListeners(this))}};a.__glue__={"native":{instance:{_as3Object:{get:function(){return this.$nativeObject}},_init:a.init,_insertChildAtDepth:a._insertChildAtDepth,_duplicate:a._duplicate,_constructSymbol:a._constructSymbol,
_callFrame:a._callFrame,_gotoLabel:a._gotoLabel}},script:{instance:Glue.ALL}};return a}.call(this),AS2MovieClipLoaderDefinition=function(){var a={__class__:"avm1lib.AS2MovieClipLoader",initialize:function(){},get _bytesLoaded(){return this.$nativeObject._bytesLoaded}},b=Object.getOwnPropertyDescriptor;a.__glue__={"native":{instance:{$nativeObject:{get:function(){return this.$nativeObject}},_bytesLoaded:b(a,"_bytesLoaded")}},script:{instance:Glue.ALL}};return a}.call(this),AS2TextFieldDefinition=function(){var a=
{__class__:"avm1lib.AS2TextField",initialize:function(){this._variable=""}};a.__glue__={"native":{instance:{variable:{get:function(){return this._variable},set:function(a){if(a!==this._variable){this._variable=a;var d=this.$nativeObject,e;if(0<=a.indexOf(".")||0<=a.indexOf(":")){var f=a.split(/[.:\/]/g);a=f.pop();"_root"==f[0]||""===f[0]?(e=d.root._getAS2Object(),f.shift(),""===f[0]&&f.shift()):e=d._parent._getAS2Object();for(;0<f.length;){var g=f.shift();e=e.asGetPublicProperty(g)||e[g];if(!e)throw Error("Cannot find "+
g+" variable");}}else e=d._parent._getAS2Object();e.asHasProperty(void 0,a,0)||e.asSetPublicProperty(a,d.text);d._addEventListener("advanceFrame",function(){d.text=""+e.asGetPublicProperty(a)})}}},_as3Object:{get:function(){return this.$nativeObject}},_init:function(a){Object.defineProperty(this,"$nativeObject",{value:a});a.$as2Object=this;initDefaultListeners(this)}}},script:{instance:Glue.ALL}};return a}.call(this),AS2UtilsDefinition=function(){return{__class__:"avm1lib.AS2Utils",initialize:function(){},
__glue__:{"native":{"static":{getAS2Object:function(a){return a&&a._getAS2Object?a._getAS2Object():null},addProperty:function(a,b,d,e){a.asDefinePublicProperty(b,{get:d,set:e||void 0,enumerable:!0,configurable:!0})},resolveTarget:function(a){return AS2Context.instance.resolveTarget(a)},resolveLevel:function(a){return AS2Context.instance.resolveLevel(a)},currentStage:{get:function(){return AS2Context.instance.stage}},_installObjectMethods:function(){var a=Stubs.Object,b=a.asGetPublicProperty("prototype");
a.asSetPublicProperty("registerClass",function(a,b){(AS2Context.instance.classes||(AS2Context.instance.classes={}))[a]=b});b.asDefinePublicProperty("addProperty",{value:function(a,b,f){if("string"!==typeof a||""===a||"function"!==typeof b||"function"!==typeof f&&null!==f)return!1;this.asDefinePublicProperty(a,{get:b,set:f||void 0,configurable:!0,enumerable:!0});return!0},writable:!1,enumerable:!1,configurable:!1})}}}}}}.call(this);
function initDefaultListeners(a){var b=a.asGetPublicProperty("$defaultListeners");if(b)for(var d=0;d<b.length;d++){var e=b[d];e.asGetPublicProperty("setter").call(a,e.value)}}function bindNativeClassDefinition(a,b){natives[a]=function(a,e,f,g){a=new Class(void 0,f,ApplicationDomain.coerceCallable);a.extend(g);a.linkNatives(b);return a}}
var Stubs=new function(){function a(a,b,d){Object.defineProperty(a,d,{get:function(){var e=avm2.systemDomain.getClass(b);!0;Object.defineProperty(a,d,{value:e.instanceConstructor,writable:!1});return a[d]},configurable:!0})}function b(a,b,d){return{classSimpleName:a,nativeName:b,definition:d}}var d=this,e=createEmptyObject(),f={__glue__:{script:{instance:Glue.ALL,"static":Glue.ALL}}};this.getClassNames=function(){return Object.keys(e)};this.onClassCreated=function(a,b){var d=b.classInfo.instanceInfo.name.getOriginalName();
d in e&&b.link(e[d]||f)};"Boolean Date String Function Object Number Math Array RegExp".split(" ").forEach(function(b){a(d,b,b)});"Error DefinitionError EvalError RangeError ReferenceError SecurityError SyntaxError TypeError URIError VerifyError UninitializedError ArgumentError".split(" ").forEach(function(b){a(d,b,b)});[b("flash.display.DisplayObject","DisplayObjectClass",DisplayObjectDefinition),b("flash.display.InteractiveObject","InteractiveObjectClass",InteractiveObjectDefinition),b("flash.display.DisplayObjectContainer",
"ContainerClass",DisplayObjectContainerDefinition),b("flash.display.Sprite","SpriteClass",SpriteDefinition),b("flash.display.MovieClip","MovieClipClass",MovieClipDefinition),b("flash.display.Shape","ShapeClass",ShapeDefinition),b("flash.display.Bitmap","BitmapClass",BitmapDefinition),b("flash.display.BitmapData","BitmapDataClass",BitmapDataDefinition),b("flash.display.Stage","StageClass",StageDefinition),b("flash.display.Loader","LoaderClass",LoaderDefinition),b("flash.display.LoaderInfo","LoaderInfoClass",
LoaderInfoDefinition),b("flash.display.Graphics","GraphicsClass",GraphicsDefinition),b("flash.display.SimpleButton","SimpleButtonClass",SimpleButtonDefinition),b("flash.display.MorphShape","MorphShapeClass",MorphShapeDefinition),b("flash.display.NativeMenu","MenuClass",NativeMenuDefinition),b("flash.display.NativeMenuItem","MenuItemClass",NativeMenuItemDefinition),b("flash.display.FrameLabel","FrameLabelClass",FrameLabelDefinition),b("flash.display.Scene"),b("flash.display.BlendMode"),b("flash.display.Shader",
"ShaderClass",ShaderDefinition),b("flash.display.ShaderData","ShaderDataClass",ShaderDataDefinition),b("flash.filters.BevelFilter","BevelFilterClass",BevelFilterDefinition),b("flash.filters.BitmapFilter","BitmapFilterClass",BitmapFilterDefinition),b("flash.filters.BlurFilter","BlurFilterClass",BlurFilterDefinition),b("flash.filters.ColorMatrixFilter","ColorMatrixFilterClass",ColorMatrixFilterDefinition),b("flash.filters.ConvolutionFilter","ConvolutionFilterClass",ConvolutionFilterDefinition),b("flash.filters.DisplacementMapFilter",
"DisplacementMapFilterClass",DisplacementMapFilterDefinition),b("flash.filters.DropShadowFilter","DropShadowFilterClass",DropShadowFilterDefinition),b("flash.filters.GlowFilter","GlowFilterClass",GlowFilterDefinition),b("flash.filters.GradientBevelFilter","GradientBevelFilterClass",GradientBevelFilterDefinition),b("flash.filters.GradientGlowFilter","GradientGlowFilterClass",GradientGlowFilterDefinition),b("flash.filters.ShaderFilter","ShaderFilterClass",ShaderFilterDefinition),b("flash.geom.Point",
"PointClass",PointDefinition),b("flash.geom.Rectangle","RectangleClass",RectangleDefinition),b("flash.geom.Matrix","MatrixClass",MatrixDefinition),b("flash.geom.Matrix3D","Matrix3DClass",Matrix3DDefinition),b("flash.geom.Vector3D","Vector3DClass",Vector3DDefinition),b("flash.geom.Transform","TransformClass",TransformDefinition),b("flash.geom.ColorTransform","ColorTransformClass",ColorTransformDefinition),b("flash.events.EventDispatcher","EventDispatcherClass",EventDispatcherDefinition),b("flash.events.Event",
"EventClass",EventDefinition),b("flash.events.IOErrorEvent"),b("flash.events.NetStatusEvent"),b("flash.events.KeyboardEvent","KeyboardEventClass",KeyboardEventDefinition),b("flash.events.MouseEvent","MouseEventClass",MouseEventDefinition),b("flash.events.TextEvent","TextEventClass",TextEventDefinition),b("flash.events.TimerEvent","TimerEventClass",TimerEventDefinition),b("flash.events.ProgressEvent"),b("flash.events.NetStatusEvent"),b("flash.external.ExternalInterface","ExternalInterfaceClass",ExternalInterfaceDefinition),
b("flash.ui.ContextMenu","ContextMenuClass",ContextMenuDefinition),b("flash.ui.ContextMenuItem","ContextMenuItemClass",ContextMenuItemDefinition),b("flash.ui.Keyboard","KeyboardClass",KeyboardDefinition),b("flash.ui.Mouse","MouseClass",MouseDefinition),b("flash.ui.MouseCursorData","MouseCursorDataClass",MouseCursorDataDefinition),b("flash.text.Font","FontClass",FontDefinition),b("flash.text.TextField","TextFieldClass",TextFieldDefinition),b("flash.text.StaticText","StaticTextClass",StaticTextDefinition),
b("flash.text.StyleSheet","StyleSheetClass",StyleSheetDefinition),b("flash.text.TextFormat","TextFormatClass",TextFormatDefinition),b("flash.text.TextLineMetrics"),b("flash.text.engine.ContentElement","ContentElementClass",ContentElementDefinition),b("flash.text.engine.ElementFormat","ElementFormatClass",ElementFormatDefinition),b("flash.text.engine.FontDescription","FontDescriptionClass",FontDescriptionDefinition),b("flash.text.engine.GroupElement","GroupElementClass",GroupElementDefinition),b("flash.text.engine.SpaceJustifier",
"SpaceJustifierClass",SpaceJustifierDefinition),b("flash.text.engine.TextBlock","TextBlockClass",TextBlockDefinition),b("flash.text.engine.TextElement","TextElementClass",TextElementDefinition),b("flash.text.engine.TextJustifier","TextJustifierClass",TextJustifierDefinition),b("flash.text.engine.TextLine","TextLineClass",TextLineDefinition),b("flash.media.Sound","SoundClass",SoundDefinition),b("flash.media.SoundChannel","SoundChannelClass",SoundChannelDefinition),b("flash.media.SoundMixer","SoundMixerClass",
SoundMixerDefinition),b("flash.media.SoundTransform","SoundTransformClass",SoundTransformDefinition),b("flash.media.Video","VideoClass",VideoDefinition),b("flash.media.ID3Info","ID3InfoClass",ID3InfoDefinition),b("flash.media.Microphone","MicrophoneClass",MicrophoneDefinition),b("flash.net.FileFilter","FileFilterClass",FileFilterDefinition),b("flash.net.NetConnection","NetConnectionClass",NetConnectionDefinition),b("flash.net.NetStream","NetStreamClass",NetStreamDefinition),b("flash.net.Responder",
"ResponderClass",ResponderDefinition),b("flash.net.URLRequest","URLRequestClass",URLRequestDefinition),b("flash.net.URLStream","URLStreamClass",URLStreamDefinition),b("flash.net.URLLoader","URLLoaderClass",URLLoaderDefinition),b("flash.net.SharedObject","SharedObjectClass",SharedObjectDefinition),b("flash.net.ObjectEncoding","ObjectEncodingClass",ObjectEncodingDefinition),b("flash.net.LocalConnection","LocalConnectionClass",LocalConnectionDefinition),b("flash.net.Socket","SocketClass",SocketDefinition),
b("flash.net.URLVariables"),b("packageInternal flash.system.FSCommand","FSCommandClass",FSCommandDefinition),b("flash.system.Capabilities","CapabilitiesClass",CapabilitiesDefinition),b("flash.system.System","SystemClass",SystemDefinition),b("flash.system.Security","SecurityClass",SecurityDefinition),b("flash.system.SecurityDomain","SecurityDomainClass",SecurityDomainDefinition),b("flash.system.ApplicationDomain","ApplicationDomainClass",ApplicationDomainDefinition),b("flash.accessibility.Accessibility",
"AccessibilityClass",AccessibilityDefinition),b("flash.utils.Timer","TimerClass",TimerDefinition),b("avm1lib.AS2Utils","AS2Utils",AS2UtilsDefinition),b("avm1lib.AS2Broadcaster"),b("avm1lib.AS2Key"),b("avm1lib.AS2Mouse"),b("avm1lib.AS2MovieClip","AS2MovieClip",AS2MovieClipDefinition),b("avm1lib.AS2Button","AS2Button",AS2ButtonDefinition),b("avm1lib.AS2TextField","AS2TextField",AS2TextFieldDefinition),b("avm1lib.AS2Stage"),b("avm1lib.AS2System"),b("avm1lib.AS2Color"),b("avm1lib.AS2Globals","AS2Globals",
AS2GlobalsDefinition),b("avm1lib.AS2MovieClipLoader","AS2MovieClipLoader",AS2MovieClipLoaderDefinition)].forEach(function(b){for(var d=Multiname.fromSimpleName(b.classSimpleName),f=d.getOriginalName().split("."),p=this,r=0,s=f.length-1;r<s;r++)p[f[r]]||(p[f[r]]={}),p=p[f[r]];a(p,b.classSimpleName,f[f.length-1]);b.nativeName&&bindNativeClassDefinition(b.nativeName,b.definition);e[d.getOriginalName()]=b.definition})};natives["FlashUtilScript::getAliasName"]=function(){return function(a){return a.debugName}};
natives["FlashUtilScript::getDefinitionByName"]=natives.getDefinitionByName;natives["FlashUtilScript::getTimer"]=function(){var a=Date.now();return function(){return Date.now()-a}};natives["FlashUtilScript::escapeMultiByte"]=function(){return escape};natives["FlashUtilScript::unescapeMultiByte"]=function(){return unescape};
natives["FlashNetScript::navigateToURL"]=function(){return function(a,b){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var d=a.url;/^fscommand:/i.test(d)?avm2.applicationDomain.getProperty(Multiname.fromSimpleName("flash.system.fscommand"),!0,!0).call(null,d.substring(10),b):window.open(FileLoadingService.resolveUrl(d),
b||"_parent")}};natives["FlashNetScript::sendToURL"]=function(){return function(a){(null===a||void 0===a)&&throwError("TypeError",Errors.NullPointerError,"request");avm2.systemDomain.getClass("flash.net.URLRequest").isInstanceOf(a)||throwError("TypeError",Errors.CheckTypeFailedError,a,"flash.net.URLRequest");var b=FileLoadingService.createSession();b.onprogress=function(){};b.open(a)}};
natives["Toplevel::registerClassAlias"]=function(){return function(a,b){a||throwError("TypeError",Errors.NullPointerError,"aliasName");b||throwError("TypeError",Errors.NullPointerError,"classObject");AMFUtils.aliasesCache.classes.set(b,a);AMFUtils.aliasesCache.names[a]=b}};
natives["Toplevel::getClassByAlias"]=function(){return function(a){a||throwError("TypeError",Errors.NullPointerError,"aliasName");var b=AMFUtils.aliasesCache.names[a];b||throwError("ReferenceError",Errors.ClassNotFoundError,a);return b}};
